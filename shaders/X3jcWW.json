{
    "Shader": {
        "info": {
            "date": "1727280350",
            "description": "original Neon from kali",
            "flags": 0,
            "hasliked": 0,
            "id": "X3jcWW",
            "likes": 1,
            "name": "wall of ",
            "published": 3,
            "tags": [
                "moving"
            ],
            "usePreview": 0,
            "username": "nayk",
            "viewed": 43
        },
        "renderpass": [
            {
                "code": "float st=.025, maxdist=15.;\nvec3 ldir=vec3(0.,-1.,-1.),col=vec3(0.);\n\nmat2 rot(float a) {\n\tfloat s=sin(a),c=cos(a);\n    return mat2(c,s,-s,c);\n}\n\nvec3 fractal(vec2 p) {\n    vec2 pos=p;\n    float d, ml=100.;\n    vec2 mc=vec2(100.);\n    p=abs(fract(p*1.1)-.5);\n    vec2 c=p;\n    for(int i=0;i<8;i++) {\n        d=dot(p,p);\n        p=abs(p+1.)-abs(p-1.)-p;\n    \tp=p*-1.5/clamp(d,.5,1.)-c;\n        mc=min(mc,abs(p));\n        if (i>2) ml=min(ml*(1.+float(i)*.1),abs(p.y-.5));\n    }\n    mc=max(vec2(0.),1.-mc);\n    mc=normalize(mc)*.8;\n    ml=pow(max(0.,1.-ml),6.);\n    return vec3(mc,d*.4)*ml*(step(.2,fract(d*.1+iTime*1.5+pos.x*.2)))-ml*.1;\n}\n\nfloat map(vec2 p) {\n    vec2 pos=p;\n    float t=iTime;\n    \n    col+=fractal(p);\n    vec2 p2=abs(.5-fract(p*8.+4.));\n\tfloat h=0.;\np2.y+=1.*cos(iTime);\n    p=floor(p*2.+1.);\n    float l=length(p2*p2)+cos(iTime);\n\n   h+=sin(length(p)+l);\n  h+=max(0.,5.-length(p-vec2(18.,0.)*iMouse.xy))*1.5;\n    h+=max(0.,5.-length(p+vec2(18.,0.)))*1.5;\n    p=p*2.+.2345;\n    t*=.5;\n  \n    return h;\n}\n\nvec3 normal(vec2 p, float td) {\n\tvec2 eps=vec2(0.,.001);\n    return normalize(vec3(map(p+eps.yx)-map(p-eps.yx),2.*eps.y,map(p+eps.xy)-map(p-eps.xy)));\n}\n\nvec2 hit(vec3 p) {\n    float h=map(p.xz);\n    return vec2(step(p.y,h),h);\n}\n\nvec3 bsearch(vec3 from,vec3 dir,float td) {\n    vec3 p;\n    st*=-.5;\n    td+=st;\n    float h2=1.;\n    for (int i=0;i<20;i++) {\n        p=from+td*dir;\n        float h=hit(p).x;\n        if (abs(h-h2)>.001) {\n            st*=-.5;\n\t        h2=h;\n        }\n        td+=st;\n    }\n\treturn p;\n}\n\nvec3 shade(vec3 p,vec3 dir,float h,float td) {\n    ldir=normalize(ldir);\n\tcol=vec3(0.);\n    vec3 n=normal(p.xz,td);\n\tcol*=.25;\n    float dif=max(0.,dot(ldir,-n));\n    vec3 ref=reflect(ldir,dir);\n    float spe=pow(max(0.,dot(ref,-n)),8.);\n    return col+(dif*.5+.2+spe*vec3(1.,.8,.5))*.2;\n}\n\n\nvec3 march(vec3 from,vec3 dir) {\n\tvec3 p, col=vec3(0.);\n    float td=.5, k=0.;\n    vec2 h;\n    for (int i=0;i<600;i++) {\n    \tp=from+dir*td;\n        h=hit(p);\n        if (h.x>.5||td>maxdist) break;\n        td+=st;\n    }\n    if (h.x>.5) {\n        p=bsearch(from,dir,td);\n    \tcol=shade(p,dir,h.y,td);\n    } else {\n    }\n\tcol=mix(col,1.*vec3(mod(gl_FragCoord.y,4.)*.1),pow(td/maxdist,3.));\n    return col*vec3(.5,0.3,0.3)*1.1;\n}\n\nmat3 lookat(vec3 dir,vec3 up) {\n\tdir=normalize(dir);vec3 rt=normalize(cross(dir,normalize(up)));\n    return mat3(rt,cross(rt,dir),dir);\n}\n\nvec3 path(float t) {\n\treturn vec3(cos(t)*5.5,1.5-cos(t)*.0,sin(t*0.))*2.5;\n}\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord)\n{\n    vec2 uv = (fragCoord-iResolution.xy*.5)/iResolution.y;\n\tfloat t=iTime*.0;\n    vec3 from=path(t);\n    vec3 dir=normalize(vec3(uv,0.5));\n    vec3 adv=path(t+.1)-from;\n    dir=lookat(adv+vec3(0.,-11,0.),vec3(adv.x*.1,1.,0.))*dir;\n    vec3 col=march(from, dir)*1.5;\n    fragColor = vec4(col,1.);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}