{
    "Shader": {
        "info": {
            "date": "1472860136",
            "description": "I'm learning shaders!!!! WHAAAAMmmm",
            "flags": 0,
            "hasliked": 0,
            "id": "ltKGRz",
            "likes": 2,
            "name": "2D rendering first attempt :S",
            "published": 3,
            "tags": [
                "penis"
            ],
            "usePreview": 0,
            "username": "Typhon",
            "viewed": 670
        },
        "renderpass": [
            {
                "code": "bool map(vec2 pos)\n{\n    vec2 uv = pos - floor(pos);\n    vec4 c = texture(iChannel0, uv);\n    if(c.w == 0.0 || distance(c, vec4(0, 1, 0, 1)) < 0.8)\n         return false;\n    \n    if(distance(pos, vec2(4.5, 3.5)) < 0.5)\n        return true;\n    \n    if(\n        floor(pos) == vec2(4, 1) ||\n        floor(pos) == vec2(2, 1) ||\n        floor(pos.y) == 0.0)\n        return true;\n    \n    return false;\n}\n\nfloat rayCast(vec2 pos, vec2 direction)\n{\n    direction = (direction) / 100.0;\n    const float iterations = 50.0;\n    vec2 localEndPos = normalize(direction) * iterations;\n    \n    vec2 nPos = vec2(0.0);\n    for(float x = 0.0; x < iterations; x++)\n    {\n        nPos = pos + (direction * x);\n        vec2 uv = nPos - floor(nPos);\n        \n        if(map(nPos))\n             return distance(pos, nPos);\n    }\n    return 0.0;\n}\n\nvec2 lights[2];\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat scale = 80.0; \n    \n    vec2 pointLight = iMouse.xy / scale;\n    lights[0] = pointLight;   \n    lights[1] = vec2(1, 4);\n    \n    vec2 resolution = iResolution.xy / scale;\n    vec2 rPos = fragCoord.xy / scale;\n    \n    fragColor = vec4(0.2);\n    \n    for(int i = 0; i < 2; i++)\n    {\n        pointLight = lights[i];\n        \n        float lightDist = distance(pointLight, rPos);   \n        fragColor += vec4(0.1, 0.05, 0.0, 1.0) / (lightDist * 0.5);\n\n        float hit = rayCast(rPos, pointLight - rPos);\n        if(hit > 0.0)\n        {\n            if(map(rPos))\n            {\n                vec2 uv = rPos - floor(rPos);\n\n                vec4 c = texture(iChannel0, uv);\n\n                fragColor = c;\n            }\n            else\n            {\n            \tfragColor *= 0.8;\n            }\n        }\n    }\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "video",
                        "id": 12,
                        "published": 1,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}