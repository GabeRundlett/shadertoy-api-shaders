{
    "Shader": {
        "info": {
            "date": "1644592660",
            "description": "I built a machine to sign my artwork but haven't used it yet since the machine to create artwork is harder to make. I may have to build a machine to complete it. ",
            "flags": 8,
            "hasliked": 0,
            "id": "NdXBz7",
            "likes": 34,
            "name": "Autograph Machine",
            "published": 3,
            "tags": [
                "cursive"
            ],
            "usePreview": 0,
            "username": "eiffie",
            "viewed": 424
        },
        "renderpass": [
            {
                "code": "//Autograph Machine by eiffie\n#define rez iResolution.xy\n#define pi 3.14159\nmat2 rmat(float a){float ca=cos(a),sa=sin(a);return mat2(ca,sa,-sa,ca);}\nfloat tube(vec3 pa, vec3 ba){return length(pa-ba*clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0));}\nvec2 curl(float a1, float a2, float t, float h, float w){\n  return vec2(t+sin(a2*pi*2.)*w,(1.-cos(a1*pi*2.))*h*.5+.75);\n}\nvec2 eiffie(float t){\n  float b=t*8.,a=fract(b),a2=a,aa=4.-abs(b-4.),s,h=.125,w=.075;\n  b=floor(b);if(b==4.)aa=2.;else if(b==5.)aa=3.;\n  s=b;\n  if(b>2.){s-=1.;if(b>4.)s-=1.;}\n  if(aa<1.){s+=a;\n  }else if(aa<2.){w=.04;s+=a;\n  }else if(aa<3.){h=.2;\n    if(a<.75)s+=a;else{s+=.75;a2=.75;}\n  }else{h=-.15;\n    if(a<.25){s+=.75;a2=-.25;}\n    else {h+=(a-.25)*(a-.25)*0.2;s+=1.-a;a2=-a*a-.1875;if(a>.85){w=-w;s+=.6;}}\n  }\n  vec2 v=curl(a,a2,s/6.,h,w);\n  return v;\n}\nfloat getAng(){return abs(mod(0.1*iTime,2.)-1.);}\n\nfloat disc(vec3 p, float s){\n  float a=atan(p.x,p.y)/(pi*2.);if(a<0.)a+=1.;\n  float r=length(p.xy);\n  vec3 e=vec3(eiffie(a),0.)-vec3(.5,0.,0.),b=vec3(0);\n  e.xy=e.xy*rmat((.5-a)*pi*.25);\n  b.y=e.y-sqrt(1.-e.x*e.x);\n  vec3 f=normalize(cross(b-e,vec3(0,0,1)))*s;\n  r-=e.y+f.y*.7-0.05;\n  //return max(max(r,p.y>0.?s>0.?.05-p.x:.05+p.x:0.),abs(p.z)-.05);\n  return max(max(r,-max(abs(p.x)-.05,-p.y)),abs(p.z)-.05);\n}\nfloat wav(float t){return abs(fract(t)-.5);}\nfloat gear(vec3 p, float r, float f){\n  float a=atan(p.x,p.y)/(pi*2.);\n  r=length(p.xy)-r;\n  r*=sign(f);\n  return max(max(r-wav(a*f)*.2,-r-.15),abs(p.z+0.1)-.05);\n}\nvec3 mcol=vec3(0.0);\nfloat DE(vec3 p){\n  vec3 pc=p;pc.xy=pc.xy*rmat((.5-getAng())*pi*.25);\n  vec3 ps=pc;\n  float a=getAng();\n  mat2 rmx=rmat(a*pi*2.);\n  ps+=vec3(1.,1.,.0);\n  ps.xy=ps.xy*rmx;\n  pc+=vec3(-1.,1.,.0);\n  pc.xy=pc.xy*rmx;\n  float dc=disc(pc,-1.),ds=disc(ps,1.);\n  vec3 e=vec3(eiffie(a),0.)-vec3(.5,0.,0.),b=vec3(0);\n  b.y=e.y-sqrt(1.-e.x*e.x);\n  vec3 f=normalize(cross(b-e,vec3(0,0,1)));\n  float dt=tube(p-e,b-e);\n  dt=min(dt,tube(p-e,b-e+f));\n  dt=min(dt,tube(p-e,b-e-f));\n  dt-=0.02;\n  p.xy=rmat(-a*pi*.02+.03)*p.xy;\n  float g=gear(p,1.75,-60.);//gear(p,.87,30.);\n  g=min(g,min(gear(pc,.2,8.),gear(ps,.2,8.)));\n  float d=min(min(dc,ds),min(dt,min(g,-p.z+.1)));\n  \n  if(mcol.x>0.){\n    vec3 col=vec3(.4,.25,.1);\n    vec2 v;\n    if(d==ds)v=ps.xy;\n    else if(d==dc)v=pc.xy;\n    else if(d==dt)v=vec2(1);\n    else if(d==g){v=vec2(10.5);col=col.grb;}\n    else {v=vec2(10.5);col=col.bgr;}\n    mcol+=abs(0.75+.25*sin(dot(v,v+v.yx*.1)*80.))*col;\n  }\n  return d;\n}\nvec3 normal(vec3 p, float d){//from dr2\n  vec2 e=vec2(d,-d);vec4 v=vec4(DE(p+e.xxx),DE(p+e.xyy),DE(p+e.yxy),DE(p+e.yyx));\n  return normalize(2.*v.yzw+vec3(v.x-v.y-v.z-v.w));\n}\nfloat rnd;\nvoid randomize(in vec2 p){rnd=fract(float(iTime)+sin(dot(p,vec2(13.3145,117.7391)))*42317.7654321);}\n\nfloat ShadAO(in vec3 ro, in vec3 rd){\n float t=0.01*rnd,s=1.0,d,mn=0.01;\n for(int i=0;i<12;i++){\n  d=max(DE(ro+rd*t)*1.5,mn);\n  s=min(s,4.*d/t+t*0.5);\n  t+=d;\n }\n return s;\n}\nvec3 scene(vec3 ro, vec3 rd){\n  float t=DE(ro)*rnd,d,px=1.0/rez.x;\n  for(int i=0;i<64;i++){\n    t+=d=DE(ro+rd*t);\n    if(t>20.0 || d<px*t)break;\n  }\n  vec3 L=normalize(vec3(0.4,0.025,-0.5));\n  vec3 col=vec3(0);\n  if(d<px*t*5.0 && t<20.){\n    mcol=vec3(0.001);\n    vec3 so=ro+rd*t;\n    vec3 N=normal(so,d);\n    vec3 scol=mcol*0.25;\n    if(scol.b>scol.r){\n      if(abs(so.x)<.02 && so.y<0. && so.y>-.4)scol=vec3(0.);\n      vec3 p=so;\n      t=max(abs(p.x)-.6,abs(p.y-.8)-.2);\n      if(t<0.){\n        d=1.;p.z=0.;\n        float a=getAng();t=0.;\n        for(int i=0;i<24;i++){\n          vec3 v=vec3(eiffie(t),0.);v.x-=.5;\n          float b=length(p-v);\n          d=min(d,b);\n          t+=b*.2;\n          if(t>a)break;\n        }\n        d=smoothstep(0.0,0.025,d);\n        scol=vec3(d);\n      }\n    }\n    float dif=0.5+0.5*dot(N,L);\n    float shad=ShadAO(so,L);\n    col=1.5*scol*dif*shad;\n  }\n  return col;\n}\nvoid mainImage(out vec4 O, in vec2 U){\n  vec2 uv=vec2(U-0.5*rez)/rez.x;\n  randomize(U.xy);\n  vec3 rd=normalize(vec3(uv.xy,1.0));\n  vec3 ro=vec3(0,0,-4);\n  O=vec4(scene(ro,rd),1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "#define bps 3.\n#define pi 3.14159\n//int N[8]=int[8](0,2,4,5,7,5,4,0);\nint N[8]=int[8](0,5,3,4,5,4,3,0);\nfloat scale(float note){//throws out dissonant tones \n float n2=mod(note,12.); \n if((n2==1.)||(n2==6.)||(n2==8.))note=-100.;//mixolydian +minor 3rd \n return note; \n}\n// note number to frequency  from https://www.shadertoy.com/view/ldfSW2 \nfloat ntof(int n0){\n float n=scale(float(n0));\n return (n>0.)?440.0 * pow(2.0, (float(n) - 67.0) / 12.0):0.0;\n} \nvec2 rot(vec2 v, float a) {return cos(a)*v+sin(a)*vec2(v.y,-v.x);}\nvec2 I(int n, float t, vec3 p, vec4 e, vec4 d){\n  float bt=t,t2,t3,t4,f=ntof(n);\n  if(f==0.)return vec2(0);\n  t-=t*d.y*sin((d.w*pi+t)*pi*d.z);t3=t*d.x;\n  t2=fract(t*p.y*f);t4=fract(t3*p.y*f);\n  t=fract(t*f);t3=fract(t3*f);\n  float amp=abs(1.+cos(bt*e.z*pi)*e.w)*exp(-bt*e.y)*(1.0-exp(-bt*e.x))*min(1.,100.-bt*100.);\n  return amp*rot(vec2(sin(pow(t,p.x)*pi*2.+pi*2.*p.z*sin(pow(t2,p.x)*pi*2.)),\n    sin(pow(t3,p.x)*pi*2.+pi*2.*p.z*sin(pow(t4,p.x)*pi*2.))),float(n)+bt*pi*2.);\n}\n\nvec2 mainSound(int samp, float time){\n  float tim=mod(time*bps,128.);\n  float bt=floor(tim),t=fract(tim);\n  int n1=N[int(bt/64.)];\n  int n0=n1+N[int(bt/8.)%8],n=n0+N[int(bt)%8],n2=n0+N[int(bt/2.)%8],n4=n0+N[int(bt/4.)%8];\n  vec2 v=I(n+36,t,vec3(1.-t*.5,1.,t),vec4(10.,1.0,12.,t*.3),vec4(1.014,0.005,1.,.5))*.25;\n  t=fract(tim/2.);\n  float fo=pow(1.-t,20.0);\n  v+=I(n2+60,t,vec3(1.-fo*.5,1.5,fo),vec4(10.,4.0,24.,t*.8),vec4(1.014,0.005,1.,.5));\n  \n  t=fract(tim/4.);\n  fo=pow(1.-t,20.0);\n  v+=I(n4+60,t,vec3(1.-fo*.5,1.5,fo),vec4(10.,4.0,36.,t*.8),vec4(1.014,0.005,1.,.5));\n  \n  t=fract(tim/8.);\n  fo=pow(1.-t,20.0);\n  v+=I(n0+60,t,vec3(1.-fo*.5,1.5,fo),vec4(10.,2.0,48.,t*.8),vec4(1.014,0.005,1.,.5));\n  return v*.1;\n}",
                "description": "",
                "inputs": [],
                "name": "Sound",
                "outputs": [],
                "type": "sound"
            }
        ],
        "ver": "0.1"
    }
}