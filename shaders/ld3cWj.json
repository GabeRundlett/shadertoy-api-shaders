{
    "Shader": {
        "info": {
            "date": "1520182786",
            "description": "Testing for loop vs. preprocessor for absurdly large iteration count.\n\nSee description at head of source.",
            "flags": 0,
            "hasliked": 0,
            "id": "ld3cWj",
            "likes": 1,
            "name": "Compiler: preprocessor vs. loop",
            "published": 3,
            "tags": [
                "glsl",
                "compiler",
                "preprocessor",
                "macros"
            ],
            "usePreview": 0,
            "username": "ttg",
            "viewed": 1044
        },
        "renderpass": [
            {
                "code": "/*\nTesting for loop vs. preprocessor for absurdly large iteration count.\n\nIntel (Mesa 17.3.1):\n  USE_LOOP:\n    Faster compilation\n    Major performance slowdown\n  ITERx100000:\n    Slower compilation\n    No run-time performance slowdown (result of the repeated addition is precomputed)\n\nNvidia (Nvidia 390.25):\n  USE_LOOP:\n    Fast compilation\n    No run-time performance slowdown\n  ITERx100000:\n    VERY LONG compiler hang (does recover eventually)\n    No run-time performance slowdown\n\n*/\n\n// toggle me:\n#define USE_LOOP\n\n#define ITER j++;\n#define ITERx10 ITER ITER ITER ITER ITER ITER ITER ITER ITER ITER\n#define ITERx100 ITERx10 ITERx10 ITERx10 ITERx10 ITERx10 ITERx10 ITERx10 ITERx10 ITERx10 ITERx10\n#define ITERx1000 ITERx100 ITERx100 ITERx100 ITERx100 ITERx100 ITERx100 ITERx100 ITERx100 ITERx100 ITERx100\n#define ITERx10000 ITERx1000 ITERx1000 ITERx1000 ITERx1000 ITERx1000 ITERx1000 ITERx1000 ITERx1000 ITERx1000 ITERx1000\n#define ITERx100000 ITERx10000 ITERx10000 ITERx10000 ITERx10000 ITERx10000 ITERx10000 ITERx10000 ITERx10000 ITERx10000 ITERx10000\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n    fragColor = vec4(0.);\n    int j = 0;\n#ifdef USE_LOOP\n    for (int i = 0; i<100000; i++) {\n        ITER\n    }\n#else\n    ITERx100000\n#endif\n    fragColor += float(j)/float(100000)*0.5;\n}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}