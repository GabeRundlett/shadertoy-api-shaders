{
    "Shader": {
        "info": {
            "date": "1511961118",
            "description": "Top: flat to displayable  Bottom:  displayable to flat\n -white: flat\n- red: sRGB [url]https://en.wikipedia.org/wiki/SRGB[/url]\n- green: gamma 2.2  grey gamma 2.4\n- blue: gamma 2 ( x^2 , sqrt )\n\nBottom right: corresponding ramps (verify your calibration !)",
            "flags": 0,
            "hasliked": 0,
            "id": "MllBWN",
            "likes": 9,
            "name": "sRGB vs gamma vs flat",
            "published": 3,
            "tags": [
                "flat",
                "colors",
                "gamma",
                "colorspace",
                "srgb"
            ],
            "usePreview": 1,
            "username": "FabriceNeyret2",
            "viewed": 1367
        },
        "renderpass": [
            {
                "code": "// ref about sRGB: https://en.wikipedia.org/wiki/SRGB\n\n#define sRGB2lin(x) ( x <= .04045   ? (x)/12.92 : pow((x+.055)/1.055,2.4)    )\n#define lin2sRGB(x) ( x <= .0031308 ? (x)*12.92 : 1.055*pow(x,1./2.4) - .055 )\n\n#define C(v)   smoothstep( 1., 0., abs( (v) - y ) / fwidth( (v) - y ) )  // draw curve y=v(x)\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    vec2 R = iResolution.xy; U /= R;\n    float x = U.x, y = U.y;\n    O.r =  C( sRGB2lin(x) );          // sRGB to flat\n\tO.g =  C( pow(x,2.2) );           // gamma 2.2\n    O.b =  C( x*x );                  // gamma 2\n\tO  +=  C( pow(x,2.4) ) *.5;       // gamma 2.4\n    O  +=  C( x );                    // flat\n    \n    O.r += C( lin2sRGB(x) );          // flat to SRGB\n\tO.g += C( pow(x,1./2.2) );        // gamma 2.2\n    O.b += C( sqrt(x) );              // gamma 2\n\tO   += C( pow(x,1./2.4) ) *.5;    // gamma 2.4\n    \n    x = (x-.6)/.4; y *= 18.;\n    if (x >= 0.)                      // corresponding grey ramps\n        O += // y < 1. ? step(textureLod(iChannel0,8.*U,0.).r,x) // dithering ground truth\n              y < 1. ? pow(x,1./2.4)  \n            : y < 2. ? lin2sRGB(x)  \n            : y < 3. ? pow(x,1./2.2) \n            : y < 4. ? sqrt(x)\n            : y < 5. ? x \n            : 0. ;\n    else if ( x > -2./R.x && y < 5.) \n            if (y<1.) O += .5; else if (y>4.) O++; else O[int(y)-1]++; \n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 30,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}