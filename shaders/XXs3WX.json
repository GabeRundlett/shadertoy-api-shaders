{
    "Shader": {
        "info": {
            "date": "1707991430",
            "description": "Cantor pairing function visualization",
            "flags": 0,
            "hasliked": 0,
            "id": "XXs3WX",
            "likes": 5,
            "name": "Cantor pairing function",
            "published": 3,
            "tags": [
                "cantor"
            ],
            "usePreview": 0,
            "username": "ianertson",
            "viewed": 107
        },
        "renderpass": [
            {
                "code": "// https://en.wikipedia.org/wiki/Pairing_function\n\n#define R iResolution.xy\n#define T (iTime)\nmat2 rot(float a) { float s = sin(a); float c = cos(a); return mat2(c, s, -s, c); }\nvec3 aces(vec3 x) { return clamp((x*(2.51*x+0.03))/(x*(2.43*x+0.59)+0.14),0.0,1.0); }\nfloat cantor(vec2 p) { return ((p.x + p.y) * (p.x + p.y + 1.)) / 2. + p.y;}\n\nvec2 decant(float c) {\n  float w = floor((sqrt(c * 8. + 1.) - 1.) / 2.);\n  float y = c - (w * (w + 1.)) / 2.; float x = w - y;\n  return vec2(x,y);\n}\nfloat smin(float a, float b, float k) {float h = clamp(0.5 + 0.5*(a-b)/k, 0.0, 1.0);\nreturn mix(a, b, h) - k*h*(1.0-h); }\nfloat smax(float a, float b, float k) {return smin(a, b, -k); }\nfloat sabs(in float v, in float k) {return smax(-v, v, k);}\nvec2 sabs(in vec2 v,  in float k){ return vec2(sabs(v.x, k), sabs(v.y, k)); }\n\nvoid mainImage(out vec4 o, in vec2 fc) {\n  vec3 col = vec3(0.0);\n  vec2 uv = (fc-0.5*R.xy)/R.y;\n  vec4 m = vec4((iMouse.xy-0.5*R.xy)/R.y,iMouse.zw);\n  uv.xy *= rot(T*0.25+cantor(sabs(uv*0.25, 0.25)));\n  uv.xy += 0.5*vec2(sin(T*0.5), cos(T*0.5));\n  vec2 p = uv*10.;\n  vec2 id = floor(p);\n  vec2 lv = fract(p);\n  lv = lv*lv*(3.0-2.0*lv);\n  float mu = mix(2.0, 10.0, 0.5+0.5*sin(T));\n  float ex = -1.6;\n  col.xy += exp(decant(length(lv-0.5)*mu)+ex);\n  col.z = exp(cantor(col.xy)+ex);\n  vec2 alv = abs(lv-0.5);\n  col = col*col;\n  col = tanh(col-0.25);\n  o = vec4(pow(aces(col), vec3(1.0 / 2.2)), 1.0);\n}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}