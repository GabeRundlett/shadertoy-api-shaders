{
    "Shader": {
        "info": {
            "date": "1574792031",
            "description": "visual experiment",
            "flags": 0,
            "hasliked": 0,
            "id": "tsKXRd",
            "likes": 4,
            "name": "Many color balls",
            "published": 3,
            "tags": [
                "colors",
                "balls"
            ],
            "usePreview": 0,
            "username": "avin",
            "viewed": 495
        },
        "renderpass": [
            {
                "code": "#define hue(h) clamp( abs( fract(h + vec4(3,2,1,0)/3.) * 6. - 3.) -1. , 0., 1.)\n#define rand1(p) fract(sin(p* 78.233)* 43758.5453) \n\n\nfloat map(vec3 p) {\t\n    vec3 pp = floor(p+.1);\n    p += vec3(\n        iTime * (rand1(pp.z) - .5),\n        iTime * (rand1(pp.z + 200.) - .5), \n        0.\n    );\n        \n\treturn length(\n        (fract(p) - 0.5)                \n    ) - .15 + sin(iTime*2.)*.025;\n}\nvec3 getN(vec3 p) {\n\tfloat t = map(p);\n\tvec2 d = vec2(0.001, .0);\n\treturn normalize(vec3(\n\t\tt - map(p + d.xyy),\n\t\tt - map(p + d.yxy),\n\t\tt - map(p + d.yyx)));\n\t\t\n}\n    \nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{    \n    vec2 uv = (fragCoord - .5 * iResolution.xy)/iResolution.y;       \n\n    vec3 dir = normalize(vec3(uv, 1.));\n\tvec3 pos = vec3(-50 , 50, 1.);\n\tfloat t= 0.0;\n\tfor(int i = 0 ; i < 200; i++ ) {\n\t\tt += map(dir * t * 1.0 + pos);        \n\t}\n\tvec3 ip = dir * t + pos;\n\tvec3 L = normalize(vec3(1,2,3));\n\tvec3 N = getN(ip);\n\n    vec3 ipp = floor(ip);    \n    \n    ipp = floor(ipp);    \n    vec3 vip = ip + vec3(\n        iTime * (rand1(ipp.z) - .5),\n        iTime * (rand1(ipp.z + 200.) - .5), \n        0.\n    );\n    vip = floor(vip);\n    \n    vec3 col = hue(rand1(floor(vip.z*vip.x*vip.y)*.1)).rgb;       \n    \n    fragColor = vec4(col * dot(L, N), 1.);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}