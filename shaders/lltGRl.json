{
    "Shader": {
        "info": {
            "date": "1471294147",
            "description": "УЭИТ, Color TV Test Card from the USSR, since 1971.\n\nThis version contains digital clock, which is absent on some sources. Displays time from `iDate`.",
            "flags": 0,
            "hasliked": 0,
            "id": "lltGRl",
            "likes": 17,
            "name": "UEIT",
            "published": 3,
            "tags": [
                "procedural",
                "2d",
                "clock",
                "tv",
                "signals"
            ],
            "usePreview": 0,
            "username": "platosha",
            "viewed": 1925
        },
        "renderpass": [
            {
                "code": "const float TAU = 6.283185307179586;\nconst float aRatio = 4.0 / 3.0;\n\nconst vec2 cNumber = vec2(26., 20.);\nconst vec2 cSize = vec2(15., 15.);\n\nvec3 colorBars( float x )\n{\n    return step(.5, fract(vec3(1. - x) * vec3(2., 1., 4.)));\n}\n\nvec3 checkerboard( vec2 p )\n{\n    return vec3(mod((p.x + p.y), 2.));\n}\n\nvec3 cellFrame( vec2 p, vec3 bg )\n{\n    return (cSize.x - p.x) <= 1. || (cSize.y - p.y) <= 1. ? vec3(.9) : bg;\n}\n\nbool rectangle( vec2 p, vec2 size )\n{\n    return 0. <= p.x &&\n        0. <= p.y &&\n        p.x < size.x &&\n        p.y < size.y && (\n            p.x < 1. ||\n            p.y < 1. ||\n            (size.x - 1.) <= p.x ||\n            (size.y - 1.) <= p.y\n        );\n}\n\nvec3 comb( float freq, float t )\n{\n    return vec3((sin(freq * t * TAU) + 1.) * .45);\n}\n\nbool circle( vec2 pos, float r )\n{\n    return length(pos) <= r;\n}\n\nvec3 letter( int c, vec2 pos, vec3 color, vec3 bg )\n{\n    // Limited KOI7 character set\n    int x = int(pos.x) - 2;\n    int y = int(pos.y) - 3;\n    if (x < 0 || x >= 4 ||\n        y < 0 || y >= 8) return bg;\n    mat4 tile = \n    c == 0x30 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        0., 1., 1., 0.,\n        1., 0., 0., 1.,\n        1., 0., 1., 1.) : mat4(\n        1., 1., 0., 1.,\n        1., 0., 0., 1.,\n        0., 1., 1., 0.,\n        0., 0., 0., 0.)) :\n    c == 0x31 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        0., 0., 1., 0.,\n        0., 1., 1., 0.,\n        0., 0., 1., 0.) : mat4(\n        0., 0., 1., 0.,\n        0., 0., 1., 0.,\n        0., 1., 1., 1.,\n        0., 0., 0., 0.)) :\n    c == 0x32 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        0., 1., 1., 0.,\n        1., 0., 0., 1.,\n        0., 0., 0., 1.) : mat4(\n        0., 0., 1., 0.,\n        0., 1., 0., 0.,\n        1., 1., 1., 1.,\n        0., 0., 0., 0.)) :\n    c == 0x33 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        1., 1., 1., 1.,\n        0., 0., 1., 0.,\n        0., 0., 1., 0.) : mat4(\n        0., 0., 0., 1.,\n        1., 0., 0., 1.,\n        0., 1., 1., 0.,\n        0., 0., 0., 0.)) :\n    c == 0x34 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        0., 0., 1., 0.,\n        0., 1., 1., 0.,\n        1., 0., 1., 0.) : mat4(\n        1., 1., 1., 1.,\n        0., 0., 1., 0.,\n        0., 0., 1., 0.,\n        0., 0., 0., 0.)) :\n    c == 0x35 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        1., 1., 1., 1.,\n        1., 0., 0., 0.,\n        1., 1., 1., 0.) : mat4(\n        0., 0., 0., 1.,\n        1., 0., 0., 1.,\n        0., 1., 1., 0.,\n        0., 0., 0., 0.)) :\n    c == 0x36 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        0., 0., 1., 0.,\n        0., 1., 0., 0.,\n        1., 1., 1., 0.) : mat4(\n        1., 0., 0., 1.,\n        1., 0., 0., 1.,\n        0., 1., 1., 0.,\n        0., 0., 0., 0.)) :\n    c == 0x37 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        1., 1., 1., 1.,\n        0., 0., 0., 1.,\n        0., 0., 0., 1.) : mat4(\n        0., 0., 1., 0.,\n        0., 1., 0., 0.,\n        1., 0., 0., 0.,\n        0., 0., 0., 0.)) :\n    c == 0x38 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        0., 1., 1., 0.,\n        1., 0., 0., 1.,\n        0., 1., 1., 0.) : mat4(\n        1., 0., 0., 1.,\n        1., 0., 0., 1.,\n        0., 1., 1., 0.,\n        0., 0., 0., 0.)) :\n    c == 0x39 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        0., 1., 1., 0.,\n        1., 0., 0., 1.,\n        1., 0., 0., 1.) : mat4(\n        0., 1., 1., 1.,\n        0., 0., 0., 1.,\n        0., 1., 1., 0.,\n        0., 0., 0., 0.)) :\n    c == 0x63 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        1., 0., 1., 0.,\n        1., 0., 1., 0.,\n        1., 0., 1., 0.) : mat4(\n        1., 0., 1., 0.,\n        1., 0., 1., 0.,\n        1., 0., 1., 0.,\n        1., 1., 1., 1.)) :\n    c == 0x67 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        1., 1., 1., 0.,\n        1., 0., 0., 0.,\n        1., 0., 0., 0.) : mat4(\n        1., 0., 0., 0.,\n        1., 0., 0., 0.,\n        1., 0., 0., 0.,\n        1., 0., 0., 0.)) :\n    c == 0x72 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        1., 1., 1., 0.,\n        1., 0., 1., 0.,\n        1., 0., 1., 0.) : mat4(\n        1., 1., 1., 0.,\n        1., 0., 0., 0.,\n        1., 0., 0., 0.,\n        1., 0., 0., 0.)) :\n    c == 0x74 ? (y < 4 ? mat4(\n        0., 0., 0., 0.,\n        1., 1., 1., 0.,\n        0., 1., 0., 0.,\n        0., 1., 0., 0.) : mat4(\n        0., 1., 0., 0.,\n        0., 1., 0., 0.,\n        0., 1., 0., 0.,\n        0., 1., 0., 0.)) :\n    \tmat4(0.);\n    y = y - y/4*4;\n    vec4 row = (y == 0 ? tile[0] :\n                y == 1 ? tile[1] :\n                y == 2 ? tile[2] :\n                y == 3 ? tile[3] : vec4(0.));\n    float cell = (x == 0 ? row[0] :\n    \t\t\t  x == 1 ? row[1] :\n    \t\t\t  x == 2 ? row[2] :\n                  x == 3 ? row[3] : 0.);\n    return mix(bg, color, cell);\n}\n\nvec3 clock() {\n    float t = iDate.q;\n    float s = mod(t, 60.); t = floor(t/60.);\n    float m = mod(t, 60.); t = floor(t/60.);\n    float h = mod(t, 24.);\n    return vec3(h, m, s);\n}\n\nint digitBase10( int n, float x )\n{\n    int d = int(x);\n    if (n == 1) d /= 10;\n    return 0x30 + (d - d/10*10);\n}\n\nvec3 ueit( vec2 uv )\n{\n    uv = (uv - vec2(.5, .5)) * (576./600.) + vec2(.5, .5);\n    if (abs(uv.x - .5) > .5 || abs(uv.y - .5) > .5) return vec3(0.);\n    vec2 pcc = uv * cNumber;\n    vec2 ppc = pcc * cSize;\n    vec2 pc = floor(ppc);\n    float ht = uv.x * .8333 * 0.000064;\n    vec2 pcpc = mod(ppc, cSize);\n    vec2 cpc = mod(pc, cSize);\n    vec2 cc = floor(pcc);\n    vec2 iuv = (pcc - 1.) / (cNumber - 2.);\n    bool bc = circle(uv * cNumber - cNumber * .5, 8. - .5/15.);\n    bool sctl = circle(pcc - vec2( 4.,  3.), 2. - .5/15.);\n    bool sctr = circle(pcc - vec2(22.,  3.), 2. - .5/15.);\n    bool scbl = circle(pcc - vec2( 4., 17.), 2. - .5/15.);\n    bool scbr = circle(pcc - vec2(22., 17.), 2. - .5/15.);\n    vec3 clockTime = clock();\n    return rectangle(cc, cNumber) ? (\n                rectangle(pc - cSize + 1., cSize * (cNumber - 2.0)) ? .9 * vec3(.9) :\n                checkerboard(cc)\n            ) : \n    \t.9 * (\n            sctl ? (\n                rectangle(cc - vec2(3., 2.), vec2(2.)) ? (\n                    cc.y == 1. && cpc.y == 14. ? comb(3e6, ht) :\n                    cc.y == 2. && cpc.y <= 8. ? comb(3e6, ht) :\n                    cc.y == 3. && cpc.y == 14. ? vec3(.9) :\n                    cc.y == 3. && cpc.y >= 5. ? comb(4e6, ht) :\n                    cellFrame(cpc, vec3(.5))\n                ) :\n                cc.y == 2. && cc.x == 2. ? letter(0x33, cpc - vec2(8., .0), vec3(.0), vec3(.9)) :\n                cc.y == 3. && cc.x == 2. ? letter(0x34, cpc - vec2(8., .0), vec3(.0), vec3(.9)) :\n                vec3(.9)\n            ) :\n            sctr ? (\n                rectangle(cc - vec2(21., 2.), vec2(2.)) ? (\n                    cc.y == 1. && cpc.y == 14. ? comb(3e6, ht) :\n                    cc.y == 2. && cpc.y <= 8. ? comb(3e6, ht) :\n                    cc.y == 3. && cpc.y == 14. ? vec3(.9) :\n                    cc.y == 3. && cpc.y >= 5. ? comb(4e6, ht) :\n                    cellFrame(cpc, vec3(.5))\n                ) :\n                cc.y == 2. && cc.x == 20. ? letter(0x33, cpc - vec2(8., .0), vec3(.0), vec3(.9)) :\n                cc.y == 3. && cc.x == 20. ? letter(0x34, cpc - vec2(8., .0), vec3(.0), vec3(.9)) :\n                vec3(.9)\n            ) :\n            scbl ? (\n                rectangle(cc - vec2(3., 16.), vec2(2.)) ? (\n                    cc.y == 15. && cpc.y == 14. ? comb(4e6, ht) :\n                    cc.y == 16. && cpc.y <= 8. ? comb(4e6, ht) :\n                    cc.y == 17. && cpc.y == 14. ? vec3(.9) :\n                    cc.y == 17. && cpc.y >= 5. ? comb(3e6, ht) :\n                    cellFrame(cpc, vec3(.5))\n                ) :\n                cc.y == 16. && cc.x == 2. ? letter(0x34, cpc - vec2(8., .0), vec3(.0), vec3(.9)) :\n                cc.y == 17. && cc.x == 2. ? letter(0x33, cpc - vec2(8., .0), vec3(.0), vec3(.9)) :\n                vec3(.9)\n            ) :\n            scbr ? (\n                rectangle(cc - vec2(21., 16.), vec2(2.)) ? (\n                    cc.y == 15. && cpc.y == 14. ? comb(4e6, ht) :\n                    cc.y == 16. && cpc.y <= 8. ? comb(4e6, ht) :\n                    cc.y == 17. && cpc.y == 14. ? vec3(.9) :\n                    cc.y == 17. && cpc.y >= 5. ? comb(3e6, ht) :\n                    cellFrame(cpc, vec3(.5))\n                ) :\n                cc.y == 16. && cc.x == 20. ? letter(0x34, cpc - vec2(8., .0), vec3(.0), vec3(.9)) :\n                cc.y == 17. && cc.x == 20. ? letter(0x33, cpc - vec2(8., .0), vec3(.0), vec3(.9)) :\n                vec3(.9)\n            ) :\n            (\n                ((cc.y == 2. || cc.y == 16.) && cpc.y >= 7.) ||\n                ((cc.y == 3. || cc.y == 17.) && cpc.y <= 6.)\n            ) && abs(cc.x - 12.5) <= 2. ? cellFrame(cpc, vec3(.5)) :\n            cc.y == 4. && abs(cc.x - 12.5) <= 5. ? (\n                cpc.y == 14. ? vec3(.9) :\n            \tcc.x == 8.  ? letter(0x67, cpc - vec2(4., 0.), vec3(.9), cellFrame(cpc, vec3(.5))) :\n                cc.x == 9.  ? letter(0x63, cpc - vec2(4., 0.), vec3(.9), cellFrame(cpc, vec3(.5))) :\n                cc.x == 10. ? letter(0x72, cpc - vec2(4., 0.), vec3(.9), cellFrame(cpc, vec3(.5))) :\n                cc.x == 11. ? letter(0x74, cpc - vec2(4., 0.), vec3(.9), cellFrame(cpc, vec3(.5))) :\n                cc.x == 12. ? letter(digitBase10(1, clockTime.x), cpc - vec2(7., 0.), vec3(.9), vec3(.5)) :\n                cc.x == 13. ? letter(digitBase10(0, clockTime.x), cpc - vec2(0., 0.), vec3(.9), cellFrame(cpc, vec3(.5))) :\n                cc.x == 14. ? letter(digitBase10(1, clockTime.y), cpc - vec2(7., 0.), vec3(.9), vec3(.5)) :\n                cc.x == 15. ? letter(digitBase10(0, clockTime.y), cpc - vec2(0., 0.), vec3(.9), cellFrame(cpc, vec3(.5))) :\n                cc.x == 16. ? letter(digitBase10(1, clockTime.z), cpc - vec2(7., 0.), vec3(.9), vec3(.5)) :\n                cc.x == 17. ? letter(digitBase10(0, clockTime.z), cpc - vec2(0., 0.), vec3(.9), cellFrame(cpc, vec3(.5))) :\n                vec3(.5)\n            ) :\n            cc.y == 5. || cc.y == 6. ? .5 * colorBars(iuv.x) + .4 :\n            cc.y == 7. ?\n            \t(cc.x >= 2. && cc.x <= 21. ? vec3(floor(1. + (cc.x - 2.) / 2.) / 10.) : vec3(0.)) :\n    \t\tcc.y == 12. ? (\n                (\n                    pc.x >= 21. * cSize.x + 7. ||\n                \tcc.x <= 4. && pc.x >= 1. * cSize.x + 6. \n                ) ? comb(2e6, ht) :\n                (cc.x ==  1. || cc.x == 21.) ? letter(0x32, cpc - vec2(-1., 0.), vec3(.9), vec3(.5)) :\n                (\n                    cc.x <= 20. && pc.x >= 18. * cSize.x + 6. ||\n                \tcc.x <= 7. && pc.x >= 5. * cSize.x + 6. \n                ) ? comb(3e6, ht) :\n                (cc.x ==  5. || cc.x == 18.) ? letter(0x33, cpc - vec2(-1., 0.), vec3(.9), vec3(.5)) :\n                (\n                    cc.x <= 17. && pc.x >= 15. * cSize.x + 6. ||\n                \tcc.x <= 10. && pc.x >= 8. * cSize.x + 6. \n                ) ? comb(4e6, ht) :\n                (cc.x ==  8. || cc.x == 15.) ? letter(0x34, cpc - vec2(-1., 0.), vec3(.9), vec3(.5)) :\n                cc.x <= 14. && pc.x >= 11. * cSize.x + 6. ?\n                \tcomb(5e6, ht) :\n                cc.x ==  11. ? letter(0x35, cpc - vec2(-1., 0.), vec3(.9), vec3(.5)) :\n                vec3(.5)\n            ) :\n            cc.y == 13. || cc.y == 14. ? .9 * colorBars(iuv.x) :\n            cc.y == 15. ? (\n                cpc.y == 0. || cpc.y == 14. ? vec3(.9) :\n                (cc.x <= 6. || cc.x >= 19.) ? (\n                \tabs(cc.x - 3.5) <= 2. || abs(cc.x - 21.5) <= 2. ? vec3(.0) :\n                \tvec3(.9)\n                ) :\n                bc ? vec3(.9 * mod(cc.x, 2.)) :\n                vec3(.9 * mod(1. + cc.x, 2.))\n            ) :\n    \t\tbc ? (\n                cc.y == 8. ? (\n                    cpc.y == 14. ? vec3(.9) :\n                    cc.x <= 9. ? (vec3(.4, .9, .4) + step(7.5, pcpc.x) * vec3(.5, -.5, .5)) :\n                    cc.x <= 15. ? (vec3(.4, .4, .9) + step(7.5, pcpc.x) * vec3(.5, .5, -.5)) :\n                    (vec3(.4, .9, .9) + step(7.5, pcpc.x) * vec3(.5, -.5, -.5))\n                ) :\n                cc.y == 9. ? (\n                    cc.x == 5. && cpc.x == 8. ? vec3(.0) :\n                    cpc.y == 14. && cpc.x == 14. && mod(cc.x - 5., 2.) == 1. ? vec3(.9) :\n                    cc.x <= 9. ? (cpc.y == 14. ? vec3(.0) : vec3(.9)) :\n                    cc.x >= 16. ? (\n                        cpc.y < 14. && (abs(pcpc.y - 14.0 + (pcc.x - 16.5) * (15./4.5)) < .25) ? vec3(.9) :\n                        vec3(.0)\n                    ) :\n                    cc.x == 11. && cpc.x == 14. ? vec3(.9) :\n                    cc.x >= 12. && cc.x <= 13. ? cellFrame(cpc, vec3(.5)) :\n                \tvec3(.5)\n                ) :\n                cc.y == 10. ? (\n                    cc.x == 5. && cpc.x == 8. ? vec3(.9) :\n                    cpc.y == 14. ? vec3(.9) :\n                    cc.x <= 9. ? (cpc.y == 14. ? vec3(.9) : (\n                        cpc.y < 14. && (abs(pcpc.y - 14.0 + (pcc.x - 5.75) * (15./4.5)) < .25) ? vec3(.9) :\n                        vec3(.0)\n                    )) :\n                    cc.x >= 16. ? vec3(.9) :\n                    cc.x == 11. && cpc.x == 14. ? vec3(.9) :\n                    cc.x >= 12. && cc.x <= 13. ? cellFrame(cpc, vec3(.5)) :\n                    vec3(.5)\n                ) :\n                cc.y == 11. ? mix(vec3(0., 1., 0.), vec3(1., 0., 1.), (pcc.x - 5.) / 16.) : \n                vec3(.9)\n            ) :\n            cellFrame(cpc, vec3(.5))\n        );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\t// vec2 uv = fragCoord.xy / iResolution.xy;\n    float scale = min(iResolution.x, iResolution.y * aRatio);\n    vec2 uv = vec2(.5, .5) + (fragCoord.xy - iResolution.xy * .5) * vec2(1., aRatio) / scale;\n    uv.y = 1. - uv.y;\n\tfragColor = vec4(\n        ueit(uv),\n        1.\n    );\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}