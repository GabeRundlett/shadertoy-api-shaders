{
    "Shader": {
        "info": {
            "date": "1608061478",
            "description": "Originally done on my phone, tweaked a bit for it to sync with music.\nhttps://soundcloud.com/thomasbarrandon/we-left-home?in=thomasbarrandon/sets/up-in-the-sky",
            "flags": 64,
            "hasliked": 0,
            "id": "WsGBDc",
            "likes": 11,
            "name": "Multicolor pixelated spiral",
            "published": 3,
            "tags": [
                "2d",
                "music",
                "spiral",
                "multicolor"
            ],
            "usePreview": 0,
            "username": "z0rg",
            "viewed": 469
        },
        "renderpass": [
            {
                "code": "// This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 3.0\n// Unported License. To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/3.0/ \n// or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.\n// =========================================================================================================\n\n// https://youtu.be/SIYvL_-OkR8\n\nmat2 r2d(float a){float cosa = cos(a);float sina = sin(a);return mat2(cosa,sina,-sina,cosa);}\n\n#define PI 3.14159265\n#define sat(a) clamp(a,0.,1.)\n\nfloat lenny(vec2 uv)\n{\n  return abs(uv.x)+abs(uv.y);\n}\nfloat cir(vec2 p, float r)\n{\n  return length(p)-r;\n}\nfloat loz(vec2 p, float r)\n{\n  return lenny(p)-r;\n}\n\nvec3 rdr(vec2 uv, float t)\n{\n  vec3 col;\n\n  int i = 0;\n  while (i < 7)\n  {\n    float fi = float(i);\n    int j = 0;\n    int n = 7;//min(int((fi+4.)*.5),5);\n    while (j < n)\n    {\n      float fj = float(j);\n      float a = fi*.5*t+(fj/float(n))*PI*2.\n      +texelFetch(iChannel1, ivec2(int(fj*5.), 0), 0).x;\n      float lz = loz(uv+vec2(sin(a),cos(a))*(1.+fi)*(.25+.05*sin(iTime)),mix(.1,.2, fi/7.));\n      col = mix(col, vec3(1.),1.-sat(lz*400.));\n      ++j;\n    }\n    ++i;\n  }\n  col += texture(iChannel0,uv+iTime*50.).xxx*.1;\n  col += sat(1.5+sin(uv.y*50.+t*20.))*.3*vec3(.9,.71,.54)*(1.-sat(lenny(uv*.2)));\n  col *= texelFetch(iChannel1, ivec2(0, 0), 0).x;\n  vec3 lzCol = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));\n  col += .55*(1.-sat(lenny(uv*.1*vec2(1.,3.))))*lzCol*texelFetch(iChannel1, ivec2(55, 0), 0).x;\n  return col;\n}\n\nvec3 rdr2(vec2 uv)\n{\n  float dist = (sin(-iTime*5.+(uv.x+uv.y)*5.)*.5+1.)*0.05;//*(1.-sat(pow(length(uv)-.2,2.)));\n  vec2 dir = normalize(uv);\n  vec3 col;\n  float stp = 1./20.;\n  float t = float(int(iTime/stp))*stp*.25;\n  col.r = rdr(uv, t-.05).r;\n  col.g = rdr(uv,t).g;\n  col.b = rdr(uv,t+.05).b;\n  return col.yzx;\n}\n\nvec2 myPixel(vec2 uv, vec2 sz)\n{\n  vec2 tmp = uv / sz;\n\n  uv.x = float(int(tmp.x));\n  uv.y = float(int(tmp.y));\n  return (uv)*sz;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n  vec2 uv =( fragCoord.xy-0.5*iResolution.xy) / iResolution.xx;\n  uv = myPixel(uv,vec2(0.005));\n  uv*=5.7;\n\n  vec3 col = rdr2(uv);\n  col+=rdr2(uv*r2d(.1))*.5;\n  col *= .5+1.-sat(lenny(uv*.25));\n  \n  float val = texture(iChannel2, fragCoord/iResolution.xy).x;\n  \n  col *= sat(iTime-3.);\n  //col = mix(col, vec3(1.), val*.5);\n  \n  \n  fragColor = vec4(col, 1.0);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 2,
                        "ctype": "texture",
                        "id": 1,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg"
                    },
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 17,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png"
                    },
                    {
                        "channel": 1,
                        "ctype": "musicstream",
                        "id": 24984,
                        "published": 0,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "https://soundcloud.com/thomasbarrandon/we-left-home?in=thomasbarrandon/sets/up-in-the-sky"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}