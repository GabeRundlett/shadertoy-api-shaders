{
    "Shader": {
        "info": {
            "date": "1622543178",
            "description": "Attempting this: https://fractalwiki.org/wiki/Perturbation_theory\n\nrelative to the mouse. It kind of works, but when 'Z' escapes (so them mouse is outside the Mandelbrot set) we get errors. Not sure if I am doing this right.",
            "flags": 0,
            "hasliked": 0,
            "id": "flsGRf",
            "likes": 3,
            "name": "Attempt at Perturbation theory",
            "published": 3,
            "tags": [
                "mandelbrot",
                "attempt",
                "theory",
                "perturbation"
            ],
            "usePreview": 0,
            "username": "TheJimJames40",
            "viewed": 338
        },
        "renderpass": [
            {
                "code": "void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 offset = vec2(-0.649033, 0.372347);\n    float scale = pow(0.5, 20.0);\n    \n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (fragCoord/iResolution.y)*2.0 - 1.0 - vec2(1.5, 0.0);\n    vec2 m  = (iMouse.xy/iResolution.y)*2.0 - 1.0 - vec2(1.5, 0.0);\n    \n    // m = round(uv*10.0) / 10.0;\n    \n    vec2 c = vec2((uv-m)*scale);\n    vec2 C = vec2(m*scale + offset);\n    vec2 z = vec2(0.0);\n    vec2 Z = vec2(0.0);\n    \n    float id = 0.0;\n    for(int i = 0; i < 900; ++i) {\n        // x+iy = 2*z_n*Z_n\n        float x = 2.0*(z.x*Z.x - z.y*Z.y);\n        float y = 2.0*(z.x*Z.y + z.y*Z.x);\n        \n        // z_n+1 = z_n^2 + c + 2*Z_n*z_n\n        float a = z.x*z.x - z.y*z.y + c.x + x;\n        float b = 2.0*z.x*z.y       + c.y + y;\n        z.x = a;\n        z.y = b;\n        \n        // Z_n+1 = Z_n^2 + C\n        {\n            float a = Z.x*Z.x - Z.y*Z.y + C.x;\n            float b = 2.0*Z.x*Z.y + C.y;\n            Z.x = a;\n            Z.y = b;\n        }\n        \n        // Actual coordinate is: z+Z\n        // The idea is to calculate only a few 'Z' in high precision\n        // and the 'z' in low precision.\n        float d = dot(z, z);\n        if (d > 256.0) {\n            // https://iquilezles.org/articles/msetsmooth\n            id = float(i) - log2(log2(d)) + 4.0;\n            break;\n        }\n    }\n    \n    // Sinebow coloring\n    float pi = 3.14159265358979;\n    float t = (0.5 - id*0.02)*pi;\n    \n    float r = cos(t + pi*0.0/3.0);\n    float g = cos(t + pi*1.0/3.0);\n    float b = cos(t + pi*2.0/3.0);\n    \n    vec3 col = vec3(r*r, g*g, b*b) * min(id, 1.0);\n    \n    fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}