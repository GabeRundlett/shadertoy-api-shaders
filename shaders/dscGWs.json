{
    "Shader": {
        "info": {
            "date": "1678030626",
            "description": "totem pole",
            "flags": 0,
            "hasliked": 0,
            "id": "dscGWs",
            "likes": 28,
            "name": "Graphic Design Experiment 6",
            "published": 3,
            "tags": [
                "graphicdesign",
                "cineshader",
                "y2k"
            ],
            "usePreview": 0,
            "username": "yasuo",
            "viewed": 2177
        },
        "renderpass": [
            {
                "code": "#define Rot(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n#define S(d,b) smoothstep(antialiasing(1.0),b,d)\n#define B(p,s) max(abs(p).x-s.x,abs(p).y-s.y)\n#define Tri(p,s,a) max(-dot(p,vec2(cos(-a),sin(-a))),max(dot(p,vec2(cos(a),sin(a))),max(abs(p).x-s.x,abs(p).y-s.y)))\n#define DF(a,b) length(a) * cos( mod( atan(a.y,a.x)+6.28/(b*8.0), 6.28/((b*8.0)*0.5))+(b-1.)*6.28/(b*8.0) + vec2(0,11) )\n#define SkewX(a) mat2(1.0,tan(a),0.0,1.0)\n#define SkewY(a) mat2(1.0,0.0,tan(a),1.0)\n#define PI 3.14159265\n//#define REACT_SOUND\n\nfloat Hash21(vec2 p) {\n    p = fract(p*vec2(234.56,789.34));\n    p+=dot(p,p+34.56);\n    return fract(p.x+p.y);\n}\n\nfloat SimpleVesicaDistanceY(vec2 p, float r, float d) {\n    p.x = abs(p.x);\n    p.x+=d;\n    return length(p)-r;\n}\n\nfloat circleItem0(vec2 p){\n    vec2 prevP = p;\n    p*=Rot(radians(30.+iTime*20.));\n    float d = abs(length(p)-0.04)-0.01;\n    d = max(-(abs(p.x)-0.015),d);\n    return abs(d)-0.003;\n}\n\nfloat circleItem1(vec2 p){\n    vec2 prevP = p;\n    p*=Rot(radians(35.-iTime*20.));\n    float d = abs(length(p)-0.04)-0.01;\n    float mask = max(-p.x,d);\n    d = abs(mask)-0.003;\n    p = prevP;\n    float d2 = abs(length(p)-0.04)-0.001;\n    d2 = max(-mask,d2);\n    d = min(d,d2);\n    return d;\n}\n\nfloat circleItem2(vec2 p){\n    vec2 prevP = p;\n    p*=Rot(radians(iTime*25.));\n    float d = abs(length(p)-0.05)-0.015;\n    p=DF(p,1.);\n    p-=vec2(0.1);\n    p*=Rot(radians(45.));\n    float d2 = B(p,vec2(0.01,0.2));\n    d = max(-d2,d);\n    \n    return abs(d)-0.003;\n}\n\nfloat circleItem3(vec2 p){\n    vec2 prevP = p;\n    p*=Rot(radians(iTime*20.));\n    p=DF(p,2.);\n    p-=vec2(0.03);\n    p*=Rot(radians(20.));\n    float d = B(p,vec2(0.005,0.02));\n    float a = radians(-45.);\n    p.y-=0.006;\n    d = max(-dot(p,vec2(cos(a),sin(a))),d);\n    return d;\n}\n\nfloat nose(vec2 p, float y){\n    vec2 prevP = p;\n    p.y*=0.4;\n    float d = Tri(p,vec2(0.04),radians(-45.));\n    p = prevP;\n    p.y-=y;\n    float d2 = Tri(p,vec2(0.04),radians(45.));\n    d = min(d,d2);\n    return d;\n}\n\nfloat body0(vec2 p){\n    vec2 prevP = p;\n    p.x = abs(p.x)-0.08;\n    float d = circleItem0(p);\n    p = prevP;\n    \n    p.y+=0.17;\n    float d2 = nose(p,0.14);\n    p.y-=0.022;\n    d2 = max(-nose(p*1.3,0.137),d2);\n    d = min(d,d2);\n    \n    p = prevP;\n    p.y+=0.12;\n    p.x = abs(p.x)-0.09;\n    p*=SkewY(radians(-30.));\n    d2 = B(p,vec2(0.03,0.04));\n    d2 = max(-(abs(p.y)-0.01),d2);\n    d = min(d,abs(d2)-0.003);\n    \n    return d;\n}\n\nfloat arrow0(vec2 p){\n    vec2 prevP = p;\n    \n    p.y+=iTime*0.05;\n    p.y = mod(p.y,0.06)-0.03;\n    p.y+=0.025;\n    float d = abs(Tri(p,vec2(0.04),radians(-45.)))-0.005;\n    p = prevP;\n    float d2 = Tri(p,vec2(0.05),radians(-45.));\n    \n    d = max(d2,d);\n    \n    return d;\n}\n\nfloat arrow1(vec2 p){\n    vec2 prevP = p;\n    \n    p.x+=iTime*0.05;\n    p.x = mod(p.x,0.06)-0.03;\n    p.x+=0.025;\n    p*=Rot(radians(90.));\n    p.x*=3.;\n    float d = Tri(p,vec2(0.04),radians(-45.));\n    p = prevP;\n    p*=Rot(radians(90.));\n    p.x*=3.;\n    float d2 = Tri(p,vec2(0.04),radians(-45.));\n    d = max(d2,d);\n    \n    return d;\n}\n\nfloat arrow2(vec2 p){\n    vec2 prevP = p;\n    \n    p.y+=iTime*0.05;\n    p.y = mod(p.y,0.1)-0.05;\n    p.y+=0.045;\n    \n    float d = Tri(p,vec2(0.065),radians(-45.));\n    float d2 = Tri(p-vec2(0.0,0.035),vec2(0.05),radians(-45.));\n    p = prevP;\n    float mask = Tri(p-vec2(0.0,-0.01),vec2(0.09),radians(-45.));\n    \n    d = abs(max(-d2,d))-0.003;\n    \n    d = max(mask,d);\n    \n    return d;\n}\n\nfloat arrow3(vec2 p){\n    vec2 prevP = p;\n    \n    p.y+=iTime*0.05;\n    p.y = mod(p.y,0.06)-0.03;\n    p.y+=0.025;\n    p.x*=3.;\n    float d = Tri(p,vec2(0.04),radians(-45.));\n    p = prevP;\n    p.x*=3.;\n    float d2 = Tri(p,vec2(0.05),radians(-45.));\n    \n    d = max(d2,d);\n    \n    return d;\n}\n\nfloat body1(vec2 p){\n    vec2 prevP = p;\n    \n    p = abs(p)-vec2(0.035,0.03);\n    p*=Rot(radians(50.));\n    float d = B(p,vec2(0.01,0.07));\n    p.y-=0.12;\n    p*=vec2(1.5,0.8);\n    float d2 = Tri(p,vec2(0.04),radians(45.));\n    d = min(d,d2);\n    \n    p = prevP;\n    p.y = abs(p.y)-0.05;\n    d2 = arrow0(p);\n    d = min(d,d2);\n    \n    p = prevP;\n    p.x = abs(p.x)-0.07;\n    p*=Rot(radians(90.));\n    d2 = arrow0(p);\n    d = min(d,d2);\n    \n    return d;\n}\n\nfloat rectFractal(vec2 p){\n    vec2 prevP = p;\n    p*=20.;\n    p.y+=iTime*0.5;\n    vec2 id = floor(p);\n    vec2 gv = fract(p)-0.5;\n    \n    float n = Hash21(id);\n    \n    float w = 0.1;\n    if(n<0.5 || n>=0.8){\n        float dir = (n>=0.8)?1.0:-1.0;\n        gv*=Rot(radians(dir*45.0));\n        gv.x = abs(gv.x);\n        gv.x-=0.355;\n    } else {\n        w = 0.135;\n    }\n    \n    float d = B(gv,vec2(w,1.));\n    return d;\n}\n\nfloat body2(vec2 p){\n    vec2 prevP = p;\n    float d = abs(B(p,vec2(0.12,0.1)))-0.003;\n    d = max(-(abs(p.x)-0.08),d);\n    d = max(-(abs(p.y)-0.07),d);\n    float mask = B(p,vec2(0.115,0.09));\n\n    float d2 = 10.;\n    for(float i = 0.; i<4.; i++){\n        p*=Rot(radians(i*50.0+sin(i)*20.));\n        p = abs(p)-0.18;\n        p.y+=0.05;\n        float d3 = rectFractal(p*Rot(0.1*iTime*-(i+1.)));\n        d2 = min(d,d3);\n    }\n    \n    d2 = max(mask,d2);\n    d = min(d,d2);\n    return d;\n}\n\nfloat body3(vec2 p){\n    vec2 prevP = p;\n    p.y+=0.04;\n    p.x*=0.4;\n    float d = Tri(p,vec2(0.1),radians(-45.));\n    float mask = d;\n    d = abs(d)-0.003;\n    p = prevP;\n    p.x = abs(p.x)-0.08;\n    float d2 = length(p)-0.065;\n    d = max(-d2,d);\n    d2 = circleItem1(p);\n    d = min(d,d2);\n    p = prevP;\n    \n    p.y+=0.07;\n    p.y*=2.5;\n    d2 = Tri(p,vec2(0.1),radians(45.));\n    mask = d2;\n    d = min(d,abs(d2)-0.008);\n    p = prevP;\n    \n    p.y-=iTime*0.02;\n    p = mod(p,0.02)-0.01;\n    float thickness = 0.001;\n    d2 = min(abs(p.x)-thickness,abs(p.y)-thickness);\n    d2 = max(mask,d2);\n    d = min(d,d2);\n    \n    p = prevP;\n    p.x = abs(p.x)-0.07;\n    p.y+=0.075;\n    d2 = arrow1(p);\n    d = min(d,d2);\n    \n    return d;\n}\n\nfloat leg(vec2 p){\n    p.x = abs(p.x)-0.11;\n    vec2 prevP = p;\n    \n    float d = B(p,vec2(0.1,0.02));\n    float a = radians(45.);\n    p.x-=0.08;\n    d = max(dot(p,vec2(cos(a),sin(a))),d);\n    \n    p = prevP;\n    p.x-=0.03;\n    p.y+=0.04;\n    float d2 = B(p,vec2(0.04));\n    p.x = abs(p.x)-0.06;\n    d2 = max(dot(p,vec2(cos(a),sin(a))),d2);\n    d = max(-d2,d);\n    \n    p = prevP;\n    p.x+=0.04;\n    p.y-=0.04;\n    a = radians(-45.);\n    d2 = B(p,vec2(0.04));\n    p.x = abs(p.x)-0.06;\n    d2 = max(dot(p,vec2(cos(a),sin(a))),d2);\n    d = max(-d2,d);\n    \n    p = prevP;\n    p.x+=0.09;\n    a = radians(45.);\n    d = max(-dot(p,vec2(cos(a),sin(a))),d);\n    \n    return d;\n}\n\nfloat wing(vec2 p){\n    p.x = abs(p.x)-0.22;\n    vec2 prevP = p;\n    p.y-=0.05;\n    float d = circleItem2(p);\n    p = prevP;\n    p.y+=0.13;\n    float d2 = arrow2(p);\n    d = min(d,d2);\n    \n    p = prevP;\n    p.x-=0.105;\n    p.y-=0.02;\n    d2 = B(p,vec2(0.02,0.1));\n    \n    float a = radians(-45.);\n    p.y+=0.05;\n    d2 = max(dot(p,vec2(cos(a),sin(a))),d2);\n    \n    p.y-=0.055;\n\n    p.x+=0.02;\n    float d3 = B(p,vec2(0.02,0.05));\n    a = radians(45.);\n\n    p.y=abs(p.y)-0.05;\n    d3 = max(dot(p,vec2(cos(a),sin(a))),d3);\n    d2 = max(-d3,d2);\n    \n    a = radians(-45.);\n    p.y-=0.02;\n    d2 = max(-dot(p,vec2(cos(a),sin(a))),d2);\n    \n    d = min(d,d2);\n    \n    p = prevP;\n    p.y+=iTime*0.1;\n    p.y+=0.024;\n    p.x-=0.16;\n    p.y-=0.11;\n    \n    p.y = mod(p.y,0.1)-0.05;\n    p.y+=0.03;\n    d2 = length(p)-0.01;\n\n    p.y-=0.05;\n    d3 = length(p)-0.015;\n    d2 = min(d2,d3);\n    \n    p = prevP;\n    p.x-=0.16;\n    p.y-=0.055;\n    d2 = max((abs(p.y)-0.065),d2);\n    \n    d = min(d,d2);\n    \n    p = prevP;\n    p.x-=0.24;\n    p.y-=0.065;\n    d2 = circleItem3(p);\n    \n    d = min(d,d2);\n    \n    p = prevP;\n    p.x-=0.32;\n    p.y-=0.065;\n    d2 = arrow3(p);\n    d = min(d,d2);\n    \n    return d;\n}\n\nfloat flower(vec2 p){\n    vec2 prevP = p;\n    p*=Rot(radians(90.));\n    p = DF(p,1.5);\n    p = abs(p)-0.065;\n    p*=Rot(radians(45.));\n    float d = SimpleVesicaDistanceY(p,0.15,0.12);\n    return d;\n}\n\nfloat bg(vec2 p){\n    p*=1.5;\n    p.y-=iTime*0.1;\n    vec2 prevP = p;\n    p.x = mod(p.x,0.32)-0.16;\n    p.y = mod(p.y,0.2)-0.1;\n    float d = flower(p);\n    p = prevP;\n    \n    p.x+=0.16;\n    p.y+=0.1;\n    p.x = mod(p.x,0.32)-0.16;\n    p.y = mod(p.y,0.2)-0.1;\n    float d2 = flower(p);\n    \n    d = min(d,d2);\n    \n    return abs(d)-0.001;\n}\n\nfloat bodyMask(vec2 p){\n    vec2 prevP = p;\n    float d = B(p,vec2(0.14,0.4));\n    p.x = abs(p.x)-0.08;\n    float d2 = length(p-vec2(0.0,0.43))-0.07;\n    d = min(d,d2);\n    p = prevP;\n    \n    p.x = abs(p.x)-0.11;\n    p.y+=0.45;\n    d2 = B(p,vec2(0.15,0.05));\n    float a = radians(45.);\n    p.x-=0.12;\n    d2 = max(dot(p,vec2(cos(a),sin(a))),d2);\n    d = min(d,d2);\n    \n    p = prevP;\n    p.x*=0.5;\n    p.y+=0.375;\n    d2 = Tri(p,vec2(0.16),radians(-45.));    \n    d = min(d,d2);\n    \n    p = prevP;\n    p.x*=0.6;\n    p.y+=0.155;\n    d2 = Tri(p,vec2(0.42),radians(-45.)); \n    p = prevP;\n    d2 = max(abs(p.x)-0.57,d2);\n    d = min(d,d2);\n    \n    return d;\n}\n\nfloat smallCircle(vec2 p, float s){\n    \n    vec2 prevP = p;\n    \n    p*=Rot(radians(45.-iTime*40.));\n    float d = abs(length(p)-s)-0.001;\n    \n    p = DF(p,2.);\n    p = abs(p)-0.01;\n    p*=Rot(radians(45.));\n    float mask = B(p,vec2(0.02,0.1));\n    d = max(-mask,d);\n    \n    p = prevP;\n    p*=Rot(radians(iTime*30.));\n    p.y=abs(p.y)-0.05;\n    float d2 = B(p,vec2(0.001,0.01));\n    d = min(d,d2);\n    d2 = B(p,vec2(0.01,0.001));\n    d = min(d,d2);\n    \n    p = prevP;\n    d2 = length(p)-0.005;\n    d = min(d,d2);\n    return d;\n}\n\nfloat ring(vec2 p){\n    vec2 prevP = p;\n    float len = 0.4;\n    float d = abs(length(p)-len)-0.001;\n    \n    p*=Rot(radians(-45.-iTime*20.));\n    p.x = abs(p.x)-len;\n    float s = 0.08;\n    float d2 = smallCircle(p,s);\n    d = max(-(length(p)-s),d);\n    d = min(d,d2);\n    \n    p = prevP;\n    p*=Rot(radians(-25.-iTime*20.));\n    p.x = abs(p.x)-len;\n    d2 = length(p)-0.03;\n    d = max(-d2,d);\n    d = min(d,abs(d2)-0.001);\n    \n    p = prevP;\n    p*=Rot(radians(-13.-iTime*20.));\n    p.x = abs(p.x)-len;\n    d2 = length(p)-0.02;\n    d = max(-d2,d);\n    d = min(d,abs(d2)-0.001);\n    \n    p = prevP;\n    p = abs(p)-vec2(0.47,0.4);\n    p*=Rot(radians(45.+-iTime*25.));\n    d2 = abs(length(p)-0.07)-0.005;\n    d2 = max(-(abs(p.x)-0.02),d2);\n    \n    float d3 = abs(length(p)-0.03)-0.003;\n    d = min(d,d2);\n    d = min(d,d3);\n    \n    p = prevP;\n    \n    #ifdef REACT_SOUND\n    p.x = abs(p.x);\n    float a  = atan(p.y / p.x) / (PI * 8.) + 0.5; \n    float r= texture(iChannel0,vec2(a, 0.5)).r;\n    \n    p = prevP;\n    d2 = abs(length(p)-(0.27+r*0.1))-0.001;\n    d = min(d,d2);\n    #endif\n    \n    return d;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = (fragCoord-0.5*iResolution.xy)/iResolution.y;\n    vec2 prevP = p;\n    \n    vec3 col = vec3(0.);\n\n    float d = bg(p);\n    col = mix(col,vec3(0.3),S(d,0.));\n    \n    d = bodyMask(p);\n    float mask = d;\n    col = mix(col,vec3(0.0),S(d,0.));\n    \n    d = ring(p);\n    d = max(-mask,d);\n    col = mix(col,vec3(1.0),S(d,0.));\n    \n    d = body0(p-vec2(0.0,0.43));\n    col = mix(col,vec3(1.),S(d,0.));\n    \n    d = body1(p-vec2(0.0,0.13));\n    col = mix(col,vec3(1.),S(d,0.));\n    \n    d = body2(p-vec2(0.0,-0.1));\n    col = mix(col,vec3(1.),S(d,0.));\n        \n    d = body3(p-vec2(0.0,-0.29));\n    col = mix(col,vec3(1.),S(d,0.));\n    \n    d = leg(p-vec2(0.0,-0.45));\n    col = mix(col,vec3(1.),S(d,0.));\n    \n    d = wing(p-vec2(0.0,0.13));\n    col = mix(col,vec3(1.),S(d,0.));\n    \n    fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}