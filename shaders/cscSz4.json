{
    "Shader": {
        "info": {
            "date": "1679422595",
            "description": "testing material maker ",
            "flags": 0,
            "hasliked": 0,
            "id": "cscSz4",
            "likes": 0,
            "name": "MaterialMakerTest2",
            "published": 3,
            "tags": [
                "materialmaker"
            ],
            "usePreview": 0,
            "username": "deviltiger01",
            "viewed": 167
        },
        "renderpass": [
            {
                "code": "/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n\n\n\nfloat dot2(vec2 x) {\n\treturn dot(x, x);\n}\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat box3d(vec3 uv, vec3 s) {\n\tvec3 q = abs(uv) - s;\n\treturn length(max(q, 0.0))+min(max(q.x, max(q.y, q.z)), 0.0);\n}\nvec3 MFSDF_Obj_Maker_rotate3d(vec3 p, vec3 a) {\n\tvec3 rv;\n\tfloat c;\n\tfloat s;\n\tc = cos(a.x);\n\ts = sin(a.x);\n\trv.x = p.x;\n\trv.y = p.y*c+p.z*s;\n\trv.z = -p.y*s+p.z*c;\n\tc = cos(a.y);\n\ts = sin(a.y);\n\tp.x = rv.x*c+rv.z*s;\n\tp.y = rv.y;\n\tp.z = -rv.x*s+rv.z*c;\n\tc = cos(a.z);\n\ts = sin(a.z);\n\trv.x = p.x*c+p.y*s;\n\trv.y = -p.x*s+p.y*c;\n\trv.z = p.z;\n\treturn rv;\n}\nvec2 Simple360HDR_equirectangularMap(vec3 dir) {\n    const float PI=3.14159265359;\n\tvec2 longlat = vec2(atan(dir.y,dir.x),acos(dir.z));\n \treturn longlat/vec2(2.0*PI,PI);\n}\n\n//Simple HDRI START\n\n//Hash without Sine Dave_Hoskins\n//https://www.shadertoy.com/view/4djSRW \nfloat Simple360HDR_hash12(vec2 p)\n{\n\tvec3 p3  = fract(vec3(p.xyx) * .1031);\n    p3 += dot(p3, p3.yzx + 33.33);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\nfloat Simple360HDR_noise(vec2 v){\n  vec2 v1=floor(v);\n  vec2 v2=smoothstep(0.0,1.0,fract(v));\n  float n00=Simple360HDR_hash12(v1);\n  float n01=Simple360HDR_hash12(v1+vec2(0,1));\n  float n10=Simple360HDR_hash12(v1+vec2(1,0));\n  float n11=Simple360HDR_hash12(v1+vec2(1,1));\n  return mix(mix(n00,n01,v2.y),mix(n10,n11,v2.y),v2.x);\n}\n\nfloat Simple360HDR_noiseOct(vec2 p){\n  return\n    Simple360HDR_noise(p)*0.5+\n    Simple360HDR_noise(p*2.0+13.0)*0.25+\n    Simple360HDR_noise(p*4.0+23.0)*0.15+\n    Simple360HDR_noise(p*8.0+33.0)*0.10+\n    Simple360HDR_noise(p*16.0+43.0)*0.05;\n}\n\nvec3 Simple360HDR_skyColor(vec3 p){\n\tvec3 s1=vec3(0.2,0.5,1.0);\n\tvec3 s2=vec3(0.1,0.2,0.4)*1.5;\n    vec3 v=(Simple360HDR_noiseOct(p.xz*0.1)-0.5)*vec3(1.0);\n\tfloat d=length(p);\n    return mix(s2+v,s1+v*(12.0/max(d,20.0)),clamp(d*0.1,0.0,1.0));\n}\n\nvec3 Simple360HDR_floorColor(vec3 p){\n    vec3 v=(Simple360HDR_noiseOct(p.xz*0.1)*0.5+0.25)*vec3(0.7,0.5,0.4);\n    return v;\n}\n\nvec3 Simple360HDR_renderHDR360(vec3 rd, vec3 sun){\n    vec3 col;\n\tvec3 p;\n\tvec3 c;\n\tif (rd.y>0.0) {\n        p=rd*(5.0/rd.y);\n        c=Simple360HDR_skyColor(p);\n    } else {\n        p=rd*(-10.0/rd.y);\n        c=Simple360HDR_floorColor(p);\n\t\tc=mix(c,vec3(0.5,0.7,1.0),clamp(1.0-sqrt(-rd.y)*3.0,0.0,1.0));\n\t}\n\tvec3 skycolor=vec3(0.1,0.45,0.68);\n\tfloat d=length(p);\n\t\n\tfloat ds=clamp(dot(sun,rd),0.0,1.0);\n\tvec3 sunc=(ds>0.9997?vec3(2.0):vec3(0.0))+pow(ds,512.0)*4.0+pow(ds,128.0)*vec3(0.5)+pow(ds,4.0)*vec3(0.5);\n    if (rd.y>0.0){\n\t\tc+=vec3(0.3)*pow(1.0-abs(rd.y),3.0)*0.7;\n\t} \n    return c+sunc;\n}\n\nvec3 Simple360HDR_make360hdri(vec2 p, vec3 sun){\n    float xPI=3.14159265359;\n    vec2 thetaphi = ((p * 2.0) - vec2(1.0)) * vec2(xPI,xPI/2.0); \n    vec3 rayDirection = vec3(cos(thetaphi.y) * cos(thetaphi.x), sin(thetaphi.y), cos(thetaphi.y) * sin(thetaphi.x));\n    return Simple360HDR_renderHDR360(rayDirection,sun);\n}\n//Simple HDRI END\n\nconst float p_o115136_CamX = 3.108000000;\nconst float p_o115136_CamY = 2.000000000;\nconst float p_o115136_CamZ = 3.000000000;\nconst float p_o115136_LookAtX = 0.000000000;\nconst float p_o115136_LookAtY = 0.000000000;\nconst float p_o115136_LookAtZ = 0.000000000;\nconst float p_o115136_CamD = 1.500000000;\nconst float p_o115136_CamZoom = 1.276000000;\nconst float p_o115136_SunX = 5.542000000;\nconst float p_o115136_SunY = 2.500000000;\nconst float p_o115136_SunZ = 2.500000000;\nconst float p_o115136_AmbLight = 0.147000000;\nconst float p_o115136_AmbOcclusion = 1.001000000;\nconst float p_o115136_Shadow = 1.000000000;\nconst float p_o115136_Gamma = 1.400000000;\nconst vec4 p_o243739_BaseColor = vec4(0.757149220, 0.757149220, 0.757149220, 1.000000000);\nconst float p_o243739_Metallic = 1.055000000;\nconst float p_o243739_Specular = 0.911000000;\nconst float p_o243739_Roughness = 0.000000000;\nconst float p_o243739_Emission = 1.062000000;\nconst float p_o243739_scale = 1.000000000;\nconst float p_o243739_TranlateX = 0.000000000;\nconst float p_o243739_TranlateY = 0.000000000;\nconst float p_o243739_TranlateZ = 0.000000000;\nconst float p_o243739_RotateX = 0.000000000;\nconst float p_o243739_RotateY = 0.000000000;\nconst float p_o243739_RotateZ = 0.000000000;\nvec3 o243739_input_BaseColor_tex3d(vec4 p, float _seed_variation_) {\n\nreturn vec3(1.0);\n}\nfloat o243739_input_Metallic_tex3d(vec4 p, float _seed_variation_) {\n\nreturn 1.0;\n}\nfloat o243739_input_Specular_tex3d(vec4 p, float _seed_variation_) {\n\nreturn 1.0;\n}\nfloat o243739_input_Roughness_tex3d(vec4 p, float _seed_variation_) {\n\nreturn 1.0;\n}\nvec3 o243739_input_Emission_tex3d(vec4 p, float _seed_variation_) {\n\nreturn vec3(1.0);\n}\nconst float p_o97408_sx = 1.000000000;\nconst float p_o97408_sy = 1.000000000;\nconst float p_o97408_sz = 1.000000000;\nconst float p_o97408_r = 0.000000000;\nfloat o243739_input_sdf3d(vec3 p, float _seed_variation_) {\nfloat o97408_0_1_sdf3d = box3d((p), vec3(p_o97408_sx, p_o97408_sy, p_o97408_sz))-p_o97408_r;\n\nreturn o97408_0_1_sdf3d;\n}\nvec4 PBRObjectMaker_o243739(vec4 uv, float _seed_variation_) {\n    uv.xyz=MFSDF_Obj_Maker_rotate3d(uv.xyz-vec3(p_o243739_TranlateX,p_o243739_TranlateY,p_o243739_TranlateZ),vec3(p_o243739_RotateX,p_o243739_RotateY,p_o243739_RotateZ)*0.01745329251)/p_o243739_scale;\n\tfloat sdf=o243739_input_sdf3d(uv.xyz, _seed_variation_)*p_o243739_scale;\n\t//13 - Emission\n\tif (uv.w>12.5&&uv.w<13.5) {\n\t\treturn vec4(p_o243739_Emission*o243739_input_Emission_tex3d(vec4(uv.xyz,13.0), _seed_variation_),sdf);\n\t} else\n\t//5 - Roughness\n\tif (uv.w>4.5&&uv.w<5.5) {\n\t\treturn vec4(p_o243739_Roughness*clamp(o243739_input_Roughness_tex3d(vec4(uv.xyz,5.0), _seed_variation_),0.0,1.0),0.0,0.0,sdf);\n\t} else\n\t//4 - Specular\n\tif (uv.w>3.5) {\n\t\treturn vec4(p_o243739_Specular*clamp(o243739_input_Specular_tex3d(vec4(uv.xyz,4.0), _seed_variation_),0.0,1.0),0.0,0.0,sdf);\n\t} else\n\t//2 - Metallic\n\tif (uv.w>1.5&&uv.w<2.5) {\n\t\treturn vec4(p_o243739_Metallic*clamp(o243739_input_Metallic_tex3d(vec4(uv.xyz,2.0), _seed_variation_),0.0,1.0),0.0,0.0,sdf);\n\t} else\n\t//1 - BaseColor\n\tif (uv.w>0.5){\n\t\treturn vec4(p_o243739_BaseColor.rgb*clamp(o243739_input_BaseColor_tex3d(vec4(uv.xyz,1.0), _seed_variation_),vec3(0.0),vec3(1.0)),sdf);\n\t} else\n\t//0 - SDF\n\t{\n\t\treturn vec4(vec3(0),sdf);\n\t}\n}vec4 o115136_input_mfsdf(vec4 p, float _seed_variation_) {\nvec4 o243739_0_1_v4v4 = PBRObjectMaker_o243739((p), _seed_variation_);\n\nreturn o243739_0_1_v4v4;\n}\nvec3 o115136_input_hdri(vec2 uv, float _seed_variation_) {\n\nreturn Simple360HDR_make360hdri(vec2((uv).x,-(uv).y+1.0),normalize(vec3(-p_o115136_SunX,p_o115136_SunY,-p_o115136_SunZ)));\n}\n\n//tetrahedron normal by PauloFalcao\n//https://www.shadertoy.com/view/XstGDS\nvec3 normal_o115136(vec3 p, float _seed_variation_) {  \n  const vec3 e=vec3(0.001,-0.001,0.0);\n  float v1=o115136_input_mfsdf(vec4(p+e.xyy,0.0), _seed_variation_).w;\n  float v2=o115136_input_mfsdf(vec4(p+e.yyx,0.0), _seed_variation_).w;\n  float v3=o115136_input_mfsdf(vec4(p+e.yxy,0.0), _seed_variation_).w;\n  float v4=o115136_input_mfsdf(vec4(p+e.xxx,0.0), _seed_variation_).w;\n  return normalize(vec3(v4+v1-v3-v2,v3+v4-v1-v2,v2+v4-v3-v1));\n}\n\nvoid march_o115136(inout float d,inout vec3 p,float dS, vec3 ro, vec3 rd, float _seed_variation_) {\n    for (int i=0; i < 500; i++) {\n    \tp = ro + rd*d;\n        dS = o115136_input_mfsdf(vec4(p,0.0), _seed_variation_).w;\n        d += dS;\n        if (d > 50.0 || abs(dS) < 0.0001) break;\n    }\n}\n\n//from https://www.shadertoy.com/view/lsKcDD\nfloat calcAO_o115136( in vec3 pos, in vec3 nor , float _seed_variation_) {\n\tfloat occ = 0.0;\n    float sca = 1.0;\n    for( int i=0; i<5; i++ ){\n        float h = 0.001 + 0.25*float(i)/4.0;\n        float d = o115136_input_mfsdf(vec4( pos + h*nor ,0.0), _seed_variation_).w;\n        occ += (h-d)*sca;\n        sca *= 0.98;\n    }\n    return clamp( 1.0 - 1.6*occ, 0.0, 1.0 );    \n}\n\n//from https://www.shadertoy.com/view/lsKcDD\nfloat calcSoftshadow_o115136( in vec3 ro, in vec3 rd, in float mint, in float tmax, float _seed_variation_) {\n\tfloat res = 1.0;\n    float t = mint;\n    float ph = 1e10; // big, such that y = 0 on the first iteration\n    for( int i=0; i<32; i++ ){\n\t    vec3 p=ro + rd*t;\n\t\tfloat h = o115136_input_mfsdf(vec4(p,0.0), _seed_variation_).w;\n\t\tfloat isLight=o115136_input_mfsdf(vec4(p,13.0), _seed_variation_).x;\n\t\tif (isLight>0.0) h=999999.0;\n        res = min( res, 10.0*h/t );\n        t += h;\n        if( res<0.0001 || t>tmax ) break;  \n    }\n    return clamp( res, 0.0, 1.0 );\n}\n\nvec3 raymarch_o115136(vec2 uv, float _seed_variation_) {\n    uv-=0.5;\n\tvec3 cam=vec3(p_o115136_CamX,p_o115136_CamY,p_o115136_CamZ)*p_o115136_CamZoom;\n\tvec3 lookat=vec3(p_o115136_LookAtX,p_o115136_LookAtY,p_o115136_LookAtZ);\n\tvec3 ray=normalize(lookat-cam);\n\tvec3 cX=normalize(cross(vec3(0.0,1.0,0.0),ray));\n\tvec3 cY=normalize(cross(cX,ray));\n\tvec3 rd = normalize(ray*p_o115136_CamD+cX*uv.x+cY*uv.y);\n\tvec3 ro = cam;\n\t\n\tfloat d=0.;\n\tvec3 p=vec3(0);\n\tfloat dS=0.0;\n\tmarch_o115136(d,p,dS,ro,rd, _seed_variation_);\n\t\n    vec3 color=vec3(0.0);\n\tvec3 objColor=o115136_input_mfsdf(vec4(p,1.0), _seed_variation_).xyz;   // 1 - BaseColor (r,g,b,sdf) linear (0-1)\n\tfloat objMetallic=clamp(o115136_input_mfsdf(vec4(p,2.0), _seed_variation_).x,0.0,1.0);  // 2 - Metallic  (v,0,0,sdf)\n\tfloat objSpecular=clamp(max(o115136_input_mfsdf(vec4(p,4.0), _seed_variation_).x*0.2,objMetallic),0.0,1.0);  // 4 - Specular  (v,0,0,sdf)\n\tfloat objRoughness=o115136_input_mfsdf(vec4(p,5.0), _seed_variation_).x; // 5 - Roughness (v,0,0,sdf)\n\tvec3 objEmission=o115136_input_mfsdf(vec4(p,13.0), _seed_variation_).xyz; // 13 - Emission (r,g,b,sdf)\n\tobjColor=max(objColor,objEmission);\n\tvec3 light=normalize(vec3(p_o115136_SunX,p_o115136_SunY,p_o115136_SunZ));\n\tif (d<50.0) {\n\t    vec3 n=normal_o115136(p, _seed_variation_);\n\t\tfloat l=clamp(dot(-light,-n),0.0,1.0);\n\t\tvec3 ref=normalize(reflect(rd,-n));\n\t\tfloat r=clamp(dot(ref,light),0.0,1.0);\n\t\tfloat cAO=mix(1.0,calcAO_o115136(p,n, _seed_variation_),p_o115136_AmbOcclusion);\n\t\tfloat shadow=mix(1.0,calcSoftshadow_o115136(p,light,0.05,5.0, _seed_variation_),p_o115136_Shadow);\n\t\tif (objEmission.x>0.0){\n\t\t\tcolor=objEmission;\n\t\t} else {\n\t\t\tcolor=min(vec3(max(shadow,p_o115136_AmbLight)),max(l,p_o115136_AmbLight))*max(cAO,p_o115136_AmbLight)*((1.0-objMetallic)*objColor)+\n\t\t\tpow(r,pow(256.0,(1.0-objRoughness)))*objSpecular*mix(vec3(1.0),objColor,objMetallic)*(1.0-objRoughness)*16.0;\n\t\t}\n\t\t//reflection\n\t\td=0.01;\n\t\tmarch_o115136(d,p,dS,p,ref, _seed_variation_);\n\t\tvec3 objColorRef=vec3(0);\n\t\tvec3 objEmissionRef=vec3(0);\n\t\tif (d<50.0) {\n\t\t\tobjColorRef=o115136_input_mfsdf(vec4(p,1.0), _seed_variation_).xyz;\n\t\t\tobjEmissionRef=o115136_input_mfsdf(vec4(p,13.0), _seed_variation_).xyz;\n\t\t\tn=normal_o115136(p, _seed_variation_);\n\t\t\tl=clamp(dot(-light,-n),0.0,1.0);\n\t\t\tif (objEmissionRef.x>0.0){\n\t\t\t  objColorRef=objEmissionRef;\n\t\t\t} else {\n\t\t\t  objColorRef=max(l,p_o115136_AmbLight)*objColorRef;\n\t\t\t}\n\t\t} else {\n\t\t\tobjColorRef=o115136_input_hdri(Simple360HDR_equirectangularMap(ref.xzy), _seed_variation_).xyz;\n\t\t}\n\t\tcolor=mix(color,objColorRef,objSpecular*mix(vec3(1.0),objColor,objMetallic));\n\t} else {\n\t\tcolor=o115136_input_hdri(Simple360HDR_equirectangularMap(rd.xzy), _seed_variation_).xyz;\n\t}\n\treturn pow(color,vec3(1.0/p_o115136_Gamma));\n}\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (fragCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec3 o115136_0_1_rgb = raymarch_o115136((UV), _seed_variation_);\nfragColor = vec4(o115136_0_1_rgb, 1.0);\n}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}