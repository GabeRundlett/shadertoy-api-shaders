{
    "Shader": {
        "info": {
            "date": "1609536019",
            "description": "Siphon EAS",
            "flags": 0,
            "hasliked": 0,
            "id": "tsKBWt",
            "likes": 3,
            "name": "Siphon EAS",
            "published": 3,
            "tags": [
                "siphoneas"
            ],
            "usePreview": 0,
            "username": "public_int_i",
            "viewed": 266
        },
        "renderpass": [
            {
                "code": "/*Ethan Alexander Shulman 2020 - xaloez.com\n4k 60fps video https://www.youtube.com/watch?v=WAI3p0PRbYU\n4k wallpaper xaloez.com/art/2020/Siphon.jpg*/\n\n\n#define PI 3.14159265358\n#define EPS 1e-3\n#define SEP 2e-2\n\nmat2 r2(float a) {\n\tfloat sn = sin(a), cs = cos(a);\n\treturn mat2(cs,-sn,sn,cs);\n}\n\nfloat geo(vec3 p) {\n\treturn length(mod(abs(p.xz),6.)-3.)-.5;\n\t/*min(-(length(p.xz)-5.),\n\t\t\t   length(mod(abs(p+vec3(100+sin(time+p.y*2.)*.1,time*-.1,100+cos(p.y*2.)*.1)),.4)-.2)-.05);\n\t\t\n\t\t\t\t\t\n\t\t\tvec3 gp = mod(abs(rp-rd*EPS+vec3(100+sin(time+rp.y*2.)*.1,time*-.1,100+cos(rp.y*2.)*.1)),.4)-.2;\t   \n\t\t*/\n}\n\nvec3 bg(vec3 rd) {\n\treturn vec3(0)+max(0.,1.-length(rd-vec3(0,-1,0))*.5);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n#define time iTime\n    vec2 uv = (fragCoord*2.-iResolution.xy)/iResolution.y;\n    \n    \tvec3 rp = vec3(time,0,0),\n\t\trd = normalize(vec3(uv.xy,1.)),\n\t\tc = vec3(1);\n\t\n\tfor (int i = 0; i < 80; i++) {\n\t\tfloat dst = length(mod(abs(rp.xz),6.)-3.)-1.6;//geo(rp);\n\t\tif (dst <= 0.) {\n\t\t\trd = refract(rd,normalize(vec3(mod(abs(rp.xz),6.)-3.,0).xzy),1.);\n\t\t\tvec2 fp = (floor(abs(rp.xz)/6.)*6.+3.)*sign(rp.xz);\n\t\t\tfor (int s = 0; s < 20; s++) {\n\t\t\t\t#define bm vec3(100.+sin(time*4.+rp.y*2.)*.1,time*-4.,100.+cos(rp.y*2.)*.1)\n\t\t\t\tfloat le = -(length(rp.xz-fp)-1.6),\n\t\t\t\t\tsd = min(le, length(mod(abs(rp+bm),.8)-.4)-.2);\n\t\t\t\tif (sd <= 0.) {\n\t\t\t\t\tif (le <= 0.) break;\n\t\t\t\t\trd = refract(rd,normalize(mod(abs(rp+bm),.4)-.2),1.);\n\t\t\t\t\tsd = .4;\n\t\t\t\t}\n\t\t\t\tfloat dt = sd+SEP;\n\t\t\t\trp += rd*dt;\n\t\t\t\tc /= 1.+dt*vec3(.7,.2,.5);\n\t\t\t   //+vec3(100+sin(time+p.y*2.)*.1,time*-.1,100+cos(p.y*2.)*.1)\n\t\t\t}\n\t\t\tdst = 1.6;\n\t\t}\n\t\trp += rd*(dst+EPS);\n\t\t//c /= 1.+dt*vec3(.2);\n\t}\n\t\n\tfragColor = vec4(c*bg(rd)*3.,1);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}