{
    "Shader": {
        "info": {
            "date": "1674160081",
            "description": "I created this code to animate my music track: https://www.youtube.com/watch?v=DZeU3AhKqRo",
            "flags": 0,
            "hasliked": 0,
            "id": "DtfSzn",
            "likes": 4,
            "name": "Fractal - Besides This Nothing",
            "published": 3,
            "tags": [
                "raymarching",
                "fractal",
                "menger",
                "sequence"
            ],
            "usePreview": 0,
            "username": "Meleshin",
            "viewed": 239
        },
        "renderpass": [
            {
                "code": "// Code of animation for my music track:\n// https://www.youtube.com/watch?v=DZeU3AhKqRo\n//\n// Roman Meleshin - Besides This Nothing\n//---------------------------------------------\n// http://romanmeleshin.art/\n// \n// The code is distributed under the MIT license.\n\n#define AA 1 // Antialias. 1 or more, 1 for fast.\n#define MARCH_MAX_STEPS 100\n#define MARCH_MAX_DIST 100.\n#define MARCH_END_DIST .001\n#define BAR 4. // Beats per bar.\n\n#define SEQ_BPM 130. // Beats per minute.\nstruct varsStruct{\n\tfloat fadeIn;\n\tfloat fadeOut;\n\tvec3 colorA;\n\tvec3 colorB;\n\tvec3 rotVector;\n\tfloat rotAngle;\n\tfloat scale;\n\tvec3 offset;\n\tfloat time;\n\tfloat fade;\n\tfloat clipTime;\n};\nvarsStruct varsSeq[] = varsStruct[](\n\tvarsStruct(\n\t\t/*fadeIn*/ 4., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0,0,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 0., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 0., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.7,1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 0., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 4., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.7,1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 40., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 8., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.7,1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 40., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 20., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.7,1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 80., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 24., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.7,1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 80., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 32., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 80., \n\t\t/*scale*/ 5., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 36., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 120., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 40., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 120., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 44., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 160., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 48., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 160., \n\t\t/*scale*/ 5., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 52., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 200., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 56., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 200., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 68., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 240., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 72., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 240., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 80., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0.5,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 240., \n\t\t/*scale*/ 5., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 84., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0.5,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 280., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1.2,1,1), \n\t\t/*time*/ 88., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0.5,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 280., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1.2,1,1), \n\t\t/*time*/ 92., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0.5,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 320., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1.2,1,1), \n\t\t/*time*/ 96., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0.5,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 320., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1.2,1,1), \n\t\t/*time*/ 100., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0.5,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 360., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1.2,1,1), \n\t\t/*time*/ 104., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0.5,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 360., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1.2,1,1), \n\t\t/*time*/ 108., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0.5,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 400., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1.2,1,1), \n\t\t/*time*/ 112., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0.5,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 440., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1.2,1,1), \n\t\t/*time*/ 116., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.9,0.1,0.8), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 440., \n\t\t/*scale*/ 5., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 120., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.9,0.1,0.8), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 480., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 124., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.9,0.1,0.8), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 520., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 128., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.9,0.1,0.8), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 560., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 132., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.9,0.1,0.8), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 600., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 136., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.9,0.1,0.8), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 640., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 140., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(7,0.7,0.1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 680., \n\t\t/*scale*/ 5., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 144., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(7,0.7,0.1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 680., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,0.5), \n\t\t/*time*/ 148., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(7,0.7,0.1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 680., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,0.5), \n\t\t/*time*/ 152., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(7,0.7,0.1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 720., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,0.5), \n\t\t/*time*/ 156., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(7,0.7,0.1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 720., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,0.5), \n\t\t/*time*/ 164., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(7,0.7,0.1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 760., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,0.5), \n\t\t/*time*/ 168., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(7,0.7,0.1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 760., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,0.5), \n\t\t/*time*/ 176., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(7,0.7,0.1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 800., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,0.5), \n\t\t/*time*/ 180., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0,0.7,0.2), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 800., \n\t\t/*scale*/ 5., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 184., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0,0.7,0.2), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 840., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 188., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0,0.7,0.2), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 840., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 200., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0,0.7,0.2), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 880., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 204., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0,0.7,0.2), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 880., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 212., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.5,0.1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 880., \n\t\t/*scale*/ 5., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 216., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.5,0.1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 920., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 220., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.5,0.1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 920., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 232., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.5,0.1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 960., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 236., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.5,0.1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 960., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 240., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(3,3,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 960., \n\t\t/*scale*/ 5., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 244., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(3,3,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1000., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 248., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(3,3,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1000., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 260., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(3,3,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1040., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 264., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(3,3,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1040., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 276., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(3,3,0), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1080., \n\t\t/*scale*/ 3.7, \n\t\t/*offset*/ vec3(1,0.8,1.9), \n\t\t/*time*/ 280., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,7,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1080., \n\t\t/*scale*/ 5., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 284., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,7,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1120., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 288., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,7,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1120., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 292., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,7,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1160., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 296., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,7,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1160., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 300., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1160., \n\t\t/*scale*/ 5., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 304., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1200., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 308., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(1,0,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1200., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 320., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.7,1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1240., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 324., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.7,1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1240., \n\t\t/*scale*/ 3., \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 336., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 0., \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.7,1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1280., \n\t\t/*scale*/ 3.5, \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 340., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 35.75, \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.7,1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1280., \n\t\t/*scale*/ 3.5, \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 340., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*fadeIn*/ 0., \n\t\t/*fadeOut*/ 35.75, \n\t\t/*colorA*/ vec3(1,1,1), \n\t\t/*colorB*/ vec3(0.7,1,1), \n\t\t/*rotVector*/ vec3(0,1,1), \n\t\t/*rotAngle*/ 1280., \n\t\t/*scale*/ 3.5, \n\t\t/*offset*/ vec3(1,1,1), \n\t\t/*time*/ 372., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t)\n);\nvarsStruct vars;\nvoid varsInit(){\n\tconst float beatTime = 60. / SEQ_BPM;\n\tfloat loopLength = varsSeq[varsSeq.length()-1].time * beatTime;\n\tfloat loopT = mod(iTime, loopLength);\n\tfloat clipT;\n\tfloat clipL;\n\tvarsStruct a;\n\tvarsStruct b;\n\tfloat t;\n\tfor(int i = 0; i < varsSeq.length()-1; i++){\n\t\tfloat sTimeNext = varsSeq[i+1].time * beatTime;\n\t\tif(sTimeNext > loopT){\n\t\t\tfloat sTime = varsSeq[i].time * beatTime;\n\t\t\ta = varsSeq[i];\n\t\t\tb = varsSeq[i+1];\n\t\t\tclipT = loopT - sTime;\n\t\t\tclipL = sTimeNext - sTime;\n\t\t\tt = clipT/clipL;\n\t\t\tbreak;\n\t\t}\n\t}\n\tvars.colorA = mix(a.colorA, b.colorA, t);\n\tvars.colorB = mix(a.colorB, b.colorB, t);\n\tvars.rotVector = mix(a.rotVector, b.rotVector, t);\n\tvars.rotAngle = mix(a.rotAngle, b.rotAngle, t);\n\tvars.scale = mix(a.scale, b.scale, t);\n\tvars.offset = mix(a.offset, b.offset, t);\n\tvars.time = loopT;\n\tvars.clipTime = t;\n\tvars.fade = 1.;\n\tif(a.fadeIn != 0.){\n\t\tvars.fade *= clamp(clipT / (a.fadeIn * beatTime), 0., 1.);\n\t}\n\tif(a.fadeOut != 0.){\n\t\tvars.fade *= clamp((clipL - clipT) / (a.fadeOut * beatTime), 0., 1.);\n\t}\n\tvars.clipTime = mix(a.clipTime, b.clipTime, t);\n}\nstruct varsPStruct{\n\tvec3 pathStopDir;\n\tvec3 path;\n\tfloat time;\n\tvec3 pathDir;\n\tfloat pathMinDir;\n\tfloat clipTime;\n};\nvarsPStruct varsPSeq[] = varsPStruct[](\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(0,0,0), \n\t\t/*time*/ 0., \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(0,0,10), \n\t\t/*time*/ 39.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(0,12,10), \n\t\t/*time*/ 87.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(10,12,10), \n\t\t/*time*/ 123.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(10,18,10), \n\t\t/*time*/ 147.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(10,18,20), \n\t\t/*time*/ 187.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(10,26,20), \n\t\t/*time*/ 219.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(18,26,20), \n\t\t/*time*/ 247.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(18,36,20), \n\t\t/*time*/ 287.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(18,36,26), \n\t\t/*time*/ 307.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(18,36,32), \n\t\t/*time*/ 331.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(18,34,32), \n\t\t/*time*/ 339.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(18,34,40), \n\t\t/*time*/ 367.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(18,36,40), \n\t\t/*time*/ 375.75, \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsPStruct(\n\t\t/*pathStopDir*/ vec3(0,0,1), \n\t\t/*path*/ vec3(18,36,46), \n\t\t/*time*/ 396., \n\t\t/*pathDir*/ vec3(0,0,1), \n\t\t/*pathMinDir*/ 0.01, \n\t\t/*clipTime*/ 0.\n\t)\n);\nvarsPStruct varsP;\nvoid varsPInit(){\n\tconst float beatTime = 60. / SEQ_BPM;\n\tfloat loopLength = varsPSeq[varsPSeq.length()-1].time * beatTime;\n\tfloat loopT = mod(iTime, loopLength);\n\tfloat clipT;\n\tfloat clipL;\n\tvarsPStruct a;\n\tvarsPStruct b;\n\tfloat t;\n\tfor(int i = 0; i < varsPSeq.length()-1; i++){\n\t\tfloat sTimeNext = varsPSeq[i+1].time * beatTime;\n\t\tif(sTimeNext > loopT){\n\t\t\tfloat sTime = varsPSeq[i].time * beatTime;\n\t\t\ta = varsPSeq[i];\n\t\t\tb = varsPSeq[i+1];\n\t\t\tclipT = loopT - sTime;\n\t\t\tclipL = sTimeNext - sTime;\n\t\t\tt = clipT/clipL;\n\t\t\tbreak;\n\t\t}\n\t}\n\tfloat loopTLA = mod(iTime + 3., loopLength);\n\tvarsPStruct aLA;\n\tvarsPStruct bLA;\n\tfloat tLA;\n\tfor(int i = 0; i < varsPSeq.length()-1; i++){\n\t\tfloat sTimeNext = varsPSeq[i+1].time * beatTime;\n\t\tif(sTimeNext > loopTLA){\n\t\t\tfloat sTime = varsPSeq[i].time * beatTime;\n\t\t\taLA = varsPSeq[i];\n\t\t\tbLA = varsPSeq[i+1];\n\t\t\tfloat clipT = loopTLA - sTime;\n\t\t\tfloat clipL = sTimeNext - sTime;\n\t\t\ttLA = clipT/clipL;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tvarsP.path = mix(a.path, b.path, t);\n\tvec3 pLA = mix(aLA.path, bLA.path, tLA);\n\tvarsP.pathStopDir = mix(aLA.pathStopDir, bLA.pathStopDir, tLA);\n\tvarsP.pathMinDir = mix(aLA.pathMinDir, bLA.pathMinDir, tLA);\n\tvec3 pDir = pLA - varsP.path;\n\tfloat pStop = 1. - clamp(length(pDir) / varsP.pathMinDir, 0., 1.);\n\tpDir += varsP.pathStopDir * pStop;\n\tvarsP.pathDir = normalize(pDir);\n\tvarsP.time = loopT;\n\tvarsP.clipTime = t;\n\tvarsP.pathMinDir = mix(a.pathMinDir, b.pathMinDir, t);\n\tvarsP.clipTime = mix(a.clipTime, b.clipTime, t);\n}\n\nmat3 rot;\nconst float inf = 1e10;\nvec3 ro0;\nvec3 ro;\nfloat barPulse;\n\nmat3 rotMat(vec3 v, float c, float s){\n\tfloat k = (1. - c);\n\treturn mat3(\n\t\tk * v.x * v.x + c,\t\t\tk * v.x * v.y - s * v.z,\tk * v.x * v.z + s * v.y,\n\t\tk * v.x * v.y + s * v.z,\tk * v.y * v.y +c,\t\t\tk * v.y * v.z - s * v.x,\n\t\tk * v.x * v.z - s * v.y,\tk * v.y * v.z + s * v.x,\tk * v.z * v.z + c\n\t);\n}\nmat3 rotMat(vec3 v, float angle){\n\treturn rotMat(v, cos(angle), sin(angle));\n}\nmat3 rotMat(vec3 z, vec3 d){\n\tvec3 cr = cross(z, d);\n\treturn rotMat(cr, dot(z, d), length(cr));\n}\nvec3 opRepeat(vec3 p, float repW){\n\tfloat repWD = repW / 2.;\n\treturn mod(p + repWD, repW) - repWD;\n}\nfloat deMengerBased(vec3 p, int iter, float scale, vec3 offset){\n\tint n = 0;\n\t//offset.z += barPulse*.3;\n\t//scale += barPulse*.03;\n\twhile (n < iter) {\n\t\tp = abs(p);\n\t\tif (p.x<p.y){ p.xy = p.yx;}\n\t\tp.x += .24;\n\t\tif (p.x<p.z){ p.xz = p.zx;}\n\t\tp.y += .05;\n\t\tif (p.y<p.z){ p.yz = p.zy;}\n\t\tp.z -= .07;\n\t\tp = scale*p-offset*(scale-1.0);\n\t\tif( p.z<-0.5*offset.z*(scale-1.0)) p.z+=offset.z*(scale-1.0);\n\t\tp = rot * p;\n\t\tn++;\n\t}\n\treturn length(p) * pow(scale, float(-n));\n}\nfloat map(vec3 p){\n\tfloat res = inf;\n\tp -= ro0;\n\tp = opRepeat(p, 2.);\n\tres = min(res, deMengerBased(p, 8, vars.scale, vars.offset));\n\treturn res;\n}\nvec2 march(vec3 ro, vec3 rd, int maxSteps, float endDist, float maxDist){\n\tfloat res = 0.;\n\tint i=0;\n\tfor(; i < maxSteps; i++){\n\t\t vec3 p = ro + rd * res;\n\t\t float dist = map(p);\n\t\t res += dist;\n\t\t if(res > maxDist || dist < endDist){\n\t\t\treturn vec2(res, i);\n\t\t }\n\t}\n\treturn vec2(res, i);\n}\n\nvec3 colorFast(float dist, float it){\n\tvec3 itL = clamp(1. - it/40., 0., 1.) * vars.colorA;\n\tvec3 distL = clamp((1. + barPulse*2.3)*dist*dist/400., 0., 1.) * vars.colorB;\n\tfloat m = clamp(dist/2., 0., 1.);\n\treturn mix(itL, distL, m);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\tvarsInit();\n\tvarsPInit();\n\n\tconst float beatTime = 60./SEQ_BPM;\n\n\tconst float barTime = BAR*beatTime;\n\tfloat timeInBars = vars.time / barTime;\n\tbarPulse = pow(1. - abs(timeInBars - round(timeInBars))*2., 3.);\n\n\tconst float foc = 1.;\n\tro0 = vec3(0, 1, 0);\n\tro = ro0 + varsP.path;\n\tvec3 col =vec3(0.);\n\tvec3 lightPos = ro;\n\trot = rotMat(normalize(vars.rotVector), radians(vars.rotAngle));\n#if AA>1\n\tfor(int i = 0; i < AA; ++i){\n\t\tfor(int j = 0; j < AA; ++j){\n\t\t\tvec2 ao = vec2(float(i),float(j))/float(AA) - .5;\n\t\t\tvec2 uv = (fragCoord.xy + ao - .5*iResolution.xy)/iResolution.y;\n#else\n\t\t\tvec2 uv = (fragCoord.xy - .5*iResolution.xy)/iResolution.y;\n#endif\n\t\t\tvec3 rd = normalize(vec3(uv.x, uv.y, foc)) * rotMat(vec3(0, 0, 1), varsP.pathDir);\n\t\t\t\n\t\t\tvec2 dist = march(ro, rd, MARCH_MAX_STEPS, MARCH_END_DIST, MARCH_MAX_DIST);\n\t\t\tcol += colorFast(dist.x, dist.y);\n#if AA>1\n\t\t}\n\t}\n\tcol /= float(AA*AA);\n#endif\n\tfragColor = vec4(col * vars.fade, 1);\n}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}