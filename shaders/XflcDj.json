{
    "Shader": {
        "info": {
            "date": "1721612344",
            "description": "autos 2d",
            "flags": 0,
            "hasliked": 0,
            "id": "XflcDj",
            "likes": 15,
            "name": "autos 2d",
            "published": 3,
            "tags": [
                "2d",
                "autos2d"
            ],
            "usePreview": 0,
            "username": "jorge2017a2",
            "viewed": 124
        },
        "renderpass": [
            {
                "code": "//por jorge2017a2\n//modeling 2d face\n//---21-jul-2024--\n//autos 2d\n\n//referencia\n//https://iquilezles.org/articles/distfunctions2d\n///\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n\n#define S(d,b) smoothstep(antialiasing(1.5),0. , d - (b) )\n#define S2(d,b) smoothstep(8.0*antialiasing(1.5),0.,d - (b) )\n#define S3(d,b) smoothstep(1.0/antialiasing(2.5),0. , d - (b) )\n\n\n#define opU2(d1, d2) ( d1.x < d2.x ? d1 : d2 )\n\n\n#define PI     3.14159265\n#define TWO_PI 6.28318530\n\nfloat Sdf_I(float distA, float distB)\n\t{ return max(distA, distB);}\nfloat Sdf_U(float distA, float distB)\n\t{ return min(distA, distB);}\nfloat Sdf_D(float distA, float distB)\n\t{ return max(distA, -distB);}\n\nfloat sdBox( in vec2 p, in vec2 b )\n{ vec2 d = abs(p)-b;  return length(max(d,0.0)) + min(max(d.x,d.y),0.0);  }\n\n\n\nvec3 DFB(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S3( distObj,0.0));\n  colOut = mix(colOut,vec3(0.0),S3(abs( distObj)-0.005,0.0));\n  return colOut;\n}\n\n\nvec3 DFS(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S( distObj,0.0)); return colOut;\n  return colOut;\n}\n\n\nfloat sdCircle( vec2 p, float r )\n{ return length(p) - r;}\n\n\n\n\nvec3 auto1(vec2 p, vec3 colout)\n{\n\n\nvec2 A,B, med,pr;\nfloat dfin,he;\nfloat  r1 ;\n\nA=vec2(0.2793,0.30175);\nmed=vec2(0.03491,0.13217);\nfloat d1=sdBox(p-A,med);\n\nA=vec2(0.4788,0.23441);\nmed=vec2(0.16459,0.06733);\nfloat d2=sdBox(p-A,med);\n\nA=vec2(0.17706,0.23441);\nmed=vec2(0.06608,0.06733);\nfloat d3=sdBox(p-A,med);\n\nA=vec2(0.18703,0.36658);\nmed=vec2(0.05362,0.06608);\nfloat d4=sdBox(p-A,med);\n\nA=vec2(0.31172,0.16958);\nr1=0.06484;\nfloat d5=sdCircle(p-A,r1);\n\nA=vec2(0.51122,0.16958);\nr1=0.06484;\nfloat d6=sdCircle(p-A,r1);\n\nA=vec2(0.31421,0.16708);\nr1=0.03242;\nfloat d7=sdCircle(p-A,r1);\n\nA=vec2(0.51621,0.16708);\nr1=0.03242;\nfloat d8=sdCircle(p-A,r1);\n\nA=vec2(0.03219,0.3389);\nmed=vec2(0.053,0.220);\n he=0.0723192;\nfloat d9= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.095,0.3717);\nmed=vec2(0.057,0.04);\n he=0.0736908;\nfloat d10= sdTrapezoid(p-A, med.y, med.x, he);\n\nfloat d101=Sdf_U(d1,d2);\nfloat d102=Sdf_U(d3,d101);\nfloat d103=d4;\n d103=Sdf_D(d103,d10);\nfloat d105=d5;\nfloat d106=d6;\nfloat d107=d7;\nfloat d108=d8;\n\ncolout= DFB(vec3(1.0,0.5,0.0), colout, d102);\ncolout= DFB(vec3(0.6,0.2,0.2), colout, d103);\ncolout= DFS(vec3(0.35), colout, d105);\ncolout= DFS(vec3(0.35), colout, d106);\ncolout= DFS(vec3(0.0), colout, d107);\ncolout= DFS(vec3(0.0), colout, d108);\n\n\n    return colout;\n}\n\n\nvec3 Auto2(vec2 p, vec3 colout)\n{  vec2 A,B, med,pr;\nfloat dfin,he;\nfloat  r1 ;\n\nA=vec2(1.00249,0.16958);\nmed=vec2(0.09975,0.03367);\nfloat d1=sdBox(p-A,med);\n\nA=vec2(0.96758,0.14214);\nr1=0.06234;\nfloat d2=sdCircle(p-A,r1);\n\nA=vec2(0.89776,0.16546);\nmed=vec2(0.045,0.0285);\n he=0.0489402;\nfloat d3= sdTrapezoid(p-A, med.y, med.x, he);\n\nA=vec2(1.18703,0.202);\nmed=vec2(0.08479,0.06733);\nfloat d4=sdBox(p-A,med);\n\nA=vec2(1.13965,0.14963);\nr1=0.12968;\nfloat d5=sdCircle(p-A,r1);\n\nA=vec2(1.03741,0.23441);\nmed=vec2(0.06608,0.03616);\nfloat d6=sdBox(p-A,med);\n\nA=vec2(1.06983,0.23441);\nmed=vec2(0.03741,0.03117);\nfloat d7=sdBox(p-A,med);\n\nA=vec2(1.00249,0.23691);\nmed=vec2(0.03741,0.03117);\nfloat d8=sdBox(p-A,med);\n\nA=vec2(0.87514,0.2393);\nmed=vec2(0.082,0.155);\nhe=0.0562843;\nfloat d9= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(1.13716,0.23441);\nmed=vec2(0.03491,0.03616);\nfloat d10=sdBox(p-A,med);\n\np.x-=0.25;\np.y+=0.25;\n\nA=vec2(0.74065,0.36908);\nr1=0.03242;\nfloat d5a=sdCircle(p-A,r1);\n\nA=vec2(0.97007,0.36908);\nr1=0.03242;\nfloat d6a=sdCircle(p-A,r1);\n\nA=vec2(0.74065,0.36908);\nr1=0.00998;\nfloat d7a=sdCircle(p-A,r1);\n\nA=vec2(0.97007,0.36908);\nr1=0.00998;\nfloat d8a=sdCircle(p-A,r1);\n\nfloat d101=Sdf_I(d1,d2);\nfloat d102=Sdf_D(d1,d3);\nfloat d103=Sdf_U(d101,d102);\nfloat d104=Sdf_I(d4,d5);\nfloat d105=Sdf_D(d6,d9);\nfloat d106=Sdf_D(d8,d9);\nfloat d107=d105;\nfloat d108=d106;\nfloat d109=d10;\n\nvec3 c5=vec3(0.196,0.592,1.000);\nvec3 c6=vec3(0.404,0.404,0.404);\nvec3 c11=vec3(0.804,0.804,0.804);\n\n\n\ncolout= DFB(vec3(0.5,0.0,0.5), colout, d103); //base inf frente\ncolout= DFB(vec3(0.5,0.0,0.5), colout, d104); //base inf atras\ncolout= DFB(c5, colout, d107); //ventana 2\ncolout= DFB(c5, colout, d108);//ventana 1\ncolout= DFB(c5, colout, d109);//ventana 3\n\n\ncolout= DFS(c6, colout, d5a); //rueda\ncolout= DFS(c6, colout, d6a); //rueda\ncolout= DFS(c11, colout,d7a); //rueda\ncolout= DFS(c11, colout,d8a);\n\n\nreturn colout;\n}\n\n\nvec3 auto3(vec2 p, vec3 colout)\n{\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1 ;\n\nA=vec2(0.8404,0.4015);\nmed=vec2(0.16708,0.03367);\nfloat d1=sdBox(p-A,med);\n\nA=vec2(0.86783,0.46633);\nmed=vec2(0.15212,0.03367);\nfloat d2=sdBox(p-A,med);\n\nA=vec2(0.671,0.46374);\nmed=vec2(0.073,0.095);\nfloat he=0.0465337;\nfloat d3= sdTrapezoid(p-A, med.x, med.y, he); \n\nA=vec2(1.015,0.46623);\nmed=vec2(0.044,0.09);\nhe=0.0465337;\nfloat d4= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.74065,0.36908);\nr1=0.03242;\nfloat d5=sdCircle(p-A,r1);\n\nA=vec2(0.97007,0.36908);\nr1=0.03242;\nfloat d6=sdCircle(p-A,r1);\n\nA=vec2(0.74065,0.36908);\nr1=0.00998;\nfloat d7=sdCircle(p-A,r1);\n\nA=vec2(0.97007,0.36908);\nr1=0.00998;\nfloat d8=sdCircle(p-A,r1);\n\nA=vec2(0.86783,0.4015);\nmed=vec2(0.00249,0.03865);\nfloat d9=sdBox(p-A,med);\n\nA=vec2(0.74813,0.36658);\nr1=0.07232;\nfloat d10=sdCircle(p-A,r1);\n\nA=vec2(0.6808,0.4089);\nmed=vec2(0.044,0.09);\n he=3.865337E-02;\nfloat d11= sdTrapezoid(p-A, med.x, med.y, he);  //corte base inf\n\nA=vec2(0.90274,0.46633);\nmed=vec2(0.03117,0.02743);\nfloat d12=sdBox(p-A,med);\n\nA=vec2(0.83541,0.46633);\nmed=vec2(0.03117,0.02743);\nfloat d13=sdBox(p-A,med);\n\nA=vec2(0.77057,0.466364);\nmed=vec2(0.03117,0.02743);\nfloat d14=sdBox(p-A,med);\n\nfloat d101=Sdf_I(d1,d10); //inferior\nfloat d102=Sdf_D(d1,d11);\nfloat d103=Sdf_U(d101,d102);\nfloat d104=d5;\nfloat d105=d6;\nfloat d106=d7;\nfloat d107=d8;\n\nfloat d108=Sdf_D(d2,d3); //base sup\nfloat d109=Sdf_D(d108,d4); //base sup corte atras\n\nfloat d110=d12;\nfloat d111=d13;\nfloat d112=Sdf_D(d14,d3);\n\n\nvec3 c1=vec3(0.953,0.169,0.067);\nvec3 c3=vec3(0.918,0.776,0.447);\nvec3 c5=vec3(0.196,0.592,1.000);\nvec3 c6=vec3(0.404,0.404,0.404);\nvec3 c11=vec3(0.804,0.804,0.804);\n\n\ncolout= DFB(c1, colout, d103); //base inf\ncolout= DFS(c6, colout, d104); //rueda\ncolout= DFS(c6, colout, d105); //rueda\ncolout= DFS(c11, colout, d106); //rueda\ncolout= DFS(c11, colout, d107);\n\ncolout= DFB(c3, colout, d109); //base sup\ncolout= DFB(c5, colout, d110); //ventana 3\ncolout= DFB(c5, colout, d111); //ventana 2\ncolout= DFB(c5, colout, d112); //ventana 1\ncolout= DFS(vec3(0.05), colout, d9); //linea\n\n    \n    return colout;\n}\n\nvec3 calle(vec2 p, vec3 colout)\n{\n    float d1=p.y-0.45;\n    colout= DFB(vec3(0.5), colout, d1); //calle\n    \n    d1=p.y-0.25;\n    d1=abs(d1)-0.02;\n    colout= DFB(vec3(0.0), colout, d1); //linea\n    \n    return colout;\n}\n\nvec3 monte(vec2 p, vec3 colout)\n{\n    \n    float t=iTime;\n    \n    float d1=p.y+0.5*sin(10.88+p.x+2.0*sin(p.x)+2.*cos(p.x*2.0))-1.17;\n    colout= DFB(vec3(0.0,0.5,0.0), colout, d1); \n    return colout;\n}\n\nvec3 casas(vec2 p, vec3 colout,vec3 pcol )\n{float t=iTime;\n    \n    float d1=p.y+0.65*sin(floor( p.x+2.5*sin(p.x)+2.*cos(p.x*2.0))*20.0 )-0.57;\n    colout= DFB(pcol, colout, d1); \n    return colout;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n    vec2 uv = ( 2. * fragCoord - iResolution.xy ) / iResolution.y;\n    \n    uv-=vec2(-1.0,-1.0);\n    float esc=1.0;\n    float t=iTime;\n    uv*=esc+0.35*sin(t);\n    vec2 uv0=uv;\n    \n    \n    uv.x+=t;\n    vec3 col=vec3(0.1,0.21,1.0);\n    vec2 pn=vec2(uv0.x-t*0.5,uv.y);\n    col= monte(pn,col);\n    pn=mix(pn,uv,.1); //spalmer\n    col=casas(pn,col,vec3(0.15));\n    pn=mix(pn,uv,.2); //spalmer\n    //col=casas(uv-vec2(1.5,-0.2),col,vec3(0.35));\n    col=casas(pn,col,vec3(0.35));\n    \n    \n    \n    col= calle(uv,col);\n    \n    uv.x=mod(uv.x+iTime,1.5);\n    col= auto1(uv, col);\n    col=Auto2(uv,col);\n    col=auto3(uv,col);\n    \n    col=pow(col,  vec3(1.0/2.2));\n    \n    fragColor = vec4(col,1.0);\n}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "//iq\nfloat dot2( in vec2 v ) { return dot(v,v); }\nfloat dot2( in vec3 v ) { return dot(v,v); }\nfloat ndot( in vec2 a, in vec2 b ) { return a.x*b.x - a.y*b.y; }\n\n\nfloat sdTrapezoid( in vec2 p, in float r1, float r2, float he )\n{\n    vec2 k1 = vec2(r2,he);\n    vec2 k2 = vec2(r2-r1,2.0*he);\n    p.x = abs(p.x);\n    vec2 ca = vec2(p.x-min(p.x,(p.y<0.0)?r1:r2), abs(p.y)-he);\n    vec2 cb = p - k1 + k2*clamp( dot(k1-p,k2)/dot2(k2), 0.0, 1.0 );\n    float s = (cb.x<0.0 && ca.y<0.0) ? -1.0 : 1.0;\n    return s*sqrt( min(dot2(ca),dot2(cb)) );\n}",
                "description": "",
                "inputs": [],
                "name": "Common",
                "outputs": [],
                "type": "common"
            }
        ],
        "ver": "0.1"
    }
}