{
    "Shader": {
        "info": {
            "date": "1568820024",
            "description": "sd-like: tile generator",
            "flags": 0,
            "hasliked": 0,
            "id": "Wdt3RB",
            "likes": 1,
            "name": "sd-like: tile generator rand rot",
            "published": 3,
            "tags": [
                "tilegenerator"
            ],
            "usePreview": 0,
            "username": "mibai",
            "viewed": 344
        },
        "renderpass": [
            {
                "code": "#define blur 0.002\n#define pi 3.141592653589793\n\nfloat rand(float val){\n\treturn fract(3456.*sin(3456.*val));\n}\nfloat line(vec2 p,vec2 a,vec2 b,float thick){\n    vec2 ap=p-a;\n    vec2 ab=b-a;\n    float percen=clamp(dot(ap,ab)/dot(ab,ab),0.,1.);\n    return smoothstep(blur,-blur,length(ap-ab*percen)-thick);\n}\n\nvoid rotatePoint(inout vec2 pos,vec2 pivot,float angle){\n    pos-=pivot;\n    pos.x=pos.x*cos(angle)-pos.y*sin(angle);\n    pos.y=pos.x*sin(angle)+pos.y*cos(angle);\n    pos+=pivot;\n}\n\n//number:垂直多少条直线\n//rabdinRit对应sd的free rotation random\nfloat tileGenerator(vec2 uv,float number,float thick,float randomRot,float thelta){\n    float threshold=0.;\n    \n    for(float i=0.;i<number;i++){  \n        float y=i/number;\n        vec2 beg=vec2(0.,y);\n        vec2 end=vec2(iResolution.x/iResolution.y,y);\n        \n        //rotate\n        vec2 pivot=vec2(rand(y), y);\n        //pivot=vec2(0.5);\n        float angle=thelta*rand(5678.1*y)*pi/180.;\n        rotatePoint(beg,pivot,angle);\n        rotatePoint(end,pivot,angle);\n\n        threshold+=line(uv,beg,end,thick);     \n    }\n    return clamp(0.,1.,threshold);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv=fragCoord/iResolution.y;\n    //鼠标\n    //vec3 col=vec3(tileGenerator(uv,18.,.005,0.,iMouse.x));\n    //自动\n    vec3 col=tileGenerator(uv,18.,.005,0.,iTime*100.)*(.5+.5*vec3(sin(iTime),cos(iTime),sin(iTime)+cos(iTime)));\n    fragColor=vec4(col,1.);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}