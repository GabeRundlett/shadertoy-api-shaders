{
    "Shader": {
        "info": {
            "date": "1710836654",
            "description": "Made this shader using round dot cast / sign map and rectTruchet texture.\nvia well lighting on Nvidia graphics.\nthanks for watching.",
            "flags": 0,
            "hasliked": 0,
            "id": "l32XzK",
            "likes": 4,
            "name": "truchets jigsaw CINSHADER ver",
            "published": 3,
            "tags": [
                "truchet",
                "jigsaw",
                "cineshader"
            ],
            "usePreview": 0,
            "username": "chenxianming",
            "viewed": 565
        },
        "renderpass": [
            {
                "code": "/*\n    Truchets jigsaw shaking\n    by LiJiYong studio presets.\n    Copyright ( c ) 2024 LJY ST. released\n    \n    Made this shader using round dot cast / sign map and rectTruchet texture.\n    via well lighting on Nvidia graphics.\n    thanks for watching.\n    \n    ==============================================================================\n    \n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n#define j iTime\n#define g( a ) fract(sin(dot(a,vec2(12.345,54.321)))*9876.5432)\n#define E( a ) mat2(cos(a),sin(a),-sin(a),cos(a))\n#define e round\n#define i iResolution.xy\n#define s( a ) clamp( a, 0., 1. )\n#define h min( i.x, i.y )\n#define k( a ) clamp( a, 0., 1. )\n\nfloat F(float a,float b,float c) {\n\tfloat d=clamp(.5+.5*(b-a)/c,0.,1.);\n\treturn mix(b,a,d)-c*d*(1.-d);\n}\nfloat t(float a,float b,float c) {\n\treturn-F(-a,-b,c);\n}\nfloat G(vec2 a,float f) {\n\tvec2 b=e(a/-.4);\n\tfloat c,d=e(fract(dot(floor(b.yxx*2.45),sin(b.xyy+vec3(1,2,3))/4.5)));\n\ta-=.4*e(a/.4),d>.5?a.x*=-1.:0.,c=max(min(a.x+a.y>.05?0.:1.,a.x+a.y<-.05?0.:1.),max(abs(a.x),abs(a.y))-.2),c=smoothstep(5./h,-5./h,c);\n\treturn c;\n}\nfloat u(vec2 a,float b) {\n\tvec2 c=e(a/-b);\n\tfloat d=e(g(c*5.));\n\ta-=b*e(a/b),d>0.?a.x*=-1.:0.,a+=b*(a.x+a.y>0.?-.5:.5);\n\treturn (length(a)-b*.5)*(d!=mod(c.x+c.y,2.)?1.:-1.);\n}\nfloat H(vec2 b,vec2 a,vec2 l) {\n\tb=abs(b);\n\tfloat c=b.x+b.y-.2;\n\ta+=.1;\n\tvec2 p=e(a/.2);\n\ta-=.2*clamp(e(a/.2),0.,1.);\n\tfloat d=length(a)-.05,f;\n\tf=g(p)*g(l)>.3?min(c,d):max(c,-d);\n\treturn f;\n}\nvec2 v,w;\nfloat x,y;\nfloat I(vec3 b) {\n\tvec2 a=b.xy,c=e(a/.4);\n\ta-=.4*e(a/.4);\n\tvec2 d=a;\n\tv=c,b.z+=cos(g(c)*80.)/80.*.1;\n\treturn x=t(H(a,d,c),abs(b.z)-.05,5e-3);\n}\nfloat J(vec2 a,vec2 b,vec2 l) {\n\ta-=.4*e(a/.4),a=abs(a);\n\tfloat c=a.x+a.y-.2;\n\tb+=.1;\n\tvec2 p=e(b/.2);\n\tb-=.2*clamp(e(b/.2),0.,1.);\n\tfloat d=length(b)-.05,f;\n\tf=g(p)*g(l)<.3?min(c,d):max(c,-d);\n\treturn f;\n}\nfloat K(vec3 b) {\n\tvec2 a=b.xy,c=a;\n\tc-=.4*e(c/.4);\n\tvec2 f=e(a/.4);\n\ta+=.2;\n\tvec2 d=e(a/.4);\n\tw=d,b.z+=cos(g(d)*80.)/80.*.1;\n\treturn y=t(J(a,c,f),abs(b.z)-.05,5e-3);\n}\nfloat m(vec3 a) {\n\ta.z-=u(a.xy,.1)*.1;\n\treturn min(min(I(a),K(a)),-(a.z-.3));\n}\nvec3 n(in vec3 b) {\n\tvec2 a=vec2(1,-1)*.5773;\n\treturn normalize(a.xyy*m(b+a.xyy*5e-4)+a.yyx*m(b+a.yyx*5e-4)+a.yxy*m(b+a.yxy*5e-4)+a.xxx*m(b+a.xxx*5e-4));\n}\nfloat r(vec3 a,vec3 b,vec3 c,float d) {\n\treturn k(pow(dot(n(a),normalize(normalize(b)-c)),d));\n}\nfloat z(vec3 a) {\n\treturn smoothstep(2./h,-2./h,G(a.xy*2.,1.))*max(-n(a).z,0.);\n}\nvoid A(inout vec3 a,vec2 f,vec3 d) {\n\tfloat c=g(f);\n\tvec3 b;\n\tb=c>0.&&c<.25?vec3(7e-3,.995,.044):b,b=c>.25&&c<.5?vec3(.99,.719,.229):b,b=c>.5&&c<.75?vec3(.018,.99,.933):b,b=c>.75&&c<1.?vec3(.965,.553,.694):b,a=mix(a,b,k(a.x*3.)*.35),a=s(a),a*=1.2,a=mix(a,b,smoothstep(1./h,-1./h,u(d.xy,.2))*.2),a=s(a),a=mix(a,b,z(d*4.)*.2),a+=z(d*4.)*.2;\n}\nvec2 q(float a) {\n\tfloat b=2./(3.-cos(2.*a)),c=b*cos(a),d=b*sin(2.*a)/2.;\n\treturn vec2(c,d);\n}\nvec3 B(vec2 p) {\n\tvec3 c,b,L=vec3(0,0,-1),f=vec3(p,1);\n\tfloat C,l;\n\tfor (float D=0.;D<60.;D++){\n        b=L+f*C,b.yz*=E(.6283),b.y+=j*.1,l=m(b),C+=l*.4445;\n        if( C < .33 && l < 1e-3 )\n          break ;\n    }\n    \n\tif(l<1e-3) {\n\t\tvec3 a=vec3(-.1,.5,-1);\n\t\ta.x+=q(j*.6).x*1.2,a.y+=q(j*.6).y*1.5;\n\t\tfloat d=k(dot(n(b),a));\n\t\tc+=r(b,a,f,45.)*d*vec3(.01,.765,.995)*.5,a=vec3(.2,.2,-1),a.x+=q(j*.8).x*1.2,a.y+=q(j*.8).y*1.5,d=k(dot(n(b),a)),c+=r(b,a,f,30.)*d*vec3(.96,.401,.768)*.5,a=vec3(-.2,-.5,-1),a.x+=q(j*.9).x*1.2,a.y+=q(j*.9).y*1.5,d=k(dot(n(b),a)),c+=r(b,a,f,40.)*d*vec3(.753,.96,6e-3)*.5,a=vec3(0,.5,-1),d=k(dot(n(b),a)),c+=r(b,a,f,20.)*d*.3;\n\t\tif(m(b)==x)A(c,v-.5,b);\n\t\tif(m(b)==y)A(c,w+.5,b);\n\t}\n\treturn c;\n}\n\n#define O vec2(.25))*2.-i.xy*1.)/h)*.5,\n\nvoid mainImage( out vec4 U, in vec2 V) {\n\n\tvec3 a;\n    \n    a+=B(((V+O\n    a+=B(((V-O\n    a=mix(a,vec3(0),V.y/i.y+4e-3); \n    \n\tU = vec4( a, 1 );\n    \n}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}