{
    "Shader": {
        "info": {
            "date": "1664519290",
            "description": "nothing interesting here !\nJust had to publish to help inspect a GLSL bug occuring in the live icon.\n\nThe real comparative shader was [url] https://shadertoy.com/view/NtcfDn [/url]",
            "flags": 0,
            "hasliked": 0,
            "id": "ftVfWW",
            "likes": 2,
            "name": "4efficient poisson distribution",
            "published": 3,
            "tags": [
                "glsl",
                "bug"
            ],
            "usePreview": 0,
            "username": "FabriceNeyret2",
            "viewed": 229
        },
        "renderpass": [
            {
                "code": "// variant of https://shadertoy.com/view/7lyBRw\n// DEBUG sub-part3 \"efficient poisson distribution\" by FabriceNeyret2. https://shadertoy.com/view/NtcfDn\n\n//#define sqrt(x) sqrt(max(x,0.))\n//#define log(x)  log(clamp(x,1e-9,1.))   // debug crash <><><>\n\n#define H2(p) fract(sin((p)*mat2(127.1,311.7, 269.5,183.3)) *43758.5453123)\n\n#define Poisson(n, seed)  Normal(n,sqrt(n),seed)               // approx valid for n not too small https://en.wikipedia.org/wiki/Poisson_distribution#Related_distributions\n#define Normal(m,s,seed)  m + s * Gauss(seed)\n#define Gauss(u)          sqrt(-2.*log(u.x)) * cos(6.283*u.y ) // takes u = rand2_uniform()\n\nvoid mainImage( out vec4 O, vec2 u )\n{\n    vec2  R = iResolution.xy,\n          U = 8.* ( 2.*u - R ) / R.y,\n          I = floor(U),\n          h = H2(I);\n    float n = ( .5+.5*sin(iTime) ) * min( R.x*R.y/100., 1e4 ) / 64., d=n;\n\n    if ( int(u.x) == int(R.x)/2 || int(u.y) == int(R.y)/2 ) { O = vec4(1); return; } // red separator \n // if ( U.y < 0. && U.x > 0. ) // try (un)comment\n    {\n\n        if(d<0.)       { O = vec4(1,1,0,1); return; };        // yellow\n        if(h.x<0.)     { O = vec4(0,1,1,1); return; };        // cyan\n        if(h.x==0.)    { O = vec4(0,.5,.5,1); return; };      // dark cyan\n        if(h.x>1.)     { O = vec4(1,0,1,1); return; };        // pink\n        if(-2.*log(h.x)<0.) { O = vec4(.5,0,.5,1); return; }; // dark pink\n\n        d = Poisson(d, H2(I)) -.5;\n        if( isnan(d) ) { O = vec4(1,0,0,1); return; };        // R\n        if( isinf(d) ) { O = vec4(0,1,0,1); return; };        // G\n        if( d > 170.)  { O = vec4(0,0,1,1); return; };        // B\n        O = vec4( d/170. );\n    //  if( d < 0. )   { O = .5*vec4((int(u.x)+int(u.y))%2); return; }\n    //  O = .5* vec4(.5* ( d - n ) / 3./ sqrt(n) +.5 );\n    }\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}