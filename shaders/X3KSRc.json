{
    "Shader": {
        "info": {
            "date": "1720290663",
            "description": "pseudoshading = step i\nright: corrective term to make it continuous (approximating the surface by the tangent plane).\nbottom: glow",
            "flags": 0,
            "hasliked": 0,
            "id": "X3KSRc",
            "likes": 24,
            "name": "tuto: fixing raymarch bands",
            "published": 3,
            "tags": [
                "raymarching",
                "artifacts"
            ],
            "usePreview": 0,
            "username": "FabriceNeyret2",
            "viewed": 247
        },
        "renderpass": [
            {
                "code": "void mainImage( out vec4 O, vec2 u )\n{\n    vec3 R = iResolution,\n         D = normalize( vec3( ( 2.*u - R.xy ) / R.y , 3 )), // ray direction\n         P = vec3(0,0,-5);                                  // start + sample position along ray\n         \n    float d=9., _d, g,  i, e = .001;    \n    for( ; i < 60. && d > e; i++ )         // sphere-march ray up to dist < eps or steps > 99  \n        _d = d,                            // keep previous distance to obj\n         d = length(P) - 1.,               // new distance to obj = safe stepping\n         g += _d * exp(-3.*d*d),           // glow intensity = gauss(f) along step length _d\n        P += d*D;                          // next step along the ray\n        \n    if (D.x>0.)                          // on right half: \n      if ( d < e )                       // if hit:\n        i += log(e/d) / log(d/_d);         // correction: dist to plane of angle a is d0(1-cos(a))^i\n                                           // 1-cos(a) ~ d/_d \n                                           // so step to exact dist e = d*(1-cos)^di â†’ i += di\n\n    O = vec4(exp(-i/10.));                 // pseudo shading.\n    if (D.y < 0. ) O.r += .1*g;            // on bottom: glow\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}