{
    "Shader": {
        "info": {
            "date": "1591040406",
            "description": "potato",
            "flags": 0,
            "hasliked": 0,
            "id": "tdjfWc",
            "likes": 8,
            "name": "Day 165 - Not good rasterizer",
            "published": 3,
            "tags": [
                "rasterizer",
                "mdmtjvm"
            ],
            "usePreview": 0,
            "username": "jeyko",
            "viewed": 409
        },
        "renderpass": [
            {
                "code": "// Used Inigo Quilez's rasterizer as a reference - https://www.shadertoy.com/view/4slGzn\n\nfloat cross2d( vec2 a, vec2 b )\n{\n    return a.x*b.y - a.y*b.x;\n}\n#define SZ 40 \n\nvec3[SZ*3] vertices;\n\nvec3[SZ] cols;\n\nvec3 r31(float i){\n\treturn texture(iChannel0,vec2(floor(i/256.),mod(i,256.))).xyz;\n}\n\n#define rot(j) mat2(cos(j),-sin(j),sin(j),cos(j))\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord - 0.5*iResolution.xy)/iResolution.y;\n\n    float z = 10000.;\n    \n    vec3 col = vec3(0);\n\n    \n    uv *= 3.;\n    \n    // generate vertices and colours\n    for(float i = 0.; i < float(SZ*3+min(iFrame,0)); i++){\n        vec3 vertice;\n        \n        float mult = 4.8;\n        vertice.xy = vec2(cos(i*mult),sin(i*mult))*2.;\n        \n        vertice.xy *= 1.;\n        \n        \n        float kick = floor(iTime+5.) + pow(fract(iTime+5.),8.);\n        vertice.z = cos(mix(i*3.14*2.,i,abs(sin(kick/3.14/200.))))*4.4;\n        \n        vertice.xz *= rot(sin(iTime)/3.);\n        vertice.yx *= rot(cos(iTime)/3.);\n        \n        \n        vertice.z += 5.6 ; // camera offs\n        \n        //vertice.z = 1.;\n        cols[int(i)/3] = 0.5+sin(floor(i)  + uv.x/6. +iTime + sin(uv.y/3.)/1.+ vec3(1.,0.5,0.2))/2.;\n        \n    \tvertices[int(i)] = vertice;\n    }\n    \n    \n    // draw triangles\n    for(int i = 0; i < SZ+min(iFrame,0); i++){\n        vec3 va = vertices[i*3+0];\n        vec3 vb = vertices[i*3+1];\n        vec3 vc = vertices[i*3+2];\n  \t\t\n        vec3 tricol = cols[i];\n        \n        float zoffs = 0.;\n        \n        va.z -= zoffs;\n        vb.z -= zoffs;\n        vc.z -= zoffs;\n        \n        vec2 a = va.xy/va.z;\n        vec2 b = vb.xy/vb.z;\n        vec2 c = vc.xy/vc.z;\n  \t\n        vec3 cr = vec3(\n        \tcross2d(uv-a,b-a),\n            cross2d(uv-b,c-b),\n        \tcross2d(uv-c,a-c)\n        ); \n\n        if ((\n            cr.x>0. &&\n            cr.y>0. &&\n            cr.z>0.\n\t\t\t)\n           ){\n\t\t\tvec3 b = cr.zyx/(cr.z + cr.y + cr.x);\n            \n            float iz = b.x/va.z + b.y/vb.z + b.z/vc.z;\n            \n            vec3 c = 0.5+sin(floor(float(i)) + b.x + uv.x/6. +iTime + sin(uv.y/3.)/1.+ vec3(1.,0.6,0.2))/2.;\n\t\t\t//vec3 c = 0.5+sin(floor(float(i)) + b.x +iTime*0. + b.y*14.+ vec3(1.,0.5,0.2))/2.;\n\n            \n            col += (c)*(1.-length(col)*1.4);\n            \n            z = min(z,iz);\n\n        }\n\n    }\n    \n    col *= 0.9;\n    \n    \n    col = smoothstep(0.,1.,col);\n\tcol = mix(col,vec3(0.3,0.4,0.7)/11.,pow(smoothstep(0.,1.,z*0.7),2.));\n    \n    col *= 1. - dot(uv,uv)*0.06;\n    \n    col = pow(max(col,0.),vec3(0.45454));\n    \n    fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 30,
                        "published": 1,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}