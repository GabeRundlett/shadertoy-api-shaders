{
    "Shader": {
        "info": {
            "date": "1641242231",
            "description": "looped a dragon with bokeh disks",
            "flags": 32,
            "hasliked": 0,
            "id": "stVSzt",
            "likes": 26,
            "name": "Bokeh Fractal",
            "published": 3,
            "tags": [
                "ifs"
            ],
            "usePreview": 0,
            "username": "wyatt",
            "viewed": 563
        },
        "renderpass": [
            {
                "code": "Main \n    Q = vec4(0.);\n    vec3 u;\n    vec4 c;\n    U = (U-.5*R)/R.y;\n    for (float i = 0.; i < N; i++)\n    {\n        u = A(vec2(i+.5,.5)).xyz;\n        c = B(vec2(i+.5,.5));\n        float d = .2*abs(u.z);\n        float l = (length(u.xy-U)-d);\n        Q += c*(smoothstep(1e-2,0.,l)+.5*exp(-1e4*l*l))/(1.+400.*d);\n    }\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    },
                    {
                        "channel": 1,
                        "ctype": "buffer",
                        "id": 258,
                        "published": 1,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer01.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "vec2 R; float T;\n#define A(U) texture(iChannel0,(U)/R)\n#define B(U) texture(iChannel1,(U)/R)\n#define Main void mainImage(out vec4 Q, in vec2 U) {R=iResolution.xy,T=iTime;\n\n#define D 9. \n#define N exp2(D)\n\n#define ei(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n\nvoid shape (in float i, out vec3  u, out vec4 c) \n{\n    u = vec3(0);\n    c = vec4(0);\n    float r = .1;\n    for (float j = 0.; j < D; j++) {\n         float a = mod(i,2.)*2.-1.;\n         c += .2*sin(1.3*a+vec4(1,2,3,4));\n         u.xy  *= ei(-a+.001*T);\n         u.xz *= ei(.2+.1*sin(.31*T));\n         u.y += r;\n         u.x -= a*r;\n         r *= .5;\n         i = floor(i/2.);\n    }\n    u.xz  *= ei(.174*T);\n    u *= 2.5;\n}",
                "description": "",
                "inputs": [],
                "name": "Common",
                "outputs": [],
                "type": "common"
            },
            {
                "code": "Main\n\n    vec3 u;\n    float i = floor(U.x);\n    shape(i,u,Q);\n    \n    Q.xyz = u;\n\n}",
                "description": "",
                "inputs": [],
                "name": "Buffer A",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 257
                    }
                ],
                "type": "buffer"
            },
            {
                "code": "Main\n\n    vec3 u;\n    float i = floor(U.x);\n    shape(i,u,Q);\n    \n    //Q.xyz = u;\n\n}",
                "description": "",
                "inputs": [],
                "name": "Buffer B",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 258
                    }
                ],
                "type": "buffer"
            }
        ],
        "ver": "0.1"
    }
}