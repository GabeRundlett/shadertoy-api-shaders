{
    "Shader": {
        "info": {
            "date": "1579338440",
            "description": "winter is coming~",
            "flags": 0,
            "hasliked": 0,
            "id": "WtK3D1",
            "likes": 5,
            "name": "winter~",
            "published": 3,
            "tags": [
                "2d",
                "particle"
            ],
            "usePreview": 0,
            "username": "WingStone",
            "viewed": 593
        },
        "renderpass": [
            {
                "code": "float Pow2(float par)\n{\n    return par*par;\n}\n\nvec2 hash( in vec2 x )  // replace this by something better\n{\n    const vec2 k = vec2( 0.3183099, 0.3678794 );\n    x = x*k + k.yx;\n    return -1.0 + 2.0*fract( 16.0 * k*fract( x.x*x.y*(x.x+x.y)) );\n}\n\nfloat wave(float x)\n{\n    return 2.0*Pow2((x+1.0)*0.5)-1.0;\n}\n\nvec3 snow( vec2 uv, float scale, float density)\n{\n    vec3 col = vec3(0,0,0);\n    \n    uv *= scale;\n    uv.y += 0.5*iTime;\n    vec2 id = floor(uv);\n    vec2 xy = fract(uv)*2.0-1.0;\n    for( float i = -3.0; i <= 3.0; i+=1.0 )\n    {\n    \tfor( float j = -3.0; j <= 3.0; j+=1.0 )\n        {\n            vec2 random = hash(id+vec2(i,j));\n\t\t\tvec2 center = random*vec2(0.5*sin(random.x*6.283 + iTime*1.5), 1.0) + vec2(i,j)*2.0 ;\n            \n            float lightness = max(0.0, 0.025/distance(xy, center)*(random.y*1.5+1.5)-0.07);\n            //float lightness = max(0.0, exp2(-24.0*distance(xy, center))*(random.y*1.5+1.5));\n            lightness *= step(random.x, density);\n            \n            col += lightness; \n        }\n    }\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.y;\n\n    //mountain1\n    vec3 col = vec3(0,0,0);\n    uv.y += 0.5;\n    float hight1 = 0.05*wave( sin((uv.x + iTime*0.02)*3.0));\n    hight1 += 0.08*wave( sin((uv.x + iTime*0.02)*6.0));\n    hight1 += 0.06*wave( sin((uv.x + iTime*0.02)*12.0));\n    col += 1.0-smoothstep(-0.01, 0.01, uv.y - hight1-0.7);\n    \n    //mountain2\n    float hight2 = 0.02*wave( sin((uv.x + iTime*0.04)*2.0));\n    hight2 += 0.06*wave( sin((uv.x + iTime*0.04)*4.0));\n    hight2 += 0.05*wave( sin((uv.x + iTime*0.04)*6.0));\n    col = col*0.8 + 1.0-smoothstep(-0.01, 0.01, uv.y - hight2-0.6);\n    col = clamp(col, 0.0, 1.0);\n    \n    //snow\n    vec3 snowCol = vec3(0,0,0);\n    snowCol += snow(uv, 10.0, 0.0);\n    snowCol += snow(uv, 5.0, 0.7);\n    snowCol += snow(uv, 2.0, 1.0);\n    snowCol = clamp(snowCol, 0.0, 1.0);\n    \n    col = snowCol + col*(1.0 - snowCol);\n\n    fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}