{
    "Shader": {
        "info": {
            "date": "1476111118",
            "description": "sound glsls\nin progress.",
            "flags": 8,
            "hasliked": 0,
            "id": "Xty3zd",
            "likes": 5,
            "name": "cindysizer",
            "published": 3,
            "tags": [
                "sound",
                "generator"
            ],
            "usePreview": 0,
            "username": "spectrum",
            "viewed": 879
        },
        "renderpass": [
            {
                "code": "void mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    float time = iTime/.25;\n    /* metronome */\n  \tvec2 uv = fragCoord.xy / iResolution.xy;\n    float s1 = 0.5+0.5*sin(mod(floor(time),2.)*.25+uv.x*3.1415*sin(iTime));\n    float r = pow(1.0-sqrt( abs(uv.y-s1)),5.0);\n    float g = 0.1;\n    float b = 0.2*(r+g);\n\tfragColor = vec4( mod(floor(time/.25),4.)*r,g,b*(iTime*.25),1 );\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "#define pi2 6.283185307179586476925286766559\n\n/* generator */\nfloat makeSine(float freq, float time) {\n    return sin(freq*pi2*time);\n}\n\nfloat makeTriangle(float freq, float time) {\n    return abs(fract(time * freq)-.5)*4.0-1.0;\n}\n\nfloat makeSaw(float freq, float time) {\n\treturn fract(time * freq) * 2.0 - 1.0;\n}\n\nfloat makeSquare(float freq, float time) {\n    return step(fract(time * freq), 0.5)*2.0-1.0;\n}\n\n/* env 1/4 sec */\nfloat makeEnv( float freq, float time ) {\n    return freq * (mod (1.- time*4., 1.));\n}\n\n/* mtof */\nfloat mtof( float midi ) {\n    return 440. * pow(2., (floor(midi) - 69.)/ 12.);\n}\n\n/* addSequence */\nfloat addSequencer( float time ) {\n    float seqNote = 69.;\n    float mt = mod(time*.25, 1.);\n    if      (mt*16.< 1.) { seqNote = 69.; }\n    else if (mt*16.< 2.) { seqNote = 69.; }\n    else if (mt*16.< 3.) { seqNote = 67.; }\n    else if (mt*16.< 4.) { seqNote = 69.; }\n    else if (mt*16.< 5.) { seqNote = 0.; }\n    else if (mt*16.< 6.) { seqNote = 64.; }\n    else if (mt*16.< 7.) { seqNote = 0.; }\n    else if (mt*16.< 8.) { seqNote = 64.; }\n    else if (mt*16.< 9.) { seqNote = 69.; }\n    else if (mt*16.<10.) { seqNote = 74.; }\n    else if (mt*16.<11.) { seqNote = 73.; }\n    else if (mt*16.<12.) { seqNote = 69.; }\n    else if (mt*16.<13.) { seqNote = 0.; }\n    else if (mt*16.<14.) { seqNote = 0.; }\n    else if (mt*16.<15.) { seqNote = 0.; }\n    else if (mt*16.<16.) { seqNote = 0.; }\n\n    return seqNote > 0. ? makeEnv(makeSquare(mtof(seqNote), time), time) : 0.;\n} \n\n/* kick */\nfloat makeKick(float tb, float time)\n{\n\ttb = fract(tb / 4.0) * 0.5;\n\tfloat aa = 5.0;\n\ttb = sqrt(tb * aa) / aa;\n\t\n\tfloat amp = exp(max(tb - 0.15, 0.0) * -10.0);\n\tfloat v = sin(tb * 80.0 * pi2) * amp;\n\treturn v;\n}\n\nvec2 mainSound( in int samp, float time ) {\n    float bass = makeEnv(\n        makeSine(mtof(33.) * ((mod(floor(time*4.),2.))+1.), time), time\n    )*.7;\n    float arp = makeEnv(\n        makeTriangle(mtof(33.) * ((mod(floor(time*4.),8.))+1.), time), time\n    )*.2;\n    float melodyR = \n        addSequencer(time)*.1\n      + addSequencer(time-.25)*.025;\n    float melodyL = \n        addSequencer(time-.125)*.05\n      + addSequencer(time-.375)*.0125;\n    float tb = time * 8.0;\n    float kick = makeKick(time*8., time);\n    return vec2(\n      (kick+bass + (time>8. ? melodyL: 0.) + (time>16. ? arp: 0.))\n      *.5 /* volume control */\n    ,\n      (kick+bass + (time>8. ? melodyR: 0.))\n      *.5 /* volume control */\n    );\n}",
                "description": "",
                "inputs": [],
                "name": "Sound",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 38
                    }
                ],
                "type": "sound"
            }
        ],
        "ver": "0.1"
    }
}