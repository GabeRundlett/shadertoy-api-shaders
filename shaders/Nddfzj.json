{
    "Shader": {
        "info": {
            "date": "1656804323",
            "description": "Use cylinder coordinates (b*2pi=angle, U.y=height) to show slices of [url=https://www.shadertoy.com/view/NscBzj]spiral stairs[/url] by [url=https://www.shadertoy.com/user/FabriceNeyret2]FabriceNeyret2[/url].",
            "flags": 0,
            "hasliked": 0,
            "id": "Nddfzj",
            "likes": 2,
            "name": "spiral stairs slice",
            "published": 3,
            "tags": [
                "short"
            ],
            "usePreview": 0,
            "username": "pyBlob",
            "viewed": 218
        },
        "renderpass": [
            {
                "code": "#define rot(a) mat2(cos(a+vec4(0,11,-11,0)))\n#define q(v) max(v.x, v.y)\n#define ri(r) (round(i=r)-i)\n#define iTime (iTime+iMouse.y/R.y*5.)\n\nvoid mainImage(out vec4 O, vec2 U)\n{\n    float a // screen angle\n        , i, b, j\n        ;\n    vec3  R = iResolution\n        ;\n    U -= R.xy/2.;\n    vec2  V = U\n        ;\n    V.y *= 3.;\n    for (\n        O = vec4(a=j=0.) ;\n        V.x=U.x\n            / sin(a*6.28) // scale for orthographic projection\n        , j<250.\n        ; ++j, a+=.001 * sign(U.x)) // slices from 0° to +-90°\n    //; // only show widest slice\n    //if (V=U,a=atan(V.y, V.x)/6.28+.2*iTime, V = vec2(length(V), (j/250.-iTime/10.)*R.y), true) // horizontal slice\n        if ( // screw tunnel\n            b=a-.2*iTime, // world angle // <- can't move into first reference, because compiler might strip this assignment\n            V.x > // radius of section\n            .3*R.y * ( // base radius\n                ri(\n                    V.y/R.y*1. +\n                    b\n                )\n                + 1.\n            )\n            / q(abs(rot(b*6.28)[0])) // square, comment for cylinder\n            // ^ only nearly square. With show ramp, the central part is a perfect square/circle.\n            // For a circle, can you make it the spiral go tangential at the ends?\n           )\n        if ( // steps\n            .3 > // room height\n            abs(ri(\n                i\n                - b // removes ramp\n                + round(b*12.)/12. // adds stairs\n            ))\n            //, true // show ramp\n           )\n            O = mix(max(O, j/250.), vec4(1,.5,0,1), floor((j+1.)/250.));\n\n    // 200px squares\n    //O = vec4(length(U) * q(abs(rot(atan(U.y,U.x))[0])) < 200.);\n    //O = vec4(length(U) < 200. / q(abs(rot(atan(U.y,U.x))[0])));\n}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}