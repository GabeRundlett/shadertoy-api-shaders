{
    "Shader": {
        "info": {
            "date": "1653834216",
            "description": "Following https://bleuje.github.io/tutorial2/",
            "flags": 0,
            "hasliked": 0,
            "id": "fdtyRX",
            "likes": 3,
            "name": "2 - Loop from periodic function",
            "published": 3,
            "tags": [
                "periodic",
                "basics"
            ],
            "usePreview": 0,
            "username": "kampta",
            "viewed": 231
        },
        "renderpass": [
            {
                "code": "#define PI 3.14159265359\n\nconst float m = 35.;\n\nbool inCircle(vec2 ctr, float r, vec2 p)\n{\n    vec2 vec = ctr - p;\n    return length(vec) < r;\n}\n\nvec3 colCircle(vec2 ctr, float r, vec2 p)\n{\n    // Time varying pixel color\n    vec3 pNorm = p.xyx / iResolution.xyx;\n    vec3 col = inCircle(ctr, r, p) ? vec3(0.) : 0.5+ 0.5*cos(iTime+pNorm+vec3(0,2,4));\n    return col;\n}\n\n\nfloat map(float value, float min1, float max1, float min2, float max2)\n{\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nfloat periodicFunction(float p)\n{\n  return map(sin(2.*PI*p),-1.,1.,2.,5.);\n}\n\nfloat offset(vec2 p)\n{\n  vec2 ctr = 0.5*iResolution.xy;\n  vec2 vec = ctr - p;\n  return 0.01*length(vec);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord)\n{    \n    // find closest circle center\n    vec2 ctr = vec2(\n        round(map(fragCoord.x, 0., iResolution.x-1., 0., m-1.)), \n        round(map(fragCoord.y, 0., iResolution.y-1., 0., m-1.))\n    );\n    ctr.x = map(ctr.x, 0., m-1., 0., iResolution.x-1.);\n    ctr.y = map(ctr.y, 0., m-1., 0., iResolution.y-1.);\n    \n    // calculate radius\n    float r_pt = periodicFunction(iTime-offset(ctr));\n\n    // Output to screen\n    fragColor = vec4(colCircle(ctr, r_pt, fragCoord.xy), 1.);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}