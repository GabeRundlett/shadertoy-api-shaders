{
    "Shader": {
        "info": {
            "date": "1571901497",
            "description": "coupled gears",
            "flags": 0,
            "hasliked": 0,
            "id": "WddSD8",
            "likes": 5,
            "name": "My_gears",
            "published": 3,
            "tags": [
                "gears",
                "polarcoordinates"
            ],
            "usePreview": 0,
            "username": "adrenoide",
            "viewed": 331
        },
        "renderpass": [
            {
                "code": "const float pi = 4. * atan(1.);\n\n// Pour s = fract(x/2*pi) ...\n// entre 0 et a : s ** e\n// entre a et 1/2 : 1\n// sym√©triquement entre 1/2 et 1\nfloat phi(float x, float a, float e) {\n\tfloat s = fract(x / (2. * pi));\n    if (s < a) {\n        return pow(s/a, e);\n    }\n    else if (s > 1. - a) {\n        return pow((1. - s) / a, e);\n    }\n    else {\n    \treturn 1.;\n    }\n}\n\nfloat gear(vec2 p, vec2 ctr, float rMin, float rMax,\n           int nbTeeth, float param, float expos, float theta) {\n    float r = length(p - ctr);\n    float t = atan(p.y - ctr.y, p.x - ctr.x);\n    \n    float n = float (nbTeeth);\n    float f = rMin + (rMax - rMin) * phi(n * (t - theta), param, expos);\n    \n    return\n        smoothstep (0.01,\n                    0.,\n                    r - f)\n        ;\n}\n\nvec3 radialColor (vec2 p, vec2 ctr,\n                  float rOmega, float rPhi,\n                  float gOmega, float gPhi,\n                  float bOmega, float bPhi) {\n \treturn vec3 (\n        abs(sin(rOmega * length(p - ctr) + rPhi)),\n        abs(sin(gOmega * length(p - ctr) + gPhi)),\n        abs(sin(bOmega * length(p - ctr) + bPhi))\n    );   \n}\n\nvoid mainImage( out vec4 O, in vec2 U )\n{\n    vec2 p = U / iResolution.x;\n    \n    p -= vec2 (0.5, 0.3);\n    p *= 5.;\n    \n    vec4 gearsColor = vec4(\n        \tvec3 (gear(p, vec2(0.,0.), .4, .6, 10, 0.4, 4., iTime)) *\n        \t\tradialColor (p, vec2(0.,0.), 2., 0., 1., 0., 3., 1.) +\n        \tvec3 (gear(p, vec2(1.1,0.), .4, .6, 10, 0.4, 4., -iTime - 0.8)) *\n        \t\tradialColor (p, vec2(1.1,0.), 3., 0., 1., 1., 2., 2.) +\n        \tvec3 (gear(p, vec2(1.05, -2.3), 1.3, 1.8, 30, 0.4, 12., iTime / 3. + 0.8)) *\n        \t\tradialColor (p, vec2(1.05,-2.3), 2., 0., 1., 0., 3., 1.) +\n        \tvec3(gear(p, vec2(-.8, 0.3), 0.15, 0.3, 5, 0.4, 4., -2. * iTime - 0.15) *\n                radialColor (p, vec2(-.8,.3), 3., 0., 1., 0.5, 3., 1.))\n        , 1.);\n    \n    vec4 gearsBlack = vec4(1.) - vec4(\n        \tvec3 (gear(p, vec2(0.,0.), .4, .6, 10, 0.4, 4., iTime)) +\n        \tvec3 (gear(p, vec2(1.1,0.), .4, .6, 10, 0.4, 4., -iTime - 0.8))+\n        \tvec3 (gear(p, vec2(1.05, -2.3), 1.3, 1.8, 30, 0.4, 12., iTime / 3. + 0.8)) +\n        \tvec3(gear(p, vec2(-.8, 0.3), 0.15, 0.3, 5, 0.4, 4., -2. * iTime - 0.15))\n        , 1.);\n    \n    O = gearsBlack * vec4(1.) + gearsColor;\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}