{
    "Shader": {
        "info": {
            "date": "1532789121",
            "description": "Playing with some new bitpatterns. Fork of my shader from the Nova Shader Showdown Final",
            "flags": 64,
            "hasliked": 0,
            "id": "XtcyW7",
            "likes": 10,
            "name": "Chromab CA experimentation",
            "published": 3,
            "tags": [
                "asdf"
            ],
            "usePreview": 0,
            "username": "yx",
            "viewed": 524
        },
        "renderpass": [
            {
                "code": "#define pi (acos(-1.))\n\nvec2 rotate(vec2 a, float b)\n{\n\tfloat c = cos(b);\n\tfloat s = sin(b);\n\treturn vec2(a.x*c-a.y*s, a.x*s+a.y*c);\n}\n\nfloat pattern(vec2 uv,float th)\n{\n  \tuv = rotate(uv,sin(floor(iTime*2.)));\n\n    // kinda polar mapping thing?\n    //uv = normalize(uv)/sqrt(length(uv)) * 16.;\n\n    uv.y -= iTime * 8.;\n        \n    uv = fract(uv*.125)*4.;\n    \n    uint s = uint(floor(iTime*8.+1.)*float(0xfd213)); // random start state\n    \n    float sc = .125;\n    \n    for(int i=0;i<int(uv.y/sc);++i)\n    {\n        // shift-rotate\n        uint a = (s << 1) | (s >> 31);\n        uint b = (s);\n        uint c = (s >> 1) | (s << 31);\n        \n        //s = (some expression)         // rule:\n        \n        //s = 0u;                       // 0\n        //s = ~(a|b|c);                 // 1\n        //s = (a^c)&~b;                 // 18\n        s = a^(b|c);                  // 30\n        //s = ~a^b;                     // 195\n    }\n    \n    // shift to output\n    return float((s>>int(uv.x/sc))&1u);\n}\n\nvec4 pal(vec4 a, vec4 b, vec4 c, vec4 d, float t)\n{\n\treturn a+b*cos(2.*pi*(c*t+d));\n}\n\nvec4 logichroma(float t)\n{\n\treturn pal(\n\t\tvec4(.5),\n\t\tvec4(.5),\n\t\tvec4(1.),\n\t\tvec4(0,.33,.67,1),\n\t\tt\n\t);\n}\n\nvoid mainImage(out vec4 out_color, vec2 fragCoord)\n{\n\tvec2 uv = fragCoord/iResolution.xy-.5;\n\tuv.x *= iResolution.x / iResolution.y;\n\n\tfloat v = (1.-length(uv)) * 3.;\n\tv=clamp(v,0.,1.);\n\tv=smoothstep(1.2,.6,length(uv)); // nicer vignette\n\n\tfloat f = texture(iChannel0, vec2(0.25,0)).r*.5;\n    f=smoothstep(.2,.5,f);\n\n\tuv *= 1.-f*.8;\n\tout_color=vec4(.0);\n\tfor(int i=0;i<60;++i)\n\t{\n\t\tout_color += vec4(pattern(uv*12.,.2+f*.5)) * logichroma(1.-float(i)/60.) * (1.-(float(i)/60.));\n\t\tuv *= pow(0.996,f*4.);\n\t}\n\tout_color *= .05;\n\tout_color = 1.-out_color;\n\tout_color *= v;\n    \n    // glitch pass\n    //out_color.rgb = normalize(abs(cross(dFdx(out_color.rgb),dFdy(out_color.rgb))));\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "musicstream",
                        "id": 15363,
                        "published": 0,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "https://soundcloud.com/gaspode8/we-have-accidently-borrowed-your-memories"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}