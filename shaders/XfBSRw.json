{
    "Shader": {
        "info": {
            "date": "1706122174",
            "description": "PAL/SECAM matrix test",
            "flags": 0,
            "hasliked": 0,
            "id": "XfBSRw",
            "likes": 1,
            "name": "PAL/SECAM matrix test",
            "published": 3,
            "tags": [
                "palsecammatrixtest"
            ],
            "usePreview": 0,
            "username": "aybe",
            "viewed": 121
        },
        "renderpass": [
            {
                "code": "vec3 linearToGamma(vec3 color, float gamma) {\n    return pow(color, vec3(1.0 / gamma));\n}\nvec3 gammaToLinear(vec3 gammaCorrectedColor, float gamma) {\n    return pow(gammaCorrectedColor, vec3(1.0 / gamma));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec3 cv = vec3(uv, 1.0);\n    \n    // http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n    \n    mat3 palSecamRgbToXyzD65 = mat3( // no\n        0.4306190, 0.2220379, 0.0201853,\n        0.3415419, 0.7066384, 0.1295504,\n        0.1783091, 0.0713236, 0.9390944\n    );\n\n    mat3 xyzToPalSecamRgbD65 = mat3( // yes\n        3.0628971, -0.9692660, 0.0678775,\n       -1.3931791,  1.8760108, -0.2288548,\n       -0.4757517,  0.0415560, 1.0693490\n    );\n\n    mat3 palSecamRgbToXyzD50 = mat3( // no\n        0.4552773, 0.2323025, 0.0145457,\n        0.3675500, 0.7077956, 0.1049154,\n        0.1413926, 0.0599019, 0.7057489\n    );\n\n    mat3 xyzToPalSecamRgbD50 = mat3( // yes\n        2.9603944, -0.9787684, 0.0844874,\n       -1.4678519,  1.9161415, -0.2545973,\n       -0.4685105,  0.0334540, 1.4216174\n    );\n\n    mat3 ntscRgbToXyz = mat3(\n        1.8464881, -0.9826630,  0.0736477,\n       -0.5521299,  2.0044755, -0.1453020,\n       -0.2766458, -0.0690396,  1.3018376\n    );\n\n    vec3 colors[9];\n    colors[0] = vec3(1.0, 0.0, 0.0);   // Red\n    colors[1] = vec3(0.0, 1.0, 0.0);   // Green\n    colors[2] = vec3(0.0, 0.0, 1.0);   // Blue\n    colors[3] = vec3(1.0, 1.0, 0.0);   // Yellow\n    colors[4] = vec3(0.0, 1.0, 1.0);   // Cyan\n    colors[5] = vec3(1.0, 0.0, 1.0);   // Magenta\n    colors[6] = vec3(0.0, 0.0, 0.0);   // Black\n    colors[7] = vec3(1.0, 1.0, 1.0);   // White\n    colors[8] = vec3(0.5, 0.5, 0.5);   // Gray\n\n    int numBars = 9;\n    float barWidth = 1.0 / float(numBars);\n    int barIndex = int(uv.x / barWidth);\n    cv = colors[barIndex];\n\n    if (uv.y < 0.5) {\n        cv = xyzToPalSecamRgbD50 * cv;\n    }\n    \n    //cv = linearToGamma(cv, 2.5);\n    //cv = gammaToLinear(cv, 2.2);\n    fragColor = vec4(cv, 1);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}