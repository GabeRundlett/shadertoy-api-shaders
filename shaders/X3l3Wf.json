{
    "Shader": {
        "info": {
            "date": "1707997121",
            "description": "More slime (mouseable)",
            "flags": 32,
            "hasliked": 0,
            "id": "X3l3Wf",
            "likes": 17,
            "name": "Slime Among the Columns",
            "published": 3,
            "tags": [
                "slime",
                "dynamics"
            ],
            "usePreview": 0,
            "username": "dr2",
            "viewed": 177
        },
        "renderpass": [
            {
                "code": "#define BP 1\n#define Sn iChannel0\n#define Xu iChannelResolution[0].xy\n#define LI(Jp)if(GB<JX){JX=GB;La=Jp;}\n#define MP min(WI,0)\nvec3 RW,WZ;vec2 UC,XY,SV;float Lv,Pe,VF,Ng,GF;int WI,La,Tm,TY;const float NO=3.1415927,Zw=1.7320508,VJ=128.;vec2 Pz(vec2 Md){vec3 Ko,Dj,Nt;Ko.xz=vec2((1./Zw)*Md.x-(1./3.)*Md.y,(2./3.)*Md.y);Ko.y=-Ko.x-Ko.z;Dj=floor(Ko+0.5);Nt=abs(Dj-Ko);Dj-=step(Nt.yzx,Nt)*step(Nt.zxy,Nt)*dot(Dj,vec3(1.));return Dj.xz;}vec2 FT(vec2 Xq){return vec2(Zw*(Xq.x+0.5*Xq.y),(3./2.)*Xq.y);}float CS(float JK){return(JK!=0.)?sign(JK):1.;}float DR(vec2 Md){return min(Md.x,Md.y);}float YK(vec2 Md){return max(Md.x,Md.y);}float FC(vec3 Md){return min(Md.x,min(Md.y,Md.z));}float Av(vec3 Md){return max(Md.x,max(Md.y,Md.z));}float XL(float HI,float Jt,float Yc){float Xq;Xq=clamp(0.5+0.5*(Jt-HI)/Yc,0.,1.);return mix(Jt-Xq*Yc,HI,Xq);}float Wa(float HI,float Jt,float Yc){return-XL(-HI,-Jt,Yc);}vec2 Iq(vec2 UG,float BL){vec2 EQ;EQ=sin(BL+vec2(0.5*NO,0.));return vec2(dot(UG,vec2(EQ.x,-EQ.y)),dot(UG.yx,EQ));}mat3 HZ(float Zs,float Fh){vec2 Ks,LZ,LM;Ks=vec2(Zs,Fh);LZ=cos(Ks);LM=sin(Ks);return mat3(LZ.y,0.,-LM.y,0.,1.,0.,LM.y,0.,LZ.y)*mat3(1.,0.,0.,0.,LZ.x,-LM.x,0.,LM.x,LZ.x);}const float Pv=43758.54;float Zb(vec2 Md){return fract(sin(mod(dot(Md,vec2(37.,39.)),2.*NO))*Pv);}vec2 AM(vec2 Md){vec2 Rg=vec2(37.,39.);return fract(sin(mod(dot(Md,Rg)+vec2(0.,Rg.x),2.*NO))*Pv);}float Yt(vec2 Md){vec2 JK,Qh,JG;Qh=floor(Md);JG=fract(Md);JG=JG*JG*(3.-2.*JG);JK=mix(AM(Qh),AM(Qh+vec2(0.,1.)),JG.y);return mix(JK.x,JK.y,JG.x);}vec4 Cx(vec3 Md){vec3 SR=vec3(37.,39.,41.);return fract(sin(dot(Md,SR)+vec4(0.,SR.xy,SR.x+SR.y))*Pv);}float Ae(vec3 Md){vec4 JK;vec3 Qh,JG;Qh=floor(Md);JG=fract(Md);JG*=JG*(3.-2.*JG);JK=mix(Cx(Qh),Cx(Qh+vec3(0.,0.,1.)),JG.z);return mix(mix(JK.x,JK.y,JG.x),mix(JK.z,JK.w,JG.x),JG.y);}float Ez(vec2 Md){float CO,BL;CO=0.;BL=1.;for(int RS=0;RS<5;RS++){CO+=BL*Yt(Md);BL*=0.5;Md*=2.;}return CO*(1./1.9375);}float Gk(vec3 Md,vec3 PQ){vec3 Kb;float BL;Kb=vec3(0.);BL=1.;for(int RS=0;RS<5;RS++){Kb+=BL*vec3(Yt(Md.yz),Yt(Md.zx),Yt(Md.xy));BL*=0.5;Md*=2.;}return dot(Kb,abs(PQ));}vec3 Le(vec3 Md,vec3 PQ,float CO){vec4 FX;vec3 Xq;vec2 Ul;Ul=vec2(0.1,0.);for(int RS=MP;RS<4;RS++)FX[RS]=Gk(Md+((RS<2)?((RS==0)?Ul.xyy:Ul.yxy):((RS==2)?Ul.yyx:Ul.yyy)),PQ);Xq=FX.xyz-FX.w;return normalize(PQ+CO*(Xq-PQ*dot(PQ,Xq)));}vec4 Vo(int Ow){float HV;HV=float(Ow);return texture(Sn,(vec2(mod(HV,VJ),floor(HV/VJ))+0.5)/Xu);}float DA(vec3 Md){float GB;GB=Pe;for(int PQ=MP;PQ<Tm;PQ++){GB=XL(GB,length(Md-Vo(TY+3*PQ).xyz)-0.45,1.2);}return GB;}float GW(vec3 EU,vec3 ZN){float Im,GB;Im=0.;for(int RS=MP;RS<120;RS++){GB=DA(EU+Im*ZN);Im+=GB;if(GB<0.001||Im>Pe)break;}return Im;}vec3 Fl(vec3 Md){vec4 FX;vec2 Ul;Ul=1e-3*vec2(1.,-1.);for(int RS=MP;RS<4;RS++)FX[RS]=DA(Md+((RS<2)?((RS==0)?Ul.xxx:Ul.xyy):((RS==2)?Ul.yxy:Ul.yyx)));FX.x=-FX.x;return normalize(2.*FX.yzw-dot(FX,vec4(1.)));}float IH(vec3 EU,vec3 ZN){float QT,GB,Xq;int ML;ML=La;QT=1.;GB=0.05;for(int RS=MP;RS<30;RS++){Xq=DA(EU+GB*ZN);QT=min(QT,smoothstep(0.,0.03*GB,Xq));GB+=Xq;if(QT<0.05||GB>Pe)break;}La=ML;return 0.6+0.4*QT;}float ON(vec3 Md){vec3 UG;float JX,GB,Kb,Ei;JX=Pe;UG=Md;UG.xz-=XY;Kb=length(UG.xz);Ei=abs(UG.y-3.4)-2.4;GB=max(Kb-GF,max(abs(UG.y-3.1)-3.1,-Ei));LI(1);GB=UG.y;LI(2);UG.xz=Iq(UG.xz,2.*NO*(floor(6.*atan(UG.z,-UG.x)/(2.*NO)+0.5)/6.));GB=UG.y-Ng;if(GB<0.1)GB=Wa(-UG.x-0.49*Zw*VF,GB,0.01);LI(3);GB=max(length(vec2(-UG.x-GF+0.14,UG.z))-0.11,Ei);LI(1);UG.y-=6.1-0.1*cos(NO*Kb/(0.5*Zw*VF));GB=length(max(abs(vec2(UG.y,abs(UG.z)-0.1))-vec2(0.08,0.04),0.))-0.01;LI(4);return JX;}void Pi(){XY=FT(UC*VF);Ng=0.04+0.1*Zb(UC+27.1);}float Sj(vec3 EU,vec3 ZN){vec3 TH,OA,HE;vec2 VW[3],Rk,XH;float Im,GB,Kb,Bd;bool ZJ;if(ZN.x==0.)ZN.x=0.0001;if(ZN.z==0.)ZN.z=0.0001;Bd=0.001;VW[0]=vec2(1.,0.);VW[1]=0.5*vec2(1.,Zw);VW[2]=0.5*vec2(1.,-Zw);for(int TD=0;TD<3;TD++)VW[TD]*=CS(dot(VW[TD],ZN.xz));TH=VF/vec3(dot(ZN.xz,VW[0]),dot(ZN.xz,VW[1]),dot(ZN.xz,VW[2]));OA=0.5*Zw-vec3(dot(EU.xz,VW[0]),dot(EU.xz,VW[1]),dot(EU.xz,VW[2]))/VF;Im=0.;UC=Pz(EU.xz/VF);Rk=FT(UC);ZJ=true;for(int RS=MP;RS<320;RS++){if(ZJ){HE=(OA+vec3(dot(Rk,VW[0]),dot(Rk,VW[1]),dot(Rk,VW[2])))*TH;Kb=FC(HE);XH=Zw*VW[(Kb==HE.x)?0:((Kb==HE.y)?1:2)];Pi();ZJ=false;}GB=ON(EU+Im*ZN);if(Im+GB<Kb){Im+=GB;}else{Im=Kb+Bd;UC=Pz((EU.xz+Im*ZN.xz)/VF);Rk+=XH;ZJ=true;}if(GB<Bd||Im>Pe)break;}if(GB>=Bd)Im=Pe;return Im;}vec3 Qy(vec3 Md){vec4 FX;vec2 Ul;Ul=vec2(0.001,-0.001);for(int RS=MP;RS<4;RS++){FX[RS]=ON(Md+((RS<2)?((RS==0)?Ul.xxx:Ul.xyy):((RS==2)?Ul.yxy:Ul.yyx)));}FX.x=-FX.x;return normalize(2.*FX.yzw-dot(FX,vec4(1.)));}\nfloat TU(vec3 EU,vec3 ZN){vec3 Md;vec2 Wn;float QT,GB,Xq;int ML;ML=La;QT=1.;GB=0.02;Wn=vec2(-999.);for(int RS=MP;RS<30;RS++){Md=EU+GB*ZN;UC=Pz(Md.xz/VF);if(UC!=Wn){Wn=UC;Pi();}Xq=ON(Md);QT=min(QT,smoothstep(0.,0.03*GB,Xq));GB+=max(Xq,0.01);if(QT<0.05)break;}La=ML;return 0.6+0.4*QT;}vec3 ED(vec3 ZN,float Nx){vec3 OR,Wr,Zf;vec2 UG;float CO;OR=-1./max(abs(ZN),0.0001);Wr=-sign(ZN)*step(OR.zxy,OR)*step(OR.yzx,OR);Zf=Av(OR)*ZN;UG=atan(vec2(dot(Zf.zxy,Wr),dot(Zf.yzx,Wr)),vec2(1.))/NO;CO=0.57*(Ez(11.*dot(0.5*(Wr+1.),vec3(1.,2.,4.))+131.13*Nx*UG)+Ez(13.*dot(0.5*(Wr+1.),vec3(1.,2.,4.))+171.13*Nx*UG.yx));return 4.*vec3(1.,1.,0.8)*pow(CO,16.);}vec3 Up(vec3 ZN){vec3 Bu,Cg,Ql;float KJ,ID,QC;Cg=normalize(vec3(0.6,0.03,1.));KJ=0.025;Bu=vec3(0.06,0.06,0.03)*pow(clamp(dot(ZN,Cg),0.,1.),16.);ID=dot(ZN,Cg);QC=ID*ID-1.+KJ*KJ;if(QC>0.){QC=ID-sqrt(QC);if(QC>0.){Ql=normalize((QC*ZN-Cg)/KJ);Bu+=vec3(1.,0.9,0.5)*(0.07+0.93*clamp(dot(vec3(-0.77,0.4,0.5),Ql)*(1.-0.3*Ae(8.*Ql)),0.,1.));}}else Bu+=ED(ZN,4.);return Bu;}vec3 SE(vec3 EU,vec3 ZN){vec4 Df;vec3 Bu,Ql,GS;vec2 OA;float SA,QP,QT,UX;GS=Up(ZN);SA=GW(EU,ZN);QP=Sj(EU,ZN);Bu=GS;if(min(SA,QP)<Pe){if(SA<QP){EU+=SA*ZN;Ql=Fl(EU);Df=vec4(0.8,0.4,0.1,0.2)*(0.6+0.4*smoothstep(0.,0.1,length(EU.xz-FT(Pz(EU.xz/VF)*VF)-GF)));La=5;}else{EU+=QP*ZN;OA=vec2(0.);if(La==1){Df=vec4(0.55,0.5,0.5,0.1);OA=vec2(16.,0.5);}else if(La==2){Df=vec4(0.3,0.3,0.3,0.);OA=vec2(2.,2.);}else if(La==3){Df=mix(vec4(0.4,0.5,0.4,0.2),vec4(0.5,0.5,0.55,0.1),smoothstep(0.,0.1,abs(Ez(0.5*EU.xz)-0.4)));OA=vec2(2.,1.);}else if(La==4){Df=vec4(0.5,0.4,0.2,0.1);OA=vec2(4.,0.5);}Ql=Qy(EU);if(OA.x>0.)Ql=Le(OA.x*EU,Ql,OA.y*(1.-smoothstep(0.5,0.7,QP/Pe)));}QT=min(IH(EU+0.01*WZ,WZ),TU(EU+0.01*WZ,WZ));UX=max(dot(Ql,WZ),0.);if(SA<QP)UX*=UX;Bu=Df.rgb*(0.2+0.8*QT*UX)+Df.a*step(0.95,QT)*pow(max(0.,dot(WZ,reflect(ZN,Ql))),32.);if(La==5)Bu+=vec3(0.3,0.,0.)*max(0.,-dot(ZN,Ql));Bu=mix(GS,Bu,min(1.,exp2(1.-0.04*(length(SV-EU.xz)-10.*VF))));}return clamp(Bu,0.,1.);}void mainImage(out vec4 Lr,in vec2 Nc){mat3 Xd;vec4 Go,IY;vec3 Bu,ZN,EU,YO;vec2 NK,CB,Em,Hn[BP],AQ[BP],Mu,Of;float Fh,Zs,Dw,Az,Bh,GB;int Vs,By;\nWI=iFrame;NK=iResolution.xy;CB=2.*Nc.xy/NK-1.;CB.x*=NK.x/NK.y;Lv=iTime;\nDw=NK.x/NK.y;TY=4;Go=Vo(0);VF=Go.x;GF=Go.y;Tm=int(Go.w);Mu=(1./5.)*vec2(Dw,1.);Hn[0]=(1.-Mu.y)*vec2(-Dw,1.);for(int TD=0;TD<BP;TD++)AQ[TD]=abs(CB-Hn[TD])-Mu;By=-1;IY.xyz=Vo(1).xyz;YO=Vo(3).xyz;if(IY.z>0.){By=0;for(int TD=0;TD<BP;TD++){Of=2.*IY.xy-Hn[TD]/vec2(Dw,1.);if(YK(abs(Of))<Mu.y){By=TD+1;Of/=2.*Mu.y;break;}}if(By==0)Of=IY.xy;}Vs=0;for(int TD=0;TD<BP;TD++){if(YK(AQ[TD])<0.){CB=(CB-Hn[TD])/Mu.y;Vs=TD+1;break;}}if(By>0&&(Vs==0||Vs==By))Vs=By-Vs;if(Vs==0){Fh=0.;Zs=0.;GB=6.;}else if(Vs==1){Fh=NO;Zs=-0.15*NO;GB=8.;}if(IY.z>0.&&Vs==By&&length(IY.xy*vec2(Dw,1.)-YO.xy)>YO.z){Fh-=2.*NO*Of.x;Zs-=0.5*NO*Of.y;}else if(By<0&&Vs==0){Zs=NO*(0.01-0.015*(1.+sin(0.1*NO*Lv)));}Zs=clamp(Zs,-0.5*NO,0.01*NO);Xd=HZ(Zs,Fh);SV=Vo(2).xy;EU=vec3(SV,3.5).xzy+Xd*vec3(0.,0.,-GB*VF);Az=3.;Pe=200.;WZ=Xd*normalize(vec3(1.,2.,-1.));const float RB=1.;Bu=vec3(0.);Bh=2.*mod(dot(mod(floor(0.5*(CB+1.)*NK),2.),vec2(1.)),2.)-1.;for(float BL=float(MP);BL<RB;BL++){Em=(CB+step(1.5,RB)*Iq(vec2(0.5/NK.y,0.),Bh*(0.667*BL+0.5)*NO))/Az;Em.x=2.*tan(0.5*atan(Em.x/Dw))*Dw;ZN=Xd*normalize(vec3(Em.xy,1.));Bu+=(1./RB)*SE(EU,ZN);}if(IY.z>0.&&length(0.5*CB-YO.xy)<YO.z&&By==0)Bu=mix(Bu,vec3(1.,1.,0.4),0.3);for(int TD=0;TD<BP;TD++){if(YK(AQ[TD])<0.&&DR(abs(AQ[TD]))*NK.y<3.)Bu=vec3(0.7,0.3,0.3);}Lr=vec4(Bu,1.);}\n",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 258,
                        "published": 1,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer01.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "#define PQ iChannel0\n#define UX iChannelResolution[0].xy\n#define Yt min(AM,0)\nfloat IY,KJ,Cx,Zs,TD;int AM,Zb,RB;const float FT=3.1415927,Cg=1.7320508,Tm=128.;vec2 HE(vec2 Ei){vec3 GS,Ow,Rg;GS.xz=vec2((1./Cg)*Ei.x-(1./3.)*Ei.y,(2./3.)*Ei.y);GS.y=-GS.x-GS.z;Ow=floor(GS+0.5);Rg=abs(Ow-GS);Ow-=step(Rg.yzx,Rg)*step(Rg.zxy,Rg)*dot(Ow,vec3(1.));return Ow.xz;}vec2 Gk(vec2 Bd){return vec2(Cg*(Bd.x+0.5*Bd.y),(3./2.)*Bd.y);}float ON(vec2 Ei){return max(Ei.x,Ei.y);}vec2 Vo(vec2 ML,float BL){vec2 LZ;LZ=sin(BL+vec2(0.5*FT,0.));return vec2(dot(ML,vec2(LZ.x,-LZ.y)),dot(ML.yx,LZ));}const float Ko=43758.54;float CO(vec2 Ei){return fract(sin(mod(dot(Ei,vec2(37.,39.)),2.*FT))*Ko);}vec3 Ez(float Ei){return fract(sin(mod(Ei+vec3(37.,39.,41.),2.*FT))*Ko);}vec4 Nc(int HV){float GB;GB=float(HV);return texture(PQ,(vec2(mod(GB,Tm),floor(GB/Tm))+0.5)/UX);}void Av(int HV,vec4 WI,inout vec4 Bu,vec2 Df){vec2 NK;float GB;GB=float(HV);NK=abs(Df-vec2(mod(GB,Tm),floor(GB/Tm))-0.5);if(max(NK.x,NK.y)<0.5)Bu=WI;}void FC(int Qy,out vec3 Qh,out vec3 Ae,out vec3 GW){vec3 RS,BP,IH,Rg,Wn,Dw,DA;float Im,Pe,Ul,QP,SA,EQ,JX,XY,XH,WZ,ZJ,VW,SR,UC;Im=500.;Pe=10.;QP=0.1;SA=1.;Ul=0.5;JX=0.5;XY=0.2;EQ=0.5;XH=10.;Qh=Nc(RB+3*Qy).xyz;Ae=Nc(RB+3*Qy+1).xyz;GW=Nc(RB+3*Qy+2).xyz;Dw=vec3(0.);DA=vec3(0.);for(int Xq=Yt;Xq<Zb;Xq++){RS=Nc(RB+3*Xq).xyz;Rg=Qh-RS;WZ=length(Rg);if(Xq!=Qy&&WZ<1.){ZJ=Im*(1./WZ-1.);BP=Nc(RB+3*Xq+1).xyz;IH=Nc(RB+3*Xq+2).xyz;Wn=Ae-BP;SR=dot(Rg,Wn)/(WZ*WZ);ZJ=max(ZJ-Pe*SR,0.);Dw+=ZJ*Rg;Wn-=SR*Rg+cross(0.5*(GW+IH),Rg);VW=min(Ul,QP*abs(ZJ)*WZ/max(0.001,length(Wn)));Dw-=VW*Wn;DA+=(VW/WZ)*cross(Rg,Wn);}Dw+=((Xq/(Zb/20)==Qy/(Zb/20)&&abs(float(Xq-Qy))<=2.)?1.:0.002)*XY*(RS-Qh);}Rg.xz=vec2(0.);Rg.y=Qh.y+0.5;WZ=length(Rg);if(WZ<1.){ZJ=Im*(1./WZ-1.);Wn=Ae;SR=dot(Rg,Wn)/(WZ*WZ);ZJ=max(ZJ-Pe*SR,0.);Dw+=ZJ*Rg;Wn-=SR*Rg+cross(GW,Rg);VW=min(Ul,SA*abs(ZJ)*WZ/max(0.001,length(Wn)));Dw-=VW*Wn;DA+=(VW/WZ)*cross(Rg,Wn);}Rg.xz=Qh.xz-Gk(HE(Qh.xz/Zs)*Zs);Rg.y=0.;WZ=length(Rg);if(WZ<0.5+TD){Rg.xz/=WZ;Dw.xz+=(0.5*Im*(0.5+TD-WZ)-Pe*dot(Ae.xz,Rg.xz))*Rg.xz;}Dw+=vec3(0.,-XH,JX)-EQ*vec3(1.,5.,1.)*Ae;UC=0.02;Ae+=UC*Dw;Qh+=UC*Ae;GW+=UC*DA/0.1;}void Lr(int Qy,out vec3 Qh,out vec3 Ae,out vec3 GW){float Sj;Sj=float(Qy);Qh.xz=0.7*Sj*vec2(1.,-1.)+vec2(-20.,20.);Qh.y=3.;Ae=Ez(Sj+KJ)-0.5;GW=vec3(0.);}vec2 Mu(float Hn){vec2 r;float Of;Of=mod(Hn,4.);if(Of<1.)r=mix(vec2(Cg*0.5,-0.5),vec2(Cg*0.5,0.5),Of);else if(Of<2.)r=mix(vec2(Cg*0.5,0.5),vec2(0.,1.),Of-1.);else if(Of<3.)r=mix(vec2(0.,1.),vec2(0.,2.),Of-2.);else r=mix(vec2(0.,2.),vec2(Cg*0.5,2.5),Of-3.);r+=vec2(0.001,3.*floor(Hn/4.));return r;}void mainImage(out vec4 LI,in vec2 Nt){vec4 TU,VF,DR;vec3 Qh,Ae,GW,Fl;vec2 JG,ID,YK,Jp;float Fh,Ks;int Qy,La;bool Pv;JG=floor(Nt);RB=4;Zb=60;La=int(JG.x+Tm*JG.y);if(JG.x>=Tm||La>=RB+3*Zb)discard;\nAM=iFrame;ID=iResolution.xy;IY=iTime;KJ=iDate.w;TU=iMouse;TU.xy=TU.xy/ID-0.5;\nFh=ID.x/ID.y;if(La>=RB)Qy=(La-RB)/3;else Qy=-1;Pv=(AM<=1);Zs=4.;TD=0.8;Fl=vec3(0.48*Fh,0.46,0.03);if(!Pv){Cx=Nc(0).z;++Cx;VF.z=Nc(1).z;if(TU.z>0.&&VF.z<0.&&length(TU.xy*vec2(Fh,1.)-Fl.xy)<Fl.z&&Cx>100.)Pv=true;}if(Pv)Cx=0.;if(Qy>=0){if(Pv)Lr(Qy,Qh,Ae,GW);else FC(Qy,Qh,Ae,GW);}if(La<RB){Ks=0.;for(int Xq=Yt;Xq<Zb;Xq++)Ks+=Nc(RB+3*Xq).z;Ks/=float(Zb);Jp=Zs*Mu(Ks/3.);}if (La==0)DR=vec4(Zs,TD,Cx,float(Zb));else if(La==1)DR=vec4(TU.xyz,0.);else if(La==2)DR=vec4(Jp,0.,0.);else if(La==3)DR=vec4(Fl,0.);else if(La>=RB){Qy=La-(RB+3*Qy);DR=(Qy==0)?vec4(Qh,0.):((Qy==1)?vec4(Ae,0.):vec4(GW,0.));}Av(La,DR,LI,Nt);}\n",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 258,
                        "published": 1,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer01.png"
                    }
                ],
                "name": "Buffer A",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 257
                    }
                ],
                "type": "buffer"
            },
            {
                "code": "#define PQ iChannel0\n#define UX iChannelResolution[0].xy\n#define Yt min(AM,0)\nfloat IY,KJ,Cx,Zs,TD;int AM,Zb,RB;const float FT=3.1415927,Cg=1.7320508,Tm=128.;vec2 HE(vec2 Ei){vec3 GS,Ow,Rg;GS.xz=vec2((1./Cg)*Ei.x-(1./3.)*Ei.y,(2./3.)*Ei.y);GS.y=-GS.x-GS.z;Ow=floor(GS+0.5);Rg=abs(Ow-GS);Ow-=step(Rg.yzx,Rg)*step(Rg.zxy,Rg)*dot(Ow,vec3(1.));return Ow.xz;}vec2 Gk(vec2 Bd){return vec2(Cg*(Bd.x+0.5*Bd.y),(3./2.)*Bd.y);}float ON(vec2 Ei){return max(Ei.x,Ei.y);}vec2 Vo(vec2 ML,float BL){vec2 LZ;LZ=sin(BL+vec2(0.5*FT,0.));return vec2(dot(ML,vec2(LZ.x,-LZ.y)),dot(ML.yx,LZ));}const float Ko=43758.54;float CO(vec2 Ei){return fract(sin(mod(dot(Ei,vec2(37.,39.)),2.*FT))*Ko);}vec3 Ez(float Ei){return fract(sin(mod(Ei+vec3(37.,39.,41.),2.*FT))*Ko);}vec4 Nc(int HV){float GB;GB=float(HV);return texture(PQ,(vec2(mod(GB,Tm),floor(GB/Tm))+0.5)/UX);}void Av(int HV,vec4 WI,inout vec4 Bu,vec2 Df){vec2 NK;float GB;GB=float(HV);NK=abs(Df-vec2(mod(GB,Tm),floor(GB/Tm))-0.5);if(max(NK.x,NK.y)<0.5)Bu=WI;}void FC(int Qy,out vec3 Qh,out vec3 Ae,out vec3 GW){vec3 RS,BP,IH,Rg,Wn,Dw,DA;float Im,Pe,Ul,QP,SA,EQ,JX,XY,XH,WZ,ZJ,VW,SR,UC;Im=500.;Pe=10.;QP=0.1;SA=1.;Ul=0.5;JX=0.5;XY=0.2;EQ=0.5;XH=10.;Qh=Nc(RB+3*Qy).xyz;Ae=Nc(RB+3*Qy+1).xyz;GW=Nc(RB+3*Qy+2).xyz;Dw=vec3(0.);DA=vec3(0.);for(int Xq=Yt;Xq<Zb;Xq++){RS=Nc(RB+3*Xq).xyz;Rg=Qh-RS;WZ=length(Rg);if(Xq!=Qy&&WZ<1.){ZJ=Im*(1./WZ-1.);BP=Nc(RB+3*Xq+1).xyz;IH=Nc(RB+3*Xq+2).xyz;Wn=Ae-BP;SR=dot(Rg,Wn)/(WZ*WZ);ZJ=max(ZJ-Pe*SR,0.);Dw+=ZJ*Rg;Wn-=SR*Rg+cross(0.5*(GW+IH),Rg);VW=min(Ul,QP*abs(ZJ)*WZ/max(0.001,length(Wn)));Dw-=VW*Wn;DA+=(VW/WZ)*cross(Rg,Wn);}Dw+=((Xq/(Zb/20)==Qy/(Zb/20)&&abs(float(Xq-Qy))<=2.)?1.:0.002)*XY*(RS-Qh);}Rg.xz=vec2(0.);Rg.y=Qh.y+0.5;WZ=length(Rg);if(WZ<1.){ZJ=Im*(1./WZ-1.);Wn=Ae;SR=dot(Rg,Wn)/(WZ*WZ);ZJ=max(ZJ-Pe*SR,0.);Dw+=ZJ*Rg;Wn-=SR*Rg+cross(GW,Rg);VW=min(Ul,SA*abs(ZJ)*WZ/max(0.001,length(Wn)));Dw-=VW*Wn;DA+=(VW/WZ)*cross(Rg,Wn);}Rg.xz=Qh.xz-Gk(HE(Qh.xz/Zs)*Zs);Rg.y=0.;WZ=length(Rg);if(WZ<0.5+TD){Rg.xz/=WZ;Dw.xz+=(0.5*Im*(0.5+TD-WZ)-Pe*dot(Ae.xz,Rg.xz))*Rg.xz;}Dw+=vec3(0.,-XH,JX)-EQ*vec3(1.,5.,1.)*Ae;UC=0.02;Ae+=UC*Dw;Qh+=UC*Ae;GW+=UC*DA/0.1;}void Lr(int Qy,out vec3 Qh,out vec3 Ae,out vec3 GW){float Sj;Sj=float(Qy);Qh.xz=0.7*Sj*vec2(1.,-1.)+vec2(-20.,20.);Qh.y=3.;Ae=Ez(Sj+KJ)-0.5;GW=vec3(0.);}vec2 Mu(float Hn){vec2 r;float Of;Of=mod(Hn,4.);if(Of<1.)r=mix(vec2(Cg*0.5,-0.5),vec2(Cg*0.5,0.5),Of);else if(Of<2.)r=mix(vec2(Cg*0.5,0.5),vec2(0.,1.),Of-1.);else if(Of<3.)r=mix(vec2(0.,1.),vec2(0.,2.),Of-2.);else r=mix(vec2(0.,2.),vec2(Cg*0.5,2.5),Of-3.);r+=vec2(0.001,3.*floor(Hn/4.));return r;}void mainImage(out vec4 LI,in vec2 Nt){vec4 TU,VF,DR;vec3 Qh,Ae,GW,Fl;vec2 JG,ID,YK,Jp;float Fh,Ks;int Qy,La;bool Pv;JG=floor(Nt);RB=4;Zb=60;La=int(JG.x+Tm*JG.y);if(JG.x>=Tm||La>=RB+3*Zb)discard;\nAM=iFrame;ID=iResolution.xy;IY=iTime;KJ=iDate.w;TU=iMouse;TU.xy=TU.xy/ID-0.5;\nFh=ID.x/ID.y;if(La>=RB)Qy=(La-RB)/3;else Qy=-1;Pv=(AM<=1);Zs=4.;TD=0.8;Fl=vec3(0.48*Fh,0.46,0.03);if(!Pv){Cx=Nc(0).z;++Cx;VF.z=Nc(1).z;if(TU.z>0.&&VF.z<0.&&length(TU.xy*vec2(Fh,1.)-Fl.xy)<Fl.z&&Cx>100.)Pv=true;}if(Pv)Cx=0.;if(Qy>=0){if(Pv)Lr(Qy,Qh,Ae,GW);else FC(Qy,Qh,Ae,GW);}if(La<RB){Ks=0.;for(int Xq=Yt;Xq<Zb;Xq++)Ks+=Nc(RB+3*Xq).z;Ks/=float(Zb);Jp=Zs*Mu(Ks/3.);}if (La==0)DR=vec4(Zs,TD,Cx,float(Zb));else if(La==1)DR=vec4(TU.xyz,0.);else if(La==2)DR=vec4(Jp,0.,0.);else if(La==3)DR=vec4(Fl,0.);else if(La>=RB){Qy=La-(RB+3*Qy);DR=(Qy==0)?vec4(Qh,0.):((Qy==1)?vec4(Ae,0.):vec4(GW,0.));}Av(La,DR,LI,Nt);}\n",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Buffer B",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 258
                    }
                ],
                "type": "buffer"
            }
        ],
        "ver": "0.1"
    }
}