{
    "Shader": {
        "info": {
            "date": "1600198845",
            "description": "Straw Hat Pirates flag",
            "flags": 64,
            "hasliked": 0,
            "id": "tlBfDh",
            "likes": 7,
            "name": "BC: Straw Hat Pirates",
            "published": 3,
            "tags": [
                "2d",
                "vector",
                "drawing",
                "fanart",
                "onepiece"
            ],
            "usePreview": 0,
            "username": "BackwardsCap",
            "viewed": 502
        },
        "renderpass": [
            {
                "code": "float hatline(vec2 p, float ta, float tb, float rb)\n{\n    return SS(arc(p,vec2(sin(ta),cos(ta)),vec2(sin(tb),cos(tb)), 0.5, rb));\n}\n\nvoid mainImage( out vec4 c, in vec2 f )\n{\n    vec2 p = (2.*f-R)/R.y;\n    \n    //flag wave inspiration from https://www.shadertoy.com/view/tl2fRm\n    float w = cos(p.y + p.x - iTime + cos(p.x * 2.14 + 4.2 * p.y)+sin(p.x*.8));\n    p *= 1. + (.03 - .03 * w);\n\n    vec2 ap= abs(p);\n    p.y-=.25;\n    vec2 mp = vec2(abs(p.x),p.y);\n    \n    //hat\n    float dout = SS(1.0-circ(p,-.36));\n    float d = SS(circ(p,.6))*float(p.y>.05);    \n    vec2 op = p-vec2(0.05,.1);\n    float ta = .5775;\n    float tb = .15;\n    float rb = .015;\n    float a = hatline(op, ta, tb, rb);\n    op.x-=.1;\n    tb = .1;\n    ta = .5;\n    float a2 = hatline(op, ta, tb, rb);    \n    op.x-=.1;\n    tb = .05;\n    ta = .45;\n    float a3 = hatline(op, ta, tb, rb);\n    op.x+=.3;\n    tb = .13;\n    ta = 2.585;\n    float a4 = hatline(op, ta, tb, rb);\n    op.x+=.12;\n    tb = .055;\n    ta = 2.65;\n    float a5 = hatline(op, ta, tb, rb);\n    float loff = .15;\n    float lo = SS(length(p.y-loff)-.11);\n    float l = SS(length(p.y-loff)-.075)*d;\n    float b = SS(box(p,vec2(.9,.0))-.035);\n    \n    //skull\n    float s = SS(circ(p,.6)) * (1.0-SS(length(p.y)-.075));\n    float eyes = SS(circ(mp-vec2(.23,-.27),.165));\n    float nose = SS(circ((p+vec2(0,.48))/vec2(1.3,1),.05));\n    \n    //jaw and teeth\n    float jaw = SS(box(p+vec2(0,.725),vec2(0.01,0.05))-.425*(abs(p.y)/2.+.45))*dout;\n    float jawout = SS(box(p+vec2(0,.725),vec2(0.01,0.05))-.45*(abs(p.y)/2.+.47));\n    float t1 = .79, td = .035;\n    vec2 tt = p/vec2(.98,1.)+vec2(0,.02);\n    float tee = SS( circ(tt,t1)) - SS( circ(tt,t1-td));\n    float t2 = .95, t2d = .035;\n    float tee2 = SS( circ(tt,t2)) - SS( circ(tt,t2-t2d));\n    float g = SS(length(p.x)-.015) * float(p.y<-.61 && p.y > -.95);\n    vec2 rp = (p+vec2(.075,0))*rot(.15);\n    float g2 = SS(length(rp.x)-.015) * float(rp.y<-.61 && rp.y > -.95);\n    vec2 rp2 = (p-vec2(.075,0))*rot(-.15);\n    float g3 = SS(length(rp2.x)-.015) * float(rp2.y<-.61 && rp2.y > -.95);\n    \n    //cross bones\n    ap = ap-vec2(.775);\n    ap.x+= (p.y<0.?.1:-.1);\n    float bo = SS(length(ap+vec2(-0.075,0.075))-.125);\n    float bo2 = SS(length(ap-vec2(-0.075,.075))-.125);    \n    vec2 r2p = (p*rot(.79))-vec2(.25,0.);\n    float bol = SS(length(r2p.x)-.08)*float(r2p.y>-1.2 && r2p.y<1.);\n    vec2 r3p = (p*rot(-.79))+vec2(.25,0);\n    float bol2 = SS(length(r3p.x)-.08)*float(r3p.y>-1.2 && r3p.y<1.);\n\n    //coloring\n    vec3 col = vec3(0);\n    vec3 ylw = vec3(1.,.95,0.2);\n\n    col = mix(col, vec3(1), s);\n    col = mix(col, vec3(1), jaw);\n    col = mix(col, vec3(0), tee);\n    col = mix(col, vec3(0), tee2);\n    col = mix(col,vec3(0), g);\n    col = mix(col,vec3(0), g2);\n    col = mix(col,vec3(0), g3);\n    \n   \tcol = mix(col, ylw, d);\n    col = mix(col, vec3(0), a);\n    col = mix(col, vec3(0), a2);\n    col = mix(col, vec3(0), a3);\n    col = mix(col, vec3(0), a4);\n    col = mix(col, vec3(0), a5);\n    \n    col = mix(col, vec3(0), lo);\n\tcol = mix(col, vec3(1,0,0), l);\n    col = mix(col, ylw, b);\n    col = mix(col, vec3(0), eyes);\n    col = mix(col, vec3(0), nose);\n    \n    vec3 bones =  vec3(bo);\n    bones = mix(bones,vec3(1), bo2);\n    bones = mix(bones,vec3(1), bol);\n    bones = mix(bones,vec3(1), bol2);\n    bones = mix(bones, vec3(0), 1.0-dout);\n    bones = mix(bones, vec3(0), jawout);\n    \n    col+=bones;\n    \n    c.rgb = col+w*.15;\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "musicstream",
                        "id": 23940,
                        "published": 0,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "https://soundcloud.com/leonardo-wyatt/one-piece-soundtrack-the-very"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "#define R iResolution.xy\n\n#define SS(U) smoothstep(3./R.y,0.,U)\n\nfloat box(vec2 p, vec2 b)\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nfloat circ(vec2 p, float r)\n{\n    return length(p)-r;\n}\n\n//https://iquilezles.org/articles/distfunctions2d\nfloat arc(vec2 p, vec2 sa, vec2 sb, float ra, float rb)\n{\n    p*=mat2(sa.x,sa.y,-sa.y,sa.x);\n    p.x = abs(p.x);\n    float q = (sb.y*p.x>sb.x*p.y) ? dot(p.xy, sb) : length(p.xy);\n    return sqrt( dot(p,p)+ra*ra-2.0*ra*q)-rb;\n}\n\n\n\nmat2 rot(float a)\n{\n    float c = cos(a), s=sin(a);\n    return mat2(c, -s, s, c);\n}",
                "description": "",
                "inputs": [],
                "name": "Common",
                "outputs": [],
                "type": "common"
            }
        ],
        "ver": "0.1"
    }
}