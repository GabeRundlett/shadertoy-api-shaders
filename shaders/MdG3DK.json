{
    "Shader": {
        "info": {
            "date": "1456409623",
            "description": "My dream job is being the guy who rates sudoku puzzles easy/hard but the newspaper probably cut that guy's job to hire another \"reporter\" and now they just run the same puzzles with the numbers jumbled. Dreams shatter. ",
            "flags": 48,
            "hasliked": 0,
            "id": "MdG3DK",
            "likes": 22,
            "name": "Daily Sudoku",
            "published": 3,
            "tags": [
                "game",
                "digits",
                "puzzle"
            ],
            "usePreview": 0,
            "username": "eiffie",
            "viewed": 1495
        },
        "renderpass": [
            {
                "code": "//Daily Sudoku by eiffie\n//Not a sudoku solver or puzzle creator! This just jumbles the same puzzle until you think it is\n//different. :) The GUI works like this.\n//Draw all over the place with the mouse (whatever marks you prefer)\n//Press \"E\" while pressing mouse button to erase marks.\n//Click in a square and type a number if you think you know it.\n//Press \"A\" to cheat... I mean check your answer when completed.\n\n#define KEY_A 65\n\nbool KeyDown(in int key){\n\treturn (texture(iChannel1,vec2((float(key)+0.5)/256.0, 0.25)).x>0.0);\n}\nfloat Tube(vec2 pa, vec2 ba){return length(pa-ba*clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0));}\nfloat Arc(in vec2 p, float s, float e, float r1, float r2) {float t=clamp(atan(p.y*r1,p.x*r2),s,e);return length(p-vec2(r1*cos(t),r2*sin(t)));}\nfloat num(vec2 p, int n){\n    p.x*=1.4;\n\tvec2 a=abs(p),a4=a-0.4;\n\tfloat d;\n\tif(n==0)return abs(length(p)-0.4); \n\tif(n==1)return max(a.x,a4.y);\n\tif(n==2){\n\t\td=Arc(p-vec2(0.0,0.2),-1.57,2.4,0.4,0.2);\n\t\td=min(d,Arc(p+vec2(0.0,0.4),1.57,3.14,0.4,0.4));\n\t\td=min(d,max(a4.x,abs(p.y+0.4)));\n\t\treturn d;\n\t}\n\tif(n==3){\n\t\td=Arc(p-vec2(0.0,0.2),-1.57,2.4,0.4,0.2);\n\t\td=min(d,Arc(p+vec2(0.0,0.2),-2.4,1.57,0.4,0.2));\n\t\treturn d;\n\t}\n\tif(n==4){\n\t\td=max(a4.x,a.y);\n\t\td=min(d,max(abs(p.x-0.4),a4.y));\n\t\td=min(d,Tube(p-vec2(-0.4,0.0),vec2(0.6,0.4)));//split the difference in 4's\n\t\treturn d;\n\t}\n\tif(n==5){\n\t\td=max(a4.x,abs(p.y-0.4));\n\t\td=min(d,max(abs(p.x+0.4),abs(p.y-0.2)-0.2));\n\t\td=min(d,Arc(p-vec2(-0.05,-0.15),-2.45,2.45,0.45,0.3));\n\t\treturn d;\n\t}\n\tif(n==6){\n\t\td=Arc(p-vec2(0.0,-0.2),-3.1416,3.1416,0.4,0.2);\n\t\td=min(d,Arc(p-vec2(0.2,-0.2),1.57,3.1416,0.6,0.6));\n\t\treturn d;\n\t}\n\tif(n==7){\n\t\td=max(a4.x,abs(p.y-0.4));\n\t\td=min(d,Tube(p-vec2(-0.4,-0.4),vec2(0.8,0.8)));\n\t\treturn d;\n\t}\n\tif(n==8){\n\t\td=Arc(p-vec2(0.0,0.2),-3.1416,3.1416,0.4,0.2);\n\t\td=min(d,Arc(p-vec2(0.0,-0.2),-3.1416,3.1416,0.4,0.2));\n\t\treturn d;\n\t}\n\tif(n==9){\n\t\td=Arc(p-vec2(0.0,0.2),-3.1416,3.1416,0.4,0.2);\n\t\td=min(d,Arc(p-vec2(-0.2,0.2),-1.8,0.0,0.6,0.6));\n\t\treturn d;\n\t}\n    return 1.0;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n\tvec2 uv=(fragCoord.xy-0.5*iResolution.xy)/iResolution.yy;\n\tuv+=0.5;//now 0-1 on centered grid\n\tvec3 col=texture(iChannel0,fragCoord.xy/iResolution.xy).rgb;\n\tif(uv.x<0.0 || uv.x>1.0){fragColor=vec4(col,1.0);return;}\n\t\n\tvec2 p=abs(mod(uv+1.0/6.0,1.0/3.0)-1.0/6.0);\n\tfloat d=min(p.x,p.y);\n\td=smoothstep(0.0,0.01,d);\n\tp=abs(mod(uv+1.0/18.0,1.0/9.0)-1.0/18.0);\n\tfloat d2=min(p.x,p.y);\n\td2=smoothstep(0.0,0.003,d2);\n\tp=floor(uv*vec2(3.0,9.0));\n\tvec3 c=-texture(iChannel0,(p+0.5)/iResolution.xy).rgb;\n\tfloat d3=10.0;\n\tfor(int i=0;i<3;i++){\n\t\tif(KeyDown(KEY_A))c.x=abs(c.x);\n\t\tif(c.x>0.0){\n\t\t\td3=min(d3,num((uv-(p/vec2(3.0,9.0)+vec2(float(i)/9.0,0.0)))*12.0-vec2(0.65),int(c.x)));\n\t\t}\n\t\tc.xy=c.yz;\n\t}\n\td3=smoothstep(0.0,0.1,d3);\n\tcol=min(col,vec3(min(d,min(d2,d3))));\n\tfragColor=vec4(col,1.0);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 1,
                        "ctype": "keyboard",
                        "id": 33,
                        "published": 1,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/presets/tex00.jpg"
                    },
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "#define KEY_E (65+4)\nbool KeyDown(in int key){\n\treturn (texture(iChannel1,vec2((float(key)+0.5)/256.0, 0.25)).x>0.0);\n}\n\nint NumDown(){\n\tint r=0;\n\tfor(int i=1;i<10;i++){\n\t\tif(KeyDown(48+i)){r=i;break;}\n\t}\n\treturn r;\n}\n#define S(X,Y,c) if(i.x==X && i.y==Y)return c\nvec3 setup(vec2 U){// puzzle from http://school.maths.uwa.edu.au/~gordon/sudokumin.php\n\tivec2 i=ivec2(floor(U));\n\tS(0,0,vec3(6,9,3));\n\tS(1,0,vec3(7,8,4));\n\tS(2,0,vec3(5,-1,2));\n\tS(0,1,vec3(-4,8,7));\n\tS(1,1,vec3(5,1,2));\n\tS(2,1,vec3(9,3,6));\n\tS(0,2,vec3(1,-2,5));\n\tS(1,2,vec3(9,6,3));\n\tS(2,2,vec3(8,7,4));\n\tS(0,3,vec3(9,3,2));\n\tS(1,3,vec3(6,-5,1));\n\tS(2,3,vec3(-4,8,-7));\n\tS(0,4,vec3(5,6,-8));\n\tS(1,4,vec3(2,4,7));\n\tS(2,4,vec3(-3,9,1));\n\tS(0,5,vec3(7,4,-1));\n\tS(1,5,vec3(3,-9,8));\n\tS(2,5,vec3(6,2,5));\n\tS(0,6,vec3(-3,1,9));\n\tS(1,6,vec3(-4,7,5));\n\tS(2,6,vec3(-2,6,8));\n\tS(0,7,vec3(8,-5,6));\n\tS(1,7,vec3(-1,2,9));\n\tS(2,7,vec3(7,4,3));\n\tS(0,8,vec3(2,7,4));\n\tS(1,8,vec3(-8,3,-6));\n\tS(2,8,vec3(1,5,9));\n    return vec3(0.0);\n}\n\nfloat Tube(vec2 pa, vec2 ba){return length(pa-ba*clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0));}\nfloat Arc(in vec2 p, float s, float e, float r1, float r2) {float t=clamp(atan(p.y*r1,p.x*r2),s,e);return length(p-vec2(r1*cos(t),r2*sin(t)));}\nfloat num(vec2 p, int n){\n    p.x*=1.4;\n\tvec2 a=abs(p),a4=a-0.4;\n\tfloat d;\n\tif(n==0)return abs(length(p)-0.4); \n\tif(n==1)return max(a.x,a4.y);\n\tif(n==2){\n\t\td=Arc(p-vec2(0.0,0.2),-1.57,2.4,0.4,0.2);\n\t\td=min(d,Arc(p+vec2(0.0,0.4),1.57,3.14,0.4,0.4));\n\t\td=min(d,max(a4.x,abs(p.y+0.4)));\n\t\treturn d;\n\t}\n\tif(n==3){\n\t\td=Arc(p-vec2(0.0,0.2),-1.57,2.4,0.4,0.2);\n\t\td=min(d,Arc(p+vec2(0.0,0.2),-2.4,1.57,0.4,0.2));\n\t\treturn d;\n\t}\n\tif(n==4){\n\t\td=max(a4.x,a.y);\n\t\td=min(d,max(abs(p.x-0.4),a4.y));\n\t\td=min(d,Tube(p-vec2(-0.4,0.0),vec2(0.6,0.4)));//split the difference in 4's\n\t\treturn d;\n\t}\n\tif(n==5){\n\t\td=max(a4.x,abs(p.y-0.4));\n\t\td=min(d,max(abs(p.x+0.4),abs(p.y-0.2)-0.2));\n\t\td=min(d,Arc(p-vec2(-0.05,-0.15),-2.45,2.45,0.45,0.3));\n\t\treturn d;\n\t}\n\tif(n==6){\n\t\td=Arc(p-vec2(0.0,-0.2),-3.1416,3.1416,0.4,0.2);\n\t\td=min(d,Arc(p-vec2(0.2,-0.2),1.57,3.1416,0.6,0.6));\n\t\treturn d;\n\t}\n\tif(n==7){\n\t\td=max(a4.x,abs(p.y-0.4));\n\t\td=min(d,Tube(p-vec2(-0.4,-0.4),vec2(0.8,0.8)));\n\t\treturn d;\n\t}\n\tif(n==8){\n\t\td=Arc(p-vec2(0.0,0.2),-3.1416,3.1416,0.4,0.2);\n\t\td=min(d,Arc(p-vec2(0.0,-0.2),-3.1416,3.1416,0.4,0.2));\n\t\treturn d;\n\t}\n\tif(n==9){\n\t\td=Arc(p-vec2(0.0,0.2),-3.1416,3.1416,0.4,0.2);\n\t\td=min(d,Arc(p-vec2(-0.2,0.2),-1.8,0.0,0.6,0.6));\n\t\treturn d;\n\t}\n    return 1.0;\n}\n#define OLD_MOUSE vec2(0.5,9.5)\nfloat rnd,GoldenAngle;\nfloat rand(){return fract(rnd+=GoldenAngle);}\nvoid randomize(float t){\n\tGoldenAngle=2.0-0.5*(1.0+sqrt(5.0));rnd=fract(t);\n}\n#define SWAP(a) if(abs(a)==n1)a=sign(a)*n2;else if(abs(a)==n2)a=sign(a)*n1\nvoid mainImage(out vec4 O, in vec2 U){\n\tO=texture(iChannel0,U/iResolution.xy);\n\tif(iFrame==0){\n\t\tO=vec4(1.0);\n\t\tif(U==OLD_MOUSE)O=iMouse;\n\t\tif(U.x>3.0 || U.y>9.0)return;\n\t\tO.rgb=setup(U);\n\t}else if(iFrame<50){//do swaps\n\t\tif(U.x>3.0 || U.y>9.0)return;\n\t\trandomize(iTime-iDate.w+float(iFrame)*0.417);\n\t\tif(rand()<0.05){\n\t\t\tvec2 u=U;u.y=mod(u.y+3.0,9.0);\n\t\t\tO=texture(iChannel0,u/iResolution.xy);\n\t\t}else{\n\t\t\tvec2 v=floor(U);\n\t\t\tv+=floor(vec2(rand(),rand())*3.0);\n\t\t\tv=mod(v,vec2(3.0));\n\t\t\tvec2 u=floor(U);\n\t\t\tv=floor(U/3.0)*3.0+mod(mod(u,3.0)+v,3.0);\n\t\t\tO=texture(iChannel0,(v+vec2(0.5))/iResolution.xy);\n\t\t\tfloat n1=1.0+floor(rand()*8.99999),n2=1.0+floor(rand()*8.99999);\n\t\t\tSWAP(O.x);\n\t\t\tSWAP(O.y);\n\t\t\tSWAP(O.z);\n\t\t\tif(rand()*3.0<U.x)O.xy=O.yx;\n\t\t\tif(rand()*3.0<U.x+0.5)O.xz=O.zx;\n\t\t}\n\t}else{\n\t\tint n=NumDown();\n\t\tif(n>0){\n\t\t\tvec2 ms=abs(iMouse.zw);\n\t\t\tms=(ms-0.5*iResolution.xy)/iResolution.yy;\n\t\t\tms+=0.5;//now 0-1\n\t\t\tif(ms.x>0.0 && ms.x<1.0){\n\t\t\t\tvec2 uv=(U-0.5*iResolution.xy)/iResolution.yy;\n\t\t\t\tuv+=0.5;//now 0-1\n\t\t\t\tif(length(ms-uv)<3.0/iResolution.y)O=vec4(1.0);\n\t\t\t\tuv-=floor(ms*vec2(9.0,9.0))/vec2(9.0,9.0);\n\t\t\t\tuv*=12.0;uv-=0.65;\n\t\t\t\tif(max(abs(uv.x),abs(uv.y))<0.5){\n\t\t\t\t\tfloat d=num(uv,n);\n\t\t\t\t\td=smoothstep(0.0,0.05,d);\n\t\t\t\t\tO.rgb=min(O.rgb,vec3(d));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(iMouse.z>0.0 && iMouse.x>3.0){\n\t\t\tvec4 om=texture(iChannel0,OLD_MOUSE/iResolution.xy);\n\t\t\tif(om.z!=iMouse.z)om.xy=iMouse.xy;\n\t\t\tfloat d=Tube(U.xy-iMouse.xy,om.xy-iMouse.xy);\n\t\t\tbool bErase=KeyDown(KEY_E);\n\t\t\td=smoothstep(0.0,bErase?10.0:1.5,d);\n\t\t\tO.rgb=mix(vec3(bErase?1.0:0.0),O.rgb,d);\n\t\t}\n\t\tif(U==OLD_MOUSE)O=iMouse;\n\t}\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 1,
                        "ctype": "keyboard",
                        "id": 33,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/presets/tex00.jpg"
                    },
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Buf A",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 257
                    }
                ],
                "type": "buffer"
            }
        ],
        "ver": "0.1"
    }
}