{
    "Shader": {
        "info": {
            "date": "1573157879",
            "description": "Let's build some knobs...",
            "flags": 0,
            "hasliked": 0,
            "id": "3dtSWl",
            "likes": 21,
            "name": "Knob Plastic Metal",
            "published": 3,
            "tags": [
                "knob"
            ],
            "usePreview": 0,
            "username": "andremichelle",
            "viewed": 610
        },
        "renderpass": [
            {
                "code": "#define PI 3.14159\n#define N 6.\n\n// https://vogerdesign.com/collections/latest-ui-kits/products/dials-light-set-vol-1\n\nconst float r1 = 0.66;\nconst float r2 = 1./r1;\n\nvec4 check(vec2 uv) {\n    return vec4(vec3(.12+0.06*mod(floor(5.0*uv.x)+floor(5.0*uv.y),2.0)), 1.);\n}\n\nvec4 over( in vec4 a, in vec4 b ) {\n    return mix(a, b, 1.-a.w);\n}\n\nfloat nCap(vec2 uv, float angle) {\n    float a = atan(uv.y, uv.x)+angle;\n    float b = a/PI*N/2.-PI*r1*2.0;\n    float f = fract(b);\n    float l = length(uv);\n    float d = sin(f*PI*r2) * step(f, r1);\n    return (1.-d*0.1)*.5-l;\n}\n\nfloat line( in vec2 p, in vec2 a, in vec2 b ) {\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = (fragCoord-iResolution.xy*0.5)/-iResolution.y*2.0;\n    float av = sin(iTime)*PI*.9; // angle value\n    float a = atan(uv.y, uv.x);\n    float l = length(uv);\n\tfloat sCap = nCap(uv, av); // n-gon shape\n\tfloat dCap = nCap(uv+vec2(.0,-.3), av); // shadow\n    float capA = smoothstep(0.001, 0.01, sCap); // fill\n    float capB = smoothstep(.0, .02, 0.01-abs(sCap-.01)); // edge\n    vec3 col0 = vec3(1.,.94, .92);\n    vec3 col1 = vec3(.98,.94, 1.);\n    mat2 m = mat2(cos(av), sin(av), -sin(av), cos(av));\n    \n    vec4 col;\n    \n    float g = -1. + smoothstep(.5, -.5, uv.y) * 2.;\n\tcol = check(uv);\n    col = over(vec4(vec3(0), smoothstep(0.01, 0.08, dCap)*.7), col); // cap shadow\n    col = over(vec4(col0*(.50+g*.2), smoothstep(0.02, 0.01, l-0.47)), col); // cap round\n    col = over(vec4(vec3(0.2), smoothstep(0.02, 0.0, length(uv-vec2(.0,-.447)*m)-.01)), col); // value point\n    col = over(vec4(vec3(0), smoothstep(0.005, 0.002, abs(l-0.48))*.1), col); // cap round edge\n    col = over(vec4(col1*(.70+g*.2)+capB*g*.3, capA), col); // cap + edge\n    col = over(vec4(col1*(.26+sin(a*2.0)*0.15+sin(a*5.0)*0.03)+g*.04, smoothstep(0.02, 0.01, l-0.36)), col); // cap metal\n    col = over(vec4(col0*(.75+g*.25), smoothstep(0.014, 0.001, abs(l-0.36))*.6)*(1.-pow(abs(uv.x), .48)), col); // cap metal edge\n    col = over(vec4(vec3(1.), smoothstep(0.02, 0., line(uv, vec2(.0, -.16)*m, vec2(.0, -.34)*m))*.8), col); // line value\n\n\tfragColor = col;\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}