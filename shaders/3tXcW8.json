{
    "Shader": {
        "info": {
            "date": "1591894738",
            "description": "Lunar Quadrant Glitch - Influenced by the work of flopine and yx aka Luna, You ladies rock!\nResult of improvised live code session on Twitch\nLIVE SHADER CODING, SHADER SHOWDOWN STYLE, EVERY TUESDAYS 21:00 Uk time:\nhttps://www.twitch.tv/evvvvil_",
            "flags": 0,
            "hasliked": 0,
            "id": "3tXcW8",
            "likes": 19,
            "name": "[TWITCH] Lunar Quadrant Glitch",
            "published": 3,
            "tags": [
                "fractal",
                "demoscene",
                "abstract",
                "glitch",
                "glitch",
                "glow",
                "rotating",
                "gyroscope",
                "easing",
                "lunar",
                "twitch",
                "improv",
                "flopine",
                "yx"
            ],
            "usePreview": 1,
            "username": "evvvvil",
            "viewed": 830
        },
        "renderpass": [
            {
                "code": "// Lunar Quadrant Glitch - Result of an improvised live code session on Twitch\n\n// Influenced by the work of flopine and yx aka Luna, you ladies rock!\n\n// LIVE SHADER CODING, SHADER SHOWDOWN STYLE, EVERY TUESDAYS 21:00 Uk time: \n// https://www.twitch.tv/evvvvil_\n\n// \"I've had more prime ministers than Madonna had number one hits.\" - Queen Elizabeth II\n\nvec2 z,v,e=vec2(.0035,-.0035),gpo=vec2(0),gl=vec2(0);float t,tt,b,bb,pi,g,gg,ti;vec3 op,np,bp,cp,pp,po,no,al,ld;\nfloat cx(vec3 p,vec3 r){return max(abs(length(p.yz)-r.x)-r.y,abs(p.x)-r.z);}\nfloat cz(vec3 p,vec3 r){return max(abs(length(p.xy)-r.x)-r.y,abs(p.z)-r.z);}\nmat2 r2(float r){return mat2(cos(r),sin(r),-sin(r),cos(r));}\nvec4 texNoise(vec2 uv){ float f = 0.; f+=texture(iChannel0, uv*.125).r*.5;\n    f+=texture(iChannel0,uv*.25).r*.25;f+=texture(iChannel0,uv*.5).r*.125;f+=texture(iChannel0,uv*1.).r*.125;f=pow(f,1.2);return vec4(f*.45+.05);\n} \nfloat tick(float t){\n  t=fract(t/40.);\n  t=smoothstep(0.,1.,t);\n  t=pow(sin(t*2.*pi),2.);    \n  return t*2.*pi;\n}\nvec2 fb( vec3 p, float mat, float tw) \n{\n  pp=abs(p)-vec3(6,0,0);\n  vec2 h,t=vec2(length(pp)-1.9,6);\n  gl[int(mat)]+=0.1/(0.1+t.x*t.x*20.);\n  h=vec2(cx(pp,vec3(2,.5,.5)),5); t=t.x<h.x?t:h;  \n  h=vec2(length(p)-sin(tt*10.)*10.,6);\n  gl.y+=(0.1/(0.1+h.x*h.x*.1))*(gpo.x-.2)*-10.;\n  h=vec2(cx(pp,vec3(2,.7,.3)),6); t=t.x<h.x?t:h;\n  h=vec2(cx(pp,vec3(2,.8,.1)),3); t=t.x<h.x?t:h;\n  pp=abs(p)-vec3(0,2,0);\n  pp.xz*=r2(sin(pp.y*.12)*2.);\n  h=vec2(cz(pp,vec3(6,.5,.5)),5);h.x*=0.6; t=t.x<h.x?t:h;\n  h=vec2(cz(pp,vec3(6,.3,.7)),6);h.x*=0.6; t=t.x<h.x?t:h;\n  h=vec2(cz(pp,vec3(6,.1,.8)),3);h.x*=0.6; t=t.x<h.x?t:h;\n  np=p;\n  for(int i=0;i<8;i++){\n    np=abs(np);\n    np.xy*=r2(-.1);\n  }\n  h=vec2(length(np.xz)-.35,3);\n  h.x=max(h.x,cz(pp,vec3(6,.7,.5)));\n  h.x=max(h.x,-(length(np.xz)-.2)); t=t.x<h.x?t:h;  \n  h=vec2(length(np.xz),6);\n  h.x=max(h.x,cz(pp+vec3(0,1.5,0),vec3(6.5,1.9,1.5)));  \n  gl[int(mat)]+=0.1/(0.1+h.x/tw*h.x/tw*(40.-39.*abs(cos(pp.x*pp.y*.05-tt*4.))));\n  t=t.x<h.x?t:h; \n  return t;\n}\nvec2 mp( vec3 p ){ \n  op=p;\n  vec4 np=vec4(p,1);\n  float mat,bro;\n  vec2 h,t=vec2(1000);\n  for(int i=0;i<5;i++){     \n    mat=mod(float(i),2.);\n    bro=cos(mat*pi);\n    np.xy*=r2(ti*bro);\n    np.yz*=r2(-ti*bro);\n    h=fb(np.xyz,mat,np.w);\n    h.x/=np.w; t=t.x<h.x?t:h;\n    np*=2.;\n  }\n  return t;\n}\nvec2 tr( vec3 ro, vec3 rd)\n{\n  vec2 h,t= vec2(.1);\n  for(int i=0;i<128;i++){\n    h=mp(ro+rd*t.x);\n    if(h.x<.0001||t.x>30.) break;\n    t.x+=h.x;t.y=h.y;\n  }\n  if(t.x>30.) t.y=0.;\n  return t;\n}\n#define a(d) clamp(mp(po+no*d).x/d,0.,1.)\n#define s(d) smoothstep(0.,1.,mp(po+ld*d).x/d)\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n  vec2 uv=(fragCoord.xy/iResolution.xy-0.5)/vec2(iResolution.y/iResolution.x,1);\n  pi=acos(-1.);\n  tt=mod(iTime,62.83)+3.; ti=tick(tt);\n  gpo=vec2(ceil(sin((sin(tt*5.+cos(tt*12.))))));\n  gpo.y=1.-gpo.y; gpo*=0.2;\n  if(cos(ti)<.7) gpo=vec2(0.2); \n  vec2 tnoi=vec2(texNoise(uv*gpo*17.).r);\n  tnoi+=(ceil(sin(abs(uv.x)*500.*gpo.x-tt*10.))+ceil(sin(abs(uv.y)*500.*gpo.y-tt*10.)))*(gpo.x-gpo.y);\n  v=(gpo-.2)*.2*(tnoi); uv*=1.-(v.y+v.x)*4.;\n  vec3 ro=vec3(0.,0,+11.+4.*cos(tick(tt))),\n  cw=normalize(vec3(0)-ro),cu=normalize(cross(cw,vec3(0,1,0))),cv=normalize(cross(cu,cw)),\n  rd=mat3(cu,cv,cw)*normalize(vec3(uv,.7)),co,fo;\n  ld=normalize(vec3(.1,.5,.3));\n  co=fo=vec3(.1,.03,.15)-length(uv)*.1-rd.y*.15;\n  z=tr(ro,rd);t=z.x;\n  if(z.y>0.){\n    po=ro+rd*t;\n    no=normalize(e.xyy*mp(po+e.xyy).x+e.yyx*mp(po+e.yyx).x+e.yxy*mp(po+e.yxy).x+e.xxx*mp(po+e.xxx).x); \n    al=vec3(.5); \n    if(z.y<5.) al=vec3(0);\n    if(z.y>5.) al=vec3(1);\n    float dif=max(0.,dot(no,ld)),\n    fr=pow(1.+dot(no,rd),4.),\n    sp=pow(max(dot(reflect(-ld,no),-rd),0.),40.);\n    co=mix(sp+mix(vec3(.7),vec3(1),abs(rd))*al*(a(.1)*a(.3)+.2)*(dif+s(.5)),fo,min(fr,.5));\n    co=mix(fo,co,exp(-.0003*t*t*t));\n  }\n  fragColor = vec4(pow(co+gl.x*gpo.x*vec3(1,.4,.2)+gl.y*vec3(.1,.2,.4)*gpo.y,vec3(.45)),1);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 17,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}