{
    "Shader": {
        "info": {
            "date": "1618574522",
            "description": "Mouse controls Sun direction\n\nstill ultra-far from this ref ;-)\n[img]https://www.pausecafein.fr/images/cafein/2021/03/foutrement-interessant/coucher-soleil.jpg[/img]",
            "flags": 0,
            "hasliked": 0,
            "id": "NssSW8",
            "likes": 14,
            "name": "Earth atmosphere from space ",
            "published": 3,
            "tags": [
                "earth",
                "atmosphere",
                "short"
            ],
            "usePreview": 1,
            "username": "FabriceNeyret2",
            "viewed": 582
        },
        "renderpass": [
            {
                "code": "#define C(z)   exp(- 1./vec4(1,.6,.4,1) * H/(z) )        // spectral transmittance for optical depth z\n\nvoid mainImage( out vec4 O, vec2 u )\n{\n    vec2 R = iResolution.xy,\n         U = 1.2* ( 2.*u - R ) / R.y,\n         M = 1.2* ( 2.*iMouse.xy - R ) / R.y;\n\n    float H = .1,                                          // atmosphere thickness ralative to radius\n          r = dot(U,U),\n          d = dot(M,M),\n          t = -.3*iTime,\n          l = dot( vec3(U, sqrt(1.-r)),                    // hit point in Sun frame\n                   iMouse.z > 0.             \n                     ? vec3(M,sqrt(abs(1.-d))*sign(1.-d))  // Sun direction\n                     : vec3(cos(t)*vec2(cos(-.5),sin(-.5)),sin(t))\n                 );\n   \n    O = r < 1. ? ( 1.- C( sqrt(1.-r) )  )                  // atmosphere opacity along ray\n      * smoothstep(-sqrt(2.*H),0.,l) * smoothstep(1.,1.-16./R.y,r) // up to terminator + AA\n                + mix( l * vec4(.4,.4,1,0) ,               // ocean color\n                       2.5*C(max(0.,l)),                   // Sun color seen by clouds and reflected to space\n                       texture(iChannel0,U/vec2(5,1)+vec2(-t/20.,0)).r*smoothstep(1.,0.,abs(U.y))    // cloud layer\n                     )\n               : vec4(0);  \n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 47,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}