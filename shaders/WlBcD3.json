{
    "Shader": {
        "info": {
            "date": "1595535519",
            "description": "I'm a little bit rock and roll",
            "flags": 0,
            "hasliked": 0,
            "id": "WlBcD3",
            "likes": 20,
            "name": "Somewhere In Colorado.",
            "published": 3,
            "tags": [
                "2d",
                "mountains",
                "house",
                "recreation",
                "southpark"
            ],
            "usePreview": 0,
            "username": "Plento",
            "viewed": 556
        },
        "renderpass": [
            {
                "code": "// Cole Peterson (Plento)\n\n#define R iResolution.xy\n#define ss(a, b, t) smoothstep(a, b, t)\n\nmat2 rot(float a) {\n    return mat2(cos(a), -sin(a), sin(a), cos(a));\n}\n\nvec3 hash31(float p){\n   vec3 p3 = fract(vec3(p) * vec3(.1031, .1030, .0973));\n   p3 += dot(p3, p3.yzx+33.33);\n   return fract((p3.xxy+p3.yzz)*p3.zyx); \n}\nfloat sdBox( in vec2 p, in vec2 b ){\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\nfloat box(vec2 uv, vec2 dim, float b){\n    uv = abs(uv);\n    float bx = ss(b, -b, uv.y - dim.y );\n    bx *= ss(b, -b, uv.x - dim.x);\n    return bx;\n}\n\nvec3 frameCol = 0.9*vec3(0.4, 0.3, 0.1);\nvec3 winCol = .8*vec3(0.3, 0.9, 0.9);\n\nvec4 ground(vec2 uv){\n    float y = uv.y + 0.5;\n    float a = 1.-step(.21, y);\n    float sw = .6 * ss(-.1, 0.1, abs(cos(10.*(-uv.x + uv.y*2. + .12))));\n    vec3 col = mix(vec3(.16), mix(vec3(.34), vec3(sw), step(.115, y)), step(.1, y));\n    col = mix(col, vec3(1), step(.21, y));\n    return vec4(col, a);\n}\n\n\nvec4 fence(vec2 uv){\n    float a = ss(.0543,.054, abs(uv.y+.05));\n \tvec3 col = .9*vec3(0.9, 0.76, 0.6) * a;   \n    col *= ss(-.3, .3, abs(sin(uv.x*140.)));\n    return vec4(col, a);\n}\n\n\n\nvec4 mountains(vec2 uv){\n    uv.y -= .12;\n    vec3 col = vec3(0);\n    float a = 0.;\n    float snow = 0.;\n    \n    for(float i = 0.; i < 2.; i++){ \n        uv.x += iTime*.05;\n        \n        float ht = texture(iChannel0, uv*16.).x;\n        \n        float nse = cos(uv.x*14. + i*345.)*.01 + cos(uv.x*44. + i*123.)*.003\n            + cos(uv.x*2. + i*654.)*.01;\n        \n        vec2 p = uv + nse;\n        float t = (1.3-i*.02)*p.x*.8 + i*9.;\n        float h = .06*asin(sin(6.*t + 2.5*i)*0.999);\n        float c = ss(.104,.1, p.y - h - i*.01 + .02);\n    \ta = mix(a, 1., c);\n        \n    \tcol = mix(col, mix(vec3(.2, .3, .3),1.3*vec3(0.13, 0.26, 0.18),i), c);\n        col +=ht*.06;\n    \tsnow = ss(.66, .674, (uv.y + 0.522)+nse*1.4);\n    \tcol = mix(col, vec3(3), snow); \n    }\n    return vec4(col, a);\n}\n\n\nfloat snow(vec2 uv){\n    float nse = cos(uv.x*60.)*.001 + cos(uv.x*170.)*.0006 + cos(uv.x*10. + 24.32)*.003\n        + cos(uv.x*30. + 65.32)*.003;\n    uv.y += nse;\n \tfloat a = ss(.1,.1038, abs(uv.y+.2));   \n    vec3 col = vec3(0);\n    return a;\n}\n\nfloat houseShape(vec2 uv, vec2 dim){\n    float ox = dim.x;\n    dim.x -= uv.y;\n    dim.x = min(ox, dim.x);                      \n    return box(uv, dim, .001);\n}\n\nvec4 roofShape(vec2 uv){\n    float p = uv.x;\n    \n    uv.x = abs(uv.x);\n    uv *= rot(7.05);\n    \n    float a = box(uv-vec2(-0.13, .32), vec2(.2, .01), .0001);\n    vec3 col = frameCol * a;\n    \n    if(uv.y < 0.321)\n    \tuv.y -= (cos(p*171.)*.01 + cos(p*50.)*.003 + cos(p*70.)*.005);\n    \n    float snow = box(uv-vec2(-0.13, .33), vec2(.21, .008), .005);\n    col += vec3(6.) * snow;\n    \n    a += snow;\n    return vec4(col, a);\n}\n\n\nvec4 house(vec2 uv, vec3 hc, bool front){\n    vec3 col = hc;\n    \n    float a = houseShape(uv-vec2(0., .21), vec2(0.24, 0.35));\n    vec2 p = (uv - vec2(0., 0.17)) * 6.5;\n    \n    vec2 b = vec2(0.91, 1.3);\n    vec2 wv = mod(p + 0.5*b, b) - 0.5*b;\n    \n    if(front){\n    \tfloat glass = box(wv, vec2(.26, .28), .001);\n    \tfloat frame = box(wv, vec2(.22, .24), .001);\n    \tframe *= step(.01, abs(wv.x))*step(.01, abs(wv.y));\n    \n        glass += frame;\n    \n    \tvec3 window = mix(frameCol, winCol, step(2., glass));\n    \n    \tglass *= 1.-step(.26, uv.y);\n    \n    \tcol = mix(col, window, min(glass*3., 1.));\n    \n    \tfloat dr = box(uv-vec2(0., -0.04), vec2(.048, .076), .001);\n    \tfloat doorframe = box(uv-vec2(0., -0.04), vec2(.04, .07), .001);\n    \tfloat des = sdBox(uv-vec2(-0.02, 0.), vec2(.01, .02));\n        des = min(des, sdBox(uv-vec2(0.02, 0.), vec2(.01, .02)));\n        des = min(des, length(uv-vec2(0.02, -0.045))-.005);\n    \tcol = mix(col, .7*vec3(0.9, 0.8, 0.7), doorframe);\n    \tcol *= max(ss(.0,.0005, abs(des) - .001), 0.7);\n        \n    \tdr -= doorframe;\n    \tcol = mix(frameCol, col, 1.-dr);\n    \n    \tfloat steps = box(uv - vec2(0., -.137), vec2(.1, .005), .001);\n    \tsteps += box(uv - vec2(0., -.126), vec2(.08, .005), .001);\n   \t \tsteps += box(uv - vec2(0., -.115), vec2(.06, .005), .001);\n    \n    \tcol = mix(col, vec3(.5), steps);\n    }\n    \n    return vec4(col, a);\n}\n\n\nvec4 garage(vec2 uv, vec3 hc){\n    vec3 col = hc;\n \tfloat a = houseShape(uv-vec2(0.55, .068), vec2(0.20, 0.22));   \n    float door = box(uv-vec2(0.55, -0.05), vec2(.15, .1), .001);\n    col = mix(col, frameCol*ss(-.5, .5,abs(sin(uv.y*150. + 1.5))), door);\n    col *= max(min(abs((uv.y-.07)*310.), 1.), .8);\n    return vec4(col, a);\n}\n \n\nvec4 walkway(vec2 uv){\n    vec3 col = vec3(0);\n \t\n    vec2 p = uv-vec2(0.48, 0.08);\n    vec2 def = cos(uv*30.) * .01 + cos(uv*60. + 123.32) * .005 + cos(uv*250. + 123.32)*.0018;\n    p += def;\n    \n    p.x -= sin(p.y*8.)*.5;\n    p.y += cos(p.x*4.)*.1;\n    \n    float a = box(p - vec2(0.0, -0.2), vec2(.085, .1), .005);\n    \n    col = vec3(.65) * a;\n    \n    uv += def;\n    float w2 = box(uv - vec2(0.55, -0.22), vec2(.1 - uv.y*.4, .175), .002);\n    \n    a = min(a+w2, 1.);\n    col = mix(col, vec3(.65), a);\n    \n    return vec4(col, a);\n}\n\nvoid mainImage( out vec4 f, in vec2 u ){\n    vec2 uv = vec2(u.xy - 0.5*R.xy)/R.y;\n    vec2 p = uv;\n    \n    uv.x += iTime*.2;\n    \n    vec3 col = vec3(.7, 0.9, 1.0);\n    \n    float spc = 1.8;\n    vec2 b = vec2(spc, 0.0);\n    vec2 ruv = mod(uv + 0.5*b, b) - 0.5*b;\n    ruv.x += .3;\n    float id = floor((uv.x - .5)/spc);\n    \n    \n    float ht = texture(iChannel0, uv*16.).x;\n    \n    // Mountains\n    vec4 mnt = mountains(p);\n    col = mix(col, mnt.rgb, mnt.a);\n    \n    \n   \n    float spc2 = 1.1;\n    vec2 b2 = vec2(spc2, 0.0);\n    vec2 p2 = p-vec2(0.0, 0.);\n    p2.x += iTime*.13;\n    vec2 ruv2 = mod(p2 + 0.5*b2, b2) - 0.5*b2;\n    ruv2.x += .3;\n    float id2 = floor((p2.x - .5)/spc2);\n    \n    float ht2 = texture(iChannel0, p2*16.).x;\n    \n    vec3 hcb = .2 + .5 * hash31(id2*223.32 + 88.);\n    hcb += ht2*.15;\n    \n    vec4 bhse = house((ruv2 - vec2(0.0, 0.))*1.8, hcb, false);\n    col = mix(col, bhse.rgb*.8, bhse.a);\n    vec4 rf3 = roofShape(ruv2*1.9);\n    col = mix(col, rf3.rgb, rf3.a);\n        \n    \n    // Fence\n    vec4 fnc = fence(uv);\n    col = mix(col, fnc.rgb, fnc.a);\n    \n    \n    // Snowy yard\n    float snw = snow(uv);\n    col = mix(vec3(1), col, snw);\n    \n    \n    // walkway/ driveway\n    vec4 wlk = walkway(ruv);\n    col = mix(col, wlk.rgb, wlk.a);\n    \n    \n    // Sidewalk and road\n    vec4 gnd = ground(uv);\n    col = mix(col, gnd.rgb, gnd.a);\n    \n    // house color\n    vec3 hc = .2 + .5 * hash31(id*623.32 + 5.);\n    hc += ht*.15;\n    \n    // house\n    vec4 hse = house(ruv, hc, true);\n    col = mix(col, hse.rgb, hse.a); \n    \n    vec2 pc = ruv;\n    pc.xy += cos(uv.yx*40.+3.)*.005 + cos(uv.yx*80.+324.3)*.002 + cos(uv.yx*180.+324.3)*.001;\n    float det = box(pc-vec2(-0.42, -.18), vec2(.33, .05), .002);\n    det += box(-pc-vec2(-0.17, .143), vec2(.07, .01), .002);\n    col = mix(col, vec3(1), det);\n    \n    \n    // roof\n    vec4 roof = roofShape(ruv);\n    col = mix(col, roof.rgb, roof.a);\n    \n    // garage\n    vec4 grg = garage(ruv, hc);\n    col = mix(col, grg.rgb, grg.a); \n    \n    // garage roof\n    vec4 groof = roofShape(1.2*ruv-vec2(0.66, -0.13));\n    col = mix(col, groof.rgb, groof.a);\n    \n    \n    f = vec4(col, 1.0);\n    \n}\n\n\n\n\n\n\n",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 46,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}