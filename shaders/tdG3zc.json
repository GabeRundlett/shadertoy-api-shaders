{
    "Shader": {
        "info": {
            "date": "1570707819",
            "description": "Toying with the lastest art of code tutorial.\nhttps://www.youtube.com/watch?v=il_Qg9AqQkE&t=0s",
            "flags": 0,
            "hasliked": 0,
            "id": "tdG3zc",
            "likes": 4,
            "name": "Un pti Kif",
            "published": 3,
            "tags": [
                "2d",
                "fractal",
                "tutorial",
                "anaglyphe"
            ],
            "usePreview": 0,
            "username": "antonOTI",
            "viewed": 472
        },
        "renderpass": [
            {
                "code": "//#define SCREEN_SHOT\n#define  PI 3.14159\n\n#ifdef SCREEN_SHOT\n#define TIME (21.5)\n#else\n#define TIME (iTime + 1.5)\n#endif\n\nfloat kifDist(vec2 uv, float a)\n{\n    \n    uv *= 2.;\n    \n    uv.y -= tan(.5/6. * PI);\n    float overAngle = 5./6. * PI;\n    vec2 n =vec2(sin(overAngle), cos(overAngle)); \n    \n    uv.x = abs(uv.x);\n    uv -= n * max(0., dot(uv - vec2(.5,0.), n)) * 2.;\n    \n    n = vec2(sin(a), cos(a));\n    \n    \n    float scale = 1.;\n    \n    uv.x += .5;\n    \n    for(float it = 0.; it < 5.; ++it)\n    {\n        uv *= 3.;\n        scale *= 3.;\n        uv.x -=1.5;\n        \n        uv.x = abs(uv.x);\n        uv.x -=.5;\n        uv -= n * min(0., dot(uv, n)) * 2.;\n    }\n        \n    float f = length(uv - vec2(clamp(uv.x,-1.,1.), 0.));\n    \n    return f;\n}\n\nfloat map(vec3 p)\n{\n    \n    p.z -= TIME * 10.;\n    p.xy *= rot(p.z * .00125);\n    float a = 2./3. * PI;\n    \n    float av = p.z * .025;\n    //av = floor(av) + sin(fract(av) * PI) * .5 + .5;\n    a += sin(av );\n    float dist = abs(kifDist(p.xy *.0025, a));\n    \n    return dist - 1.5 ;\n}\n\n// End of custom part.\n\nconst float grain = .01;\nconst float divergence = 0.1;\nconst float fieldOfView = 1.5;\n\nfloat raymarch ( vec3 eye, vec3 ray ) {\n    float dither = random(ray.xy+fract(iTime));\n    float total = dither;\n    const int count = 60;\n    for (int index = count; index > 0; --index) {\n        float dist = map(eye+ray*total);\n        dist *= 0.9+.025*dither;\n        total += dist;\n        if (dist < 0.001 * total)\n            return float(index)/float(count);\n    }\n    return 0.;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = 2.*(fragCoord-0.5*iResolution.xy)/iResolution.y;\n    vec3 eyeLeft = vec3(-divergence,0,5.);\n    vec3 eyeRight = vec3(divergence,0,5.);\n    vec3 rayLeft = look(eyeLeft, vec3(0), uv, fieldOfView);\n    vec3 rayRight = look(eyeRight, vec3(0), uv, fieldOfView);\n    float red = raymarch(eyeLeft, rayLeft);\n    float cyan = raymarch(eyeRight, rayRight);\n    fragColor = vec4(red,vec2(cyan),1);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "// Anaglyph Quick Sketch\n// An example on how to render stereoscopic anaglyph image\n// It will be the theme of https://2019.cookie.paris/\n// And the content of the 3rd issue of https://fanzine.cookie.paris/\n// Licensed under hippie love conspiracy\n\nfloat random(vec2 p) { return fract(1e4 * sin(17.0 * p.x + p.y * 0.1) * (0.1 + abs(sin(p.y * 13.0 + p.x)))); }\n\nmat2 rot(float a) { float c=cos(a),s=sin(a); return mat2(c,-s,s,c); }\n\nfloat smoothmin (float a, float b, float r) { float h = clamp(.5+.5*(b-a)/r, 0., 1.); return mix(b, a, h)-r*h*(1.-h); }\n\nvec3 look (vec3 eye, vec3 target, vec2 anchor, float fov) {\n    vec3 forward = normalize(target-eye);\n    vec3 right = normalize(cross(forward, vec3(0,1,0)));\n    vec3 up = normalize(cross(right, forward));\n    return normalize(forward * fov + right * anchor.x + up * anchor.y);\n}\n\n",
                "description": "",
                "inputs": [],
                "name": "Common",
                "outputs": [],
                "type": "common"
            }
        ],
        "ver": "0.1"
    }
}