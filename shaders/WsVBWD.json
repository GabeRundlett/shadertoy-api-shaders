{
    "Shader": {
        "info": {
            "date": "1607461852",
            "description": "Credits:  <3 <3 <3 urs <3 <3 <3 \n\nCompanion shader for day 9 of cowees xmas adventure:https://www.youtube.com/watch?v=HfUx1577XlU \n",
            "flags": 0,
            "hasliked": 0,
            "id": "WsVBWD",
            "likes": 2,
            "name": "Festive Greetings From Cowee!",
            "published": 3,
            "tags": [
                "tree",
                "xmas",
                "cowee"
            ],
            "usePreview": 0,
            "username": "psykon",
            "viewed": 342
        },
        "renderpass": [
            {
                "code": "#define R(p, a) p=cos((a))*p+sin((a))*vec2(p.y, -p.x)\n\nfloat                                  pn\n                                     (vec3\n                                     p){vec3\n                                   i=floor(p);\n                                  vec4 a=dot(i,\n                                 vec3(1,57,21))+\n                                 vec4(0,57,21,78);\n                               vec3 f=cos((p-i)*acos\n                             (-1.))*(-.5)+.5;a=vec4(mix(\n                           sin(cos(a)*a),sin(cos(1.+a)*(1.+\n                             a)),f.x));a.xy=mix(a.xz,\n                            a.yw,f.y);return mix(a.x,\n                           a.y,f.z);}vec3 cd=vec3(.432,\n                        -0.069,.899);vec3 cp=vec3(-1,1.65\n                       ,-6.6);vec3 cu=vec3(0,1,0);vec3 lc=\n                       vec3(.6,.725,1);float _d;int _m;float\n                      minMat(float d, int id){if(d<_d){_d=d;_m\n                    =id;}return _d;}float fl(vec3 p){return p.y+\n                   1.0;}float co(vec3 p,float r,float h){vec2 q=\n                  vec2(length(p.xy),p.z);vec2 tip=q-vec2(0,h);vec2\n                mD=normalize(vec2(h,r));float m=dot(tip,mD);float d\n               =max(m,-q.y);float pr=dot(tip,mD.yx);if((q.y>h) && (pr\n                  <0.)){d=max(d,length(tip));}if(q.x>r&&pr>length(\n                vec2(h,r))){d=max(d,length(q-vec2(r,0)));}return d\n               ;}float tr(vec3 p){p-=vec3(0,0,-1);vec2 q=vec2(length\n              (p.xy),p.z);float d=q.x-.2;d=max(d,abs(q.y)-.5);d=min(d\n             ,co(p,.6,1.));d=min(d,co(p-vec3(0,0,.5),.55,1.));d=min(d,co\n            (p-vec3(0,0,1),.5,1.));return d-.1;}float f(vec3 p){float d=\n           minMat(fl(p),1);p.y-=1.;p.yz=p.zy;R(p.xy,37.+sin(iTime));R(p.xz,\n          12.+2.*sin(iTime));return minMat(tr(p),0);}vec3 tm(vec3 c){c=((c*(\n         0.15*c+0.16*0.4)+0.025)/(c*(0.15*c+0.4)+0.25))-0.025/0.25;float w=(\n        (8.*(0.15*8.+0.16*0.4)+0.025)/(8.*(0.15*8.+0.4)+0.25))-0.025/0.25;return\n       pow(vec3(2.*c/w),vec3(1./2.2));}void mainImage(out vec4 fragColor, in vec2 \n                                    fragCoord){vec2\n                                    v_tC=fragCoord/\n                                    iResolution.xy;\n                                    vec4 o;vec2 sc=\n                                    (v_tC*2.-vec2(1.\n                                    ))*vec2(2.08,1);\n                                    vec3 r=normalize\n                                    ( mat3( cross(cd\n                                    , cu),cu,-cd) *\n                                    normalize(vec3 (\n                                    sc,-iResolution.x\n                                    /iResolution.y)));\n                                    float t=0.,i=0.;\n                                    for(;i< 1.;i+=1.\n                                    /300.){_d=1e6;\n                                    f(cp+r*t);if((\n                                    abs(_d)/t<3e-4\n                                    )|| (t>1e3) )\n                                    break;t+=_d; }\n  \n  vec3 h=cp+r*t;\n  vec3 normal=normalize(vec3(_d)-vec3(f(h+vec3(1e-2,0,0)),f(h+vec3(0,1e-2,0)),f(h\n  +vec3(0.,0.,1e-2))));vec3 fc=.7*vec3(.343,.391,.4)*clamp(pow(r.y+.9-.05*pn(12.*\n  vec3(r.x,r.z,0)),50.),0.,1.);if((t>1e3)||(i>=1.)){o.rgb=fc;}else{vec3 p=cp+r*t;\n  switch(_m){case 0:o.rgb=vec3(1.,2.,.8)*.1+.6*pow(clamp(dot(normal,normalize(vec3\n  (0,1,1))),0.,1.),6.0);break;case 1:p.z+=8.*iTime;float s=dFdy(p.x)*dFdy(p.x);s+=\n  dFdy(p.z)*dFdy(p.z);s+=dFdx(p.x)*dFdx(p.x);s+=dFdx(p.z)*dFdx(p.z);s=4.*sqrt(s);\n  vec3 col1=lc*(step(mod(p.x,1.),.1)+step(mod(p.z,1.),.1));vec3 col2=.5*lc*(step(\n  mod(p.x+s*s/8.,1.),s*s/4.)+step(mod(p.z+s*s/8.,1.),s*s/4.));o.rgb=mix(col1,col2,\n  smoothstep(0.,1.,s));o.rgb=mix(o.rgb,0.2*lc,smoothstep(0.,1.,.6*s));o.rgb+=.5*lc;\n  break;}}o.rgb=mix(fc,o.rgb,exp(-(t-10.)/20.));o=vec4(tm(pow(2.*o.rgb,vec3(3.3)))\n  ,1);fragColor=o;}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}