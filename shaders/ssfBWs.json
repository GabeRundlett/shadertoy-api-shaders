{
    "Shader": {
        "info": {
            "date": "1645541993",
            "description": "Fractal music created by multiplying a short ring of frequencies at different time scales.",
            "flags": 8,
            "hasliked": 0,
            "id": "ssfBWs",
            "likes": 11,
            "name": "Fractal Freq Music",
            "published": 3,
            "tags": [
                "fractalmusic"
            ],
            "usePreview": 0,
            "username": "eiffie",
            "viewed": 465
        },
        "renderpass": [
            {
                "code": "#define rez iResolution.xy\n\nvoid mainImage(out vec4 O, in vec2 U){\n O=vec4(0);\n float t=iTime*5.;\n t=mod(t,384.);\n if(t>128.)t-=128.;\n for(float i=0.;i<99.;i+=1.){\n  vec2 d=vec2(13.,117.)+i;\n  vec2 u=U+fract(sin(vec2(dot(U,d),dot(U,d.yx)))*432.29)*i*vec2(.25,.125);\n  vec2 v=(u-.5*rez)/rez*(t>96.?.1+i*.035:1.-i*.035);\n  float t2=iTime+(v.y+v.x)*2.+i*.05;\n  v-=sound(floor(iTime*15.-i*.1)/3.)*.5;\n  vec4 c=abs(vec4(sin(t2),sin(t2+.5),sin(t2+1.5),0.));\n  v=abs(v);\n  O+=c*smoothstep(15./rez.y,0.,max(v.x*.5,v.y))/(i*i*.01+1.);\n }\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "vec2 mainSound( int samp, float time )\n{\n  vec2 v=vec2(0);\n  for(float i=0.;i<3.;i+=1.)v+=sound(time-i*.247)/(1.+i);\n  return v*.05;\n}",
                "description": "",
                "inputs": [],
                "name": "Sound",
                "outputs": [],
                "type": "sound"
            },
            {
                "code": "vec2 sound(float time){\n  float N[8]=float[8](1.,1.125,1.25,4./3.,1.5,5./3.,2./3.,1.5);\n  float t=time*5.,w=1.,h=floor(t/128.);\n  t=mod(t,384.);if(t>128.)t-=128.;\n  bool b=mod(t,2.)>1.;\n  if(t>96.){t=96.-t;w=.25+t*0.0075;h=0.;}\n  int s=int(floor(t)+h*128.);\n  int p=16*4;float n=1.,nb,nh;\n  for(int i=0;i<4;i++){n*=N[(s/p)%8];p/=2;}\n  nb=n;\n  n*=N[(s/2)%8];\n  nh=n; \n  n=nh*(b || s==0?N[s%8]:2.01);\n  if(mod(n+.125,.25)-.125>0.05 && mod(n+1./6.,1./3.)-1./6.>0.05)n=0.;\n  vec2 v=vec2(.5)-fract(vec2(n*200.,nb*50.03)*time);\n  v.y*=step(fract(t),.5)*(b?.5:1.25)*w;v.x*=(1.-fract(t));\n  time-=pow(fract(t*.25),100.);\n  time *=2.6667;\n  v+=(vec2(.5)-fract(vec2(nb*(b?75.03:100.02),nh*200.)*time))*.5;\n  return v;\n}",
                "description": "",
                "inputs": [],
                "name": "Common",
                "outputs": [],
                "type": "common"
            }
        ],
        "ver": "0.1"
    }
}