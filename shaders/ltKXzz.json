{
    "Shader": {
        "info": {
            "date": "1482656466",
            "description": "741",
            "flags": 0,
            "hasliked": 0,
            "id": "ltKXzz",
            "likes": 0,
            "name": "New Yerar Tree",
            "published": 3,
            "tags": [
                "238"
            ],
            "usePreview": 0,
            "username": "login22876534184820",
            "viewed": 509
        },
        "renderpass": [
            {
                "code": "#define RADIUS 0.005\n#define RED vec4(1.0, 0.0, 0.0, 1.0)\n#define SKY_COLOR vec4(0.0, 0.0, 0.2, 1.0)\n#define GROUND_COLOR vec4(0.4, 0.3, 0.2, 1.0)\n#define LIGHT -abs(uv.x-0.5)*1.0-uv.y*0.3\n#define GREEN vec4(0.0, 0.5, 0.0, 1.0)\n#define TREE_MOVE_X -sin(iTime)*0.005\n#define TREE_MOVE_Y -abs(sin(iTime))*0.01\n#define TREE_MOVE vec2(TREE_MOVE_X, TREE_MOVE_Y)\n#define FIRST_TRIANGLE_POSITION vec2(0.4, 0.7)+TREE_MOVE, vec2(0.5, 0.98)+TREE_MOVE, vec2(0.6, 0.7)+TREE_MOVE\n#define SECOND_TRIANGLE_POSITION vec2(0.35, 0.35)+TREE_MOVE, vec2(0.5+TREE_MOVE_X, 0.7+TREE_MOVE_Y*0.5), vec2(0.65, 0.35)+TREE_MOVE\n#define THIRD_TRIANGLE_POS_X vec2(0.325, 0.675)\n#define THIRD_TRIANGLE_POS_Y_LOW 0.05\n#define THIRD_TRIANGLE_POSITION vec2(THIRD_TRIANGLE_POS_X.x, THIRD_TRIANGLE_POS_Y_LOW), vec2(0.5+TREE_MOVE_X, THIRD_TRIANGLE_POS_Y_LOW+0.3+TREE_MOVE_Y*0.5), vec2(THIRD_TRIANGLE_POS_X.y, THIRD_TRIANGLE_POS_Y_LOW)\n#define SHADOW_WIDTH 1.5\n#define TREE_SHADOW uv.y>SHADOW_WIDTH*uv.x+THIRD_TRIANGLE_POS_Y_LOW-SHADOW_WIDTH*THIRD_TRIANGLE_POS_X.y && uv.y>-SHADOW_WIDTH*uv.x+THIRD_TRIANGLE_POS_Y_LOW+SHADOW_WIDTH*THIRD_TRIANGLE_POS_X.x && uv.y>THIRD_TRIANGLE_POS_Y_LOW\n#define SHADOW_DARKNESS 4.0\n#define MOON_POSITION vec2(0.1, 0.9)\n#define MOON_WIDTH 0.012\n#define MOON_LIGHT 0.03-distance(MOON_POSITION,uv)*0.1\n#define TOY_1_POSITION vec2(0.47, 0.85) \n#define TOY_2_POSITION vec2(0.53, 0.77)\n#define TOY_3_POSITION vec2(0.5, 0.64) \n#define TOY_4_POSITION vec2(0.47, 0.53)\n#define TOY_5_POSITION vec2(0.45, 0.73) \n#define TOY_6_POSITION vec2(0.57, 0.43) \n#define TOY_7_POSITION vec2(0.4, 0.4)\n#define TOY_8_POSITION vec2(0.43, 0.2) \n#define TOY_9_POSITION vec2(0.6, 0.15) \n#define TOY_10_POSITION vec2(0.525, 0.25) \n#define DYNAMIC_COLOR_1 vec4(abs(sin(iTime)-uv.x),cos(iTime), abs(tan(iTime)) , 1.0)\n#define DYNAMIC_COLOR_2 vec4(sin(iTime),tan(iTime+uv.y), abs(cos(iTime)) , 1.0)\n#define DYNAMIC_COLOR_3 vec4(cos(iTime),abs(sin(iTime)), tan(iTime) , 1.0)\n#define DYNAMIC_COLOR_4 vec4(cos(iTime-uv.y),tan(iTime), abs(sin(iTime)) , 1.0)\n#define DYNAMIC_COLOR_5 vec4(tan(iTime),cos(iTime), abs(sin(iTime)+uv.x) , 1.0)\n\nfloat sdTriangle( in vec2 p1, in vec2 p2, in vec2 p3, in vec2 p )\n{\n    vec2 e0 = p2 - p1;  vec2 e1 = p3 - p2;  vec2 e2 = p1 - p3;\n\tvec2 v0 = p - p1;   vec2 v1 = p - p2;   vec2 v2 = p - p3;\n\n\tvec2 pq0 = v0 - e0*clamp( dot(v0,e0) / dot(e0,e0), 0.0, 1.0 );\n\tvec2 pq1 = v1 - e1*clamp( dot(v1,e1) / dot(e1,e1), 0.0, 1.0 );\n\tvec2 pq2 = v2 - e2*clamp( dot(v2,e2) / dot(e2,e2), 0.0, 1.0 );\n    \n    vec2 d = min( min( vec2( dot(pq0, pq0), v0.x*e0.y-v0.y*e0.x ),\n                       vec2( dot(pq1, pq1), v1.x*e1.y-v1.y*e1.x )),\n                       vec2( dot(pq2, pq2), v2.x*e2.y-v2.y*e2.x ));\n\n\treturn -sqrt(d.x)*sign(d.y);\n}\n\nfloat drawCircle(vec2 center, float radius, vec2 p)\n{\n    return 1.0 - smoothstep(0.0, radius, length(p-center));\n}\n\nfloat getDrobPart(float a)\n{\n    return a-float(int(a));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    \n    /// Sky and ground\n\tif(uv.y>0.3)\n        fragColor = SKY_COLOR+MOON_LIGHT;\n    else\n       \tif(TREE_SHADOW)\n            fragColor = GROUND_COLOR+LIGHT*SHADOW_DARKNESS;\n        else\n        \tfragColor = GROUND_COLOR+LIGHT;\n\n    /// Moon\n    if(drawCircle(MOON_POSITION, 0.05, uv)>0.0)\n    \tfragColor = vec4(1.0, 1.0, 0.0, 1.0);\n    if(drawCircle(vec2(MOON_POSITION.x-MOON_WIDTH, MOON_POSITION.y), 0.05, uv)>0.0)\n    \tfragColor = SKY_COLOR+MOON_LIGHT;\n    \n    /// Snowballs back (bidlokod)\n    if(drawCircle(vec2(0.1+0.12*cos(iTime), 1.0-getDrobPart(iTime+0.1)), RADIUS, uv)>0.0&& uv.y>0.12)\n    \tfragColor = vec4(1.0, 1.0, 1.0, 1.0)+LIGHT;\n    if(drawCircle(vec2(0.2+0.13*cos(iTime), 1.0-getDrobPart(iTime-0.2)), RADIUS, uv)>0.0 && uv.y>0.05)\n    \tfragColor = vec4(1.0, 1.0, 1.0, 1.0)+LIGHT;\n    if(drawCircle(vec2(0.4+0.2*cos(iTime), 1.0-getDrobPart(iTime+0.3)), RADIUS, uv)>0.0&& uv.y>0.1)\n    \tfragColor = vec4(1.0, 1.0, 1.0, 1.0)+LIGHT;\n    if(drawCircle(vec2(0.45+0.16*cos(iTime), 1.0-getDrobPart(iTime-0.5)), RADIUS, uv)>0.0&& uv.y>0.05)\n    \tfragColor = vec4(1.0, 1.0, 1.0, 1.0)+LIGHT;\n    if(drawCircle(vec2(0.6+0.17*cos(iTime), 1.0-getDrobPart(iTime+0.4)), RADIUS, uv)>0.0&& uv.y>0.06)\n    \tfragColor = vec4(1.0, 1.0, 1.0, 1.0)+LIGHT;\n    if(drawCircle(vec2(0.75+0.12*cos(iTime), 1.0-getDrobPart(iTime-0.1)), RADIUS, uv)>0.0&& uv.y>0.07)\n    \tfragColor = vec4(1.0, 1.0, 1.0, 1.0)+LIGHT;\n    if(drawCircle(vec2(0.21+0.11*cos(iTime), 1.0-getDrobPart(iTime+0.3)), RADIUS, uv)>0.0&& uv.y>0.08)\n    \tfragColor = vec4(1.0, 1.0, 1.0, 1.0)+LIGHT;\n        \n\t/// Tree\n    if(sdTriangle(FIRST_TRIANGLE_POSITION, uv)<=0.0 ||sdTriangle(SECOND_TRIANGLE_POSITION,uv)<=0.0 || sdTriangle(THIRD_TRIANGLE_POSITION,uv)<=0.0)\n        fragColor = GREEN+LIGHT;\n        \n   \t/// Toys\n    if(drawCircle(TOY_1_POSITION+TREE_MOVE, RADIUS, uv)>0.0 || drawCircle(TOY_10_POSITION+TREE_MOVE, RADIUS, uv)>0.0)\n        fragColor = DYNAMIC_COLOR_1;\n    if(drawCircle(TOY_3_POSITION+TREE_MOVE, RADIUS, uv)>0.0 || drawCircle(TOY_8_POSITION+TREE_MOVE, RADIUS, uv)>0.0)\n        fragColor = DYNAMIC_COLOR_2;\n    if(drawCircle(TOY_5_POSITION+TREE_MOVE, RADIUS, uv)>0.0 || drawCircle(TOY_6_POSITION+TREE_MOVE, RADIUS, uv)>0.0)\n        fragColor = DYNAMIC_COLOR_3;\n    if(drawCircle(TOY_7_POSITION+TREE_MOVE, RADIUS, uv)>0.0 || drawCircle(TOY_4_POSITION+TREE_MOVE, RADIUS, uv)>0.0)\n        fragColor = DYNAMIC_COLOR_4;\n    if(drawCircle(TOY_9_POSITION+TREE_MOVE, RADIUS, uv)>0.0 || drawCircle(TOY_2_POSITION+TREE_MOVE, RADIUS, uv)>0.0)\n        fragColor = DYNAMIC_COLOR_5;    \n        \n    /// Snowballs front (bidlokod)\n    if(drawCircle(vec2(0.35+0.09*sin(iTime), 1.0-getDrobPart(iTime+0.4)), RADIUS, uv)>0.0)\n    \tfragColor = vec4(1.0, 1.0, 1.0, 1.0);\n    if(drawCircle(vec2(0.73+0.2*sin(iTime), 1.0-getDrobPart(iTime-0.1)), RADIUS, uv)>0.0)\n    \tfragColor = vec4(1.0, 1.0, 1.0, 1.0);\n    if(drawCircle(vec2(0.45+0.11*sin(iTime), 1.0-getDrobPart(iTime+0.3)), RADIUS, uv)>0.0)\n    \tfragColor = vec4(1.0, 1.0, 1.0, 1.0);\n   \t\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}