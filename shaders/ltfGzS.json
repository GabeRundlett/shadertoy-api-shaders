{
    "Shader": {
        "info": {
            "date": "1422878698",
            "description": "Tried to fit https://www.shadertoy.com/view/XslGzl into two tweets. Couldn't do it as I wanted at first, but then fellow shader programmers jumped in, and voila. 280 chars!",
            "flags": 0,
            "hasliked": 0,
            "id": "ltfGzS",
            "likes": 47,
            "name": "[2TC 15] Fractal Complex 265ch",
            "published": 3,
            "tags": [
                "raymarching",
                "fractal",
                "menger",
                "buildings"
            ],
            "usePreview": 0,
            "username": "coyote",
            "viewed": 3652
        },
        "renderpass": [
            {
                "code": "//two tweet version of fb39ca4's Menger Tunnel https://www.shadertoy.com/view/XslGzl\n\n//265 and one more Menger step for more windows :P\nvoid mainImage( out vec4 o,  vec2 w )\n{\n    vec4 p = vec4(w,0,1)/iResolution.x-.5, r, q = o = p-p;\n    q.x = .3*sin(q.z=-iTime);\n    o++;\n\n    for( int i=0; i++<99; ) {\n        float d=0.,s=1.;\n        for(;s<729.;s*=3.) //6 passes (3**6==729)\n            r = max( r = abs(mod(q*s+1.,2.)-1.) , r.yzxw ),\n            d = max(d, (.29-min(r.x,min(r.y,r.z))) / s );\n        d > 1e-5 ? q += p*d, o -= .01 : o;\n    }\n}\n\n\n//thanks to Fabrice it is again under 2 tweets\n//274 chars:\n\n\n//2015-11-12\n//had to change it once again to accomodate new shadertoy framework which prohibits using\n//mainImage declaration with \"inout vec4 fragColor\"\n//280 chars:\n/*\n#define X r = max( r = abs(mod(q*s+1.,2.)-1.) , r.yzxw ), d = max(d, (.29-min(r.x,min(r.y,r.z))) / s ),  s *= 3.\nvoid mainImage( out vec4 o,  vec2 w )\n{\n    vec4 p = vec4(w,0,1)/iResolution.x-.5, r, q = p-p;\n    q.x = .3*sin(q.z=-iTime);\n    o = p/p; //hm, can this fail? for example for w.x == iResolution.x / 2.\n\n    for (int i=0; i < 99; i++) {\n        float d=0.,s=1.;\n        X; X; X; X; X;\n        d > 1e-5 ? q += p*d, o -= .01 : o;\n    }\n}\n/**/\n\n\n//----------------------------------------------------------------------------\n//below is the [2TC 15] version\n//originally it was 280, but after the last shadertoy interface change it went\n//to 295 chars\n//----------------------------------------------------------------------------\n\n//an attempt to fit fb39ca4's Menger Tunnel https://www.shadertoy.com/view/XslGzl\n//into two tweets\n//\n//I managed to do it, sort of, but didn't like the too simple coloring, and especailly\n//the fact that camera was static\n//\n//so here it is now, with the camera movement that I wanted (291 chars)\n//feel free to add coloring to your liking ;)\n//btw, after 200 or so seconds fp errors might kick in...\n\n\n//UPDATE: Thanks to the great community here at ShaderToy, it is now 280 chars\n\n/*\nvoid mainImage( out vec4 f, vec2 w )\n{\n    vec4 p=vec4(w,0,1)/iResolution.x-.5,r=p-p,q=r;\n    q.x=.3*sin(q.z=-iTime);\n\n    for (float i=1.; i>0.; i-=.01) {\n\n        float d=0.,s=1.;\n\n        for (int j = 0; j < 5; j++)\n            r=max(r=abs(mod(q*s+1.,2.)-1.),r.yzxw),\n            d=max(d,(.29-min(r.x,min(r.y,r.z)))/s),\n            s*=3.;\n\n        q+=p*d;\n        \n        f = p-p+i;\n\n        if(d<1e-5) break;\n    }\n}\n*/",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}