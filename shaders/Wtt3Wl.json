{
    "Shader": {
        "info": {
            "date": "1577965516",
            "description": "Lobster OTF font rendering using my cubic bezier distance approximation from https://www.shadertoy.com/view/3lsSzS\nand simple intersection number computation. Generated from svg file by\nhttps://gist.github.com/Ninja-Koala/74fa7652fb4de248949ce1e27b989c14",
            "flags": 0,
            "hasliked": 0,
            "id": "Wtt3Wl",
            "likes": 32,
            "name": "OTF Lobster Shadertoy render",
            "published": 3,
            "tags": [
                "2d",
                "font",
                "shadertoy",
                "vector",
                "svg",
                "otf"
            ],
            "usePreview": 1,
            "username": "NinjaKoala",
            "viewed": 1896
        },
        "renderpass": [
            {
                "code": "#define ZERO min(0,iFrame)\n\nfloat border;\n\n// Modified from http://tog.acm.org/resources/GraphicsGems/gems/Roots3And4.c\n// Credits to Doublefresh for hinting there\nint solve_quadric(vec2 coeffs, inout vec2 roots){\n\n\t// normal form: x^2 + px + q = 0\n\tfloat p = coeffs[1] / 2.;\n\tfloat q = coeffs[0];\n\n\tfloat D = p * p - q;\n\n\tif (D < 0.){\n\t\treturn 0;\n\t}\n\telse{\n\t\troots[0] = -sqrt(D) - p;\n\t\troots[1] = sqrt(D) - p;\n\n\t\treturn 2;\n\t}\n}\n\n//From Trisomie21\n//But instead of his cancellation fix i'm using a newton iteration\nint solve_cubic(vec3 coeffs, inout vec3 r){\n\n\tfloat a = coeffs[2];\n\tfloat b = coeffs[1];\n\tfloat c = coeffs[0];\n\n\tfloat p = b - a*a / 3.0;\n\tfloat q = a * (2.0*a*a - 9.0*b) / 27.0 + c;\n\tfloat p3 = p*p*p;\n\tfloat d = q*q + 4.0*p3 / 27.0;\n\tfloat offset = -a / 3.0;\n\tif(d >= 0.0) { // Single solution\n\t\tfloat z = sqrt(d);\n\t\tfloat u = (-q + z) / 2.0;\n\t\tfloat v = (-q - z) / 2.0;\n\t\tu = sign(u)*pow(abs(u),1.0/3.0);\n\t\tv = sign(v)*pow(abs(v),1.0/3.0);\n\t\tr[0] = offset + u + v;\t\n\n\t\t//Single newton iteration to account for cancellation\n\t\tfloat f = ((r[0] + a) * r[0] + b) * r[0] + c;\n\t\tfloat f1 = (3. * r[0] + 2. * a) * r[0] + b;\n\n\t\tr[0] -= f / f1;\n\n\t\treturn 1;\n\t}\n\tfloat u = sqrt(-p / 3.0);\n\tfloat v = acos(-sqrt( -27.0 / p3) * q / 2.0) / 3.0;\n\tfloat m = cos(v), n = sin(v)*1.732050808;\n\n\t//Single newton iteration to account for cancellation\n\t//(once for every root)\n\tr[0] = offset + u * (m + m);\n    r[1] = offset - u * (n + m);\n    r[2] = offset + u * (n - m);\n\n\tvec3 f = ((r + a) * r + b) * r + c;\n\tvec3 f1 = (3. * r + 2. * a) * r + b;\n\n\tr -= f / f1;\n\n\treturn 3;\n}\n\nfloat cubic_bezier_normal_iteration(float t, vec2 a0, vec2 a1, vec2 a2, vec2 a3){\n\t//horner's method\n\tvec2 a_2=a2+t*a3;\n\tvec2 a_1=a1+t*a_2;\n\tvec2 b_2=a_2+t*a3;\n\n\tvec2 uv_to_p=a0+t*a_1;\n\tvec2 tang=a_1+t*b_2;\n\n\tfloat l_tang=dot(tang,tang);\n\treturn t-dot(tang,uv_to_p)/l_tang;\n}\n\nfloat cubic_bezier_dis_approx_sq(vec2 uv, vec2 p0, vec2 p1, vec2 p2, vec2 p3){\n\tvec2 a3 = (-p0 + 3. * p1 - 3. * p2 + p3);\n\tvec2 a2 = (3. * p0 - 6. * p1 + 3. * p2);\n\tvec2 a1 = (-3. * p0 + 3. * p1);\n\tvec2 a0 = p0 - uv;\n\n\tfloat d0 = 1e38;\n\n\tfloat t;\n\tvec3 params=vec3(0,.5,1);\n\n\tfor(int i=ZERO;i<3;i++){\n\t\tt=params[i];\n\t\tfor(int j=ZERO;j<3;j++){\n\t\t\tt=cubic_bezier_normal_iteration(t,a0,a1,a2,a3);\n\t\t}\n\t\tt=clamp(t,0.,1.);\n\t\tvec2 uv_to_p=((a3*t+a2)*t+a1)*t+a0;\n\t\td0=min(d0,dot(uv_to_p,uv_to_p));\n\t}\n\n\treturn d0;\n}\n\n//segment_dis_sq by iq\nfloat length2( vec2 v ) { return dot(v,v); }\n\nfloat segment_dis_sq( vec2 p, vec2 a, vec2 b ){\n\tvec2 pa = p-a, ba = b-a;\n\tfloat h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n\treturn length2( pa - ba*h );\n}\n\nint segment_int_test(vec2 uv, vec2 p0, vec2 p1){\n\tp0-=uv;\n\tp1-=uv;\n\n\tint ret;\n\t\n\tif(p0.y*p1.y<0.){\n\t\tvec2 nor=p0-p1;\n\t\tnor=vec2(nor.y,-nor.x);\n\t\t\n\t\tfloat sgn;\n\t\t\n\t\tif(p0.y>p1.y){\n\t\t\tsgn=1.;\n\t\t}\n\t\telse{\n\t\t\tsgn=-1.;\n\t\t}\n\n\t\tif(dot(nor,p0)*sgn<0.){\n\t\t\tret=0;\n\t\t}\n\t\telse{\n\t\t\tret=1;\n\t\t}\n\t}\n\telse{\n\t\tret=0;\n\t}\n\n\treturn ret;\n}\n\nint cubic_bezier_int_test(vec2 uv, vec2 p0, vec2 p1, vec2 p2, vec2 p3){\n\n\tfloat cu = (-p0.y + 3. * p1.y - 3. * p2.y + p3.y);\n\tfloat qu = (3. * p0.y - 6. * p1.y + 3. * p2.y);\n\tfloat li = (-3. * p0.y + 3. * p1.y);\n\tfloat co = p0.y - uv.y;\n\n\tvec3 roots = vec3(1e38);\n\tint n_roots;\n    \n    int n_ints=0;\n    \n    if(uv.x<min(min(p0.x,p1.x),min(p2.x,p3.x))){\n\t\tif(uv.y>=min(p0.y,p3.y) && uv.y<=max(p0.y,p3.y)){\n\t\t\tn_ints=1;\n\t\t}\n\t}\n    else{\n\n        if(abs(cu) < .0001){\n            n_roots = solve_quadric(vec2(co/qu,li/qu),roots.xy);\n        }\n        else{\n            n_roots = solve_cubic(vec3(co/cu,li/cu,qu/cu),roots);\n        }\n\n        for(int i=ZERO;i<n_roots;i++){\n            if(roots[i] >= 0. && roots[i] <= 1.){\n                float x_pos = -p0.x + 3. * p1.x - 3. * p2.x + p3.x;\n                x_pos = x_pos * roots[i] + 3. * p0.x - 6. * p1.x + 3. * p2.x;\n                x_pos = x_pos * roots[i] + -3. * p0.x + 3. * p1.x;\n                x_pos = x_pos * roots[i] + p0.x;\n\n                if(x_pos > uv.x){\n                    n_ints++;\n                }\n            }\n        }\n    }\n\n\treturn n_ints;\n}\n\nfloat path0_dis_sq(vec2 uv){\n\tfloat dis_sq=1e38;\n\n\tint num_its=0;\n\n\tvec2[48] p=vec2[](vec2(-0.297242,0.075528),\n\t                  vec2(-0.297242,0.0973915),\n\t                  vec2(-0.3199,0.0993791),\n\t                  vec2(-0.329242,0.0993791),\n\t                  vec2(-0.354882,0.0993791),\n\t                  vec2(-0.375155,0.0844722),\n\t                  vec2(-0.375155,0.0638014),\n\t                  vec2(-0.375155,0.0345839),\n\t                  vec2(-0.33441,0.0224597),\n\t                  vec2(-0.33441,-0.011528),\n\t                  vec2(-0.33441,-0.0282236),\n\t                  vec2(-0.344149,-0.0379628),\n\t                  vec2(-0.357466,-0.0379628),\n\t                  vec2(-0.370186,-0.0379628),\n\t                  vec2(-0.376547,-0.0288199),\n\t                  vec2(-0.376547,-0.018882),\n\t                  vec2(-0.376547,-0.00516764),\n\t                  vec2(-0.364025,-0.000198714),\n\t                  vec2(-0.353292,-0.000198714),\n\t                  vec2(-0.353888,0.0101367),\n\t                  vec2(-0.363826,0.0129192),\n\t                  vec2(-0.370783,0.0129192),\n\t                  vec2(-0.384696,0.0129192),\n\t                  vec2(-0.4,0.00178888),\n\t                  vec2(-0.4,-0.019677),\n\t                  vec2(-0.4,-0.0439255),\n\t                  vec2(-0.380522,-0.0538634),\n\t                  vec2(-0.357863,-0.0538634),\n\t                  vec2(-0.329043,-0.0538634),\n\t                  vec2(-0.302012,-0.0375652),\n\t                  vec2(-0.302012,-0.0041739),\n\t                  vec2(-0.302012,0.0387578),\n\t                  vec2(-0.346733,0.042733),\n\t                  vec2(-0.346733,0.0719504),\n\t                  vec2(-0.346733,0.083876),\n\t                  vec2(-0.339379,0.0900374),\n\t                  vec2(-0.328447,0.0900374),\n\t                  vec2(-0.317515,0.0900374),\n\t                  vec2(-0.313739,0.0836772),\n\t                  vec2(-0.313739,0.0767207),\n\t                  vec2(-0.313739,0.0701616),\n\t                  vec2(-0.317317,0.0628076),\n\t                  vec2(-0.322683,0.0596274),\n\t                  vec2(-0.320099,0.0566461),\n\t                  vec2(-0.317118,0.0554536),\n\t                  vec2(-0.31354,0.0554536),\n\t                  vec2(-0.303602,0.0554536),\n\t                  vec2(-0.297242,0.0640001));\n\n\tivec4[16] c_bez=ivec4[](ivec4(0,1,2,3),\n\t                        ivec4(3,4,5,6),\n\t                        ivec4(6,7,8,9),\n\t                        ivec4(9,10,11,12),\n\t                        ivec4(12,13,14,15),\n\t                        ivec4(15,16,17,18),\n\t                        ivec4(18,19,20,21),\n\t                        ivec4(21,22,23,24),\n\t                        ivec4(24,25,26,27),\n\t                        ivec4(27,28,29,30),\n\t                        ivec4(30,31,32,33),\n\t                        ivec4(33,34,35,36),\n\t                        ivec4(36,37,38,39),\n\t                        ivec4(39,40,41,42),\n\t                        ivec4(42,43,44,45),\n\t                        ivec4(45,46,47,0));\n\n\tif(all(lessThan(uv,vec2(-0.297242,0.0993791)+border)) && all(greaterThan(uv,vec2(-0.4,-0.0538634)-border))){\n\t\tfor(int i=ZERO;i<16;i++){\n\t\t\tdis_sq=min(dis_sq,cubic_bezier_dis_approx_sq(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]));\n\t\t\tnum_its+=cubic_bezier_int_test(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]);\n\t\t}\n\t}\n\n\tfloat sgn=1.;\n\n\tif(num_its%2==1){\n\t\tsgn=-1.;\n\t}\n\n\treturn sgn*dis_sq;\n}\n\nfloat path1_dis_sq(vec2 uv){\n\tfloat dis_sq=1e38;\n\n\tint num_its=0;\n\n\tvec2[36] p=vec2[](vec2(-0.234832,0.0222609),\n\t                  vec2(-0.234832,0.00954037),\n\t                  vec2(-0.243776,-0.0149068),\n\t                  vec2(-0.243776,-0.0284223),\n\t                  vec2(-0.243776,-0.0397516),\n\t                  vec2(-0.237615,-0.0508821),\n\t                  vec2(-0.220323,-0.0508821),\n\t                  vec2(-0.209789,-0.0508821),\n\t                  vec2(-0.194484,-0.0467081),\n\t                  vec2(-0.183354,-0.0141118),\n\t                  vec2(-0.191702,-0.0141118),\n\t                  vec2(-0.196074,-0.0244473),\n\t                  vec2(-0.199652,-0.0316026),\n\t                  vec2(-0.208397,-0.0316026),\n\t                  vec2(-0.21436,-0.0316026),\n\t                  vec2(-0.216348,-0.0282236),\n\t                  vec2(-0.216348,-0.0232546),\n\t                  vec2(-0.216348,-0.0121242),\n\t                  vec2(-0.206807,0.0119255),\n\t                  vec2(-0.206807,0.0280249),\n\t                  vec2(-0.206807,0.0439255),\n\t                  vec2(-0.216149,0.0504845),\n\t                  vec2(-0.228869,0.0504845),\n\t                  vec2(-0.235031,0.0504845),\n\t                  vec2(-0.243776,0.0488945),\n\t                  vec2(-0.252124,0.0393542),\n\t                  vec2(-0.241391,0.0894412),\n\t                  vec2(-0.270807,0.085466),\n\t                  vec2(-0.299627,-0.0496894),\n\t                  vec2(-0.271006,-0.0496894),\n\t                  vec2(-0.257292,0.0149068),\n\t                  vec2(-0.256099,0.0202733),\n\t                  vec2(-0.249938,0.0323976),\n\t                  vec2(-0.242186,0.0323976),\n\t                  vec2(-0.237217,0.0323976),\n\t                  vec2(-0.234832,0.02882));\n\n\tivec2[6] seg=ivec2[](ivec2(9,10),\n\t                     ivec2(25,26),\n\t                     ivec2(26,27),\n\t                     ivec2(27,28),\n\t                     ivec2(28,29),\n\t                     ivec2(29,30));\n\n\tivec4[10] c_bez=ivec4[](ivec4(0,1,2,3),\n\t                        ivec4(3,4,5,6),\n\t                        ivec4(6,7,8,9),\n\t                        ivec4(10,11,12,13),\n\t                        ivec4(13,14,15,16),\n\t                        ivec4(16,17,18,19),\n\t                        ivec4(19,20,21,22),\n\t                        ivec4(22,23,24,25),\n\t                        ivec4(30,31,32,33),\n\t                        ivec4(33,34,35,0));\n\n\tif(all(lessThan(uv,vec2(-0.183354,0.0894412)+border)) && all(greaterThan(uv,vec2(-0.299627,-0.0508821)-border))){\n\t\tfor(int i=ZERO;i<6;i++){\n\t\t\tdis_sq=min(dis_sq,segment_dis_sq(uv,p[seg[i][0]],p[seg[i][1]]));\n\t\t\tnum_its+=segment_int_test(uv,p[seg[i][0]],p[seg[i][1]]);\n\t\t}\n\t\tfor(int i=ZERO;i<10;i++){\n\t\t\tdis_sq=min(dis_sq,cubic_bezier_dis_approx_sq(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]));\n\t\t\tnum_its+=cubic_bezier_int_test(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]);\n\t\t}\n\t}\n\n\tfloat sgn=1.;\n\n\tif(num_its%2==1){\n\t\tsgn=-1.;\n\t}\n\n\treturn sgn*dis_sq;\n}\n\nfloat path2_dis_sq(vec2 uv){\n\tfloat dis_sq=1e38;\n\n\tint num_its=0;\n\n\tvec2[45] p=vec2[](vec2(-0.124919,0.0496896),\n\t                  vec2(-0.127105,0.0391554),\n\t                  vec2(-0.127105,0.0405467),\n\t                  vec2(-0.127105,0.0463107),\n\t                  vec2(-0.131876,0.0506833),\n\t                  vec2(-0.143205,0.0506833),\n\t                  vec2(-0.177789,0.0506833),\n\t                  vec2(-0.194286,0.00795032),\n\t                  vec2(-0.194286,-0.018882),\n\t                  vec2(-0.194286,-0.0425342),\n\t                  vec2(-0.181366,-0.0508821),\n\t                  vec2(-0.167851,-0.0508821),\n\t                  vec2(-0.153739,-0.0508821),\n\t                  vec2(-0.144397,-0.0417392),\n\t                  vec2(-0.138236,-0.0325963),\n\t                  vec2(-0.137043,-0.0445217),\n\t                  vec2(-0.129888,-0.0508821),\n\t                  vec2(-0.118758,-0.0508821),\n\t                  vec2(-0.108025,-0.0508821),\n\t                  vec2(-0.0901364,-0.0465093),\n\t                  vec2(-0.0788071,-0.0141118),\n\t                  vec2(-0.087155,-0.0141118),\n\t                  vec2(-0.0901364,-0.0240497),\n\t                  vec2(-0.0955028,-0.0327951),\n\t                  vec2(-0.103254,-0.0327951),\n\t                  vec2(-0.10882,-0.0327951),\n\t                  vec2(-0.111403,-0.0298137),\n\t                  vec2(-0.111403,-0.0242485),\n\t                  vec2(-0.111403,-0.0224597),\n\t                  vec2(-0.111205,-0.0204721),\n\t                  vec2(-0.110609,-0.0178882),\n\t                  vec2(-0.0962985,0.0496896),\n\t                  vec2(-0.137043,0.0383603),\n\t                  vec2(-0.130683,0.0383603),\n\t                  vec2(-0.128894,0.0331926),\n\t                  vec2(-0.128894,0.0308075),\n\t                  vec2(-0.138435,-0.0141118),\n\t                  vec2(-0.14082,-0.0256398),\n\t                  vec2(-0.149168,-0.0316026),\n\t                  vec2(-0.154931,-0.0316026),\n\t                  vec2(-0.158509,-0.0316026),\n\t                  vec2(-0.164869,-0.0314042),\n\t                  vec2(-0.164869,-0.0160994),\n\t                  vec2(-0.164869,0.00258385),\n\t                  vec2(-0.153938,0.0383603));\n\n\tivec2[6] seg=ivec2[](ivec2(0,1),\n\t                     ivec2(1,2),\n\t                     ivec2(20,21),\n\t                     ivec2(30,31),\n\t                     ivec2(31,0),\n\t                     ivec2(35,36));\n\n\tivec4[13] c_bez=ivec4[](ivec4(2,3,4,5),\n\t                        ivec4(5,6,7,8),\n\t                        ivec4(8,9,10,11),\n\t                        ivec4(11,12,13,14),\n\t                        ivec4(14,15,16,17),\n\t                        ivec4(17,18,19,20),\n\t                        ivec4(21,22,23,24),\n\t                        ivec4(24,25,26,27),\n\t                        ivec4(27,28,29,30),\n\t                        ivec4(32,33,34,35),\n\t                        ivec4(36,37,38,39),\n\t                        ivec4(39,40,41,42),\n\t                        ivec4(42,43,44,32));\n\n\tif(all(lessThan(uv,vec2(-0.0788071,0.0506833)+border)) && all(greaterThan(uv,vec2(-0.194286,-0.0508821)-border))){\n\t\tfor(int i=ZERO;i<6;i++){\n\t\t\tdis_sq=min(dis_sq,segment_dis_sq(uv,p[seg[i][0]],p[seg[i][1]]));\n\t\t\tnum_its+=segment_int_test(uv,p[seg[i][0]],p[seg[i][1]]);\n\t\t}\n\t\tfor(int i=ZERO;i<13;i++){\n\t\t\tdis_sq=min(dis_sq,cubic_bezier_dis_approx_sq(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]));\n\t\t\tnum_its+=cubic_bezier_int_test(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]);\n\t\t}\n\t}\n\n\tfloat sgn=1.;\n\n\tif(num_its%2==1){\n\t\tsgn=-1.;\n\t}\n\n\treturn sgn*dis_sq;\n}\n\nfloat path3_dis_sq(vec2 uv){\n\tfloat dis_sq=1e38;\n\n\tint num_its=0;\n\n\tvec2[46] p=vec2[](vec2(-0.0128197,0.085466),\n\t                  vec2(-0.0225589,0.0397516),\n\t                  vec2(-0.0225589,0.0405471),\n\t                  vec2(-0.0225589,0.0463111),\n\t                  vec2(-0.027329,0.0506837),\n\t                  vec2(-0.0386581,0.0506837),\n\t                  vec2(-0.0732421,0.0506837),\n\t                  vec2(-0.089739,0.00795077),\n\t                  vec2(-0.089739,-0.0188816),\n\t                  vec2(-0.089739,-0.0425337),\n\t                  vec2(-0.0768197,-0.0508816),\n\t                  vec2(-0.0633042,-0.0508816),\n\t                  vec2(-0.0491924,-0.0508816),\n\t                  vec2(-0.0398508,-0.0417387),\n\t                  vec2(-0.033888,-0.0325958),\n\t                  vec2(-0.0322979,-0.0437263),\n\t                  vec2(-0.0251426,-0.049689),\n\t                  vec2(-0.0144097,-0.049689),\n\t                  vec2(-0.00367677,-0.049689),\n\t                  vec2(0.0142115,-0.0465089),\n\t                  vec2(0.0255407,-0.0141113),\n\t                  vec2(0.0171928,-0.0141113),\n\t                  vec2(0.0142115,-0.0240493),\n\t                  vec2(0.00884499,-0.0316021),\n\t                  vec2(0.00109338,-0.0316021),\n\t                  vec2(-0.00447185,-0.0316021),\n\t                  vec2(-0.00705565,-0.0298133),\n\t                  vec2(-0.00705565,-0.024248),\n\t                  vec2(-0.00705565,-0.0224592),\n\t                  vec2(-0.00685733,-0.0204716),\n\t                  vec2(-0.00626124,-0.0178877),\n\t                  vec2(0.016596,0.0894417),\n\t                  vec2(-0.0340868,-0.0151056),\n\t                  vec2(-0.0366707,-0.0260373),\n\t                  vec2(-0.0448197,-0.0316026),\n\t                  vec2(-0.0503849,-0.0316026),\n\t                  vec2(-0.0539626,-0.0316026),\n\t                  vec2(-0.0603228,-0.0314042),\n\t                  vec2(-0.0603228,-0.0160994),\n\t                  vec2(-0.0603228,0.00258385),\n\t                  vec2(-0.0493911,0.0383603),\n\t                  vec2(-0.0324967,0.0383603),\n\t                  vec2(-0.0265339,0.0383603),\n\t                  vec2(-0.0247451,0.0337889),\n\t                  vec2(-0.0243477,0.0314038),\n\t                  vec2(-0.0340868,-0.0141118));\n\n\tivec2[7] seg=ivec2[](ivec2(0,1),\n\t                     ivec2(1,2),\n\t                     ivec2(20,21),\n\t                     ivec2(30,31),\n\t                     ivec2(31,0),\n\t                     ivec2(44,45),\n\t                     ivec2(45,32));\n\n\tivec4[13] c_bez=ivec4[](ivec4(2,3,4,5),\n\t                        ivec4(5,6,7,8),\n\t                        ivec4(8,9,10,11),\n\t                        ivec4(11,12,13,14),\n\t                        ivec4(14,15,16,17),\n\t                        ivec4(17,18,19,20),\n\t                        ivec4(21,22,23,24),\n\t                        ivec4(24,25,26,27),\n\t                        ivec4(27,28,29,30),\n\t                        ivec4(32,33,34,35),\n\t                        ivec4(35,36,37,38),\n\t                        ivec4(38,39,40,41),\n\t                        ivec4(41,42,43,44));\n\n\tif(all(lessThan(uv,vec2(0.0255407,0.0894417)+border)) && all(greaterThan(uv,vec2(-0.089739,-0.0508816)-border))){\n\t\tfor(int i=ZERO;i<7;i++){\n\t\t\tdis_sq=min(dis_sq,segment_dis_sq(uv,p[seg[i][0]],p[seg[i][1]]));\n\t\t\tnum_its+=segment_int_test(uv,p[seg[i][0]],p[seg[i][1]]);\n\t\t}\n\t\tfor(int i=ZERO;i<13;i++){\n\t\t\tdis_sq=min(dis_sq,cubic_bezier_dis_approx_sq(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]));\n\t\t\tnum_its+=cubic_bezier_int_test(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]);\n\t\t}\n\t}\n\n\tfloat sgn=1.;\n\n\tif(num_its%2==1){\n\t\tsgn=-1.;\n\t}\n\n\treturn sgn*dis_sq;\n}\n\nfloat path4_dis_sq(vec2 uv){\n\tfloat dis_sq=1e38;\n\n\tint num_its=0;\n\n\tvec2[34] p=vec2[](vec2(0.044025,-0.0174906),\n\t                  vec2(0.044025,-0.0151056),\n\t                  vec2(0.0442233,-0.0123229),\n\t                  vec2(0.0444228,-0.00954037),\n\t                  vec2(0.0682738,-0.00814909),\n\t                  vec2(0.0901371,0.00954037),\n\t                  vec2(0.0901371,0.0323976),\n\t                  vec2(0.0901371,0.0423355),\n\t                  vec2(0.0859633,0.0514784),\n\t                  vec2(0.0682738,0.0514784),\n\t                  vec2(0.0275284,0.0514784),\n\t                  vec2(0.0146091,0.0035777),\n\t                  vec2(0.0146091,-0.0192795),\n\t                  vec2(0.0146091,-0.0417392),\n\t                  vec2(0.0269321,-0.0508821),\n\t                  vec2(0.0456153,-0.0508821),\n\t                  vec2(0.0720502,-0.0508821),\n\t                  vec2(0.0889446,-0.0323975),\n\t                  vec2(0.100274,-0.0141118),\n\t                  vec2(0.0935161,-0.0141118),\n\t                  vec2(0.0835781,-0.025441),\n\t                  vec2(0.0740377,-0.0341864),\n\t                  vec2(0.0583358,-0.0341864),\n\t                  vec2(0.0487955,-0.0341864),\n\t                  vec2(0.0440252,-0.0310062),\n\t                  vec2(0.0748326,0.0327951),\n\t                  vec2(0.0748326,0.0162982),\n\t                  vec2(0.0613171,0.000993797),\n\t                  vec2(0.0460126,5.63409e-08),\n\t                  vec2(0.0499878,0.0196771),\n\t                  vec2(0.0597269,0.0409442),\n\t                  vec2(0.0698636,0.0409442),\n\t                  vec2(0.07364,0.0409442),\n\t                  vec2(0.0748326,0.0377641));\n\n\tivec2[1] seg=ivec2[](ivec2(18,19));\n\n\tivec4[11] c_bez=ivec4[](ivec4(0,1,2,3),\n\t                        ivec4(3,4,5,6),\n\t                        ivec4(6,7,8,9),\n\t                        ivec4(9,10,11,12),\n\t                        ivec4(12,13,14,15),\n\t                        ivec4(15,16,17,18),\n\t                        ivec4(19,20,21,22),\n\t                        ivec4(22,23,24,0),\n\t                        ivec4(25,26,27,28),\n\t                        ivec4(28,29,30,31),\n\t                        ivec4(31,32,33,25));\n\n\tif(all(lessThan(uv,vec2(0.100274,0.0514784)+border)) && all(greaterThan(uv,vec2(0.0146091,-0.0508821)-border))){\n\t\tfor(int i=ZERO;i<1;i++){\n\t\t\tdis_sq=min(dis_sq,segment_dis_sq(uv,p[seg[i][0]],p[seg[i][1]]));\n\t\t\tnum_its+=segment_int_test(uv,p[seg[i][0]],p[seg[i][1]]);\n\t\t}\n\t\tfor(int i=ZERO;i<11;i++){\n\t\t\tdis_sq=min(dis_sq,cubic_bezier_dis_approx_sq(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]));\n\t\t\tnum_its+=cubic_bezier_int_test(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]);\n\t\t}\n\t}\n\n\tfloat sgn=1.;\n\n\tif(num_its%2==1){\n\t\tsgn=-1.;\n\t}\n\n\treturn sgn*dis_sq;\n}\n\nfloat path5_dis_sq(vec2 uv){\n\tfloat dis_sq=1e38;\n\n\tint num_its=0;\n\n\tvec2[20] p=vec2[](vec2(0.107031,0.0496896),\n\t                  vec2(0.0859628,-0.0496894),\n\t                  vec2(0.114584,-0.0496894),\n\t                  vec2(0.130485,0.0258385),\n\t                  vec2(0.135454,0.03041),\n\t                  vec2(0.139031,0.0333914),\n\t                  vec2(0.144994,0.0333914),\n\t                  vec2(0.150957,0.0333914),\n\t                  vec2(0.145392,0.0202733),\n\t                  vec2(0.156522,0.0202733),\n\t                  vec2(0.166261,0.0202733),\n\t                  vec2(0.170833,0.0278261),\n\t                  vec2(0.170833,0.0347827),\n\t                  vec2(0.170833,0.0423355),\n\t                  vec2(0.166062,0.0496896),\n\t                  vec2(0.157118,0.0496896),\n\t                  vec2(0.147578,0.0496896),\n\t                  vec2(0.140025,0.0433292),\n\t                  vec2(0.133069,0.0373666),\n\t                  vec2(0.135652,0.0496896));\n\n\tivec2[5] seg=ivec2[](ivec2(0,1),\n\t                     ivec2(1,2),\n\t                     ivec2(2,3),\n\t                     ivec2(18,19),\n\t                     ivec2(19,0));\n\n\tivec4[5] c_bez=ivec4[](ivec4(3,4,5,6),\n\t                       ivec4(6,7,8,9),\n\t                       ivec4(9,10,11,12),\n\t                       ivec4(12,13,14,15),\n\t                       ivec4(15,16,17,18));\n\n\tif(all(lessThan(uv,vec2(0.170833,0.0496896)+border)) && all(greaterThan(uv,vec2(0.0859628,-0.0496894)-border))){\n\t\tfor(int i=ZERO;i<5;i++){\n\t\t\tdis_sq=min(dis_sq,segment_dis_sq(uv,p[seg[i][0]],p[seg[i][1]]));\n\t\t\tnum_its+=segment_int_test(uv,p[seg[i][0]],p[seg[i][1]]);\n\t\t}\n\t\tfor(int i=ZERO;i<5;i++){\n\t\t\tdis_sq=min(dis_sq,cubic_bezier_dis_approx_sq(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]));\n\t\t\tnum_its+=cubic_bezier_int_test(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]);\n\t\t}\n\t}\n\n\tfloat sgn=1.;\n\n\tif(num_its%2==1){\n\t\tsgn=-1.;\n\t}\n\n\treturn sgn*dis_sq;\n}\n\nfloat path6_dis_sq(vec2 uv){\n\tfloat dis_sq=1e38;\n\n\tint num_its=0;\n\n\tvec2[30] p=vec2[](vec2(0.187727,0.0771182),\n\t                  vec2(0.181764,0.0496896),\n\t                  vec2(0.175205,0.0496896),\n\t                  vec2(0.173615,0.0417392),\n\t                  vec2(0.180174,0.0417392),\n\t                  vec2(0.168249,-0.0141118),\n\t                  vec2(0.167255,-0.018882),\n\t                  vec2(0.166658,-0.0232546),\n\t                  vec2(0.166658,-0.0270311),\n\t                  vec2(0.166658,-0.0437268),\n\t                  vec2(0.176,-0.0508821),\n\t                  vec2(0.187926,-0.0508821),\n\t                  vec2(0.198659,-0.0508821),\n\t                  vec2(0.218336,-0.0465093),\n\t                  vec2(0.229665,-0.0141118),\n\t                  vec2(0.221317,-0.0141118),\n\t                  vec2(0.218336,-0.0240497),\n\t                  vec2(0.21118,-0.0316026),\n\t                  vec2(0.203429,-0.0316026),\n\t                  vec2(0.197863,-0.0316026),\n\t                  vec2(0.19528,-0.0298137),\n\t                  vec2(0.19528,-0.0242485),\n\t                  vec2(0.19528,-0.0224597),\n\t                  vec2(0.195478,-0.0204721),\n\t                  vec2(0.196074,-0.0178882),\n\t                  vec2(0.208795,0.0417392),\n\t                  vec2(0.22072,0.0417392),\n\t                  vec2(0.22231,0.0496896),\n\t                  vec2(0.210385,0.0496896),\n\t                  vec2(0.217142,0.0810933));\n\n\tivec2[12] seg=ivec2[](ivec2(0,1),\n\t                      ivec2(1,2),\n\t                      ivec2(2,3),\n\t                      ivec2(3,4),\n\t                      ivec2(4,5),\n\t                      ivec2(14,15),\n\t                      ivec2(24,25),\n\t                      ivec2(25,26),\n\t                      ivec2(26,27),\n\t                      ivec2(27,28),\n\t                      ivec2(28,29),\n\t                      ivec2(29,0));\n\n\tivec4[6] c_bez=ivec4[](ivec4(5,6,7,8),\n\t                       ivec4(8,9,10,11),\n\t                       ivec4(11,12,13,14),\n\t                       ivec4(15,16,17,18),\n\t                       ivec4(18,19,20,21),\n\t                       ivec4(21,22,23,24));\n\n\tif(all(lessThan(uv,vec2(0.229665,0.0810933)+border)) && all(greaterThan(uv,vec2(0.166658,-0.0508821)-border))){\n\t\tfor(int i=ZERO;i<12;i++){\n\t\t\tdis_sq=min(dis_sq,segment_dis_sq(uv,p[seg[i][0]],p[seg[i][1]]));\n\t\t\tnum_its+=segment_int_test(uv,p[seg[i][0]],p[seg[i][1]]);\n\t\t}\n\t\tfor(int i=ZERO;i<6;i++){\n\t\t\tdis_sq=min(dis_sq,cubic_bezier_dis_approx_sq(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]));\n\t\t\tnum_its+=cubic_bezier_int_test(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]);\n\t\t}\n\t}\n\n\tfloat sgn=1.;\n\n\tif(num_its%2==1){\n\t\tsgn=-1.;\n\t}\n\n\treturn sgn*dis_sq;\n}\n\nfloat path7_dis_sq(vec2 uv){\n\tfloat dis_sq=1e38;\n\n\tint num_its=0;\n\n\tvec2[40] p=vec2[](vec2(0.272994,0.0514784),\n\t                  vec2(0.23205,0.0514784),\n\t                  vec2(0.218534,0.00377647),\n\t                  vec2(0.218534,-0.0190808),\n\t                  vec2(0.218534,-0.0417392),\n\t                  vec2(0.231851,-0.0504845),\n\t                  vec2(0.250335,-0.0504845),\n\t                  vec2(0.274783,-0.0504845),\n\t                  vec2(0.294658,-0.0274286),\n\t                  vec2(0.297839,0.00934171),\n\t                  vec2(0.312348,0.0117267),\n\t                  vec2(0.325466,0.0176895),\n\t                  vec2(0.333019,0.0258385),\n\t                  vec2(0.33123,0.031205),\n\t                  vec2(0.322683,0.0252423),\n\t                  vec2(0.309764,0.0192796),\n\t                  vec2(0.300621,0.0192796),\n\t                  vec2(0.300025,0.0192796),\n\t                  vec2(0.29923,0.0192796),\n\t                  vec2(0.298435,0.0196773),\n\t                  vec2(0.298435,0.0405469),\n\t                  vec2(0.290087,0.0514786),\n\t                  vec2(0.258286,-0.0325963),\n\t                  vec2(0.250733,-0.0325963),\n\t                  vec2(0.248149,-0.029615),\n\t                  vec2(0.248149,-0.0164969),\n\t                  vec2(0.248149,0.00298139),\n\t                  vec2(0.260472,0.0393542),\n\t                  vec2(0.274584,0.0393542),\n\t                  vec2(0.279752,0.0393542),\n\t                  vec2(0.281739,0.0361739),\n\t                  vec2(0.282137,0.0278261),\n\t                  vec2(0.278559,0.0262361),\n\t                  vec2(0.275975,0.0226584),\n\t                  vec2(0.275975,0.0170932),\n\t                  vec2(0.275975,0.013118),\n\t                  vec2(0.277168,0.00973914),\n\t                  vec2(0.281342,0.0087454),\n\t                  vec2(0.278161,-0.0147081),\n\t                  vec2(0.268025,-0.0325963));\n\n\tivec2[1] seg=ivec2[](ivec2(12,13));\n\n\tivec4[13] c_bez=ivec4[](ivec4(0,1,2,3),\n\t                        ivec4(3,4,5,6),\n\t                        ivec4(6,7,8,9),\n\t                        ivec4(9,10,11,12),\n\t                        ivec4(13,14,15,16),\n\t                        ivec4(16,17,18,19),\n\t                        ivec4(19,20,21,0),\n\t                        ivec4(22,23,24,25),\n\t                        ivec4(25,26,27,28),\n\t                        ivec4(28,29,30,31),\n\t                        ivec4(31,32,33,34),\n\t                        ivec4(34,35,36,37),\n\t                        ivec4(37,38,39,22));\n\n\tif(all(lessThan(uv,vec2(0.333019,0.0514786)+border)) && all(greaterThan(uv,vec2(0.218534,-0.0504845)-border))){\n\t\tfor(int i=ZERO;i<1;i++){\n\t\t\tdis_sq=min(dis_sq,segment_dis_sq(uv,p[seg[i][0]],p[seg[i][1]]));\n\t\t\tnum_its+=segment_int_test(uv,p[seg[i][0]],p[seg[i][1]]);\n\t\t}\n\t\tfor(int i=ZERO;i<13;i++){\n\t\t\tdis_sq=min(dis_sq,cubic_bezier_dis_approx_sq(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]));\n\t\t\tnum_its+=cubic_bezier_int_test(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]);\n\t\t}\n\t}\n\n\tfloat sgn=1.;\n\n\tif(num_its%2==1){\n\t\tsgn=-1.;\n\t}\n\n\treturn sgn*dis_sq;\n}\n\nfloat path8_dis_sq(vec2 uv){\n\tfloat dis_sq=1e38;\n\n\tint num_its=0;\n\n\tvec2[44] p=vec2[](vec2(0.322087,0.0496896),\n\t                  vec2(0.308571,-0.0141118),\n\t                  vec2(0.307577,-0.018882),\n\t                  vec2(0.306981,-0.0232546),\n\t                  vec2(0.306981,-0.0270311),\n\t                  vec2(0.306981,-0.0437268),\n\t                  vec2(0.316323,-0.0508821),\n\t                  vec2(0.328248,-0.0508821),\n\t                  vec2(0.335006,-0.0508821),\n\t                  vec2(0.34395,-0.0490932),\n\t                  vec2(0.352497,-0.039354),\n\t                  vec2(0.350509,-0.0480994),\n\t                  vec2(0.331627,-0.0536646),\n\t                  vec2(0.316124,-0.0594286),\n\t                  vec2(0.316124,-0.0779132),\n\t                  vec2(0.316124,-0.0908324),\n\t                  vec2(0.327453,-0.0993791),\n\t                  vec2(0.339578,-0.0993791),\n\t                  vec2(0.352696,-0.0993791),\n\t                  vec2(0.369789,-0.0940126),\n\t                  vec2(0.375751,-0.0655902),\n\t                  vec2(0.4,0.0496896),\n\t                  vec2(0.37118,0.0496896),\n\t                  vec2(0.357664,-0.0141118),\n\t                  vec2(0.354683,-0.0240497),\n\t                  vec2(0.349515,-0.0316026),\n\t                  vec2(0.341764,-0.0316026),\n\t                  vec2(0.337192,-0.0316026),\n\t                  vec2(0.335801,-0.0274286),\n\t                  vec2(0.335801,-0.0228571),\n\t                  vec2(0.335801,-0.021267),\n\t                  vec2(0.335999,-0.0194782),\n\t                  vec2(0.336397,-0.0178882),\n\t                  vec2(0.350708,0.0496896),\n\t                  vec2(0.327056,-0.0751305),\n\t                  vec2(0.327056,-0.0643976),\n\t                  vec2(0.336596,-0.0586336),\n\t                  vec2(0.349118,-0.0544597),\n\t                  vec2(0.346733,-0.0661864),\n\t                  vec2(0.344149,-0.0779132),\n\t                  vec2(0.338981,-0.0816896),\n\t                  vec2(0.335006,-0.0816896),\n\t                  vec2(0.330633,-0.0816896),\n\t                  vec2(0.327056,-0.0779132));\n\n\tivec2[8] seg=ivec2[](ivec2(0,1),\n\t                     ivec2(10,11),\n\t                     ivec2(20,21),\n\t                     ivec2(21,22),\n\t                     ivec2(22,23),\n\t                     ivec2(32,33),\n\t                     ivec2(33,0),\n\t                     ivec2(37,38));\n\n\tivec4[12] c_bez=ivec4[](ivec4(1,2,3,4),\n\t                        ivec4(4,5,6,7),\n\t                        ivec4(7,8,9,10),\n\t                        ivec4(11,12,13,14),\n\t                        ivec4(14,15,16,17),\n\t                        ivec4(17,18,19,20),\n\t                        ivec4(23,24,25,26),\n\t                        ivec4(26,27,28,29),\n\t                        ivec4(29,30,31,32),\n\t                        ivec4(34,35,36,37),\n\t                        ivec4(38,39,40,41),\n\t                        ivec4(41,42,43,34));\n\n\tif(all(lessThan(uv,vec2(0.4,0.0496896)+border)) && all(greaterThan(uv,vec2(0.306981,-0.0993791)-border))){\n\t\tfor(int i=ZERO;i<8;i++){\n\t\t\tdis_sq=min(dis_sq,segment_dis_sq(uv,p[seg[i][0]],p[seg[i][1]]));\n\t\t\tnum_its+=segment_int_test(uv,p[seg[i][0]],p[seg[i][1]]);\n\t\t}\n\t\tfor(int i=ZERO;i<12;i++){\n\t\t\tdis_sq=min(dis_sq,cubic_bezier_dis_approx_sq(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]));\n\t\t\tnum_its+=cubic_bezier_int_test(uv,p[c_bez[i][0]],p[c_bez[i][1]],p[c_bez[i][2]],p[c_bez[i][3]]);\n\t\t}\n\t}\n\n\tfloat sgn=1.;\n\n\tif(num_its%2==1){\n\t\tsgn=-1.;\n\t}\n\n\treturn sgn*dis_sq;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n\tborder=2./iResolution.x;\n\n\tvec2 uv=fragCoord.xy/iResolution.xy;\n\tuv-=.5;\n\tuv.y*=iResolution.y/iResolution.x;\n\n    vec2 mouse=vec2(0);\n\n\tif(iMouse.x>0.0){\n\t\tmouse = iMouse.xy / iResolution.y;\n\t\tmouse.x -= .5 * iResolution.x / iResolution.y;\n\t\tmouse.y -= .75;\n\t}\n    \n    const float pi=3.14159265358979;\n\n\tfloat t0=smoothstep(0.,5.,iTime);\n\tfloat t1=t0*6.*pi;\n\n\tmat2 rot=mat2(cos(t1),sin(t1),-sin(t1),cos(t1));\n\n\tborder*=exp(4.*mouse.y)*exp(1.-1.*t0);\n\tuv*=exp(4.*mouse.y)*exp(1.-1.*t0);\n\tuv*=rot;\n\n\tuv.x+=mouse.x;\n\n\tfloat dis_sq=1e38;\n\n\tif(all(lessThan(uv,vec2(0.4,0.0993791)+border)) && all(greaterThan(uv,vec2(-0.4,-0.0993791)-border))){\n\t\tdis_sq=min(dis_sq,path0_dis_sq(uv));\n\t\tdis_sq=min(dis_sq,path1_dis_sq(uv));\n\t\tdis_sq=min(dis_sq,path2_dis_sq(uv));\n\t\tdis_sq=min(dis_sq,path3_dis_sq(uv));\n\t\tdis_sq=min(dis_sq,path4_dis_sq(uv));\n\t\tdis_sq=min(dis_sq,path5_dis_sq(uv));\n\t\tdis_sq=min(dis_sq,path6_dis_sq(uv));\n\t\tdis_sq=min(dis_sq,path7_dis_sq(uv));\n\t\tdis_sq=min(dis_sq,path8_dis_sq(uv));\n\t}\n\n\tfloat dis=sign(dis_sq)*sqrt(abs(dis_sq));\n\n\tfragColor=vec4(smoothstep(0., border, dis));\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}