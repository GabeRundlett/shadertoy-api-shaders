{
    "Shader": {
        "info": {
            "date": "1656791020",
            "description": "WIP.\nwhy is 1.5 step  wall color instead of grey ?",
            "flags": 0,
            "hasliked": 0,
            "id": "NscBzj",
            "likes": 19,
            "name": "spiral stairs",
            "published": 3,
            "tags": [
                "raymarching",
                "short",
                "reproduction"
            ],
            "usePreview": 0,
            "username": "FabriceNeyret2",
            "viewed": 428
        },
        "renderpass": [
            {
                "code": "\n// smooth fract. cf https://www.shadertoy.com/view/tsyXzV\n#  define sfloor(x) ( floor(x-pix/2.) + max( 0., 1.-fract(-(x)+pix/2.) / pix ) ) \n#  define sfract(x) ( x - sfloor(x) )\n\n#define rot(a)       mat2(cos(a+vec4(0,11,33,0)))         // rotation                  \n                                  \nvoid mainImage(out vec4 O, vec2 U)\n{\n    float t=9.,s, A, v, pix=.04; \n    vec3  R = iResolution,\n          D = normalize(vec3(U+U, -4.*R.y) - R),          // ray direction\n          p = 60./R, q,a,                                 // marching point along ray \n          M = iMouse.z > 0. ? .1*(iMouse.xyz/R -.5): vec3(10)/1e3*cos(iTime+vec3(0,11,0)); // auto demo\n//D.yz *= rot(-1.57-M.y*50.); D.xy *= rot(M.x*80.);       // debug view\n    for (O=vec4(1); O.x > 0. && t > .01; O-=.01)          // march scene\n        q = p,\n        q.yz *= rot(-6.*M.y),                             // rotations\n        q.xz *= rot(-6.*M.x),\n        q.z -= 5.*iTime,\n        a = abs(q),\n        A = fract( atan(q.y,q.x)/6.28 - 1./8. ),          // steps fan\n        s = 10. - 3.*sfract(q.z/32.+ A) - max(a.x,a.y),        // stair walls\n        v = abs( fract(q.z/32.)*32. + sfloor(32.*A) -32.) -2., // steps surface\n        t = max(min(t, s ), -v), // s = max(s,max(a.x,a.y)-12.)\n     // t = min(9.,max( max(v,q.z+30.), abs(length(q.xy)-10.) -5.)), // test\n        \n        p += .5*t*D;                                      // step forward = dist to obj          \n   \n   if (t==s) O *= 2.*texture(iChannel0, a.x>a.y ? q.yz*.1 : q.xz*.1 ); // coloring\n}  // WIP: at wrong corner step s<0. !\n",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 1,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}