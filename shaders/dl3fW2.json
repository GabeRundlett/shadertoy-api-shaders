{
    "Shader": {
        "info": {
            "date": "1701601187",
            "description": "Includes traversal and external views; also cross sections and pano view.\nLots of domes, arches, buttresses, columns, bridges, reflections, ogives.",
            "flags": 0,
            "hasliked": 0,
            "id": "dl3fW2",
            "likes": 12,
            "name": "Towers and Domes",
            "published": 3,
            "tags": [
                "architecture"
            ],
            "usePreview": 0,
            "username": "dr2",
            "viewed": 255
        },
        "renderpass": [
            {
                "code": "#define O177 min(O224,0)\n#define O527(x)(sin((x)+vec2(0.5*O689,0.)))\n#define O620 O589(O627,O682);\n#define O899(O705){O620 if(O682<O868){O868=O682; O077=O705; O844=O813;}}\n#define O379 4\n\nvec4 O371,O511;vec3 O743,O844,O651,O487,O394;float O867,O054,O580,O611,O549,O248,O999,O247[3],O596[3];int O224,O077,O806;const int O767=1,O984=2,O015=3,O418=4,O449=5,O891=6,O922=7,O829=8,O387=9,O356=10,O201=11,O232=12,O263=13,O294=14,O139=15,O325=16,O860=17,O953=18,O046=19,O798=20,O170=21,O736=22;const float O689=3.1415927;const int O286=17;struct O751{vec2 O976[O286];ivec2 O217[O286];float O898[O286+1],O216[6],O093[7];};O751 O720;float O945(vec2 O627){return min(O627.x,O627.y);}float O852(vec2 O627){return max(O627.x,O627.y);}float O883(vec3 O627){return max(O627.x,max(O627.y,O627.z));}float O588(float O759,float O674,float O673,float O704){return(1.-smoothstep(O674-O673,O674+O673,O704))*smoothstep(O759-O673,O759+O673,O704);}mat3 O712(vec2 O208){vec2 O310,O340;O310=cos(O208);O340=sin(O208);return mat3(O310.x,0.,-O340.x,0.,1.,0.,O340.x,0.,O310.x)*mat3(1.,0.,0.,0.,O310.y,-O340.y,0.,O340.y,O310.y);}vec2 O185(vec2 O813,float O031){vec2 O558;O558=sin(O031+vec2(0.5*O689,0.));return vec2(dot(O813,vec2(O558.x,-O558.y)),dot(O813.yx,O558));}vec2 O154(vec2 O813,vec2 O558){return vec2(dot(O813,O558*vec2(1.,-1.)),dot(O813.yx,O558));}const float O372=43758.54;float O581(vec2 O627){return fract(sin(mod(dot(O627,vec2(37.,39.)),2.*O689))*O372);}vec2 O612(float O627){return fract(sin(mod(O627+vec2(0.,1.),2.*O689))*O372);}vec2 O643(vec2 O627){vec2 O403=vec2(37.,39.);return fract(sin(mod(dot(O627,O403)+vec2(0.,O403.x),2.*O689))*O372);}float O317(float O627){vec2 O805;float O542,O457;O542=floor(O627);O457=fract(O627);O457=O457*O457*(3.-2.*O457);O805=O612(O542);return mix(O805.x,O805.y,O457);}float O348(vec2 O627){vec2 O805,O542,O457;O542=floor(O627);O457=fract(O627);O457=O457*O457*(3.-2.*O457);O805=mix(O643(O542),O643(O542+vec2(0.,1.)),O457.y);return mix(O805.x,O805.y,O457.x);}float O271(float O627){float O240,O550;O240=0.;O550=1.;for(int O666=0;O666<5;O666++){O240+=O550*O317(O627);O550*=0.5;O627*=2.;}return O240*(1./1.9375);}float O302(vec2 O627){float O240,O550;O240=0.;O550=1.;for(int O666=0;O666<5;O666++){O240+=O550*O348(O627);O550*=0.5;O627*=2.;}return O240*(1./1.9375);}float O333(vec3 O627,vec3 O131){vec3 O309;float O550;O309=vec3(0.);O550=1.;for(int O666=0;O666<5;O666++){O309+=O550*vec3(O348(O627.yz),O348(O627.zx),O348(O627.xy));O550*=0.5;O627*=2.;}return dot(O309,abs(O131));}vec3 O146(vec3 O627,vec3 O131,float O240){vec4 O115;vec3 O550;vec2 O209=vec2(0.1,0.);for(int O666=O177;O666<4;O666++)O115[O666]=O333(O627+((O666<2)?((O666==0)?O209.xyy:O209.yxy):((O666==2)?O209.yyx:O209.yyy)),O131);O550=O115.xyz-O115.w;return normalize(O131+O240*(O550-O131*dot(O131,O550)));}void O589(vec3 O627,inout float O682){if(O806>0)O682=max(O682,dot(O627,O651));}\nfloat O441(vec3 O627){vec3 O813,O875,O906,O937,O968;float O868,O682,O092,O031,O278,O642,O681,O992,O147,O565,O782,O178,O961,O930;O565=0.07*O580;O868=O054;O092=length(O627.xz);O782=O627.y;O031=(O092>0.)?atan(O627.z,-O627.x)/(2.*O689):0.;O875=O627;O875.xz=O185(O875.xz,2.*O689*(floor(6.*O031)+0.5)/6.);O906=O875;O906.xz=O185(vec2(O906.x,abs(O906.z)),O689/12.);O937=O906;O937.xz=O185(vec2(O937.x,abs(O937.z)),O689/12.);O968=O875;O968.xz=O185(vec2(O968.x,abs(O968.z)),O689/6.);O642=1.5;O681=sqrt(O642*O642-1.);O371.xy=vec2(0.45*O580,0.5*O549);O371.zw=vec2(O371.y-O681*O371.x,O642*O371.x);O961=O642*O580;O930=O549-O681*O580;O147=length(vec2(O092,O782-O930))-O961;O511.z=length(vec2(abs(O875.z)+0.15,max(O782-0.3,0.)))-0.3;O813=O875;O813.x+=O580;O278=length(O813.xz);O511.x=max(O278-O371.x,length(vec2(O278,O782-O371.z))-O371.w);O682=max(max(abs(O511.x)-O611,-max(O092-O580,length(vec2(O092,O782-O930))-O961)-O611+0.001),-O511.z);O682=max(O682,-max(length(vec2(abs(O185(vec2(O813.x,abs(O813.z)),O689/24.).y)+0.13,max(O782-0.75,0.)))-0.2,0.65-O782));O682=max(max(O682,-max(length(vec2(abs(O813.x)+0.12,max(O782-0.7,0.)))-0.2,0.6-O782)),0.02-O782);O899(O418);O682=max(max(max(abs(O511.z)-0.018,abs(O092-1.35*O580)-0.35*O580),O371.x-O278-O611),0.02-O782);O899(O891);O813=O937;O813.xy-=vec2(0.15-O580,1.43);O682=length(O813)-0.04;O899(O953);O813=O627;O511.y=max(O092-O580,O147);O178=max(max(-O511.x-O611,O565+0.01-O092),0.02-O782);O682=max(max(abs(O511.y)-O611,-max(length(vec2(abs(O906.z)+0.1,max(O782-O549+0.25,0.)))-0.2,O549-0.4-O782)),O178);O899(O984);O682=max(length(vec2(abs(max(O092-O580,O147))-O611,O937.z))-0.03,O178);O899(O015);O682=min(max(min(O092-O580,O278-O371.x),abs(O782-0.04)-0.02),max(max(O092-1.69*O580,abs(O875.z)-0.15),abs(O782-0.025)-0.015));O899(O922);O813=O627;O682=max(O092-0.04,abs(O782-0.5*O999)-0.5*O999);O899(O170);O813.y=O782-O999;O682=length(O813)-0.1;O899(O736);O813=O875;O813.y=O782-O930-O961+0.13;O511.w=length(vec2(O092+0.1,max(O813.y-0.43,0.)))-O565-0.12;O682=max(max(abs(O511.w)-0.02,-O813.y),-max(length(vec2(abs(O813.z)+0.1,max(O813.y-0.48,0.)))-0.15,0.28-O813.y));O899(O449);O813.xz=O627.xz;O813.y-=0.58;O682=length(O813)-0.05;O899(O953);O813=O968;O682=max(abs(abs(O813.z)-0.08)-0.03,max(O813.x+O580,0.01-O782));O813.xy-=vec2(0.5-O580,-0.2);O682=max(O682,abs(length(O813.xy)-O549-0.12)-0.08);O899(O860);O813=O968;O682=max(abs(abs(O813.z)-0.05)-0.015,max(O565+0.02-O092,1.3-O813.y));O813.xy-=vec2(0.15,0.75);O682=max(O682,abs(length(O813.xy)-1.95)-0.04);O899(O829);O813=O968;O813.xy-=vec2(-O247[1],2.22);O682=length(O813)-0.05;O899(O953);O813=O906;O992=abs(O092-O247[0])-0.06;O682=max(O992,abs(O782-1.39)-0.2);O813.y=O782-1.2;O682=max(O682,0.3-length(O813.yz));O899(O387);O813.xz=O627.xz;O682=max(O992-0.01,abs(O782-1.6)-0.01);O899(O356);O813=O906;O992=abs(O092-O247[0]-0.02)-0.03;O813.yz=vec2(O782-1.6,abs(O906.z)+0.2);O682=max(O992,max(abs(length(O813.yz)-O596[0])-0.03,-O813.y));O899(O201);O813.xz=O627.xz;O682=max(O992-0.01,max(O147,2.17-O782));O899(O356);O682=max(length(vec2(O782-1.5,O937.z))-0.05,max(O092-O580,O247[0]+0.02-O092));O813.y=O782-0.08;O682=min(O682,max(O092-0.12,abs(O813.y)-0.03));O899(O325);O813=O937;O813.x+=O247[2];O682=max(length(O813.xz)-0.02,abs(O782-0.46)-0.38);O899(O139);O992=abs(O092-O247[2])-0.02;O813.y=O782-0.46;O682=max(O992,abs(abs(O813.y)-0.385))-0.01;O899(O325);O813.yz=vec2(O782-0.86,abs(O906.z)+0.06);O682=max(abs(O092-O247[2])-0.03,max(abs(length(O813.yz)-O596[2])-0.015,-O813.y));O899(O263);O813.xz=O627.xz;O682=max(O992-0.01,abs(O813.y-0.14)-0.01);O899(O356);O813=O937;O813.x+=O247[1];O682=max(length(O813.xz)-0.025,abs(O782-0.66)-0.58);O899(O139);O992=abs(O092-O247[1])-0.025;O813.y=O782-0.66;O682=max(O992,abs(abs(O813.y)-0.585))-0.01;O899(O325);O813.yz=vec2(O782-1.26,abs(O906.z)+0.1);O682=max(abs(O092-O247[1])-0.04,max(abs(length(O813.yz)-O596[1])-0.018,-O813.y));O899(O232);O813.xz=O627.xz;O682=max(O992-0.01,abs(O813.y-0.33)-0.013);O899(O356);O813=O937;O813.x+=O247[0];O813.xz=abs(O813.xz)-0.04;O682=max(length(O813.xz)-0.025,abs(O782-0.63)-0.55);O899(O139);O813.y=O782-0.63;O682=max(abs(O092-O247[0])-0.07,abs(abs(O813.y)-0.56)-0.02);O899(O325);O813=O937;O813.xy-=vec2(-O247[1],0.64);O682=max(max(abs(length(O813.xy)-0.6)-0.012,abs(O813.z)-0.025),max(0.195-O813.y,-O813.x));O899(O294);O813=O937;O813.xy-=vec2(-O247[0],0.75);O682=max(max(abs(length(O813.xy)-0.83)-0.02,abs(O813.z)-0.03),max(0.485-O813.y,-O813.x));O899(O294);O813=O906;O813.x+=2.2*O580;O278=length(O813.xz);O682=abs(length(vec2(O278+0.1,max(O782-1.2*O549,0.))))-0.09*O580;O682=min(O682,max(O278-0.07*O580,abs(O782-O549)-0.1));O682=min(O682,max(O278-0.12*O580,abs(O782-0.03)-0.03));O682=max(O682,0.01-O782);O899(O046);O813=O627;O682=max(min(min(O092-2.*O580,O278-0.3*O580),abs(O092-3.05*O580)-0.13*O580),abs(O782-0.01)-0.01);O899(O767);O813=O875;O813.x+=O248;O278=length(vec2(O813.x,O813.y+2.3))-2.5;O682=min(max(abs(O278)-0.03,abs(O813.z)-0.2),length(vec2(O278-0.2,abs(O813.z)-0.18))-0.01);O682=max(min(O682,max(length(vec2(0.1*(fract(O813.x/0.1+0.5)-0.5),abs(O813.z)-0.18))-0.008,abs(O278-0.1)-0.1)),-O782);O682=max(O682,abs(O813.x)-1.05);O899(O798);return O868;}\nfloat O503(vec3 O123,vec3 O030){float O775,O682;O775=0.;for(int O666=O177;O666<120;O666++){O682=O441(O123+O775*O030);if(O682<0.0002||O775>O054)break;O775+=O682;}return O775;}vec3 O472(vec3 O627){vec4 O115;vec2 O209;O209=1e-4*vec2(1.,-1.);for(int O666=O177;O666<4;O666++){O115[O666]=O441(O627+((O666<2)?((O666==0)?O209.xxx:O209.xyy):((O666==2)?O209.yxy:O209.yyx)));}O115.x=-O115.x;return normalize(2.*O115.yzw-dot(O115,vec4(1.)));}float O534(vec3 O123,vec3 O030){float O464,O682,O550;int O108;O108=O077;O464=1.;O682=0.02;for(int O666=O177;O666<24;O666++){O550=O441(O123+O682*O030);O464=min(O464,smoothstep(0.,0.07*O682,O550));O682+=max(O550,0.01);if(O464<0.05||O682>O054)break;}O077=O108;return 0.6+0.4*O464;}float O619(vec3 O115,float O131){vec4 O550;vec3 O270;vec2 O395,O279;float O658,O426,O744,O031,O766,O255;O658=1.618034;O255=1./O131;O426=pow(O658,max(2.,floor(log(O131*O689*sqrt(5.)*dot(O115.xy,O115.xy))/log(O658+1.))))/sqrt(5.);O395=vec2(floor(O426+0.5),floor(O426*O658+0.5));O550=vec4(O395*O255,O689*(fract((O395+1.)*O658)-(O658-1.)));O279=floor((0.5*mat2(O550.y,-O550.x,O550.w,-O550.z)/(O550.y*O550.z-O550.x*O550.w))*vec2(atan(O115.y,O115.x),O115.z-(1.-O255)));O744=4.1;for(int O666=O177;O666<4;O666++){O031=dot(O395,vec2(O666-2*(O666/2),O666/2)+O279);O766=1.-(2.*O031+1.)*O255;O270=vec3(sin(2.*O689*fract(O658*O031)+vec2(0.5*O689,0.))*sqrt(1.-O766*O766),O766);O744=min(O744,dot(O270-O115,O270-O115));}return sqrt(O744);}vec4 O410(out vec2 O270){vec4 O496;vec2 O062,O991;float O031,O278,O309,O774;O496=vec4(0.);O270=vec2(0.);O062=vec2(0.);if(O077==O922||O077==O767){O278=length(O844.xz);O062=O844.zx;}else if(O077==O387||O077==O201||O077==O263||O077==O232){O062=O844.yz;}else if(O077==O294||O077==O829||O077==O860){O062=O844.yx;}else if(O077==O984||O077==O418||O077==O356){O062=O844.zx;}if(O062!=vec2(0.))O031=atan(O062.x,-O062.y)/(2.*O689);if(O077==O984||O077==O418||O077==O891)O774=0.5*step(0.5,fract(4.*O844.y+0.25));if(O077<=O922){if(O077==O767){O496=vec4(0.5,0.5,0.5,0.);if(O278<2.*O580)O496*=0.9+0.1*step(0.05,min(fract(16.*O278),fract(128.*O031+0.5*step(0.5,mod(floor(16.*O278),2.)))));}else if(O077==O984){if(O511.y>0.){if(O844.y>O549+0.01){O496=vec4(0.8,0.8,0.6,0.05);}else{O991=abs(fract(vec2(8.*O844.y+0.5,60.*O031+O774)));O496=vec4(0.8,0.8,0.9,0.05)*(0.93+0.07*smoothstep(0.01,0.05,O945(O991)));}}else{O496=(O844.y>O549+0.01)?vec4(0.1,0.1,1.,0.):vec4(0.8,0.8,0.8,0.);}}else if(O077==O015){O496=vec4(0.9,0.9,0.9,0.05);}else if(O077==O418){if(O511.x>0.){if(O844.y>O371.y+0.01){O496=vec4(0.8,0.8,0.6,0.05);if(O844.y>O371.y&&length(vec2(length(O844.xz),O844.y-O371.z))>O371.w)O496*=0.7+0.3*smoothstep(0.,0.01,min(abs(length(vec2(abs(O844.x+0.5)+0.2,O844.z))-0.3)-0.02,length(vec2(O844.x+0.5,O844.z))-0.05));}else{O991=abs(fract(vec2(8.*O844.y+0.5,30.*O031+O774)));O496=vec4(0.8,0.9,0.8,0.05)*(0.93+0.07*smoothstep(0.01,0.05,O945(O991)));}}else{O496=(O844.y<O371.y-0.02)?vec4(0.8,0.8,0.8,0.)*(0.93+0.07*smoothstep(0.01,0.05,abs(fract(30.*O031)))):vec4(0.1,0.1,1.,0.);}}else if(O077==O449){if(O511.w>0.&&O844.y>0.1)O496=vec4(0.8,0.4,0.2,0.2);else O496=vec4(0.8,0.8,0.8,0.);}else if(O077==O891){if(O511.z<0.&&length(O844.xz)<1.39){O496=vec4(0.8,0.8,0.8,0.)*(0.93+0.07*smoothstep(0.03,0.035,abs(fract(16.*O844.x+0.5))));}else{O991=abs(fract(vec2(8.*O844.y+0.5,8.*O844.x+O774)));O496=vec4(0.8,0.9,0.8,0.05)*(0.93+0.07*smoothstep(0.01,0.05,O945(O991)));}}else if(O077==O922){O496=vec4(0.5,0.7,0.9,0.1)*(0.8+0.2*step(0.05,min(fract(32.*O278),fract(((O278>O247[1])?((O278>O247[0])?256.:128.):((O278>O247[2])?64.:32.))*O031+0.5*step(0.5,mod(floor(32.*O278),2.))))));}}else if(O077<=O139){if(O077==O829){O496=vec4(0.8,0.7,0.8,0.1)*(0.8+0.2*step(0.1,fract(128.*O031)));}else if(O077==O387){O496=vec4(0.7,0.8,0.6,0.1);if(length(O844.yz)<0.35)O496*=0.6+0.4*step(0.5,fract(31.*O031));}else if(O077==O356){O496=vec4(0.8,0.7,0.6,0.1)*(0.6+0.4*step(0.5,fract(128.*O031)));}else if(O077==O201){O309=length(O844.yz)-O596[0];O496=vec4(0.8,0.7,0.6,0.1)*(1.-0.4*step(0.001,abs(O309))*step(0.5,fract(63.*O031+0.25*sign(O309))));}else if(O077==O232){O309=length(O844.yz)-O596[1];O496=vec4(0.8,0.7,0.6,0.1)*(1.-0.4*step(0.001,abs(O309))*step(0.5,fract(47.*O031+0.25*sign(O309))));}else if(O077==O263){O309=length(O844.yz)-O596[2];O496=vec4(0.8,0.7,0.6,0.1)*(1.-0.4*step(0.001,abs(O309))*step(0.5,fract(31.*O031+0.25*sign(O309))));}else if(O077==O294){O496=vec4(0.8,0.7,0.6,0.1)*(0.6+0.4*step(0.5,fract(128.*O031)));}else if(O077==O139){O496=vec4(0.6,0.6,0.7,0.1);}}else{if(O077==O325){O496=(O844.y>0.)?vec4(0.6,0.6,0.7,0.1):vec4(0.4,0.6,0.8,0.1);}else if(O077==O860){O496=vec4(0.8,0.7,0.8,0.1)*(0.8+0.2*step(0.1,fract(128.*O031)));}else if(O077==O953){O496=vec4(0.9,0.9,0.7,-1.);}else if(O077==O170){O496=vec4(0.2,0.6,0.2,-1.);}else if(O077==O736){O496=vec4(0.5,0.5,0.4,-1.);}else if(O077==O046){O496=vec4(0.8,0.7,0.6,0.1);}else if(O077==O798){O496=vec4(0.5,0.3,0.1,0.);}}if(O077!=O953&&O077!=O449&&O077!=O170)O270=vec2(256.,0.3);if((O077==O984||O077==O418)&&O496==vec4(0.1,0.1,1.,0.)){if(O619(normalize(O844),((O077==O418)?1024.:2048.))<0.005)O496=vec4(1.,1.,0.,-1.);}return O496;}\nvec3 O557(vec3 O123,vec3 O030){vec3 O465,O434,O526;vec2 O813;float O240,O364,O395,O402;if(O030.y>-0.02&&O030.y<0.03*O271(16.*atan(O030.z,-O030.x))){O465=vec3(0.3,0.4,0.5);}else{O813=0.01*(O123.xz+2.*O867+((100.-O123.y)/O030.y)*O030.xz);O395=O302(O813);O240=smoothstep(0.2,0.8,O395);O364=smoothstep(0.2,0.8,O302(O813+0.01*O743.xz))-O240;O434=(0.7+0.5*O395)*(vec3(0.7)-0.7*vec3(0.3,0.3,0.2)*sign(O364)*smoothstep(0.,0.05,abs(O364)));O402=max(dot(O030,O743),0.);O526=vec3(0.3,0.4,0.8)+step(0.1,O402)*vec3(1.,1.,0.9)*min(0.3*pow(O402,64.)+0.5*pow(O402,2048.),1.);O465=mix(O526,O434,0.1+0.9*O240*smoothstep(0.01,0.1,O030.y));}return O465;}vec4 O155(vec3 O123,vec3 O030,vec3 O627,float O278){vec3 O115,O301;float O550,O682,O309;O115=O123-O627;O550=dot(O030,O115);O309=O550*O550+O278*O278-dot(O115,O115);O682=O054;if(O309>0.){O682=-O550-sqrt(O309);O301=(O115+O682*O030)/O278;}return vec4(O682,O301);}float O929(vec2 O627){vec2 O363;float O836,O992,O147,O837;int O728;O837=O054;O728=0;for(int O821=O177;O821<180;O821++){O836=float(O821)/180.;for(int O697=O728;O697<O286;O697++){if(O836<O720.O898[O697+1]){O728=O697;break;}}O147=(O836-O720.O898[O728])/(O720.O898[O728+1]-O720.O898[O728]);O992=O720.O093[O720.O217[O728+1].y]-O720.O093[O720.O217[O728].y];O363=(O992==0.)?O720.O976[O728]+O147*(O720.O976[O728+1]-O720.O976[O728]):O185(vec2(0.,O720.O216[O720.O217[O728].x]),(O689/12.)*(O720.O093[O720.O217[O728].y]+O147*O992));O837=min(O837,length(O627-O363));}if(length(O627-O487.xz)<0.1)O837*=-1.;return O837;}vec3 O495(vec3 O123,vec3 O030){vec4 O496,O713;vec3 O790,O465,O301,O332,O309;vec2 O270;float O116,O085,O023,O464,O031,O186,O193;bool O480,O573,O635;O085=O054;O464=1.;O573=false;O480=false;O635=false;O713=O155(O123,O030,vec3(0.,O999,0.),0.15);O023=(O713.x>0.)?O713.x:O054;for(int O697=O177;O697<2;O697++){O116=O503(O123,O030);if(O697==0&&O806==0){if(O023<min(O116,O054)){O123+=O023*O030;O301=O713.yzw;O635=true;}else if(O116>=O054&&O030.y<0.){O309=O123+(-O123.y/O030.y)*O030;O186=length(O309.xz);if(O186<3.*O580){O123=O309;O301=normalize(vec3(0.01*O185(O123.xz/O186,O689*(0.5+0.2*fract(4.*O186-O867))),1.)).xzy;O301=O146(8.*O123+0.2*O867,O301,0.1);O635=true;}}if(O635){O030=reflect(O030,O301);O123+=0.01*O030;}}if(!O635)break;}if(O116<O054){O123+=O116*O030;O301=O472(O123);O480=((O077==O922||O077==O891&&O511.z<0.)&&length(O123.xz)<1.69*O580||O077>=O829&&O077<=O325||O077==O418&&O511.x<0.||(O077==O984||O077==O015)&&O511.y<0.||O077==O449&&(O511.w<0.||O844.y<0.1));O496=O410(O270);if(O077==O922&&O301.y<0.99)O496.rgb*=0.6;if(O077==O139||O077==O170||O077==O046){O031=fract(16.*(atan(O844.z,-O844.x)/(2.*O689)+0.5));O301.xz=O185(O301.xz,-0.15*O689*sin(O689*O031*O031));}if(O123.y<0.5&&O301.y>0.5){O186=O929(O123.xz);if(abs(O186)<0.007)O496=(O186>0.)?vec4(1.,1.,0.,-1.):vec4(1.,0.,0.,-1.);}}else if(O030.y<0.&&O806==0){O085=-O123.y/O030.y;O123+=O085*O030;O301=vec3(0.,1.,0.);O270=vec2(16.,1.-smoothstep(0.5,0.8,O085/O054));O496=vec4(0.5*mix(vec3(0.8,1.,0.5),vec3(0.7,0.9,0.5),0.2+0.8*smoothstep(0.3,0.7,O302(4.*O123.xz))),0.05);}else{O573=true;O465=(O806==0)?O557(O123,O030):vec3(0.3,0.4,0.5)*(0.7+0.3*O030.y);}if(!O573){if(O496.a>=0.){O332=O301;if(O270.y>0.)O301=O146(O270.x*O123,O301,O270.y);if(!O480){O464=O534(O123+0.01*O301,O743);O465=O496.rgb*(0.2+0.2*max(-dot(O301,O743),0.)+0.8*O464*max(dot(O301,O743),0.))+O496.a*step(0.95,O464)*pow(max(dot(reflect(O743,O301),O030),0.),32.);if(O116>=O054)O465=mix(O465,vec3(0.3,0.4,0.5),pow(1.+O030.y,16.));}else{float O279;O279=0.05+0.1*max(dot(normalize(vec3(O123.xz,0.).xzy),O301),0.);for(int O697=0;O697<5;O697++){O193=dot(normalize(vec3(0.,0.2*float(O697+1)*O549,0.)-O123),O301);O279+=0.07*max(O193,0.)+0.12*max(-O193,0.);}O279+=0.12*max(-O301.y,0.);if(O077==O891&&length(O123.xz)>1.435*O580)O279+=0.1+0.2*smoothstep(0.8,0.85,-O332.y);O465=O496.rgb*O279;}}else{O465=O496.rgb*(0.55-0.45*dot(O030,O301));}}if(O635)O465*=0.9;return clamp(O465,0.,1.);}void O433(){float O992,O147;O611=0.03;O580=2.;O549=2.;O247[0]=0.85*O580;O247[1]=0.5*O580;O247[2]=0.2*O580;O248=2.46*O580;O596[0]=0.6;O596[1]=0.33;O596[2]=0.14;O720.O216[0]=O248+1.2;O720.O216[1]=O248-1.2;O720.O216[2]=O247[0]+0.2;O720.O216[3]=0.5*(O247[0]+O247[1]);O720.O216[4]=0.6*O247[1]+0.4*O247[2];O720.O216[5]=0.75*O247[2];O720.O093[0]=0.;O720.O093[1]=3.;O720.O093[2]=5.;O720.O093[3]=11.;O720.O093[4]=17.;O720.O093[5]=20.;O720.O093[6]=24.;O720.O217[0]=ivec2(0,0);O720.O217[1]=ivec2(1,0);O720.O217[2]=ivec2(2,0);O720.O217[3]=ivec2(2,1);O720.O217[4]=ivec2(3,1);O720.O217[5]=ivec2(4,1);O720.O217[6]=ivec2(4,2);O720.O217[7]=ivec2(5,2);O720.O217[8]=ivec2(5,3);O720.O217[9]=ivec2(4,3);O720.O217[10]=ivec2(4,4);O720.O217[11]=ivec2(3,4);O720.O217[12]=ivec2(2,4);O720.O217[13]=ivec2(2,5);O720.O217[14]=ivec2(1,5);O720.O217[15]=ivec2(0,5);O720.O217[16]=ivec2(0,6);for(int O697=0;O697<O286;O697++)O720.O976[O697]=O185(vec2(0.,O720.O216[O720.O217[O697].x]),(O689/12.)*O720.O093[O720.O217[O697].y]);O720.O898[0]=0.;for(int O697=0;O697<O286;O697++){O992=O720.O093[O720.O217[O697+1].y]-O720.O093[O720.O217[O697].y];O720.O898[O697+1]=O720.O898[O697]+((O992==0.)?abs(O720.O216[O720.O217[O697+1].x]-O720.O216[O720.O217[O697].x]):(O689/12.)*O720.O216[O720.O217[O697].x]*abs(O992));}for(int O697=0;O697<O286;O697++)O720.O898[O697+1]/=O720.O898[O286];}\nvoid O518(float O805){vec3 O363[2];float O836,O992,O147,O309;int O728;for(int O666=0;O666<2;O666++){O836=fract(O805+0.005*float(O666));for(int O697=0;O697<O286;O697++){if(O836<O720.O898[O697+1]){O728=O697;break;}}O147=(O836-O720.O898[O728])/(O720.O898[O728+1]-O720.O898[O728]);O992=O720.O093[O720.O217[O728+1].y]-O720.O093[O720.O217[O728].y];O363[O666].xz=(O992==0.)?O720.O976[O728]+O147*(O720.O976[O728+1]-O720.O976[O728]):O185(vec2(0.,O720.O216[O720.O217[O728].x]),(O689/12.)*(O720.O093[O720.O217[O728].y]+O147*O992));O363[O666].y=0.2;if(O728==3||O728==O286-7)O363[O666].y+=0.9*smoothstep(0.1,0.5,O147);else if(O728==4||O728==O286-6)O363[O666].y+=0.9*(1.-smoothstep(0.1,0.5,O147));else if(O728==0||O728==O286-3){O309=length(O363[O666].xz)-O248;O363[O666].y+=max(sqrt(2.5*2.5-O309*O309)-2.3,0.);}}O487=0.5*(O363[0]+O363[1]);O394=normalize(O363[1]-O363[0]);}void mainImage(out vec4 O488,in vec2 O519){mat3 O456;vec4 O038;vec3 O123,O030,O465,O239;vec2 O341,O053,O084,O007[O379],O022[O379],O069,O100,O914,O208;float O735,O124,O650,O805,O960;int O425,O061;bool O604;\nO224=iFrame;O341=iResolution.xy;O053=2.*O519.xy/O341-1.;O053.x*=O341.x/O341.y;O867=iTime;O038=iMouse;O038.xy=O038.xy/O341-0.5;\nO124=O341.x/O341.y;O069=(1./5.)*vec2(O124,1.);O007[0]=(1.-O069.y)*vec2(O124,1.);O007[1]=(1.-O069.y)*vec2(-O124,1.);O007[2]=(1.-O069.y)*vec2(-O124,-1.);O007[3]=(1.-O069.y)*vec2(O124,-1.);for(int O697=0;O697<O379;O697++)O022[O697]=abs(O053-O007[O697])-O069;O061=-1;if(O038.z>0.){O061=0;for(int O697=0;O697<O379;O697++){O100=2.*O038.xy-O007[O697]/vec2(O124,1.);if(O852(abs(O100))<O069.y){O061=O697+1;O100/=2.*O069.y;break;}}if(O061==0)O100=O038.xy;}O425=0;for(int O697=0;O697<O379;O697++){if(O852(O022[O697])<0.){O053=(O053-O007[O697])/O069.y;O425=O697+1;break;}}if(O061>0&&(O425==0||O425==O061))O425=O061-O425;O914=(O038.z>0.&&O425==O061)?vec2(2.,1.)*O689*O100:vec2(0.);O806=0;O604=false;O433();O999=0.7+0.4*sin(0.3*O867);O518(0.015*O867);if(O425==0){O123=O487;O123.y+=0.15;if(O038.z>0.){O208=vec2(-0.5*O689+atan(O394.z,-O394.x)+O914.x,clamp(asin(O394.y)+O914.y,-0.4*O689,0.4*O689));}else{O239=normalize(vec3(-O487.xz,0.).xzy);O208=vec2(-0.5*O689+atan(O239.z,-O239.x),0.);}O735=1.5;}else if(O425==1){O123=vec3(0.,1.,-20.);if(O038.z<=0.){O805=mod(0.04*O867,2.);O805=(abs((floor(8.*O805)+smoothstep(0.8,1.,fract(8.*O805)))/8.-1.)-0.5);}else O805=0.;O208=vec2(O689+1.1*O914.x+0.4*O689*O805,clamp(-0.1*O689+O914.y,-0.4*O689,0.));O735=4.5+3.*abs(O914.x);}else if(O425==2){O123=vec3(0.,1.1+0.5*O914.y,-0.6);O208=vec2(1.1*O914.x+O689/12.,0.);O735=0.5;O604=true;}else if(O425==3){O123=vec3(0.,1.2,-10.);O208=vec2(1.3*O914.x,min(O914.y,0.));O735=4.5;O806=2;}else if(O425==4){O123=vec3(0.,1.3,-10.);O208=vec2(-0.5*O689+1.1*O914.x,min(O914.y,0.));O735=4.5;O806=1;}O456=O712(O208);if(O425!=0)O123=O456*O123;if(O806==1){O651=vec3(1.,0.,0.);}else if(O806==2){O651=vec3(0.,0.,-1.);O651.xz=O185(O651.xz,-O208.x);}O743=O456*normalize(vec3(1.,1.,-1.));O054=80.;const float O162=3.;O465=vec3(0.);O650=2.*mod(dot(mod(floor(0.5*(O053+1.)*O341),2.),vec2(1.)),2.)-1.;for(float a=float(O177);a<O162;a++){O084=(O053+step(1.5,O162)*O185(vec2(0.5/O341.y,0.),O650*(0.667*a+0.5)*O689))/O735;O030=O456*normalize(O604?vec3(2.*sin(O084.x/O124+vec2(0.,0.5*O689)),O084.y).xzy:vec3(2.*tan(0.5*atan(O084/vec2(O124,1.)))*vec2(O124,1.),1.));O465+=(1./O162)*O495(O123,O030);}for(int O697=0;O697<O379;O697++){if(O852(O022[O697])<0.&&O945(abs(O022[O697]))*O341.y<3.)O465=vec3(0.7,0.3,0.3);}O488=vec4(O465,1.);}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}