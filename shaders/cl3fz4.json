{
    "Shader": {
        "info": {
            "date": "1700988747",
            "description": "Graphic Design Experiment 11. `The brain hack` inspired.",
            "flags": 0,
            "hasliked": 0,
            "id": "cl3fz4",
            "likes": 16,
            "name": "Graphic Design Experiment 11",
            "published": 3,
            "tags": [
                "graphicdesign",
                "cineshader"
            ],
            "usePreview": 0,
            "username": "yasuo",
            "viewed": 908
        },
        "renderpass": [
            {
                "code": "#define Rot(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n#define S(d,b) smoothstep(antialiasing(1.5),-antialiasing(1.5),d - b)\n#define B(p,s) max(abs(p).x-s.x,abs(p).y-s.y)\n#define deg45 .707\n#define R45(p) (( p + vec2(p.y,-p.x) ) *deg45)\n#define Tri(p,s) max(R45(p).x,max(R45(p).y,B(p,s)))\n#define DF(a,b) length(a) * cos( mod( atan(a.y,a.x)+6.28/(b*8.0), 6.28/((b*8.0)*0.5))+(b-1.)*6.28/(b*8.0) + vec2(0,11) )\n#define ZERO (min(iFrame,0))\n#define SkewX(a) mat2(1.0,tan(a),0.0,1.0)\n#define SkewY(a) mat2(1.0,0.0,tan(a),1.0)\n\nvec2 twist(vec2 p, float k){\n    float c = cos(k*p.y);\n    float s = sin(k*p.y);\n    mat2  m = mat2(c,-s,s,c);\n    vec2  q = m*p;    \n    return q;\n}\n\nfloat graphicItem0(vec2 p){\n    p*=SkewY(radians(45.));\n    vec2 prevP = p;\n    \n    p.x*=3.;\n    float d = length(p)-0.3;\n    p = prevP;\n    \n    p.y-=0.07;\n    p.x*=2.7;\n    p.y = abs(p.y)-0.22;\n    float d2 = length(p)-0.2;\n    \n    d = max(-d2,d);\n    \n    p = prevP;\n    p.y-=iTime*0.05;\n    p = mod(p,0.02)-0.01;\n    d = max(-(abs(p.x)-0.002),d);\n    d = max(-(abs(p.y)-0.002),d);\n    \n    return d;\n}\n\nfloat graphicItem1(vec2 p){\n    vec2 prevP = p;\n    p.y*=0.5;\n    float d = B(p,vec2(0.1));\n    \n    p = abs(p)-0.095;\n    p.y+=0.01;\n    d = max(-(length(p)-0.1),d);\n    d = abs(d)-0.004;\n    p = prevP;\n    d = max(abs(p.y)-0.17,d);\n    return d;\n}\n\nfloat graphicItem2(vec2 p){\n    vec2 prevP = p;\n    p.x*=2.2;\n    p.y-=iTime*0.3;\n    \n    p.y = mod(p.y,0.12)-0.06;\n    p.y-=0.05;\n\n    float d = Tri(p,vec2(0.09));\n    p.y+=0.06;\n    p.x*=0.3;\n    d = max(-Tri(p,vec2(0.09)),d);\n    return d;\n}\n\nfloat graphicItem3_1(vec2 p){\n    p.y*=0.9;\n    p*=SkewY(radians(-50.));\n    vec2 prevP = p;\n    p.x-=0.006;\n    p.y+=0.035;\n    float d = B(p,vec2(0.011,0.09));\n    float a = radians(25.);\n    p.y = abs(p.y)-0.06;\n    p.x+=0.005;\n    d = max(dot(p,vec2(cos(a),sin(a))),d);\n    \n    p = prevP;\n    p.x+=0.006;\n    p.y-=0.035;\n    float d2 = B(p,vec2(0.011,0.09));\n    a = radians(-25.);\n    p.y = abs(p.y)-0.06;\n    p.x-=0.005;\n    d2 = max(-dot(p,vec2(cos(a),sin(a))),d2);\n    \n    d = min(d,d2);\n    \n    return d;\n}\n\nfloat graphicItem3(vec2 p){\n    vec2 prevP = p;\n    p.y-=iTime*0.3;\n    p.y = mod(p.y,0.3)-0.15;\n    float d = graphicItem3_1(p);\n    \n    return d;\n}\n\nfloat graphicItem4(vec2 p){\n    vec2 prevP = p;\n    p.y-=iTime*0.3;\n    p.y = mod(p.y,0.24)-0.12;\n    float d = B(p,vec2(0.05,0.1));\n    float d2 = B(p-vec2(0.,0.045),vec2(0.05,0.1));\n    float a = radians(-5.);\n    p.x = abs(p.x)-0.04;\n    d2 = max(dot(p,vec2(cos(a),sin(a))),d2);\n    a = radians(-15.);\n    d2 = max(dot(p,vec2(cos(a),sin(a))),d2);\n    \n    d = max(-d2,d);\n    \n    a = radians(-12.);\n    p.x-=0.02;\n    d = max(dot(p,vec2(cos(a),sin(a))),d);\n    \n    return d;\n}\n\n\nfloat graphicItem5(vec2 p){\n    p.y-=iTime*0.3;\n    p.y = mod(p.y,0.42)-0.21;\n    p.y+=0.01;\n    vec2 prevP = p;\n    p.x-=0.01;\n    p.x*=2.;\n    p.y*=0.7;\n    p.y-=0.09;\n    p *= SkewY(radians(-10.));\n    float d = max(p.x,Tri(p,vec2(0.1)));\n    \n    p =prevP;\n    p.x+=0.01;\n    p.x*=2.;\n    p.y*=-1.0;\n    p.y*=0.7;\n    p.y-=0.09;\n    p *= SkewY(radians(10.));\n    float d2 = max(-p.x,Tri(p,vec2(0.1)));\n    d = min(d,d2);\n    \n    p =prevP;\n    p.x-=0.03;\n    p.y-=0.08;\n    p*=Rot(radians(-5.));\n    p.x*=1.2;\n    p.y*=0.7;\n    p.y-=0.095;\n    p *= SkewY(radians(-20.));\n    d2 = max(p.x,Tri(p,vec2(0.1)));\n    d = min(d,d2);\n\n    return d;\n}\n\nfloat pattern0(vec2 p){\n    vec2 prevP = p;\n    \n    p = DF(p,3.);\n    p-=0.2;\n    p*=Rot(radians(45.));\n    \n    vec2  q = twist(p,-0.3);    \n    \n    float d = graphicItem2(p);\n    return d;\n}\n\nfloat pattern1(vec2 p){\n    vec2 prevP = p;\n    \n    p = DF(p,3.);\n    p-=0.2;\n    p*=Rot(radians(45.));\n    \n    float d = graphicItem3(p);\n    return d;\n}\n\n\nfloat pattern2(vec2 p){\n    vec2 prevP = p;\n    \n    p = DF(p,3.);\n    p-=0.4;\n    p*=Rot(radians(45.));\n    \n    float d = graphicItem4(p);\n    return d;\n}\n\n\nfloat pattern3(vec2 p){\n    vec2 prevP = p;\n    \n    p = DF(p,3.);\n    p-=0.2;\n    p*=Rot(radians(45.));\n    \n    float d = graphicItem5(p);\n    return d;\n}\n\nfloat centerItem0(vec2 p){\n    vec2 prevP = p;\n    \n    p*=Rot(radians(-45.*iTime));\n    \n    float d = length(p)-0.17;\n    \n    p = DF(p,0.75);\n    p-=0.11;\n    p.y+=0.02;\n    p.x*=0.75;\n    p.y*=1.2;\n    d = max(-(length(p)-0.1),d);\n    \n    return d;\n}\n\nfloat centerItem_line(vec2 p, float dir){\n    vec2 prevP = p;\n    p.x+=iTime*0.1*dir;\n    p.x = mod(p.x,0.12)-0.06;\n    p*=SkewX(radians(-60.));\n    float d = B(p,vec2(0.05,0.01));\n    p = prevP;\n    \n    p*=SkewX(radians(-60.));\n    d = max((abs(p.x)-0.17),d);\n    return d;\n}\n\nfloat centerItem1(vec2 p){\n    p*=1.2;\n    vec2 prevP = p;\n    \n    float size = 0.17;\n    p.x*=1.5;\n    p.y*=-1.;\n    p.y-=size*0.5;\n    float d = abs(Tri(p,vec2(size)))-0.01;\n    p = prevP;\n    p*=Rot(radians(30.*iTime+15.));\n    d = max(-(abs(p.x)-0.03),d);\n    \n    p = prevP;\n    p.x-=0.055;\n    p.y-=size*0.5+0.03;\n    float d2 = centerItem_line(p,1.);\n    d = min(d,d2);\n    p = prevP;\n    \n    p.x+=0.115;\n    p.y-=0.035;\n    p*=Rot(radians(57.));\n    d2 = centerItem_line(p,-1.);\n    d = min(d,d2);\n    p = prevP;\n\n    p.x-=0.05;\n    p.y+=0.07;\n    p*=Rot(radians(-57.));\n    d2 = centerItem_line(p,-1.);\n    d = min(d,d2);\n    \n    return d;\n}\n\nfloat centerItem2(vec2 p){\n    vec2 prevP = p;\n    p*=Rot(radians(-35.*iTime));\n    p = DF(p,3.);\n    p-=0.08; \n    \n    float d = centerItem_line(p,0.5);\n    return d;\n}\n\nfloat centerItem3(vec2 p){\n    p*=Rot(radians(-35.*iTime));\n    vec2 prevP = p;\n\n    float d = abs(B(p,vec2(0.1)))-0.01;\n    p*=Rot(radians(-25.*iTime+45.));\n    d = max(-(abs(p.x)-0.03),d);\n    \n    p = prevP;\n    p*=Rot(radians(-45.));\n    float d2 = abs(B(p,vec2(0.1)))-0.01;\n    p = prevP;\n    p*=Rot(radians(25.*iTime+45.));\n    d2 = max(-(abs(p.x)-0.03),d2);\n    \n    d = min(d,d2);\n    \n    return d;\n}\n\nfloat centerItem4(vec2 p){\n    p.x*=0.8;\n    p.y*=1.2;\n    vec2 prevP = p;\n    \n    p*=SkewY(radians(-40.));\n    float d = abs(length(p)-0.1)-0.01;\n    p*=Rot(radians(-55.*iTime-45.));\n    d = max(-(abs(p.x)-0.03),d);\n    \n    p = prevP;\n    p*=SkewY(radians(40.));\n    float d2 = abs(length(p)-0.1)-0.01;\n    p*=Rot(radians(55.*iTime+45.));\n    d2 = max(-(abs(p.y)-0.03),d2);    \n    d = min(d,d2);\n    \n    return d;\n}\n\nfloat mainGraphic(vec2 p){\n    vec2 prevP = p;\n    float d  = pattern0(p);\n    float t = mod(iTime*1.,4.);\n    if(t<1.){\n        d  = pattern3(p);\n    } else if (t>=1. && t<2.){\n        d  = pattern1(p);\n    } else if (t>=2. && t<3.){\n        d  = pattern2(p);\n    } else if (t>=3. && t<4.){\n        d  = pattern0(p);\n    }\n    \n    p*=Rot(radians(45.));\n    p = DF(p,3.);\n    p-=0.3;\n    p*=Rot(radians(45.));\n    \n    vec2 prevP2 = p;\n    \n    p.y-=iTime*0.3;\n    p.y = mod(p.y,0.2)-0.1;\n    float d2 = length(p)-0.01;\n    d = min(d,d2);\n    \n    p = prevP2;\n    p.y-=iTime*0.3;\n    p.y-=0.11;\n    p.y = mod(p.y,0.2)-0.1;\n    p.x*=1.5;\n    d2 = Tri(p,vec2(0.02));\n    d = min(d,d2);\n    \n    return d;\n}\n\nfloat centerGraphic(vec2 p){\n    vec2 prevP = p;\n    float d = centerItem4(p);\n    \n    float t = mod(iTime*3.,5.);\n    if(t<1.){\n        d  = centerItem0(p);\n    } else if (t>=1. && t<2.){\n        d  = centerItem1(p);\n    } else if (t>=2. && t<3.){\n        d  = centerItem2(p);\n    } else if (t>=3. && t<4.){\n        d  = centerItem3(p);\n    } else if (t>=4. && t<5.){\n        d  = centerItem4(p);\n    }\n\n    return d;\n}\n\nfloat otherGraphicElements(vec2 p){\n    vec2 prevP = p;\n    p.x = abs(p.x)-0.55;\n    p.y = abs(p.y)-0.35;\n    p*=Rot(radians(-105.));\n    float d = graphicItem0(p);\n    p = prevP;\n    \n    p.x = abs(p.x)-0.7;\n    float d2 = graphicItem1(p);\n    d = min(d,d2);\n    p = prevP;\n    p.x = abs(p.x)-0.3;\n    p.y = abs(p.y)-0.4;\n    p*=Rot(radians(40.));\n    p*=2.;\n    d2 = graphicItem1(p);\n    d = min(d,d2);\n    return d;\n}\n\nfloat bg(vec2 p){\n    p = mod(p,0.05)-0.025;\n    float d = length(p)-0.0015;\n    return d;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = (fragCoord-0.5*iResolution.xy)/iResolution.y;\n    \n    vec3 col = vec3(0.);\n\n    float d = bg(p);\n    col = mix(col,vec3(1.),S(d,0.0));\n    d = mainGraphic(p);\n    col = mix(col,vec3(1.),S(d,0.001));\n    col*=length(p)-0.1;\n    col*= 0.6-(length(p)-0.3);\n\n    d = centerGraphic(p);    \n    col = mix(col,vec3(1.),S(d,0.0));\n    \n    d = otherGraphicElements(p);\n    col = mix(col,vec3(1.),S(d,0.0));\n    \n    fragColor = vec4(sqrt(col),1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}