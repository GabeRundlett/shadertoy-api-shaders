{
    "Shader": {
        "info": {
            "date": "1598807002",
            "description": "P.S: Trans rights are human rights~",
            "flags": 0,
            "hasliked": 0,
            "id": "ttSBW1",
            "likes": 1,
            "name": "Waving flag",
            "published": 3,
            "tags": [
                "2d",
                "animation",
                "flag"
            ],
            "usePreview": 0,
            "username": "carolhmj",
            "viewed": 312
        },
        "renderpass": [
            {
                "code": "vec3 floatCol(int r, int g, int b) {\n\treturn vec3( float(r)/255., float(g)/255., float(b)/255.);\n}\n\nvec4 makeFlag(vec2 p, float w, float h) {\n    float mask = 0.;\n    \n    float period = sign(p.y) * .008*cos(p.x*20.0 - iTime*5.);\n    \n    float hn = h + .015 + period;\n        \n    float wn = w + .015 + .008*cos(p.y*20.0 - iTime*5.);\n   \tmask += (1. - smoothstep(wn, wn+.000001, abs(p.x) )) * (1. - smoothstep(hn, hn+.000001, abs(p.y) ) );\n    mask *= clamp(sign(p.x + .2) + 1., 0., 1.);\n    \n    vec3 col1 = vec3(.33, .8, .98);\n    vec3 col2 = vec3(.96, .65, .72);\n    vec3 col3 = vec3(1., 1., 1.);\n    \n    float h1 = h - h/4. + period;\n    float stripe1Mask = smoothstep( h1, h1+.01, abs(p.y) );\n    vec3 flagCol = mix(col2, col1, stripe1Mask);\n    float h2 = h/4. + period;\n    float stripe2Mask = smoothstep( h2, h2+.01, abs(p.y) );\n    flagCol = mix(col3, flagCol, stripe2Mask);\n    \n    vec3 col = mix(vec3(0., 0., 0.), flagCol, mask);\n    \n    float poleMask = 0.0;\n    vec2 pp = p + vec2(w+.015, 0.);\n    float l = .014;\n    poleMask += (1. - smoothstep(l, l+.001, abs(pp.x) )) * (1. - smoothstep(h+.015+.008, h+.015+.008+.001, pp.y ) );\n    poleMask += floor(1.-poleMask) * smoothstep(l+.0001, l, length(pp-vec2(0., 0.17)));\n\n    vec3 brown = floatCol(117, 83, 63);\n    \n    col = mix(col, brown, poleMask);\n    //col = vec3(poleMask);\n    \n    return vec4(col, poleMask+mask);\n}\n\nvec3 makeSky(vec2 p) {\n\t// Make a sky gradient\n\tvec3 skyTop = floatCol(45, 250, 236);\n    vec3 skyBottom = floatCol(197, 240, 237);\n    \n   \t// Mix the two colors based on height\n    vec3 col = mix(skyBottom, skyTop, p.y);\n   \n    //Add sun\n    vec3 sunColor = floatCol(250, 244, 117);\n    float r = .1;\n    vec2 sp = p-vec2(.5,.25);\n    float sunMask = smoothstep(r+0.05, r, length(sp));\n    \n    col = mix(col, sunColor, sunMask);\n    \n    return col;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n    \n    vec2 p = uv + vec2(.3, -.1);\n\n \tvec3 col = makeSky(uv);\n    vec4 flag = makeFlag(p, 0.2, 0.15);\n    col = mix(col, flag.xyz, flag.w);\n    \n    fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}