{
    "Shader": {
        "info": {
            "date": "1624191541",
            "description": "Quciky",
            "flags": 0,
            "hasliked": 0,
            "id": "st2GRy",
            "likes": 11,
            "name": "大龙猫 - Quicky#056",
            "published": 3,
            "tags": [
                "quicky"
            ],
            "usePreview": 0,
            "username": "totetmatt",
            "viewed": 331
        },
        "renderpass": [
            {
                "code": "#define fGlobalTime iTime\nfloat box(vec2 p,vec2 b){\n    vec2 q = abs(p) -b;\n    return length(max(vec2(0.),q))+min(0.,max(q.x,q.y));\n}\n\nmat2 rot(float a){float c=cos(a),s=sin(a);return mat2(c,-s,s,c);}\nfloat sdCross( in vec3 p ) // From IQ \n{\n  float da = box(p.xy,vec2(.1));\n  float db = box(p.yz,vec2(0.1));\n  float dc = box(p.zx,vec2(0.1));\n  return min(da,min(db,dc));\n}\nfloat diam(vec3 p,float s){\n  p = abs(p);\n  return (p.x+p.y+p.z-s)*sqrt(1./3.);\n  }\nvec2 sdf(vec3 p){\n  //p.xy*=rot(fGlobalTime);\n  vec3 pp=p;\n    vec2 h;\n    \n  // p.x +=.2;\n    for(float i=0.;i<=3.;i++){\n        p = abs(p)-2.8655;\n      //p*=1.05;\n        p.xz*=rot(-.785);\n         p.xy = p.x < p.y ? p.yx:p.xy;\n    }      \n    h.x = min(diam(p,3.),sdCross(p));\n    p= abs(p)-.8;\n    p = asin(sin(p));\n    h.x = max(-(length(p)-1.1),h.x);\n    h.y= fract(p.z) >.25 ? 1.:3.;\n    \n    vec2 t;\n    t.x = diam(pp,1.4);\n    t.y = 2.;\n    h = t.x < h.x ? t:h;\n    return h;\n}\n#define q(s) s*sdf(p+s).x\nvec2 nv=vec2(-.001,.001);\nvec3 norm(vec3 p){return normalize(q(nv.xyy)+q(nv.yxy)+q(nv.yyx)+q(nv.xxx));}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\nvec3 col = vec3(.1);\n  \n  vec3 ro=vec3(sin(fGlobalTime*.1)*3.5,0.75,cos(fGlobalTime*.1)*3.5);\n\t\n  vec3 rt = vec3(0.+sin(fGlobalTime)*.1,0.+cos(fGlobalTime)*.1,0.);\n  vec3 z = normalize(rt-ro);\n  vec3 x = cross(z,vec3(0.,-1.,0.));\n  vec3 y = cross(z,x);\n  \n  \n  vec3 rd=normalize(mat3(x,y,z)*vec3(uv,1.+sin(fGlobalTime*.1)*.4));\n  vec3 rp = ro;\n  vec3 light = vec3(1.,2.,-3.);\n  \n  float i;\n  const float c=69.;\n  vec3 acc = vec3(0.);\n  float rdp=0.;\n  for(i=0.;i<=c;i++){\n      vec2 d = sdf(rp);\n    \n      if(d.y ==1.) {\n        vec2 vv= vec2(atan(rp.x,rp.z),rp.y);\n        acc += vec3(1.1,.5,.3)*(exp(2.*-abs(d.x))/(10.1+19.*fract(fGlobalTime+texture(iChannel0,vv*.001).r\n)));\n        \n         \n      }\n       if(d.y ==3.) {\n        vec2 vv= vec2(atan(rp.x,rp.z),rp.y);\n        acc += vec3(.1,1.5,1.3)*(exp(2.*-abs(d.x))/(40.1+19.*fract(fGlobalTime+texture(iChannel0,vv*.001).r\n)));\n        \n         d.x = max(.002,abs(d.x));\n      }\n     rp+=rd*d.x;\n      rdp+=d.x;\n      if(d.x <=.001 || rdp>=15.){\n        if(d.y==2.){\n            vec3 n = norm(rp);\n          float fre = pow((1.+dot(rd, n)), 2.);\n            rd = reflect(rd,n+texture(iChannel0,rp.xy*.1+vec2(fGlobalTime*.001)).r);\n            rp+=n*0.002;\n           col +=vec3(.0,.1,.50)*.5+fre*vec3(.3,.5,0.1);\n         \n          }\n        else break;\n        }\n    \n  }\n\n  col +=acc;\n\n    fragColor = vec4(sqrt(col)*col,1.0);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 47,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}