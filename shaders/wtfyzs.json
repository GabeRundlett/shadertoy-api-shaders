{
    "Shader": {
        "info": {
            "date": "1592783926",
            "description": "based on FabriceNeyret2's https://www.shadertoy.com/view/4d2yzW",
            "flags": 32,
            "hasliked": 0,
            "id": "wtfyzs",
            "likes": 3,
            "name": "Thick Graffiti",
            "published": 3,
            "tags": [
                "worm",
                "maze",
                "graffiti"
            ],
            "usePreview": 0,
            "username": "57ar7up",
            "viewed": 362
        },
        "renderpass": [
            {
                "code": "// \"maze worms / graffitis {X}\" by FabriceNeyret2\n// 3c https://www.shadertoy.com/view/Xs2cRD\n// 1b https://www.shadertoy.com/view/XdjczW\n\nvoid mainImage(out vec4 O, vec2 U) {\n\tO = texture(iChannel0, U / iResolution.xy);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "#define CS(a) vec2(cos(a),sin(a))\n#define rnd(x) ( 2.* fract(456.68*sin(1e3*x+mod(iDate.w,10.))) -1.) // NB: mod(t,1.) for less packed pattern\n#define T(U) textureLod(iChannel0, (U)/R, 0.)\nconst float r = 10., N = 50., da = .5,\t\t\t\t\t\t\t\t// width, worms, turn angle @ hit\n\t\t\tL = 100., l= 5.;\t\t\t\t\t\t\t\t\t\t// sinusoidal path parameters: L straight + l turn\n\nvoid mainImage( out vec4 O, vec2 U ){\n\tvec2 R = iResolution.xy;\n\n\tif (T(R).x==0.) { U = abs(U/R*2.-1.); O = vec4(max(U.x,U.y)>1.-r/R.y); O.w=0.; return; } // track window resize\n\n\t// 1st column store worms state.\n\tif (U.y==.5 && T(U).w==0.) {\t\t\t\t\t\t\t\t\t// initialize heads state: P, a, t\n\t\tO = vec4(R/2. + R/2.4* vec2(rnd(U.x),rnd(U.x+.1)) , 3.14 * rnd(U.x+.2), 1);\n\t\tif (T(O.xy).x>0.) O.w = 0.;\t\t\t\t\t\t\t\t\t// invalid start position\n\t\treturn;\n\t} // Other columns do the drawing.\n\n\tO = T(U);\n\n\tfor (float x=.5; x<N; x++) {\t\t\t\t\t\t\t\t\t// draw heads\n\t\tvec4 P = T(vec2(x,.5));\t\t\t\t\t\t\t\t\t\t// head state: P, a, t\n\t\tif (P.w>0.) O += smoothstep(r,.9, length(P.xy-U))\t\t\t// draw head if active\n\t\t\t\t\t\t *(.5+.5*sin(.03*P.w+vec4(0,-2.1,2.1,1)));\t// coloring scheme\n\t}\n\n\tif (U.y==.5) {\t\t\t\t\t\t\t\t\t\t\t\t\t// head programms: worm strategy\n\t\tvec4 P = T(U);\t\t\t\t\t\t\t\t\t\t\t\t// head state: P, a, t\n\t\tif (P.w>0.) {\t\t\t\t\t\t\t\t\t\t\t\t// if active\n\t\t\tfloat a = P.z, m = mod(P.w,L+L+l+l);\t\t\t\t\t// why can't angle start more rear ?\n\t\t\tif (m>=L && m<L+l) a += 3.14/l;\n\t\t\telse if (m>=L+L+l && m<L+L+l+l) a -= 3.14/l;\n\t\t\t#define next T(P.xy+(r+2.)*CS(a)).w\n\t\t\twhile (next > 0. && a < 13.)\t\t\t\t\t\t\t// hit: turn\n\t\t\t\ta += da;\t\t\t\t\t\t\t\t\t\t\t// seek for last angle before hit\n\t\t\tif (a>=13.) { O.w = 0.; return; }\t\t\t\t\t\t// stop head\n\t\t\tO = vec4(P.xy+CS(a),mod(a,6.2832),P.w+1.);\t\t\t\t// move head\n\t\t}\n\t}\n\n\t//if (iMouse.w > 0. && distance(iMouse.xy, U) < 50.) O = vec4(0.); // painting\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Buf A",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 257
                    }
                ],
                "type": "buffer"
            }
        ],
        "ver": "0.1"
    }
}