{
    "Shader": {
        "info": {
            "date": "1548768771",
            "description": "Music: https://soundcloud.com/nabehide/mdppw\nYoutube: https://youtu.be/iWTq2pKvlxs",
            "flags": 64,
            "hasliked": 0,
            "id": "tsBGD1",
            "likes": 13,
            "name": "maGma",
            "published": 3,
            "tags": [
                "loop"
            ],
            "usePreview": 0,
            "username": "nabehide",
            "viewed": 550
        },
        "renderpass": [
            {
                "code": "#define time iTime\n\nconst int NRow = 10;\nconst int NCol = 10;\nconst float period = 100.;\n\nconst float X_MAX = 0.9;\nconst float X_MIN = -0.9;\nconst float Y_MAX = 0.9;\nconst float Y_MIN = -0.9;\nconst int NOrb = 3;\nconst float speed = 0.5;\n\n/*\nconst vec3 color1 = vec3(0.05, 1.00, 0.80);\nconst vec3 color2 = vec3(0.80, 1.00, 0.05);\nconst vec3 color3 = vec3(0.05, 1.00, 0.05);\n*/\nconst vec3 color1 = vec3(1.00, 0.01, 0.01);\nconst vec3 color2 = vec3(1.00, 0.01, 0.01);\nconst vec3 color3 = vec3(1.00, 0.01, 0.01);\n\nmat2 rot(float t){\n    return mat2(cos(t),-sin(t),sin(t),cos(t));\n}\nfloat rand(vec2 co){                                             \n  return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\nfloat loopNoise(float s, float o, float period){\n    float i = floor(s);\n    float f = fract(s);\n    float u = f * f * (3. - 2. * f);\n    \n    float s1 = rand(vec2(i/100., i*o/100.));\n    float s2;\n    if(s < period - 1.){\n        s2 = rand(vec2((i+1.)/100., (i+1.)*o/100.));\n    } else {\n        s2 = rand(vec2(0.,0.));\n    }\n    \n    return mix(s1, s2, u);\n}\n\nfloat circle(vec2 p) {\n    return 0.05/pow(length(p), 1.5);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = (fragCoord * 2. - iResolution.xy) / min(iResolution.x, iResolution.y);\n    p *= 0.7;\n\n    vec3 draw = vec3(0.);\n\n    float m_dist = 3.;\n    for (int i=0; i<NRow; i++) {\n        for (int j=0; j<NCol; j++) {\n            float tx = mod(time*speed+rand(vec2(float(i),float(j))*period), period);\n            float ty = mod(time*speed+rand(vec2(float(j),float(i))*period), period);\n            float dx = loopNoise(tx, float(i*NRow+j), period)*0.2-0.1;\n            float dy = loopNoise(ty, float(j*NRow+i), period)*0.2-0.1;\n            float x = 2./float(NRow-1)*float(i)-1. + dx;\n            float y = 2./float(NCol-1)*float(j)-1. + dy;\n        \tfloat dist = distance(p, vec2(x, y));\n        \tm_dist = min(m_dist, dist);\n        }\n    }\n    \n    vec3 orbs = vec3(0.);\n    for (int i=0; i<NOrb; i++) {\n        vec3 color;\n        if (i == 0) {\n            color = color1;\n        } else if (i == 1) {\n            color = color2;\n        } else {\n            color = color3;\n        }\n        orbs += circle(p-vec2(\n            loopNoise(mod((time*speed+rand(vec2(float(i),1.)*period)),period),float(i)+0.1,period)*(X_MAX-X_MIN)+X_MIN,\n            loopNoise(mod((time*speed+rand(vec2(float(i),2.)*period)),period),float(i)+0.2,period)*(Y_MAX-Y_MIN)+Y_MIN\n        )) * color;\n    }\n    float f = textureLod( iChannel0, p/256.0, 0.0 ).x;\n    draw += pow(m_dist*(6.+f),3.) * orbs;\n   \n    fragColor = vec4(draw,1.0);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "musicstream",
                        "id": 17649,
                        "published": 0,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "https://soundcloud.com/nabehide/mdppw"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}