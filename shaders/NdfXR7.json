{
    "Shader": {
        "info": {
            "date": "1618397410",
            "description": "reference: [img]https://i.imgur.com/oxv28g9.png[/img]",
            "flags": 0,
            "hasliked": 0,
            "id": "NdfXR7",
            "likes": 12,
            "name": "impossible boxes piles",
            "published": 3,
            "tags": [
                "illusion",
                "escher",
                "isometric",
                "short",
                "reproduction",
                "paradoxical",
                "tomgauld"
            ],
            "usePreview": 0,
            "username": "FabriceNeyret2",
            "viewed": 309
        },
        "renderpass": [
            {
                "code": "\n#define rot(a)    mat2( cos(a+vec4(0,-1.57,1.57,0)) )    // rotation                  \n\nvoid mainImage(out vec4 O, vec2 U) {    \n    float t=9.;\n    vec3  R = iResolution, L = vec3(4,5,4), q,r,a,\n          M = // iMouse.z > 0. ? 2.*iMouse.xyz/R -1. :   // try mouse control to see the trick\n                               vec3(.785,.41,0),\n          p = vec3( 10.*(U+U-R.xy)/R.y, 20 );            // ray start. dir = (0,0,-1)\n                                       \n    for ( O-=O ; O.x < 1. && t > .01 ; O+=.01 ) {        // marching point along ray\n        q = p, t = 1.,\n        q.yz *= rot(M.y),                                // rotations\n        q.xz *= rot(M.x);\n        a = abs( r = round(q/L) );                       // box id\n        r = p.y<0. ? r : -r;                             // for \"vertical\" connections\n    \n        if ( a.x*a.z == 0. )\n            if (  a.y == 0. && max(a.x,a.z) < 5.         // 2 rows of boxes\n               || r == vec3(4,1,0) || r == vec3(0,1,4)   // \"vertical\" connections\n               )  q = mod(q+L/2.,L) - L/2.,  \n               // q.xz *= rot(.5*iTime),                 // box rot: try me !\n                  a = abs(q) - 1.2,\n                  t = max( a.x, max(a.y-1.,a.z) );       // box SDF\n        \n        p.z -= .5*t;                                     // step forward = dist to obj          \n    }\n\n    O = t<.01 ? vec4(1, 1,.9,1) * ( t==a.z ? .6 : t==a.x ? .4 : .8 ) // coloring\n              : vec4(.9,.9,1,1);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}