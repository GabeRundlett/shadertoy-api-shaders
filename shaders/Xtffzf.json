{
    "Shader": {
        "info": {
            "date": "1512634619",
            "description": "Medieval and antic labyrinths: [url]https://en.wikipedia.org/wiki/Labyrinth#Labyrinth_as_pattern[/url]\n(See reference image at the bottom of the forum).\n\n(Note that there is a little Easter egg :-) ).",
            "flags": 0,
            "hasliked": 0,
            "id": "Xtffzf",
            "likes": 16,
            "name": "labyrinth",
            "published": 3,
            "tags": [
                "2d",
                "pattern",
                "maze",
                "short",
                "celtic",
                "gothic",
                "medieval",
                "reproduction"
            ],
            "usePreview": 0,
            "username": "FabriceNeyret2",
            "viewed": 920
        },
        "renderpass": [
            {
                "code": "// --- Reproducing ref image https://upload.wikimedia.org/wikipedia/commons/8/82/Duomo_Lucca_cathedrale_Lucques_labyrinthe.jpg\n\n#define W(n1,n2)   v += (1.-v) * B(n1,n2,0.)   * S( U.y, e )             // draw Wall section \n#define C(n1,n2,s) v *=  1.-     B(n1,n2,e+p ) * S( U.y-s.5, .5-e-p )    // draw Corridor section\n#define WC(n1,n2)  W(n1,n2); C(n1,n2,+); C(n1,n2,-)                      // wall + side corridors\n#define B(n1,n2,e) step( abs(U.x-(n1+n2)/2.) , abs(n1-n2)/2. -(e) )      // section (infinite width)\n#define S(v,e) smoothstep( p, 0., abs(v) -(e) )                          // thickness e, smoothness p\n\nvoid mainImage( out vec4 O, vec2 u )\n{\n\tvec2 R = iResolution.xy,\n         U = ( u+u - R ) / R.y * 15.;\n    float  p = .3, // 2./R.y * 15.,       // was pixel size, now used for blur size\n           e = 0., // .1,                 // was wall thickness, now done by blur\n           r = length(U),\n        \n    v =  S( max(abs(U.x),abs(U.y)) - 13.4 , e );                         // Frame\n    if ( r>1.8 && r<13.3 ) v += S( fract(r+.5)-.5, e );                  // Circular walls\n\n    WC( -13., -11. ); WC( -10., -8. ); WC( -6.9, -5. ); WC( -3.9, -2. ); // West corrections\n    W( 13.4, 2.  );                                                      // East corrections\n    C( 13., 7., +); C( 6.9, 1., +);                                      //   entrance line\n    C( 14., 8., -); C( 7.9, 2., -);\n    U.y -= 1.; WC( 11.85, 10. ); WC( 9.85, 8.  ); W( 5.9, 1.7 );         //   line above entrance\n                C( 5.5, 4.,  +);  C( 3.5, 2., +); \n    U.y += 2.;  W( 13.4, 9.   );  W( 6.9, 2.7  );                        //   line below entrance\n                C( 12.8, 11.,-);  C( 10.8, 9.,-);\n                C( 6.5, 5.,  -);  C( 4.5, 3., -);\n    U.y--; \n    U = U.yx;\n    WC( 11., 9. );     WC(  8., 6.  ); WC( 5., 3. );                     // North corrections\n    if (iMouse.z <= 0.) W( -13.,-12.);                                   // South corrections\n    WC( -12., -10. );  WC( -9., -7. ); WC( -5.9, -4. );\n\n    \n    O = .6+.5*texture(iChannel0,u/R.y) - mix( 0., .3, v );               // dressing\n  //O = .6+.5*texture(iChannel0,u/R.y) + dFdx(v)*R.y/5e2;                // variant: emboss\n\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 46,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}