{
    "Shader": {
        "info": {
            "date": "1655617095",
            "description": "Layered/fractal voronoi is cool :)\n\n[url=https://shadertube.web.app/shaders/view/?v=-N4u7ohJ2wOfscy50ZpZ]Shader Source (by me)[/url]",
            "flags": 0,
            "hasliked": 0,
            "id": "7sycDK",
            "likes": 16,
            "name": "Mario Oil Painting",
            "published": 3,
            "tags": [
                "voronoi",
                "noise",
                "oil",
                "paint",
                "polygon",
                "mario",
                "art",
                "oilpaint",
                "poly"
            ],
            "usePreview": 0,
            "username": "shyshokayu",
            "viewed": 578
        },
        "renderpass": [
            {
                "code": "#define imageResolution iResolution.xy\n#define imageAspectRatio (imageResolution.x / imageResolution.y)\n#define imageTime iTime\n\nconst vec4[] colors = vec4[](\n    vec4(0.000, 0.000, 0.000, 0.0), // Black\n    vec4(0.443, 0.415, 0.007, 1.0), // Brown\n    vec4(0.976, 0.670, 0.000, 1.0), // Yellow\n    vec4(0.850, 0.007, 0.000, 1.0) // Red\n);\n\nconst ivec2 size = ivec2(16, 16);\n\nconst int[] pixels = int[](\n    0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,\n    0,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,\n    0,0,0,0,1,1,1,2,2,1,2,0,0,0,0,0,\n    0,0,0,1,2,1,2,2,2,1,2,2,2,0,0,0,\n    0,0,0,1,2,1,1,2,2,2,1,2,2,2,0,0,\n    0,0,0,1,1,2,2,2,2,1,1,1,1,0,0,0,\n    0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,0,\n    0,0,0,0,1,1,3,1,1,1,0,0,0,0,0,0,\n    0,0,0,1,1,1,3,1,1,3,1,1,1,0,0,0,\n    0,0,1,1,1,1,3,3,3,3,1,1,1,1,0,0,\n    0,0,2,2,1,3,2,3,3,2,3,1,2,2,0,0,\n    0,0,2,2,2,3,3,3,3,3,3,2,2,2,0,0,\n    0,0,2,2,3,3,3,3,3,3,3,3,2,2,0,0,\n    0,0,0,0,3,3,3,0,0,3,3,3,0,0,0,0,\n    0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,\n    0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0\n);\n\n// Hash functions from https://www.shadertoy.com/view/4djSRW\nvec2 random22(vec2 p) {\n    vec3 p3 = fract(vec3(p.xyx) * vec3(0.1031, 0.1030, 0.0973));\n    p3 += dot(p3, p3.yzx + 33.33);\n    return fract((p3.xx + p3.yz) * p3.zy);\n}\n\nvec2 random21(float p) {\n\tvec3 p3 = fract(vec3(p) * vec3(0.1031, 0.1030, 0.0973));\n\tp3 += dot(p3, p3.yzx + 33.33);\n    return fract((p3.xx + p3.yz) * p3.zy);\n}\n\nvec4 textureMario(vec2 uv) {\n    ivec2 p = ivec2(floor(fract(uv) * vec2(size)));\n    \n    int id = (p.x % size.x) + (((size.y - 1) - (p.y % size.y)) * size.x);\n    \n    return colors[pixels[id]] * step(abs(uv.x - 0.5), 0.5) * step(abs(uv.y - 0.5), 0.5);\n}\n\nvec3 voronoiPoint(vec2 uv, vec2 size) {\n    float d = 10.0;\n    vec2 p = vec2(0.0);\n    \n    uv *= size;\n\n    vec2 i = floor(uv);\n    vec2 f = uv - i;\n\n    for(int ix = -1; ix <= 1; ++ix) {\n        for(int iy = -1; iy <= 1; ++iy) {\n            vec2 np = vec2(float(ix), float(iy));\n            vec2 point = random22(i + np);\n            float sd = length(np + point - f);\n            \n            if(sd < d) {\n                d = sd;\n                p = i + np + point;\n            }\n        }\n    }\n    \n    return vec3(p / size, d);\n}\n\nvec4 mainImage(vec2 imageCoordinate) {\n    vec2 uv = (imageCoordinate / imageResolution) - 0.5;\n    uv *= vec2(max(1.0, imageAspectRatio), max(1.0, 1.0 / imageAspectRatio));\n    uv += 0.5;\n    \n    vec3 color = vec3(0.0);\n    \n    int iterations = int(floor(imageTime * 8.0)) % 64;\n    for(int i = 1; i <= iterations; ++i) {\n        float z = float(i);\n        vec2 offset = random21(z);\n        color += textureMario(voronoiPoint(uv + offset, vec2(z)).xy - offset).xyz;\n    }\n    color /= max(1.0, float(iterations));\n\n    color = mix(vec3(0.15, 0.15, 0.15), color, step(abs(uv.x - 0.5), 0.5) * step(abs(uv.y - 0.5), 0.5));\n    \n    return vec4(color, 1.0);\n}\n\nvoid mainImage(out vec4 o, vec2 i) {\n    o = mainImage(i);\n}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}