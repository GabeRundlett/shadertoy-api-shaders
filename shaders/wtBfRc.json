{
    "Shader": {
        "info": {
            "date": "1599482939",
            "description": "Quick recreation of well known motion illusion.",
            "flags": 0,
            "hasliked": 0,
            "id": "wtBfRc",
            "likes": 4,
            "name": "Tipsiness simulator",
            "published": 3,
            "tags": [
                "2d",
                "illusion"
            ],
            "usePreview": 0,
            "username": "zduny",
            "viewed": 305
        },
        "renderpass": [
            {
                "code": "const vec3 green = vec3(0.501, 0.701, 0.129);\nconst vec3 blue = vec3(0.007, 0.003, 0.984);\nconst vec3 black = vec3(0.0);\nconst vec3 white = vec3(1.0);\n\nconst float animate = 0.0;\n\nvec3 toSRGB(in vec3 color) { return pow(color, vec3(1.0 / 2.2)); }\n\nvec3 toLinear(in vec3 color) { return pow(color, vec3(2.2)); }\n\nvoid drawDisk(in vec2 fragmentCoordinates, in vec2 center, in float radius,\n              in vec4 color, inout vec4 outputColor) {\n  float d = distance(fragmentCoordinates, center);\n  float a = 1.0 - clamp(d - radius + 0.5, 0.0, 1.0);\n\n  outputColor = mix(outputColor, color, a * color.a);\n}\n\nvoid drawBlob(in vec2 position, inout vec4 outputColor) {\n  float radius = 11.5;\n  drawDisk(position, vec2( 3.0, 0.0), radius, vec4(toLinear(white), 1.0), outputColor);  \n  drawDisk(position, vec2(-3.0, 0.0), radius, vec4(toLinear(black), 1.0), outputColor);\n  drawDisk(position, vec2( 0.0, 0.0), radius, vec4(toLinear(blue),  1.0), outputColor);\n}\n\nvec2 rotate(in vec2 vector, in float angle) {\n  return vector * mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = vec4(toLinear(green), 1.0);\n    \n    float grid = 37.5;\n    fragCoord -= iResolution.xy / 2.0;\n    ivec2 iFragCoord = ivec2(abs(fragCoord / grid));\n    float angle =  0.666 * float(iFragCoord.x) - float(iFragCoord.y + 13) * 0.333;\n    fragCoord = mod(fragCoord, grid) - 0.5 * grid;\n    fragCoord = rotate(fragCoord, angle + iTime * animate);\n    \n    drawBlob(fragCoord, fragColor);\n    \n    fragColor = vec4(toSRGB(fragColor.rgb), 1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}