{
    "Shader": {
        "info": {
            "date": "1675022961",
            "description": "Animation for my music track: https://www.youtube.com/watch?v=iQ-OqHmJKmI",
            "flags": 0,
            "hasliked": 0,
            "id": "ctXXR2",
            "likes": 15,
            "name": "Fractal - Passes",
            "published": 3,
            "tags": [
                "raymarching",
                "fractal",
                "visualizer",
                "visualiser",
                "sequence",
                "vj"
            ],
            "usePreview": 0,
            "username": "Meleshin",
            "viewed": 442
        },
        "renderpass": [
            {
                "code": "// Code of animation for my music track:\n// https://www.youtube.com/watch?v=iQ-OqHmJKmI\n//\n// Roman Meleshin - Passes\n//---------------------------------------------\n// http://romanmeleshin.art/\n// \n// The code is distributed under the MIT license.\n// Inspired by https://www.shadertoy.com/view/wtGfRy\n\n//#define PULSE\n#define AA 1 // Antialias. 1 or more, 1 for fast.\n#define MARCH_MAX_STEPS 100\n#define BAR 3. // Beats per bar.\n#define SEQ_BPM 210. // Beats per minute.\n\nvec3 ro0;\nvec3 ro;\n#if defined(PULSE)\n\tfloat barPulse;\n#endif\n\nstruct varsStruct{\n\tfloat iTime;\n\tfloat eA;\n\tfloat eB;\n\tfloat pA;\n\tfloat pD;\n\tfloat it;\n\tfloat s0;\n\tfloat pB;\n\tfloat pC;\n\tvec3 colBase;\n\tfloat colFactA;\n\tfloat colFactB;\n\tfloat fadeIn;\n\tfloat fadeOut;\n\tfloat fade;\n\tfloat clipTime;\n};\nvarsStruct varsSeq[] = varsStruct[](\n\tvarsStruct(\n\t\t/*iTime*/ 0., \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 23.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 23.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0., \n\t\t/*pC*/ 0., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 47.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0., \n\t\t/*pC*/ 0., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 47.75, \n\t\t/*eA*/ -3.8, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -1., \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 71.75, \n\t\t/*eA*/ -3.8, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -1., \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 71.75, \n\t\t/*eA*/ -2., \n\t\t/*eB*/ 25., \n\t\t/*pA*/ -1.9, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 12., \n\t\t/*s0*/ 2.5, \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 95.75, \n\t\t/*eA*/ -2., \n\t\t/*eB*/ 25., \n\t\t/*pA*/ -1.9, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 12., \n\t\t/*s0*/ 2.5, \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 95.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.8, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 119.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.8, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 119.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.8, \n\t\t/*it*/ 10., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 143.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.8, \n\t\t/*it*/ 10., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 143.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.8, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0., \n\t\t/*pC*/ 0., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 167.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.8, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0., \n\t\t/*pC*/ 0., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 167.75, \n\t\t/*eA*/ 1.9, \n\t\t/*eB*/ 11., \n\t\t/*pA*/ -1.7, \n\t\t/*pD*/ 0.7, \n\t\t/*it*/ 10., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0., \n\t\t/*pC*/ 0., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 191.75, \n\t\t/*eA*/ 1.9, \n\t\t/*eB*/ 11., \n\t\t/*pA*/ -1.7, \n\t\t/*pD*/ 0.7, \n\t\t/*it*/ 10., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0., \n\t\t/*pC*/ 0., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 191.75, \n\t\t/*eA*/ 1.9, \n\t\t/*eB*/ 8., \n\t\t/*pA*/ 1.7, \n\t\t/*pD*/ 0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 3., \n\t\t/*pB*/ 0., \n\t\t/*pC*/ 0., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 215.75, \n\t\t/*eA*/ 1.9, \n\t\t/*eB*/ 8., \n\t\t/*pA*/ 1.7, \n\t\t/*pD*/ 0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 3., \n\t\t/*pB*/ 0., \n\t\t/*pC*/ 0., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 215.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ 1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 6., \n\t\t/*s0*/ 3., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 233.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ 1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 6., \n\t\t/*s0*/ 3., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 233.75, \n\t\t/*eA*/ -2.4, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.62, \n\t\t/*it*/ 6., \n\t\t/*s0*/ 3., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 251.75, \n\t\t/*eA*/ -2.4, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.62, \n\t\t/*it*/ 6., \n\t\t/*s0*/ 3., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 251.75, \n\t\t/*eA*/ -2.3, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0., \n\t\t/*pC*/ 0., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 275.75, \n\t\t/*eA*/ -2.3, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0., \n\t\t/*pC*/ 0., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 275.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 10., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0., \n\t\t/*pC*/ 0., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 299.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 10., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0., \n\t\t/*pC*/ 0., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 299.75, \n\t\t/*eA*/ -3.8, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -1., \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 10., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 323.75, \n\t\t/*eA*/ -3.8, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -1., \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 10., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 1., \n\t\t/*pC*/ 1., \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 323.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 347.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 347.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 6., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 365.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 6., \n\t\t/*s0*/ 2., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 365.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 6., \n\t\t/*s0*/ 1., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 389.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 6., \n\t\t/*s0*/ 1., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 389.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 1., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 413.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -1.5, \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 1., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 413.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -2., \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 1., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 437.75, \n\t\t/*eA*/ -2.5, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -2., \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 1., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 437.75, \n\t\t/*eA*/ -2.4, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -2., \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 1., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 461.75, \n\t\t/*eA*/ -2.4, \n\t\t/*eB*/ 20., \n\t\t/*pA*/ -2., \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 1., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 461.75, \n\t\t/*eA*/ -2.4, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -2., \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 1., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 485.75, \n\t\t/*eA*/ -2.4, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -2., \n\t\t/*pD*/ -0.7, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 1., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 6., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 485.75, \n\t\t/*eA*/ -2.4, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -2., \n\t\t/*pD*/ -0.6, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 1., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 24., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t),\n\tvarsStruct(\n\t\t/*iTime*/ 528., \n\t\t/*eA*/ -2.4, \n\t\t/*eB*/ 30., \n\t\t/*pA*/ -2., \n\t\t/*pD*/ -0.6, \n\t\t/*it*/ 8., \n\t\t/*s0*/ 1., \n\t\t/*pB*/ 0.25, \n\t\t/*pC*/ 0.25, \n\t\t/*colBase*/ vec3(0.2,0.9,0.3), \n\t\t/*colFactA*/ 3., \n\t\t/*colFactB*/ 0.00005, \n\t\t/*fadeIn*/ 3., \n\t\t/*fadeOut*/ 24., \n\t\t/*fade*/ 1., \n\t\t/*clipTime*/ 0.\n\t)\n);\nvarsStruct vars;\nvoid varsInit(){\n\tconst float beatTime = 60. / SEQ_BPM;\n\tfloat loopLength = varsSeq[varsSeq.length()-1].iTime * beatTime;\n\tfloat loopT = mod(iTime, loopLength);\n\tfloat clipT;\n\tfloat clipL;\n\tvarsStruct a;\n\tvarsStruct b;\n\tfloat t;\n\tfor(int i = 0; i < varsSeq.length()-1; i++){\n\t\tfloat sTimeNext = varsSeq[i+1].iTime * beatTime;\n\t\tif(sTimeNext > loopT){\n\t\t\tfloat sTime = varsSeq[i].iTime * beatTime;\n\t\t\ta = varsSeq[i];\n\t\t\tb = varsSeq[i+1];\n\t\t\tclipT = loopT - sTime;\n\t\t\tclipL = sTimeNext - sTime;\n\t\t\tt = clipT/clipL;\n\t\t\tbreak;\n\t\t}\n\t}\n\tvars.iTime = loopT;\n\tvars.clipTime = t;\n\tvars.eA = mix(a.eA, b.eA, t);\n\tvars.eB = mix(a.eB, b.eB, t);\n\tvars.pA = mix(a.pA, b.pA, t);\n\tvars.pD = mix(a.pD, b.pD, t);\n\tvars.it = mix(a.it, b.it, t);\n\tvars.s0 = mix(a.s0, b.s0, t);\n\tvars.pB = mix(a.pB, b.pB, t);\n\tvars.pC = mix(a.pC, b.pC, t);\n\tvars.colBase = mix(a.colBase, b.colBase, t);\n\tvars.colFactA = mix(a.colFactA, b.colFactA, t);\n\tvars.colFactB = mix(a.colFactB, b.colFactB, t);\n\tvars.fade = 1.;\n\tif(a.fadeIn != 0.){\n\t\tvars.fade *= clamp(clipT / (a.fadeIn * beatTime), 0., 1.);\n\t}\n\tif(a.fadeOut != 0.){\n\t\tvars.fade *= clamp((clipL - clipT) / (a.fadeOut * beatTime), 0., 1.);\n\t}\n\tvars.clipTime = mix(a.clipTime, b.clipTime, t);\n}\n\nmat3 rotMat(vec3 v, float c, float s){\n\tfloat k = (1. - c);\n\treturn mat3(\n\t\tk * v.x * v.x + c,\t\t\tk * v.x * v.y - s * v.z,\tk * v.x * v.z + s * v.y,\n\t\tk * v.x * v.y + s * v.z,\tk * v.y * v.y +c,\t\t\tk * v.y * v.z - s * v.x,\n\t\tk * v.x * v.z - s * v.y,\tk * v.y * v.z + s * v.x,\tk * v.z * v.z + c\n\t);\n}\nmat3 rotMat(vec3 v, float angle){\n\treturn rotMat(v, cos(angle), sin(angle));\n}\nmat3 rotMat(vec3 z, vec3 d){\n\tvec3 cr = cross(z, d);\n\treturn rotMat(cr, dot(z, d), length(cr));\n}\nvec3 opRepeat(vec3 p, float repW){\n\tfloat repWD = repW / 2.;\n\treturn mod(p + repWD, repW) - repWD;\n}\n\nvoid tune(){ \n    if(vars.eA > 0.){\n        vars.pB = abs(vars.pB);\n    }else if(vars.eA < 0.){\n        vars.it = ceil(vars.it/2.)*2.;\n    }\n    #if defined(PULSE)\n    \tvars.s0 *= 1.-0.15*barPulse;\n    \tvars.pA *= 1.+0.001*barPulse;\n    #endif\n}\nvec4 deFractal(vec3 p){\n\tfloat s = vars.s0;\n\tp = abs(p);\n    p += vars.pA;\n    for(float i=0.; i<vars.it; i++){\n        p -= vars.pB;\n        p = abs(p);\n\t\tp = vars.pC - p;\n\t\tfloat e = vars.eA/min(dot(p,p),vars.eB);\n\t\ts*=e;\n\t\tp=p*e + vars.pD;\n\t}\n\tfloat dist = abs(p.z)/s;\n\tdist += .001;\n\tvec3 col = vars.colBase * 10. + log(s * vars.colFactA);\n\tcol = vars.colFactB * abs(cos(col))/dot(p,p)/dist;\n\treturn vec4(col, dist);\n}\n\nvec4 map(vec3 p){\n\tp -= ro0;\n\tp = opRepeat(p, 2.);\n\treturn deFractal(p);\n}\nvec3 march(vec3 ro, vec3 rd){\n\tvec4 res = vec4(0.);\n\tfor(int i=0; i<MARCH_MAX_STEPS; i++){\n\t\tvec3 p = ro + res.a * rd;\n\t\tvec4 m = map(p);\n\t\tres += m;\n\t }\n\t return res.rgb;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\tvarsInit();\n\t\n\tconst float beatTime = 60./SEQ_BPM;\n\tconst float barTime = BAR*beatTime;\n\t#if defined(PULSE)\n\t\tfloat iTimeInBars = vars.iTime / barTime;\n\t\tbarPulse = pow(1. - abs(iTimeInBars - round(iTimeInBars))*2., 3.);\n\t#endif\n\t\n\ttune();\n\n\tconst float foc = 1.;\n\tro0 = vec3(0, 0, 0);\n\tro = ro0 + vec3(0,0,iTime/barTime/4.);\n\tvec3 col =vec3(0.);\n#if AA>1\n\tfor(int i = 0; i < AA; ++i){\n\t\tfor(int j = 0; j < AA; ++j){\n\t\t\tvec2 ao = vec2(float(i),float(j))/float(AA) - .5;\n\t\t\tvec2 uv = (fragCoord.xy + ao - .5*iResolution.xy)/iResolution.y;\n#else\n\t\t\tvec2 uv = (fragCoord.xy - .5*iResolution.xy)/iResolution.y;\n#endif\n\t\t\tvec3 rd = normalize(vec3(uv.x, uv.y, foc));\n\t\t\tcol += march(ro, rd);\n\t\t\t\n#if AA>1\n\t\t}\n\t}\n\tcol /= float(AA*AA);\n#endif\n\tfragColor = vec4(col * vars.fade, 1);\n}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}