{
    "Shader": {
        "info": {
            "date": "1710866002",
            "description": "playing around",
            "flags": 0,
            "hasliked": 0,
            "id": "lXSSRc",
            "likes": 7,
            "name": "playing around #2",
            "published": 3,
            "tags": [
                "polygon"
            ],
            "usePreview": 0,
            "username": "jonasfrey",
            "viewed": 134
        },
        "renderpass": [
            {
                "code": "vec2 f_o_rotd(\n    vec2 o, \n    float n_radians\n){\n    float n_sin = sin(n_radians);\n    float n_cos = cos(n_radians);\n    return o * mat2(\n        n_sin, -n_cos, \n        n_cos, n_sin\n    );\n}\nfloat f_n_dist_line2d(\n    vec2 a, \n    vec2 b, \n    vec2 p\n){\n\n    vec2 ab = b-a;\n    vec2 ap = p-a;\n    float t_abs = (dot(ab,ap)/length(ab));\n    float t_nor = t_abs / length(ab);\n    vec2 l = (a+t_nor*ab);\n    float d = length(l-p);\n    float s = sign(ab.x * ap.y - ab.y * ap.x);\n    float sd = d*s;\n    return sd;\n}\nfloat f_n_sd_polygon(\n    vec2 p, \n    float n_sides, \n    float n_radius\n){\n    float n_tau = 6.2831;\n    float n_ang_nor_per_side = 1./n_sides;\n    float n_ang_nor = fract(atan(p.x, p.y)/n_tau);\n    float n_ang_nor_snap1 = floor(n_ang_nor/n_ang_nor_per_side)*n_ang_nor_per_side;\n    float n_ang_nor_snap2 = floor(n_ang_nor/n_ang_nor_per_side)*n_ang_nor_per_side+n_ang_nor_per_side;\n    n_ang_nor_snap2 = fract(n_ang_nor_snap2);\n    vec2 p1 = vec2(\n        sin(n_ang_nor_snap1*n_tau),\n        cos(n_ang_nor_snap1*n_tau)\n    )*n_radius;\n    vec2 p2 = vec2(\n        sin(n_ang_nor_snap2*n_tau),\n        cos(n_ang_nor_snap2*n_tau)\n    )*n_radius;\n    float n = f_n_dist_line2d(p1, p2, p);\n    return n;\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 o_trn = (fragCoord.xy-iResolution.xy*.5)/iResolution.y;\n\n\n    vec2 a = vec2(-0.2, -0.5);\n    vec2 b = vec2(0.2, 1.25);\n    float n_sides = floor(3.+(sin(iTime)*.5+.5)*20.);\n    n_sides = 12.;\n    float n_tau = 6.2831;\n    float n_len = length(o_trn);\n    float n_rep = 32.;\n    float n_rep_nor = 1./n_rep;\n    float n_len_snap = \n        fract(\n            floor(n_len/n_rep_nor)*n_rep_nor\n         );\n         \n         \n    float t = iTime*0.5;\n    float n_t = clamp(mod(t+n_len_snap*2., 2.),0., 1.);\n    //n_t = pow(n_t, 3.);\n    n_t = sin(n_t*3.)*.5+.5;\n    //sin(n_t*2.);\n    vec2 o = f_o_rotd(\n        o_trn, \n        n_t*n_tau+n_len_snap*n_rep_nor*n_tau\n    );\n    float n = f_n_sd_polygon(o, n_sides, 0.5);\n    n = n*-1.;\n    float n1 = clamp(n, 0., 1.);\n    n1 = sin(n1*n_tau*n_rep);\n    n1 = clamp(n1, 0., 1.);\n    n1 = n1*n1*n1;\n    vec4 o_col = vec4(\n        n1\n        //n_len_snap \n    );\n    \n    fragColor = vec4(\n        o_col\n    );\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}