{
    "Shader": {
        "info": {
            "date": "1689973180",
            "description": "sydfgybf",
            "flags": 0,
            "hasliked": 0,
            "id": "DsSfzc",
            "likes": 4,
            "name": "mc water",
            "published": 3,
            "tags": [
                "procedural",
                "2d",
                "sdf"
            ],
            "usePreview": 0,
            "username": "ArmandB",
            "viewed": 196
        },
        "renderpass": [
            {
                "code": "float smin( float a, float b){\n    a = pow(a, 8.0);\n    b = pow(b, 8.0);\n    return pow(a*b/(a+b), 0.125);\n}\n\nbool isWater(vec2 p){\n    return texelFetch(iChannel0,ivec2(mod(p,64.0)),0).r*texelFetch(iChannel0,ivec2(mod(p/2.0,64.0)),0).r < 0.5;\n}\n\nfloat wave(float x){\n    return 2.0*abs(fract(x/16.0) - 0.5);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = floor(fragCoord);\n    vec2 block = floor(uv/16.0);\n    \n    vec3 col = mix(vec3(0.7,1.0,0.6), vec3(0.1,0.7,0.5), (texelFetch(iChannel0,ivec2(mod(uv,16.0)),0).r + 0.5)*(texelFetch(iChannel0,ivec2(mod(uv/2.0,8.0)),0).r + 0.1));\n    \n    if (isWater(block)){\n        vec2 m = uv.xy/16.0 - block.xy;\n        vec2 p = 1.0 - m - 0.0625;\n        float d = !isWater(block + vec2(1,0)) ? p.x : 1.0;\n        d = smin(d, !isWater(block - vec2(1,0)) ? m.x : 1.0);\n        d = smin(d, !isWater(block + vec2(0,1)) ? p.y : 1.0);\n        d = smin(d, !isWater(block - vec2(0,1)) ? m.y : 1.0);\n        if (d >= 0.5){\n            d = smin(d, !isWater(block + vec2(1,1)) ? sqrt(p.x*p.x + p.y*p.y) : 1.0);\n            d = smin(d, !isWater(block + vec2(-1,1)) ? sqrt(m.x*m.x + p.y*p.y) : 1.0);\n            d = smin(d, !isWater(block + vec2(1,-1)) ? sqrt(p.x*p.x + m.y*m.y) : 1.0);\n            d = smin(d, !isWater(block + vec2(-1,-1)) ? sqrt(m.x*m.x + m.y*m.y) : 1.0);\n        }\n        \n        vec2 wavecoord = (uv + vec2(iTime + wave(iTime+uv.y),0))/vec2(2,1);\n        float shorewaveheight = float(max(wave(floor(d*16.0 + iTime*4.0)), wave(floor(d*16.0 - iTime*4.0))) == 1.0);\n        float oceanwaveheight = max(texelFetch(iChannel0,ivec2(mod(wavecoord,64.0)),0).r - 0.99,0.0)*100.0;\n        float k = d == 0.0 ? 1.0 : shorewaveheight*clamp(1.0 - d*4.0,0.0,1.0);\n        if (d == 1.0/16.0) k = max(k,max(texelFetch(iChannel0,ivec2(mod(uv/2.0,64.0)),0).r - 0.3,0.0));\n        vec3 basecol = mix(vec3(0.28,0.85,0.91),vec3(0.17,0.54,0.71),clamp(floor(d*d*8.0)/4.0,0.0,1.0));\n        col = mix(basecol,vec3(1),clamp(max(floor(k*4.0)/4.0, oceanwaveheight),0.0,1.0));\n    }\n\n    fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 15,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}