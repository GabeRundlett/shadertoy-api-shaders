{
    "Shader": {
        "info": {
            "date": "1720460834",
            "description": "from  https://www.shadertoy.com/view/l3KSDG https://www.shadertoy.com/view/43KSWy",
            "flags": 0,
            "hasliked": 0,
            "id": "MXKXDG",
            "likes": 6,
            "name": "fractals and circle",
            "published": 3,
            "tags": [
                "fractal",
                "circle",
                "cineshader",
                "ine"
            ],
            "usePreview": 0,
            "username": "nayk",
            "viewed": 313
        },
        "renderpass": [
            {
                "code": "\nprecision mediump float;\n\nuniform float time;\nuniform vec2 resolution;\n#define time iTime\n#define resolution iResolution.xy\n\n\nfloat colorChange(float speed,float offset){\n\tspeed = abs(sin(radians(time*speed+offset)));\n\treturn speed;\n}\n\n\nprecision highp float;\n\n#define time iTime\n\nuniform vec2 mouse;\n\n\nint fISequencer(void){\n\n\nfloat nTime =.1*time;\nvec4 VMouse =vec4((mouse -0.5) *2.0, 0, 0);\n\tint iCycle =100, iTimePerSQ =5;\n\tint iSQ =int(floor(mod(nTime, float(iCycle)) /float(iTimePerSQ)));\n\treturn iSQ;\n}\n\nfloat fNGoverner(void){\n\nfloat nTime =.1*time;\nvec4 VMouse =vec4((mouse -0.5) *2.0, 0, 0);\n\tint iCycle =120;\n\tfloat nGV =mod(nTime, float(iCycle)) /float(iCycle);\n\treturn nGV;\n}\n\nint iCounter;\nint fICounter(void){\n\treturn iCounter++;\n}\n\nvec4 fVLissajous(float nLJ){\n\tvec4 VCycle =vec4(19,17,13,11);\n\tVCycle *=VCycle.x +VCycle.y +VCycle.z +VCycle.w;\n\tVCycle *=acos(-1.0) *2.0;\n\tvec4 VLS =sin(VCycle *nLJ);\n\treturn VLS;\n}\n\nfloat fNRandom(float nIN){\n\tvec4 VSeed =fract(sqrt(vec4(2,3,5,7)));\n\tfloat nRandom =fract(sin(VSeed.x *nIN +VSeed.y));\n\treturn nRandom;\n}\n\nfloat fNRandom(vec2 V2IN){\n\tvec4 VSeed =fract(sqrt(vec4(2,3,5,7)));\n\tfloat nRandom =fract(sin(dot(VSeed.xy, V2IN) +VSeed.z));\n\treturn nRandom;\n}\n\nfloat fNRandom(vec3 V3IN){\n\tvec4 VSeed =fract(sqrt(vec4(2,3,5,7)));\n\tfloat nRandom =fract(sin(dot(VSeed.xyz, V3IN) +VSeed.w));\n\treturn nRandom;\n}\n\nfloat fNRandom(vec4 VIN){\n\tvec4 VSeed =fract(sqrt(vec4(2,3,5,7)));\n\tfloat nRandom =fract(sin(dot(VSeed, VIN)));\n\treturn nRandom;\n}\n\nfloat fNFractal(vec2 V2N, vec2 V2C){\n\tint iT;\n\tfor(int I =0; I <100; I++){\n\t\tif(V2N.x >10.0)\tbreak;\n\t\tV2N =vec2(V2N.x *V2N.x -V2N.y *V2N.y +V2C.x, 2.0 *V2N.x *V2N.y +V2C.y);\n\t\tiT++;\n\t}\n\treturn float(iT);\n}\n\nvec4 fVColor(vec4 VP){\n\tvec4 VC =vec4(1);\n\n\n\n\t{\n\t\tfloat nC;\n\t\tint iSQ =fISequencer();\n\n          // \tuncomment to mix them\t\n\t\t\n\t\tnC +=sin(VP.x) *sin(VP.y) *sin(VP.w);\n\t\t\n\t\t\n\t\t\n\t\n\t\t\n\t\t\n\t\tnC +=atan(VP.x, VP.y) +length(VP.xy) -VP.w;\n\t\tnC +=atan(VP.x, VP.y) +length(VP.xy) *sin(VP.w);\n\t\tnC +=(VP.x +sin(VP.y *2.0 +VP.w)) *(VP.y +sin(VP.x *2.0 +VP.w));\n\tnC +=atan(VP.x +0.5, VP.y) *atan(VP.x -0.5, VP.y) +VP.w;\n\t//\tnC +=log(abs(VP.x)) +log(abs(VP.y)) +VP.w;\n\t//\tnC +=tan(VP.x) +tan(VP.y) +VP.w;\n\t//\tnC +=sin(atan(VP.x, VP.y) *3.0 +VP.w) +length(VP.xy) -VP.w;\n\t//\tnC +=length(VP.xy -fVLissajous(VP.w *1e-4).xy);\n\t\tnC +=fNRandom(floor(VP.xy *16.0)) +VP.w;\n\t\tnC +=fNFractal(VP.xy, sin(vec2(2,3) *VP.w));\n\t\tnC +=fNFractal(sin(vec2(2,3) *VP.w), VP.xy);\t\n\t\t\n\n\t\tnC =sin(nC *16.0);\n\t\tVC.rgb =vec3(1) *step(nC, 0.0);\n\t}\n\treturn VC;\n}\n\nfloat test(float te,vec2 ve2,vec2 vec22,float i){\nfloat nC;\n  vec2 uv = ve2/iResolution.xy-0.5;\n uv*=5.5;\n   \n\tvec4 VColor =vec4(1), VP =vec4(uv, 0, time);\n\n\tVColor =fVColor(VP);\n\tnC +=fNFractal(VP.xy, sin(vec2(2,3) *VP.w));\n\t\tnC +=fNFractal(sin(vec2(2,3) *VP.w), VP.xy);\t\n    \n\tve2 += vec2(cos(time*3.0*(2.0-i/11.0)*nC),sin(time*3.0*(2.0-i/11.0)))*0.5;\n\tfloat f = abs(length(vec22*ve2));\n\tif(f<2.0){\n\t\tte=0.025*0.005/pow(f,0.9);\n\t}\n\treturn te;\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\tvec2 p =(gl_FragCoord.xy*2.0-resolution) / min(resolution.x,resolution.y);//正規化\n     vec2 uv = fragCoord/iResolution.xy-0.5;\n uv*=5.5;\n   uv=abs(uv);\n    uv=(uv.x<uv.y)?uv.xy:uv.yx;\n    float t=iTime;\n    uv*=mat2(cos(t),sin(t),-sin(t),cos(t));\n    // Time varying pixel color\n    \n    \n\tvec4 VColor =vec4(1), VP =vec4(uv, 0, time);\n\n\tVColor =fVColor(VP);\n\tvec3 destColor = vec3(colorChange(2.5,150.0),colorChange(5.0,180.0),colorChange(7.5,0.0));\n\tfloat nC;\n\tfloat f = 0.0;\n\n\t\n\tnC +=fNRandom(floor(uv.xy *16.0)) +VColor.w;\n\tfor(float i=0.0;i<nC+10.;i++){\n\t\tfloat s =sin(time*i/10.0+i*0.628318)*.5;\n\t\tfloat c =cos(time*i/10.0+i*0.628318)*0.5;\n\t\tf+=test(0.0025,vec2(1.0*c,-1.0*s),p,i)/abs(length(p*vec2(tan(c),sin(c)))-0.5);\n        \tf+=test(0.0025*iTime,vec2(1.0*c,-1.0*s),p,i)/abs(length(p+vec2((c),(s)))-1.0);\n            \n\t}\n\t\n\tfragColor = vec4(vec3(destColor*f*nC*mod(fragCoord.y, 2.)),1.0);\n\t\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}