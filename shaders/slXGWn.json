{
    "Shader": {
        "info": {
            "date": "1621878506",
            "description": "potater",
            "flags": 32,
            "hasliked": 0,
            "id": "slXGWn",
            "likes": 22,
            "name": "Day 522",
            "published": 3,
            "tags": [
                "feedback",
                "mdtmjvm"
            ],
            "usePreview": 0,
            "username": "jeyko",
            "viewed": 430
        },
        "renderpass": [
            {
                "code": "\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3 col = texture(iChannel0,fragCoord/iResolution.xy).rgb;\n    vec2 uv = (fragCoord - 0.5*iResolution.xy)/iResolution.y;\n    \n    float md = 3.;\n    float stSz = R.y*0.01*(1.);\n    int idx = iFrame / 1144 % 3;\n    vec2 U = fragCoord;\n    vec2 dF = vec2( \n        T(U+vec2(1,0)*stSz)[idx]-T(U-vec2(1,0)*stSz)[idx],\n        T(U+vec2(0,1)*stSz)[idx]-T(U-vec2(0,1)*stSz)[idx]\n    );\n    col = mix(smoothstep(0.,1.,1.-col),col,1.-float(iMouse.z>0.));\n    col = pow(max(col,0.),vec3(0.4545 ));\n    \n    fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "#define rot(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n\n#define pal(a,b,c,d,e) (a+(b)*sin((c)*(d) +e))\nvoid mainImage( out vec4 fragColor, in vec2 U )\n{\n    vec2 oU = U;\n    vec2 uv = (U - 0.5*iResolution.xy)/iResolution.y;\n    float T = iTime*0.5;\n    U.x += sin(T + sin(T))*0.4;\n    \n    float du = 0.1;\n    float stSz = R.y*0.004*(1. + sin(iTime + dot(uv,uv)*10.));\n    int idx = iFrame / 1144 % 3;\n    vec2 dF = vec2( \n        T(U+vec2(1,0)*stSz)[idx]-T(U-vec2(1,0)*stSz)[idx],\n        T(U+vec2(0,1)*stSz)[idx]-T(U-vec2(0,1)*stSz)[idx]\n    );\n    float stSzB = stSz;\n    vec4 n = T(U+vec2(0,1)*stSzB), e = T(U+vec2(1,0)*stSzB), s = T(U-vec2(0,1)*stSzB), w = T(U-vec2(1,0)*stSzB), m = 0.25*(n+e+s+w); \n    \n    float div = 0.25*(n.y-s.y+e.x-w.x);\n    \n    \n    vec3 prevFr = T(U + dF*stSz*2.*(.2 + sin(iTime)*0.05 + dot(dF,dF) )).xyz;\n\n    vec3 col = mix(vec3(0.96,0.9,0.8 - dot(uv,uv)*0.1 ), prevFr,0.99 + sin(iTime*4.)*0.009);\n    \n    float ddf =  dot(dF,dF)*1.;\n    float cenv = max(sin(iTime*0.6),0.);\n    cenv = smoothstep(0.,1.,cenv);\n    for(float i = 0.; i < 130.; i++){\n        vec2 p = uv + vec2(sin(i)*0.25*cenv,0);\n        p *= rot(i*10. + (iTime +sin(iTime + i*2.1)*1.)*0.4*sin(i));\n        //p.y += sin(i*240.)*5.;\n        \n        p = vec2(length(p),atan(p.xy));\n        \n        float env = mod(sin(i)*10.2 + iTime*0.1,1.)*1. + sin(iTime)*0.15;\n        p.x -= env;\n        \n        float d = length(p )\n            - 0.02*smoothstep(0.,0.6,env)\n            + 0.04*smoothstep(0.1,-0.04,env)\n            + 0.04*smoothstep(0.,0.3,env);\n        vec3 c = pal(vec3(1.,1.,0.4),vec3(0.4,0.8,0.9),vec3(3,2,1),1.,i*3. + iTime + p.x*3. - ddf + p.x*47. + 0.*smoothstep(0.03,0.1,d));\n        //col = mix(col,c -col*vec3(0.4,1.,1.),smoothstep(fwidth(d),0.,d));\n        col = mix(col,c -col*vec3(0.4,1.,1.),smoothstep(0.04 + sin(iTime*0.7 + sin(i))*0.02,0.,d ));\n        \n    }\n\n    if(iFrame < 2)\n        col -= col - 1.;\n    \n      \n    fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "linear",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Buffer A",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 257
                    }
                ],
                "type": "buffer"
            },
            {
                "code": "#define R iResolution.xy\n#define T(u) texture(iChannel0,(u)/R)",
                "description": "",
                "inputs": [],
                "name": "Common",
                "outputs": [],
                "type": "common"
            }
        ],
        "ver": "0.1"
    }
}