{
    "Shader": {
        "info": {
            "date": "1592956690",
            "description": "voronoise fire",
            "flags": 0,
            "hasliked": 0,
            "id": "wlfyWB",
            "likes": 5,
            "name": "voronoise fire",
            "published": 3,
            "tags": [
                "voronoisewavefire"
            ],
            "usePreview": 0,
            "username": "ich",
            "viewed": 378
        },
        "renderpass": [
            {
                "code": "#define pi 3.141\n#define pi2 (pi*2.)\n\nfloat n21(vec2 uv) {\n\treturn fract(9876. * sin(dot(uv, vec2(987, 654))));\n}\n\n\nvec2 n22(vec2 uv) {\n\tfloat n = n21(uv);\n\treturn vec2(n, n21(vec2(n)));\n}\n\n\nfloat n11(float v) {\n\treturn n21(vec2(v));\n}\n\nvec2 cs(vec2 uv) {\n\treturn vec2(cos(uv.x), sin(uv.y));\n}\n\nmat2 rot(float a) {\n\treturn mat2(\n\t\tcos(a), -sin(a),\n\t\tsin(a), cos(a)\n\t);\n}\n\nvec2 voronoi(vec2 uv, float intens) {\n\tvec2 out_id;\n\tfloat lo = 100.;\n\tfloat r = 1.;\n\tfor (float x = -r; x <= r; ++x) {\n\t\tfor (float y = -r; y <= r; ++y) {\n\t\t\tvec2 o = vec2(x, y);\n\t\t\tvec2 id = floor(uv + o) + .1;\n\t\t\tvec2 lv = fract(uv) - o - .5;\n\t\t\tvec2 t = n22(id) * iTime;\n\t\t\tlv += vec2(1, .6) * cs(t) * .5 * intens;\n            lv += (n22(uv) * .4 - .2) * intens;\n            //lv += cs(t + pi2*sin(uv.x*5.)) * .5 * intens;\n\t\t\tfloat l = length(lv);\n\t\t\tif (l < lo) {\n\t\t\t\tlo = l;\n\t\t\t\tout_id = id;\n\t\t\t}\n\t\t}\n\t}\n\treturn out_id;\n}\n\nfloat tri(float v) {\n\treturn abs(mod(v, 2.) - 1.);\n}\n\nfloat flower(vec2 uv) {\n\tfloat t = 3.+floor(3. * tri(iTime * .1));\n\tuv.x += sin(iTime * .2) * pow(max(0., uv.y + .3), 5.) * 5.;\n\tuv = rot(iTime * .1) * uv;\n\treturn length(uv) * sin(atan(uv.y, uv.x) * 3.);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n\tvec2 uv = (fragCoord - iResolution.xy*.5) / iResolution.y;\n    vec2 m = (iMouse.xy - iResolution.xy*.5) / iResolution.y;\n\tvec3 c = vec3(0);\n\n    // mouse controls\n\tuv -= m * .3;\n    \n    // voronoi\n    float s = smoothstep(-2., 1., flower(uv));\n\tvec2 id = voronoi(uv * 20., s) / 20.;\n    \n    // coloring\n\tc.r += n21(id) * .5 + .5;\n    float l = flower(id);\n\tc.rg += vec2(1, .5) * l;\n\tc *= smoothstep(-2., 1., l);\n \n    // sparks\n    float r = n21(id);\n    float sparks = pow(abs(sin(r * 1234. + iTime * 1.)), 10.);\n    c.rg *= sparks * vec2(.5, 1.) * max(0., l) + 1.;\n    c.b += .3 * c.g * sparks;\n\n    fragColor = vec4(c, 1);\n}\n\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}