{
    "Shader": {
        "info": {
            "date": "1606796459",
            "description": "SMAA T4U Upsample test.\nClick right side for half res reference, click left side for full screen reference, release mouse for TU4x upsampled.",
            "flags": 0,
            "hasliked": 0,
            "id": "wsyBzw",
            "likes": 8,
            "name": "VXAA TAA Upsample Test",
            "published": 3,
            "tags": [
                "upsample",
                "taa"
            ],
            "usePreview": 1,
            "username": "hypernewbie",
            "viewed": 1137
        },
        "renderpass": [
            {
                "code": "float lumaDiff( vec3 x, vec3 y )\n{\n    float l1 = dot( x, vec3( 0.2126, 0.7152, 0.0722 ) );\n    float l2 = dot( y, vec3( 0.2126, 0.7152, 0.0722 ) );\n    return abs( l1 - l2 );\n}\n\nvec4 pow3( vec4 x, float y )\n{\n    return vec4( pow( x.x, y ), pow( x.y, y ), pow( x.z, y ), x.w );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    //const vec2 imageSize = 1024.0;\n    vec2 imageSize = iResolution.xy;\n    \n    fragCoord -= 0.5f;\n    \n    vec2 uv_fullres = clamp( fragCoord / imageSize, 0.0, 1.0 );\n    vec2 uv_halfres = floor( fragCoord / 2.0 ) * 2.0;\n    uv_halfres += 1.0f;\n    uv_halfres = clamp( uv_halfres / imageSize, 0.0, 1.0 );\n    \n    vec4 fullc = texture( iChannel0, uv_fullres ); fullc = pow3( fullc, 2.2 );\n    \n    vec4 test0 = texture( iChannel0, uv_halfres + vec2( 0.0, 0.0 ) / imageSize ); test0 = pow3( test0, 2.2 );\n    vec4 test1 = texture( iChannel0, uv_halfres + vec2( 0.0, 1.0 ) / imageSize ); test1 = pow3( test1, 2.2 );\n    vec4 test2 = texture( iChannel0, uv_halfres + vec2( 1.0, 0.0 ) / imageSize ); test2 = pow3( test2, 2.2 );\n    vec4 test3 = texture( iChannel0, uv_halfres + vec2( 1.0, 1.0 ) / imageSize ); test3 = pow3( test3, 2.2 );\n    \n    vec4 p = texture( iChannel0, uv_halfres + vec2( 0.0, 1.0 ) / imageSize ); p = pow3( p, 2.2 );\n    vec4 ps = texture( iChannel0, uv_halfres + vec2( 0.0, -1.0 ) / imageSize ); ps = pow3( ps, 2.2 );\n    vec4 pe = texture( iChannel0, uv_halfres + vec2( 2.0,  1.0 ) / imageSize ); pe = pow3( pe, 2.2 );\n    vec4 c  = texture( iChannel0, uv_halfres + vec2( 1.0,  0.0 ) / imageSize ); c = pow3( c, 2.2 );\n    vec4 cw  = texture( iChannel0, uv_halfres + vec2( -1.0, 0.0 ) / imageSize ); cw = pow3( cw, 2.2 );\n    vec4 cn  = texture( iChannel0, uv_halfres + vec2(  1.0,  2.0 ) / imageSize ); cn = pow3( cn, 2.2 );\n\n    int xi = int( fragCoord.x ) % 2, yi = int( fragCoord.y ) % 2;\n    \n    if ( iMouse.z > 0.5 && iMouse.x < iResolution.x * 0.5 ) {\n        if ( xi == 0 && yi == 0 ) {\n            fragColor = test0;\n        }\n        if ( xi == 0 && yi == 1 ) {\n            fragColor = test1;\n        }\n        if ( xi == 1 && yi == 1 ) {\n            fragColor = test3;\n        }\n        if ( xi == 1 && yi == 0 ) {\n            fragColor = test2;\n        }\n    } else if ( iMouse.z > 0.5 && iMouse.x >= iResolution.x * 0.5 ) {\n        if ( xi == 0 && yi == 0 ) {\n            fragColor = test0;\n        }\n        if ( xi == 0 && yi == 1 ) {\n            fragColor = test0;\n        }\n        if ( xi == 1 && yi == 1 ) {\n            fragColor = test0;\n        }\n        if ( xi == 1 && yi == 0 ) {\n            fragColor = test0;\n        }\n    } else {\n        \n        fragColor = vec4( 0, 0, 0, 0 );\n        \n        if ( xi == 0 && yi == 0 ) {\n            float diff1 = lumaDiff( cw.xyz, c.xyz ), diff2 = lumaDiff( ps.xyz, p.xyz );\n            if ( diff1 < diff2 ) {\n                fragColor = mix( cw, c, 0.5f );\n            } else {\n                fragColor = mix( ps, p, 0.5f );\n            }\n        }\n        if ( xi == 0 && yi == 1 ) {\n            fragColor = p;\n        }\n        if ( xi == 1 && yi == 1 ) {\n            float diff1 = lumaDiff( p.xyz, pe.xyz ), diff2 = lumaDiff( cn.xyz, c.xyz );\n            if ( diff1 < diff2 ) {\n                fragColor = mix( p, pe, 0.5f );\n            } else {\n                fragColor = mix( cn, c, 0.5f );\n            }\n        }\n        if ( xi == 1 && yi == 0 ) {\n            fragColor = c;\n        }\n    }\n    \n    fragColor = pow3( fragColor, 1.0 / 2.2 );\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 5,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}