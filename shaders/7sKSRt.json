{
    "Shader": {
        "info": {
            "date": "1635147898",
            "description": "[url]https://inktober.com/[/url]\n#inktober2021 themes: [img]https://i.imgur.com/QjhAdpd.png[/img]\n\nNB: does not handle well pilling order of more than 2 splats. (bufferless exercice ;-) )",
            "flags": 0,
            "hasliked": 0,
            "id": "7sKSRt",
            "likes": 11,
            "name": "Fab25 #inktober2021 \"splat\" 2",
            "published": 3,
            "tags": [
                "2d",
                "splat",
                "short",
                "splash",
                "inktober2021"
            ],
            "usePreview": 0,
            "username": "FabriceNeyret2",
            "viewed": 305
        },
        "renderpass": [
            {
                "code": "// variant of https://shadertoy.com/view/7dyXzt\n\n#define H(p)     fract(sin((p)*mat2(127.1,311.7, 269.5,183.3)) *43758.5453123)\n#define hue(v)   ( .6 + .6 * cos( 6.3*(v)  + vec3(0,23,21)  ) )\n#define T(t,s)  ( t < 1. ? t-s : fract(t-s) )                       // init vs steady rain\n\nvoid mainImage(out vec4 O, vec2 u ) \n{\n    vec2  R = iResolution.xy;\n    float n = 2., w = n/R.y, t = iTime/10.,\n          l = 9., d,a,m=9.,p;\n    vec2  U = w* ( u+u - R ), D, P,H1,H2,H3,\n          I = floor(U), F = fract(U)-.5;\n    vec4  C; vec3 N;\n    O -=O;\n    for( int k=0 ; k < 9; k++ )                                     // check neighbor cells\n        D = vec2( k%3, k/3 )-1.,\n        d = T( t , H(I+D+.2).x ),                                   // proba of splat / oldness in splat\n        d > 0.                   \n          ? P = F - D - H(I+D),                                     // splat local coords\n            a = atan(P.y,P.x), \n            H1 = H(I+D+.6), H2 = H(I+D+.4)*6.28, H3 = H(I+D+.2),    // splat attributes\n            l = length(P) - .2*(1.+H1.x  +.3* cos(3.*a+H2.x) +.3* (1.+.3*H1.y)*cos(7.*a+H2.y) ),// splat shape\n            p = tanh(l*30.), N = normalize(vec3(-dFdx(p),-dFdy(p),10.*w)),   // height profile & Normal\n            C = vec4(  hue(H3.y) * (.7+.3*max(0.,dot(N,vec3(-1,-1,1)/1.73))) // amb+diffuse color\n                     + pow(max(0.,(.4*N.z-N.x-N.y)/1.47),20.)                // specular\n                     ,1) \n                  * smoothstep(1.5*min(fwidth(l),w*4.),0., l )      // splat mask\n                  * smoothstep(1.,0.,T( t , H3.x ) ),               // fade with age\n            C.a>.1 && d < m ? m = d,\n                    O = C + (1.-C.a)*O                              // blend over or under prevs\n                  : O += (1.-O.a) * C                               //   depending on relative age\n            :O; \n        \n    O += (1.-O.a)*(.93+.07*texelFetch(iChannel0,ivec2(u)%256,0).r); // background\n}\n",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 17,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}