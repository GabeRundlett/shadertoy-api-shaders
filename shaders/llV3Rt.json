{
    "Shader": {
        "info": {
            "date": "1476274247",
            "description": "drag with mouse\n\nmixing linear functions with a fast grid background that scales nicely, using fract()",
            "flags": 0,
            "hasliked": 0,
            "id": "llV3Rt",
            "likes": 3,
            "name": "2d graph canvas",
            "published": 3,
            "tags": [
                "2d",
                "graph",
                "analysis"
            ],
            "usePreview": 0,
            "username": "ollj",
            "viewed": 818
        },
        "renderpass": [
            {
                "code": "#define pi acos(-1.)\n#define ss(a,b,c) smoothstep(a-b,a+b,c)\n#define st (cos(iTime)*.5+.6)\n#define res iResolution\n\n#define zoom 5.\n\n//branchless if(a<0)return b;return c;\n//#define ifb(a,b,c) (b+(c-b)*step(a,0.))\n//#define pMod(x,d) (mod(x+d*.5,d)-d*.5)\n\n//scale and center uv coords.\nvec2 frame(vec2 v){v=2.*v.xy/res.xy-1.;\n v.x*=res.x/res.y;return v;}\n\n//a half rotation is divided by this value.\n//#define HalfSections 8.\n\nfloat Segment(vec2 p,vec2 a,vec2 b){p-=a;b-=a;\n float h=clamp(dot(p,b)/dot(b,b),0.,1.);\n return length(p-b*h);}\n //h is how far along p projects on the linÃ© agment\n//https://www.shadertoy.com/view/MdsGRS\n\nvoid mainImage(out vec4 r,in vec2 i){\n i-=iMouse.xy-res.xy*.5;//mouse.drag\n vec2 p=frame(i)*zoom;\n //distance to vec2(0):\n float d=length(p); \n //angle\n float divs=2.*(d-fract(d)+1.);//=HalfSections;\n float a=abs(atan(p.y,p.x))*divs/pi;\n a+=(1.-a-a)*step(p.y,0.);//a=ifb(p.y,a,1.-a);\n //orthogonal grid:\n vec2 t2=ss(.1,.1,fract(abs(p)));\n float t=min(t2.x,t2.y);\n vec3 grid=vec3(1.-fract(d),t,1.-fract(a));\n grid=.7-grid*st;\n r=vec4(grid,1.);\n //linear function.sin(x):\n float s=p.y-sin(p.x);\n s=ss(.1,.03,abs(s));\n r=mix(r,vec4(1),1.-s);\n //linear function.log(abs(x)):   \n float l=p.y-log(abs(p.x));\n l=ss(.1,.03,abs(l));\n r=mix(r,vec4(1),1.-l);\n    \n //line segment;\n vec2 l1=vec2(-2,4);\n vec2 l2=vec2( 1,5);\n float u=Segment(p,l1,l2);\n l=ss(.9,.01,1.-u);\n r=mix(r,vec4(1),l);\n //r.xyz+=max(1.-u,0.);\n\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}