{
    "Shader": {
        "info": {
            "date": "1558448817",
            "description": "mix(a,b,step()) seems both more obfuscating and less performant that a mere ternary cond?a:b (and a true 'if' is even more performant, strangely).\nAt least on linux ( =true OpenGL ) + nVidia + recent driver ;-)\n\nBut with slight change everything changes.",
            "flags": 0,
            "hasliked": 0,
            "id": "tlB3R1",
            "likes": 1,
            "name": "benching mix(step)",
            "published": 3,
            "tags": [
                "glsl",
                "bench",
                "performances"
            ],
            "usePreview": 0,
            "username": "FabriceNeyret2",
            "viewed": 1373
        },
        "renderpass": [
            {
                "code": "// benching variants of mix(step).\n// timings: A: linux (OpenGL), nVidia GTX 760, driver 415.27, 640x360, chrome\n//          B: windows/OpenGL, nVidia Quadro 6000, driver 375.86, 640x360, chrome\n//          C: windows/Angle,  nVidia Quadro 6000, driver D3D11,  640x360, chrome\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    float a = iMouse.x, b = iMouse.y, z = iMouse.z, v = 0.;\n    \n  //for (float i = 0.; i < 1e5; i++ ) // changes alot !\n    for (float i = min(0.,iTime); i < 1e5; i++ )\n     //                                       A          B    C\n     // v += a;                           // 30.  fps  4.4  5.5\n    \n// main bench:        \n        v += mix(a,b,step(i,z));          //  7.5 fps  3.2  5.5\n     // v += mix(a,b, i < z );            //  8.6 fps  2.4  3.6\n     // v += i > z ? a : b;               //  8.6 fps  2.4  3.6\n     // if (i > z) v += a; else v += b;   // 10.  fps  3.2  5.5\n     // v += iMouse[ int( i > z ) ];      //  2.  fps  1.1  1.7\n    \n// cond on v instead of z:\n     // v += mix(a,b,step(i,v));          //  8.6 fps  3.1  5.5\n     // v += mix(a,b, i < v );            //  6.7 fps  2.5  5.5\n     // v += i > v ? a : b;               //  6.7 fps  2.5  5.5\n     // if (i > v) v += a; else v += b;   // ~9.1 fps  3.1  5.5\n     // v += iMouse[ int( i > v ) ];      //  2.  fps  1.1  1.7\n\n// without +=  (strangely, fps keeps oscillating )    \n     // v = mix(a,b,step(i,v));           // 10.  fps  3.7  4.4\n     // v = mix(a,b, i < v );             // ~8.9 fps  3.   4.4\n     // v = i > v ? a : b;                //  ~   fps  3.   4.4\n     // if (i > v) v = a; else v = b;     //  ~   fps  3.   4.4\n     // v = iMouse[ int( i > v ) ];       //  2.  fps  1.1  1.7\n    \n    O = vec4(v);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}