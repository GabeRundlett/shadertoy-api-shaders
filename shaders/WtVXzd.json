{
    "Shader": {
        "info": {
            "date": "1583404479",
            "description": "Simple landscape series",
            "flags": 0,
            "hasliked": 0,
            "id": "WtVXzd",
            "likes": 11,
            "name": "Shark shader",
            "published": 3,
            "tags": [
                "landscape",
                "shark"
            ],
            "usePreview": 0,
            "username": "z0rg",
            "viewed": 328
        },
        "renderpass": [
            {
                "code": "// This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 3.0\n// Unported License. To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/3.0/ \n// or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.\n// =========================================================================================================\n\nconst float PI = 3.14159265;\nmat2 r2d(float a){float sa = sin(a);float ca=cos(a);return mat2(ca,sa,-sa,ca);}\n\nfloat lenny(vec2 v)\n{\n  return abs(v.x)+abs(v.y);\n}\nfloat sat(float a)\n{\n  return clamp(a,0.,1.);\n}\nvec3 sat(vec3 v)\n{\n  return vec3(sat(v.x),sat(v.y), sat(v.z));\n}\n\nfloat _cir(vec2 uv, float sz)\n{\n  return length(uv)-sz;\n}\n\nfloat _sub(float a, float b)\n{\n  return max(a,-b);\n}\n\nvec4 shark(vec2 uv)\n{\n  float sharp = 80.;\n  uv.x += .02*sin(10.*uv.y+iTime*2.);\n\n  float yUp = 0.;\n  float upOffX = .03;\n  float bodyUp = float(uv.x >0.)*(1.-sat(_cir(vec2(2.,1.)*uv+vec2(upOffX,yUp),.2)*sharp))\n  \t+ float(uv.x <0.)*(1.-sat(_cir(vec2(2.,1.)*uv+vec2(-upOffX,yUp),.2)*sharp));\n  float downy = .07;\n  float dOffX = 0.05;\n  float bodyDown = float(uv.x >0.)*(1.-sat(_cir(vec2(2.5,.7)*uv+vec2(dOffX,yUp+downy),.2)*sharp))\n  +   float(uv.x <0.)*(1.-sat(_cir(vec2(2.5,.7)*uv+vec2(-dOffX,yUp+downy),.2)*sharp));\n  float yArm = -.15;\n  float armX = .0;\n  float leftArm = (1.-sat(_sub(_cir(uv-vec2(armX,yArm),.2),_cir(uv-vec2(armX,yArm)+vec2(.0,.2),.3))*sharp));\n  float yPalm = -.42;\n  float palm = (1.-sat(_sub(_cir(.7*vec2(4.,1.)*uv-vec2(armX,yPalm),.15),_cir(.7*vec2(4.,1.)*uv-vec2(armX+sin(-PI+iTime)*.02,yPalm+.02*sin(iTime))+vec2(.0,.2),.3))*sharp));\n  float y2 = -.3;\n  float palm2 = (1.-sat(_sub(_cir(2.*uv-vec2(armX,y2),.2),_cir(2.*uv-vec2(armX,y2)+vec2(.0,.2),.3))*sharp));\n  float y3 = -1.1;\n\n  float palm3 = (1.-sat(_sub(_cir(3.*uv-vec2(armX,y3),.2),_cir(3.*uv-vec2(armX,y3)+vec2(.0,.2),.3))*sharp));\n\n  return vec4(0.,0.1,0.1,sat(palm3+palm2+bodyUp+bodyDown+leftArm+palm));\n}\n\nvec3 rdrLand(vec2 uv, float drawShark)\n{\n  vec3 back = vec3(0.);\n  vec3 dark = vec3(4.,32.,24.)/255.;\n  vec3 light = vec3(123.,165.,103.)/255.;\n  vec3 grad = dark+mix(light.yzx,dark,length(uv));\n  vec2 sunP = (uv-vec2(.1))+.09*vec2(sin(55.*uv.y+iTime),sin(35.*uv.x+iTime*2.));\n  vec3 sun = (1.-sat(_cir(sunP,.1)*50.))*light;\n  vec3 sunHalo = pow((1.-sat(_cir(sunP,.1)*5.)),2.)*light.zyx;\n  sun += sunHalo;\n  float shark = shark(uv+vec2(0.,mod(-iTime*.1,2.)-1.)).w;\n  back = back+grad+sun;\n  return mix(back,grad*.7,shark*drawShark)*sat(1.-lenny(uv)+.3);\n}\n\nvec3 rdrScn(vec2 uv)\n{\n  float maskLand = 1.-sat(_cir(uv,.5)*50.);\n\n  vec3 land = rdrLand(uv,1.);\n  vec2 sp = uv-vec2(.1);\n  float auv = iTime*.05+atan(-abs(sp.y),sp.x)/PI*2.;\n  float freq = 55.;\n  vec3 land2 = rdrLand(uv+vec2(sin(auv*freq),cos(auv*freq))*.02,.2)*.5;\n  return mix(rdrLand(uv*.7,0.)*.5,land,maskLand)+(land2*.5)*length(uv*3.);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n  vec2 uv = fragCoord.xy / iResolution.xx;\n  uv -= vec2(.5)*iResolution.xy/iResolution.xx;\n  uv *= 2.;\n  vec3 col = rdrScn(uv);\n  fragColor = vec4(col, 1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}