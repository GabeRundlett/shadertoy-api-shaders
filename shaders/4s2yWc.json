{
    "Shader": {
        "info": {
            "date": "1494145604",
            "description": "Done in 30 minutes during the shader showdown at Leon[https://www.shadertoy.com/user/leon]'s place.",
            "flags": 0,
            "hasliked": 0,
            "id": "4s2yWc",
            "likes": 8,
            "name": "Watermelons Floating Around",
            "published": 3,
            "tags": [
                "shadershowdown",
                "30minutes"
            ],
            "usePreview": 0,
            "username": "Koltes",
            "viewed": 887
        },
        "renderpass": [
            {
                "code": "mat2 rz2(float a){float c=cos(a),s=sin(a);return mat2(c,s,-s,c);}\n\nstruct M{float d;vec3 c;};\nM m;\n\nvoid map(vec3 p){\n    p.xy*=rz2(iTime*.03);\n    p.yz*=rz2(iTime*.05);\n    p.xy*=rz2(iTime*.07);\n    vec3 q=mod(p+2.5,5.)-2.5;\n    vec3 f=floor((p-2.5)/5.);\n    p=q;\n    p.xy*=rz2(f.x+iTime);\n    p.yz*=rz2(f.y+iTime);\n    p.zx*=rz2(f.z+iTime);\n    float d1=length(p)-1.;\n    float a=atan(p.y,p.x);\n    float d2=min(1.,abs(a)-(0.5+sin(iTime*10.)*.2))*length(p.xy);\n    m.d=max(d1,d2);\n    m.c=mix(vec3(1.,0.3,0.3),vec3(0.6,1.,0.6),smoothstep(.75,.85,length(p)));\n    m.c=mix(m.c,vec3(0.,0.3,0.1),smoothstep(0.95,1.,length(p)));\n    float mb=6.2831853/16.;\n    float b=mod(atan(p.z,p.y),mb)-.5*mb;\n    m.c=mix(vec3(0.),m.c,smoothstep(.18,.22,length(vec2(b*3.,length(p.xz)-0.2))));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    uv-=.5;\n    uv.x*=iResolution.x/iResolution.y;\n    vec3 ro=vec3(uv,-2.),rd=vec3(uv,1.),mp=ro;\n    int i;\n    for (i=0;i<50;++i){\n        map(mp);\n        m.d*=.5;\n        if(abs(m.d)<.001)break;\n        mp+=rd*m.d;\n    }\n    float ma=1.-float(i)/50.;\n    vec3 c=m.c*ma;\n    fragColor = vec4(c,1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}