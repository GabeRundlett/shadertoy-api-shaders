{
    "Shader": {
        "info": {
            "date": "1613256109",
            "description": "Here's some roses for Valentine's",
            "flags": 0,
            "hasliked": 0,
            "id": "WttBRl",
            "likes": 12,
            "name": "A Rose is a Rose is a Rose",
            "published": 3,
            "tags": [
                "recursion",
                "rose"
            ],
            "usePreview": 0,
            "username": "xavierseb",
            "viewed": 607
        },
        "renderpass": [
            {
                "code": "// A rose is a rose is a rose -Gertrude Stein\n#define rot(a) mat2(cos(a), sin(a), -sin(a), cos(a))\n#define PI2 6.2832\n\nfloat mapLeaf(vec3 p, inout bool isbg) {\t // leaves\n\tp=mod(p+8.,vec3(16.))-8.; p.z-=5.; \n\tp.xy *= rot(PI2/4.);\n\tp.xy =  vec2( length(p.xy)*sin(atan(p.y, p.x)), length(p.xy) ); p.y-=10.;\n\tisbg = true;\n\treturn dot(abs(p), .5*normalize(vec3(1.5,abs(sin(atan(p.x,p.y)*80.)/30.+sin(min(p.y,12.)/8.)),26.))) - .16;  \n}\n\nfloat mapRose(vec3 p, inout bool isbg) { // roses\n\tp=mod(p+vec3(14.,14.,20.),vec3(28.,28.,40.))-vec3(14.,14.,20.); \n\tif(p.z>-11.|| p.z<-33. || length(p.xy)>11.) return mapLeaf(p, isbg);\n\tp.xy *= rot(p.z/.8)/3.5;\n\tp.xy = vec2( length(p.xy)*sin(atan(p.y, p.x)), length(p.xy)-.25 );   \n\tp.xy *= rot(atan(p.y,p.x)); \n\tp.z-=length(p.xy)/16.+2.8;\n\tp.yz = vec2( length(p.yz)*sin(mod(atan(p.z, p.y), PI2/3.) - PI2/3./2.), length(p.yz)-11.6 ); \t\t\t\n\tvec2 p1 = p.xy = vec2( length(p.xy)*sin(mod(atan(p.y, p.x), PI2/90.) - PI2/90./2.), length(p.xy) ); p.y-=8.9;\n\tp.yz *= rot(1.1);\n\tp.xy = vec2( length(p1)*sin(mod(atan(p1.y, p1.x), PI2/2.) - PI2/2./2.), length(p1)-3.5 )*(1.01-p.z)/2.9;\n\tp.z+=length(p.xy)/34.-2.8;\t\t\t\n\tisbg=false;\n\treturn dot(abs(p), normalize(vec3(11,2,4))) - .5;  \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = (fragCoord.xy -.5*iResolution.xy) /iResolution.y, m=iMouse.xy/iResolution.xy; \n\tvec3 rd = normalize(vec3(uv, .25+ min(1.,m.y))), p = vec3(0,0,-30);\n\tfragColor = vec4(0);\n\tbool isbg;\n\tp.xz *= rot(m.x*.5-.25);\tp.yz *= rot(sin(iTime)/12.);\n\t\n\tfor (int i=1; i<270; i++) {\n\t\tfloat d = mapRose(p,isbg);\n\t\tif (d < .001) {\n\t\t\tif(isbg) fragColor = vec4(0,400./float(i*i),0,1);\n\t\t\telse \t fragColor = vec4(40./float(i),0,0,1);\n\t\t\tbreak;\n\t\t}\n\t\tp += rd * d;\n\t}\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}