{
    "Shader": {
        "info": {
            "date": "1724934954",
            "description": " golfing 2660 chars \"Twitter truchet\" by mrange. https://shadertoy.com/view/4fBfWz\n",
            "flags": 0,
            "hasliked": 0,
            "id": "MfjfDz",
            "likes": 5,
            "name": "Twitter truchet - golf (724ch)",
            "published": 3,
            "tags": [
                "2d",
                "truchet"
            ],
            "usePreview": 0,
            "username": "FabriceNeyret2",
            "viewed": 96
        },
        "renderpass": [
            {
                "code": "// golfing 2660 chars \"Twitter truchet\" by mrange. https://shadertoy.com/view/4fBfWz\n\n#define H(c)     fract(sin(dot(c ,vec2(12.9898,58.233))) * 13758.5453)    //\n#define B(I,C,c) mix( I, C, smoothstep(1., -1., c / min(.01,fwidth(c))) ) //\n#define rot(h)   p =    h < 1. ?  p                   \\\n                      : h < 2. ? vec2(p.y,-p)         \\\n                      : h < 3. ? -p                   \\\n                      :          vec2(-p.y,p) ,       \\\n                 d = abs( vec2( length(p-.5), length(p+.5)  ) -.5 )\n\nvoid mainImage( out vec4 O, vec2 u ) {\n float   b = .01,     // blw\n         w = 1./16.,  // wlw\n        bg = .7,\n        fg = .0,   \n         h = 10.;\n  vec2   d = iResolution.xy,\n         p = ( u+u - d ) / d.y  + h/4.* sin( vec2(.7,1)*(iTime/h +1e2) ),\n         I = floor(p+=p);  // cell2\n  p -= I+.5,                          \n  h = H(I+123.456);\n  if( fract(8667.*h) < .33 )               \n     rot(4.*h),   O = vec4( d - w*7. , abs( min( abs( d - w*2.), abs(d - w*6.) ) - w    ) - b    ); // T(truchet2(p))     \n  else {\n     I = floor(p+=p),      // cell1\n     h = H(I+123.45);                    \n     if( fract(8667.*h) < .67 )                \n       p -= I+.5,                      \n       rot(4.*h), O = vec4( d - w*6. , abs(      abs( d - w*4.)                  - w*2. ) - b*2. ); // T(truchet1(p))     \n   else {\n       I = floor(p+=p),    // cell0\n       p -= I+.5, \n       rot(0.),   O = vec4( d -=w*4. ,           abs( d )                                 - b*4. ); // T(truchet0(p))                      \n    }}\n   O = vec4( sqrt( B( B( B( bg, fg, O.z ), bg, O.y ), fg, O.w ) ));\n} \n \n \n \n \n \n/** // --- 812 chars \n\nfloat blw = .01,\n      wlw = 1./16.,\n       bg = .7,\n       fg = .0;   \n\n#define H(c)     fract(sin(dot(c ,vec2(12.9898,58.233))) * 13758.5453)\n\n#define B(I,C,c) mix( I, C, smoothstep(1., -1., c / min(.01,fwidth(c))) )\n\n#define rot4(h)                      \\\n    h < 1./4. ?  p                   \\\n  : h < 2./4. ? vec2(p.y,-p)         \\\n  : h < 3./4. ? -p                   \\\n  :             vec2(-p.y,p) \n\nvec2 d;\n#define D            d = abs( vec2( length(p-.5), length(p+.5)  ) -.5 )\n\n#define T(p)         c = B( B( B( bg, fg, p.z ), bg, p.y ), fg, p.w )\n\n\nvoid mainImage( out vec4 O, vec2 u ) {\n  float per = 10., h, c, \n         a = iTime/per +1e2;\n  vec2   R = iResolution.xy, \n         p = ( u+u - R ) / R.y  + per/4.* sin( vec2(.7*a, a) ),\n         I = floor(p+=p);  // cell2\n  p -= I+.5,                          \n  h = H(I+123.456);\n  if( fract(8667.*h) < .33 )               \n     p = rot4(h), D, T(vec4( d - wlw*7. , abs( min( abs( d - wlw*2.), abs(d - wlw*6.) ) - wlw    ) - blw    )); // T(truchet2(p))     \n  else {\n     I = floor(p+=p),      // cell1\n     h = H(I+123.45);                    \n     if( fract(8667.*h) < .67 )                \n       p -= I+.5,                      \n       p = rot4(h), D, T(vec4( d - wlw*6. , abs(      abs( d - wlw*4.)                    - wlw*2. ) - blw*2. )); // T(truchet1(p))     \n   else {\n       I = floor(p+=p),    // cell0\n       p -= I+.5, \n       D,              T(vec4( d -=wlw*4. ,           abs( d )                                       - blw*4. )); // T(truchet0(p))                      \n    }}\n   O = vec4(sqrt(c));\n   \n/*   // --- 782 chars, but doesn't work correctly on Windows\n  O = vec4( sqrt(    \n    fract(8667.*h) < .33                \n     ? p = rot4(h), D, T(vec4( d - wlw*7. , abs( min( abs( d - wlw*2.), abs(d - wlw*6.) ) - wlw    ) - blw    )) // T(truchet2(p))     \n   :(\n     I = floor(p+=p),      // cell1\n     h = H(I+123.45),                    \n     fract(8667.*h) < .67                \n     ? p -= I+.5,                      \n       p = rot4(h), D, T(vec4( d - wlw*6. , abs(      abs( d - wlw*4.)                    - wlw*2. ) - blw*2. )) // T(truchet1(p))     \n   :(\n       I = floor(p+=p),    // cell0\n       p -= I+.5, \n       D,              T(vec4( d -=wlw*4. ,           abs( d )                                       - blw*4. )) // T(truchet0(p))                      \n    ))));\n}\n\n/**/    \n\n\n\n\n\n/** // --- 984 chars   doesn't work correctly on Windows\n\nfloat blw = .01,\n      wlw = 1./16.,\n       bg = .7,\n       fg = .0;   \n\n#define H(c)     fract(sin(dot(c ,vec2(12.9898,58.233))) * 13758.5453)\n\n#define B(I,C,c) mix( I, C, smoothstep(2., -2., c / min(.01,fwidth(c))) )\n\n#define rot4(h)                      \\\n    h < 1./4. ?  p                   \\\n  : h < 2./4. ? vec2(p.y,-p)         \\\n  : h < 3./4. ? -p                   \\\n  :             vec2(-p.y,p) \n\nvec2 d;\n#define D            d = abs( vec2( length(p-.5), length(p+.5)  ) -.5 )\n\n#define truchet0(p) ( D, vec4( d -=wlw*4. ,           abs( d )                                       - blw*4. ) )\n#define truchet1(p) ( D, vec4( d - wlw*6. , abs(      abs( d - wlw*4.)                    - wlw*2. ) - blw*2. ) )\n#define truchet2(p) ( D, vec4( d - wlw*7. , abs( min( abs( d - wlw*2.), abs(d - wlw*6.) ) - wlw    ) - blw    ) )\n\n#define T(p)         B( B( B( bg , fg, p.z ), bg, p.y ), fg, p.w )\n//#define T(p)         B( B( B( B( bg, bg, p.x ), fg, p.z ), bg, p.y ), fg, p.w )\n\nvec2 I,p; float h;\n#define cell0(q) ( I = floor(p=q),                     \\\n                   p -= I+.5,                          \\\n                   T(truchet0(p))                      \\\n                 )\n\n#define cell1(q) ( I = floor(p=q),                     \\\n                   h = H(I+123.45),                    \\\n                   fract(8667.*h) < .67                \\\n                     ? p -= I+.5,                      \\\n                       p = rot4(h), T(truchet1(p))     \\\n                     : cell0(p+p)                      \\\n                 )\n\n#define cell2(q) ( I = floor(p=q),                     \\\n                   p -= I+.5,                          \\\n                   h = H(I+123.456),                   \\\n                   fract(8667.*h) < .33                \\\n                     ? p = rot4(h), T(truchet2(p))     \\\n                     : cell1(p+p)                      \\\n                 )\n\nvoid mainImage( out vec4 O, vec2 u ) {\n  float per = 10.,\n         a = iTime/per +1e2;\n  vec2   R = iResolution.xy,\n         p = ( u+u - R ) / R.y  + per/4.* sin( vec2(.7*a, a) );   \n  O = vec4( sqrt( cell2( p+p ) ) );\n}\n\n/**/",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}