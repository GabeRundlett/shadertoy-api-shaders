{
    "Shader": {
        "info": {
            "date": "1700150359",
            "description": "Using flat functions to make even smoother magnification filtering.\nClick & Drag!\n[url=https://www.shadertoy.com/playlist/fXjyRd]GEOMETRY PLAYLIST[/url]",
            "flags": 0,
            "hasliked": 0,
            "id": "ctKyWR",
            "likes": 10,
            "name": "Flat Texture Filtering",
            "published": 3,
            "tags": [
                "2d",
                "flat",
                "texture",
                "filtering",
                "magnification",
                "smooth",
                "bilinear",
                "reconstruction"
            ],
            "usePreview": 0,
            "username": "domrally",
            "viewed": 193
        },
        "renderpass": [
            {
                "code": "/*\nby Dom Mandy in 2023\n*/\nfloat flatstep(float a, float b, float x) {\n    float t = clamp((x - a) / (b - a), 9e-8, 1. - 9e-8),\n          h = atanh(cos(3.14 * t)),\n          H = h * h;\n\n    // error function method by Sergei Winitzki using Pad√© approximations\n    return .5 - .5 * sign(h) * sqrt(1. - exp(-H * (.14 * H + 1.27323949) / (.14 * H + 1.)));\n}\nvec2 flatstep(vec2 a, vec2 b, vec2 x) { return vec2(flatstep(a.x, b.x, x.x), flatstep(a.y, b.y, x.y)); }\n\n\n/*\nmostly the same as iq's texture example,\njust changed to use flatstep instead of smoothstep\n*/\nvec4 Texture(sampler2D s, vec2 i) {\n    float t = float(textureSize(s, 0).x);\n    i = i * t + .5;\n    i = floor(i) + flatstep(vec2(0), vec2(1), fract(i));\n    return texture(s, (i - .5) / t);\n}\nvoid mainImage(out vec4 o, vec2 i) {\n    vec2 v = (i /= iResolution.x) * .1;\n\n\tvec4 a = texture(iChannel0, v),\n         b = Texture(iChannel0, v);\n\n    float f = v.x + mix(-.05 - .05 * sin(.7 * iTime), -.1 * iMouse.x / iResolution.x, max(0., sign(iMouse.z)));\n\to = mix(a, b, step(f, 0.)) * smoothstep(.0, 4e-4, abs(f));\n}\n\n\n/*\nSEE ALSO\n\ntexture\nhttps://www.shadertoy.com/view/XsfGDn\nhttps://iquilezles.org/articles/texture\nhttps://en.wikipedia.org/wiki/Texture_filtering\n\nflat\nhttps://www.shadertoy.com/view/mdKfRR\nhttps://en.wikipedia.org/wiki/Mollifier\nhttps://en.wikipedia.org/wiki/Flat_function\nhttps://en.wikipedia.org/wiki/Error_function#Approximation_with_elementary_functions\n*/\n",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 16,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "false",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}