{
    "Shader": {
        "info": {
            "date": "1716188042",
            "description": "Happy World Bee Day!",
            "flags": 0,
            "hasliked": 0,
            "id": "X3XGWf",
            "likes": 12,
            "name": "Honeycomb lands",
            "published": 3,
            "tags": [
                "hexagon",
                "honey"
            ],
            "usePreview": 0,
            "username": "FordPerfect",
            "viewed": 149
        },
        "renderpass": [
            {
                "code": "// Public Domain under http://unlicense.org, see link for details.\n\n//==============================================================================\n// Hex grid.\n// The code is based on https://www.shadertoy.com/view/dtySDy.\n\nvec3 xy2cube(vec2 r) {return 0.5*vec3(+1,0,-1)*r.x+sqrt(1.0/12.0)*vec3(-1,2,-1)*r.y;}\nvec3 cube2id(vec3 r) {return round((floor(r-r.zxy)-floor(r.yzx-r))/3.0);}\nvec2 cube2xy(vec3 r) {return vec2(r.x-r.z,sqrt(3.0)*r.y);}\n\n//==============================================================================\n// Main image.\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord)\n{\n\tvec2 xy=(2.0*fragCoord-iResolution.xy)/iResolution.y;\n\tvec3 ro=vec3(4.0*sin(0.23*iTime),10.0+2.0*sin(0.5*iTime),4.0*sin(0.73*iTime));\n    vec3 ta=vec3(5.0,2.0+4.0*sin(0.37*iTime),0.0);\n    vec3 ww=normalize(ta-ro);\n    vec3 uu=normalize(cross(ww,vec3(0.0,1.0,0.0)));\n    vec3 vv=normalize(cross(uu,ww));\n    vec3 rd=normalize(xy.x*uu+xy.y*vv+1.5*ww);\n    vec3 light=normalize(vec3(1,3,2));\n    vec3 col=exp(-vec3(8,4,2)*rd.y);\n    vec3 C1=vec3(1.0,0.75,0.3),C2=vec3(0.5,0.1,0.0),C3=vec3(0.8,0.1875,0.0625),C4=mix(C1,C2,0.25);\n    col=mix(col,C4,smoothstep(0.01,0.00,rd.y));\n    if(rd.y<0.0)\n    {\n        float t=-ro.y/rd.y;\n        vec3 r=ro+t*rd;\n        // Perturb grid.\n        r.xz+=sin(7.3*r.yzx+sin(5.3*r.zxy)).xz/50.0;\n        vec3 d=xy2cube(rd.xz),h=xy2cube(r.xz),q=cube2id(h),c=vec3(cube2xy(q),0).xzy;\n        vec3 p=vec3(c.x,2.0-0.5*length(sin(q.yzx+q*q)),c.z);\n        vec3 a=(h-q)-(h-q).yzx,b=d-d.yzx;\n        float t1=0.0,t2=1e7;\n        float w=0.93;\n        float k=max(max(abs(a.x),abs(a.y)),abs(a.z));\n        // Wax.\n        if(k<w)\n        {\n            vec3 g=1.0/max(max(b/(+w-a),b/(-w-a)),1e-8);\n            t1=min(min(g.x,g.y),g.z);\n        }\n        r=ro+(t+t1)*rd;\n        col=mix(C2,C1,mix(exp(2.5*r.y),smoothstep(w,1.0,k),0.25));\n        // Noise.\n        vec3 m=2.5*sin(vec3(7,2,7)*r+1.7*r.yzx);\n        for(int i=0;i<5;++i) m=sin(0.7*(m*m)+1.7*m.yzx);\n        col*=1.0+0.1875*dot(m,1.0-m*m);\n        // Honey.\n        r=ro+t*rd;\n        float R=2.0,P=dot(rd,r-p),Q=dot(r-p,r-p)-R*R,D=P*P-Q;\n        if(t1>0.0&&D>0.0)\n        {\n            t2=-P+sqrt(D);\n            if(t2<t1)\n            {\n                r=ro+(t+t2)*rd;\n                vec3 n=normalize(p-r);\n                vec3 f=C3*(1.0+(p.y-1.0+0.5*sin(q.y*q.z))+0.125*max(dot(n,light),0.0))+3.25*pow(max(dot(n,normalize(light-rd)),0.0),73.0);\n                col=mix(col,f,0.375*smoothstep(0.0,0.25,t1-t2));\n            }\n        }\n        col=mix(col,C4,0.5*smoothstep(1.25*fwidth(k-w),0.0,abs(k-w))); // AA.\n        col=mix(col,C4,1.0-exp(-4e-2*length(r-ro))); // Fog.\n    }\n    col=tanh(col*(0.25+col)); // Tonemap.\n    col.xyz=mix(12.92*col.xyz,1.055*pow(col.xyz,vec3(1.0/2.4))-0.055,step(0.0031308,col.xyz)); // sRGB\n    fragColor=vec4(col.xyz,1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}