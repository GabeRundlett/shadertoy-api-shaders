{
    "Shader": {
        "info": {
            "date": "1501048469",
            "description": "A personal work in progress. Making it public so I can import it to Synthclipse :)",
            "flags": 48,
            "hasliked": 0,
            "id": "Xd2fRy",
            "likes": 0,
            "name": "This is a test",
            "published": 3,
            "tags": [
                "2d"
            ],
            "usePreview": 0,
            "username": "kev7774",
            "viewed": 494
        },
        "renderpass": [
            {
                "code": "const int _space = 32;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n   \tfloat c = texture(iChannel0, fragCoord/iResolution.xy/16.0).x;\n    vec3 col = vec3(0.);\n    if(c==0.)col = vec3(.5);\n    else if(c==8.) col = vec3(.25);\n    else if(c==1. || c==9.)col = vec3(.5,.5,0.);\n    else if(c==2. || c==5. || c==10. || c==13.)col = vec3(0.,1.,0.);\n    else if(c==3. || c==6. || c==11. || c==14.)col = vec3(1.,0.,0.);\n    else if(c==4. || c==7. || c==12. || c==15.)col = vec3(0.,0.,1.);\n    //else if(c==4. ||c==12.) col = vec3(0.,0.,1.);\n    //else if(c==7. ||c==15.) col = vec3(0.,1.,1.);\n    else if(c<20.)col = vec3(1.,0.,1.);\n    else if(c<24.)col = vec3(0.,1.,1.);\n    else if(c<28.)col = vec3(1.,.5,0.);\n    else if(c<32.)col = vec3(0.,.5,0.);/*{\n        if(c==28.)col = vec3(0.,.5,0.);\n        if(c==29.)col = vec3(.5,.5,0.);\n        if(c==30.)col = vec3(0.,1.,0.);\n        if(c==31.)col = vec3(1.,0.,0.);\n    }*/\n    else if(c<37.)col = vec3(1.,1.,0.);\n    else if(c<62.)col = vec3(0.,.5,1.);\n    else if(c<70.)col = vec3(.5,0.,0.);\n    else if(c<75.)col = vec3(1.);\n    \n\tfragColor = vec4(col, 1.);\n        \n    vec2 uv = fragCoord/iResolution.yy;\n        \n    if( texelFetch(iChannel1, ivec2(_space,1), 0 ).x == 0.){\n\t\tif(uv.y>.88 && uv.y<.98 && uv.x>.02 && uv.x<.12 && (uv.x<.055 || uv.x >.085)) fragColor = vec4(1.);\n    }\n    \n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 1,
                        "ctype": "keyboard",
                        "id": 33,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/presets/tex00.jpg"
                    },
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "const int _t = 84;\nconst int _f = 70;\nconst int _r = 82;\nconst int _e = 69;\n\nconst int _a = 65;\nconst int _o = 79;\nconst int _x = 88;\nconst int _s = 83;\n\nconst int _n = 78;\n\nconst int _b = 66;\n\nconst int _m = 77;\n\nconst int _l = 76;\n\nconst int _u = 85;\n\nconst int _d = 68;\nconst int _c = 67;\n\nconst int _space = 32;\n\nbool key(int k){\n    return texelFetch(iChannel1, ivec2(k,0), 0 ).x > 0.;\n}\n\nbool wireActivatorT(bool upper, float n){ \n   if(n>=37. && n<62.){\n    \tfloat u = floor((n-37.+.01)/5.);\n       \tfloat l = (n-37.) - 5.*u;\n    \tfloat bridgeState = (upper ? u : l);\n        return bridgeState == 2.;\n   }\n   return n==2. || n==10. || n==34.;\n}\n\nbool wireActivatorF(bool upper, float n){\n   if(n>=37. && n<62.){\n       \tfloat u = floor((n-37.+.01)/5.);\n       \tfloat l = (n-37.) - 5.*u;\n    \tfloat bridgeState = (upper ? u : l);\n        return bridgeState == 3.;\n   }\n   return n==3. || n==11. || n==35.;\n}\n\nbool wireActivatorR(bool upper, float n){\n   if(n>=37. && n<62.){\n    \tfloat u = floor((n-37.+.01)/5.);\n       \tfloat l = (n-37.) - 5.*u;\n    \tfloat bridgeState = (upper ? u : l);\n        return bridgeState == 4.;\n   }\n   return n==4. || n==12. || n==36.;\n}\n\nbool notActivatorT(bool upper, float n){ \n   return n==2. || n==10. || n==34.;\n}\n\nbool notActivatorF(bool upper, float n){\n   return n==3. || n==11. || n==35.;\n}\n\nbool notActivatorR(bool upper, float n){\n   return n==4. || n==12. || n==36.;\n}\n\n\nbool bridgeActivatorT(bool upper, float n){ \n   return (upper ? n==2. : n==10.);\n}\n\nbool bridgeActivatorF(bool upper, float n){\n   return (upper ? n==3. : n==11.);\n}\n\nbool bridgeActivatorR(bool upper, float n){\n   return (upper ? n==4. : n==12.);\n}\n\n\nbool isBaseNode(float n){\n   return n==16. || n==20. || n==24. || n==28. || n==62. || n==66. || n==70.;\n}\n\nbool isTruNode(float n){\n   return n==18. || n==22. || n==26. || n==30. || n==64. || n==72.;\n}\n\nbool isFlsNode(float n){\n   return n==19. || n==23. || n==27. || n==31. || n==68. || n==73.;\n}\n\nbool isBlockNode(float n){\n    return n==69. || n==74.;\n}\n\nbool isActiveNode(float n){\n    return isTruNode(n) || isFlsNode(n) || isBlockNode(n);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    if(iFrame==0){\n        fragColor = vec4(75.0,0.0,0.0,1.0);\n        return;\n    }\n    vec2 uv = fragCoord/iResolution.xy;\n    if(uv.x > 1./16. || uv.y > 1./16.){\n        fragColor = vec4(75.0,0.0,0.0,1.0);\n        return;\n    }\n    float c = texelFetch(iChannel0, ivec2(fragCoord),0).x;    \n    \n    if(texelFetch(iChannel1, ivec2(_space,1), 0 ).x > 0.){\n        float n = texelFetch(iChannel0, ivec2(fragCoord)+ivec2(0,1),0).x;\n        float e = texelFetch(iChannel0, ivec2(fragCoord)+ivec2(1,0),0).x;\n        float s = texelFetch(iChannel0, ivec2(fragCoord)+ivec2(0,-1),0).x;\n        float w = texelFetch(iChannel0, ivec2(fragCoord)+ivec2(-1,0),0).x;\n        \n        bool u = c < 8.;\n        if(c==0. || c==8.){            \n            bool anyT = wireActivatorT(u,n) || wireActivatorT(u,e) || wireActivatorT(u,s) || wireActivatorT(u,w);\n            bool anyF = wireActivatorF(u,n) || wireActivatorF(u,e) || wireActivatorF(u,s) || wireActivatorF(u,w);\n            bool anyR = wireActivatorR(u,n) || wireActivatorR(u,e) || wireActivatorR(u,s) || wireActivatorR(u,w);\n            \n            if(anyT && !anyF && !anyR) c += 2.;\n            if(!anyT && anyF && !anyR) c += 3.;\n            if(!anyT && !anyF && anyR) c += 4.;\n        }\n        else if(c==1. || c==9.){\n            c -= 1.;\n        }else if(c==2. || c==10.){           \n            bool anyT = wireActivatorT(u,n) || wireActivatorT(u,e) || wireActivatorT(u,s) || wireActivatorT(u,w);\n            if(!anyT){\n            \tif(isBaseNode(n) || isBaseNode(e) || isBaseNode(s) || isBaseNode(w)) c += 3.;   \n                else c -= 1.;\n            }\n        }else if(c==3. || c==11.){\n            bool anyF = wireActivatorF(u,n) || wireActivatorF(u,e) || wireActivatorF(u,s) || wireActivatorF(u,w);\n            if(!anyF){\n            \tif(isBaseNode(n) || isBaseNode(e) || isBaseNode(s) || isBaseNode(w)) c += 3.;\n                else c-= 2.;\n            }\n        }else if(c==4. || c==12.){\n            bool anyR = wireActivatorR(u,n) || wireActivatorR(u,e) || wireActivatorR(u,s) || wireActivatorR(u,w);\n            if(!anyR){ \n            \tif(isBaseNode(n) || isBaseNode(e) || isBaseNode(s) || isBaseNode(w)) c += 3.;\n                else c-= 3.;\n            }\n        }else if(c==5. || c==13.){\n            if(isActiveNode(n) || isActiveNode(e) || isActiveNode(s) || isActiveNode(w)) c -= 1.;\n        }else if(c==6. || c==14.){\n            if(isActiveNode(n) || isActiveNode(e) || isActiveNode(s) || isActiveNode(w)) c -= 2.;\n        }else if(c==7. || c==15.){\n            bool truNode = isTruNode(n) || isTruNode(e) || isTruNode(s) || isTruNode(w);\n            bool flsNode = isFlsNode(n) || isFlsNode(e) || isFlsNode(s) || isFlsNode(w);\n            \n            if(truNode && !flsNode) c-=5.;\n            if(!truNode && flsNode) c-=4.;\n        }else if(c < 32.){\n            float m = floor(mod(c+.01, 4.));\n            if(m == 0.){\n                \n                int truPending = 0;\n                    \n                if(n==2. || n==5. || n==10. || n==13.) truPending++;\n                if(e==2. || e==5. || e==10. || e==13.) truPending++;\n                if(s==2. || s==5. || s==10. || s==13.) truPending++;\n                if(w==2. || w==5. || w==10. || w==13.) truPending++;\n\n                int flsPending = 0;\n\n                if(n==3. || n==6. || n==11. || n==14.) flsPending++;\n                if(e==3. || e==6. || e==11. || e==14.) flsPending++;\n                if(s==3. || s==6. || s==11. || s==14.) flsPending++;\n                if(w==3. || w==6. || w==11. || w==14.) flsPending++;\n\n                int retPending = 0;\n\n                if(n==4. || n==7. || n==12. || n==15.) retPending++;\n                if(e==4. || e==7. || e==12. || e==15.) retPending++;\n                if(s==4. || s==7. || s==12. || s==15.) retPending++;\n                if(w==4. || w==7. || w==12. || w==15.) retPending++;\n                \n                if(c<20.){    \n                    if(truPending+flsPending >= 2 && retPending>=1) c += (truPending >= 2) ? 2. : 3.;\n                }else if(c<24.){\n                    if(truPending+flsPending >= 2 && retPending>=1) c += (truPending >= 1) ? 2. : 3.;\n                }else if(c<28.){\n                    if(truPending+flsPending >= 2 && retPending>=1) c += (truPending == 1) ? 2. : 3.;\n                }else{\n                    if(truPending+flsPending >= 1 && retPending>=2) c += (truPending >= 1) ? 2. : 3.;\n                }\n            }else if(m==1.){\n                c -= 1.;\n            }else{\n                c -= m-1.;\n            }\n        }else if(c < 37.){\n            if(c==32.){\n                bool u = true;\n                \n                bool anyT = notActivatorT(u,n) || notActivatorT(u,e) || notActivatorT(u,s) || notActivatorT(u,w);\n                bool anyF = notActivatorF(u,n) || notActivatorF(u,e) || notActivatorF(u,s) || notActivatorF(u,w);\n                bool anyR = notActivatorR(u,n) || notActivatorR(u,e) || notActivatorR(u,s) || notActivatorR(u,w);\n\n                if(anyT && !anyF && !anyR) c += 3.;\n                if(!anyT && anyF && !anyR) c += 2.;\n                if(!anyT && !anyF && anyR) c += 4.;\n            }else if(c==33.){\n                c -= 1.;\n            }else{\n                c = 33.;\n            }\n        }else if(c < 62.){\n            float c0 = c - 37.;\n            float upper = floor((c0+.01)/5.);\n            float lower = c0 - upper*5.;\n            \n            if(upper == 0.){\n                bool u = true;\n                \n                bool anyT = bridgeActivatorT(u,n) || bridgeActivatorT(u,e) || bridgeActivatorT(u,s) || bridgeActivatorT(u,w);\n                bool anyF = bridgeActivatorF(u,n) || bridgeActivatorF(u,e) || bridgeActivatorF(u,s) || bridgeActivatorF(u,w);\n                bool anyR = bridgeActivatorR(u,n) || bridgeActivatorR(u,e) || bridgeActivatorR(u,s) || bridgeActivatorR(u,w);\n\n                if(anyT && !anyF && !anyR) upper = 2.;\n                if(!anyT && anyF && !anyR) upper = 3.;\n                if(!anyT && !anyF && anyR) upper = 4.;;\n                \n            }else if(upper == 1.){\n                upper = 0.;\n            }else{\n                upper = 1.;\n            }\n            \n            if(lower == 0.){\n                bool u = false;\n                \n                bool anyT = bridgeActivatorT(u,n) || bridgeActivatorT(u,e) || bridgeActivatorT(u,s) || bridgeActivatorT(u,w);\n                bool anyF = bridgeActivatorF(u,n) || bridgeActivatorF(u,e) || bridgeActivatorF(u,s) || bridgeActivatorF(u,w);\n                bool anyR = bridgeActivatorR(u,n) || bridgeActivatorR(u,e) || bridgeActivatorR(u,s) || bridgeActivatorR(u,w);\n\n                if(anyT && !anyF && !anyR) lower = 2.;\n                if(!anyT && anyF && !anyR) lower = 3.;\n                if(!anyT && !anyF && anyR) lower = 4.;;\n                \n            }else if(lower == 1.){\n                lower = 0.;\n            }else{\n                lower = 1.;\n            }\n            \n            c = 37. + upper*5. + lower;\n        }\n    }\n    \n    if((iMouse.z>0.) && floor(iMouse.xy/16.0)==floor(fragCoord)){\n        c = 0.;\n        \n        if(key(_t)) c = 2.;\n        if(key(_f)) c = 3.;\n        if(key(_r)) c = 7.;\n        if(key(_e)) c = 4.;\n        \n        if(key(_a)) c = 16.;\n        if(key(_o)) c = 20.;\n        if(key(_x)) c = 24.;\n        if(key(_s)) c = 28.;\n        \n        if(key(_n)) c = 32.;\n        \n        if(key(_b)) c = 37.;\n        \n        if(key(_m)) c = 62.;\n        \n        if(key(_l)) c = 70.;\n            \n        if(key(_d)) c = 76.;\n        \n        if(key(_u)) c = 8.;\n    }\n    \n    if(key(_c) && length(floor(iMouse.xy/16.0)-floor(fragCoord)) < 5.) c = 76.;\n    \n    fragColor = vec4(c,0.,0.,1.);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 1,
                        "ctype": "keyboard",
                        "id": 33,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/presets/tex00.jpg"
                    },
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Buf A",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 257
                    }
                ],
                "type": "buffer"
            }
        ],
        "ver": "0.1"
    }
}