{
    "Shader": {
        "info": {
            "date": "1673902385",
            "description": "Yo, you said you liked code golf, so I golfed a golf shader. This is the barest semblance of a game, just seemed like a fun silly exercise.\n\n*drag and release mouse to putt*",
            "flags": 32,
            "hasliked": 0,
            "id": "clS3WK",
            "likes": 8,
            "name": "Golf, golfed (454 ch)",
            "published": 3,
            "tags": [
                "game",
                "golf",
                "codegolf"
            ],
            "usePreview": 0,
            "username": "fenix",
            "viewed": 268
        },
        "renderpass": [
            {
                "code": "// ---------------------------------------------------------------------------------------\n// Created by fenix in 2023\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n//\n//   Yo, you said you liked code golf, so I golfed a golf shader. This is the barest\n//   semblance of a game, just seemed like a fun silly exercise. Drag the mouse to putt\n//   the ball into the hole.\n//\n//   Variations that improve the look (honestly any variation would look better) but\n//   don't add much size would be considered.\n//\n// ---------------------------------------------------------------------------------------\n\n// From coyote (113/454 ch):\n//*\n    M = mix(V(1,0,0, u+=u-R ),\n            1. + (V(0,.5,0, u/=R.y ) * s(.1)c)) - 1.) * s(.05)b)),\n            s(.01) clamp(dot(u - b, v) / dot(v, v), 0., 1.) * v - b))\n           );\n}\n/**/\n\n// From FabriceNeyret2 (119/468 ch):\n/*\nM;\n    u = (u+u - R) / R.y;\n    O = mix(V(1,0,0,1), \n            1. + (V(0,.5,0,1) * s(.1) c)) - 1.) * s(.05) b)),\n            s(.01) clamp(dot(u - b, v) / dot(v, v), 0., 1.) * v - b))\n           );\n}\n/**/\n\n// From coyote (165/472 ch):\n/*\n#define s(X, Y) smoothstep(X, X + 6./R.y, length(u - Y))\n\nM;\n    u = (u+u - R) / R.y;\n    O = mix(V(1,0,0,1), \n            1. + (V(0,.5,0,1) * s(.1, c) - 1.) * s(.05, b),\n            s(.01, clamp(dot(u - b, v) / dot(v, v), 0., 1.) * v - b)\n           );\n}\n/**/\n\n// From FabriceNeyret2 (171/475 ch):\n/*\n#define s(X, Y) smoothstep(X, X + 6./R.y, length(u - Y))\n\nM;\n    u = (u+u - R) / R.y;\n    O = mix(vec4(1,0,0,1), \n            1. + (vec4(0,.5,0,1) * s(.1, c) - 1.) * s(.05, b),\n            s(.01, clamp(dot(u - b, v) / dot(v, v), 0., 1.) * v - b)\n           );\n}\n/**/\n\n// From FabriceNeyret2 (181/489 ch):\n/*\n#define s(X, Y) smoothstep(X, X + 3./R.y, length(u - Y))\n\nM;\n    u = (u - .5*R) / R.y;\n    O = mix(vec4(1,0,0,1), \n            1. + (vec4(0,.5,0,1) * s(.05, g(2.).xy) - 1.) * s(.025, b),\n            s(.005, clamp(dot(u -= b, v) / dot(v, v), 0., 1.) * v)\n           );\n}\n/**/\n\n// From Xor (245/627 ch):\n/*\n#define s(C, X, Y) O += (C-O)*smoothstep(3./R.y,0.,length(u - Y.xy)-X)\n\nvoid mainImage( out vec4 O, vec2 u )\n{\n    u = (u - .5*R.xy)/R.y;\n    O = vec4(0,.5,0,1);\n    \n    V;\n         \n    s(0., .05, h);\n    s(1., .025, b);\n    u -= b.xy;\n    h.xy = b.zw * clamp(dot(u, b.zw) / dot(b.zw, b.zw), 0., 1.);\n    O = s(vec4(1,0,0,1), .005, h);\n}\n/**/\n\n// My golf attempt (285/682 ch):\n/*\n#define s(C, X, Y) mix(C, O, smoothstep(X, X + 3./R.y, vec4(length(u - Y.xy))));\n\nvoid mainImage( out vec4 O, vec2 u )\n{\n    u = (u - .5*R.xy)/R.y;\n    O = vec4(0,.5,0,1);\n    \n    vec4 b = g(.5), h = g(1.5);\n         \n    O = s(vec4(0), .05, h);\n    O = s(vec4(1), .025, b);\n    u -= b.xy;\n    h.xy = b.zw * clamp(dot(u, b.zw) / dot(b.zw, b.zw), 0., 1.);\n    O = s(vec4(1,0,0,1), .005, h);\n}\n/**/\n\n// Original (485/1166 ch):\n/*\nfloat fxLinePointDist(vec2 a, vec2 b, vec2 p)\n{\n    p -= a, b -= a;\n    float h = clamp(dot(p, b) / dot(b, b), 0., 1.);// proj coord on line\n    return length(p - b * h); // squared dist to segment\n}\n\nvoid mainImage( out vec4 O, vec2 u )\n{\n    u = (u - .5*R.xy)/R.y;\n    O = vec4(0,.5,0,1);\n    \n    vec4 b = texelFetch(iChannel0, ivec2(0), 0);\n    vec4 h = texelFetch(iChannel0, ivec2(1, 0), 0);\n    O = mix(vec4(0), O, smoothstep(.05, .05 + 3./R.y, vec4(length(u - h.xy))));\n    O = mix(vec4(1), O, smoothstep(.025, .025 + 3./R.y, vec4(length(u - b.xy))));\n    O = mix(vec4(1,0,0,1), O, smoothstep(.005, .005 + 3./R.y, fxLinePointDist(b.xy, b.xy + b.zw, u)));\n}\n/**/",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "// ---------------------------------------------------------------------------------------\n//   State update\n// \n//   pixel at 0, 0 contains the ball position (xy) and velocity (zw)\n//   pixel at 1, 1 container the hole position\n// ---------------------------------------------------------------------------------------\n\n// From coyote (148/454 ch):\n//*\n    M = length(b - c ) < .1 \n                         ? sin(iTime * V(1e4,2e4,0,0) + u.x - .5) * .8\n         : u.x > .5      ? c.xyxy\n         : iMouse.z > 0. ? V(b, (2.*iMouse.xy - R) / R.y - b)\n         :                 V(clamp(b -= v, -e, e), v * .9 * sign(e - abs(b)));\n}\n/**/\n\n// From FabriceNeyret2 (171/475 ch):\n/*\nM , e = .95 * R / R.y;\n         \n    O = length(b - c ) < .1 \n                         ? sin(iTime * vec4(1e4,2e4,0,0) + u.x - .5) * .8\n         : u.x > .5      ? c.xyxy\n         : iMouse.z > 0. ? vec4(b, (2.*iMouse.xy - R) / R.y - b)\n         :                 vec4(clamp(b -= v, -e, e), v * .9 * sign(e - abs(b)));\n}\n/**/\n\n// From myself (179/489 ch):\n/*\nM , e = .475 * R / R.y;\n         \n    O = length(b - g(2.).xy) < .05 \n                         ? sin(iTime * vec4(1e4,2e4,0,0) + u.x - .5) * .4\n         : u.x > .5      ? g(2.)\n         : iMouse.z > 0. ? vec4(b, (iMouse.xy - .5 * R) / R.y - b)\n         :                 vec4(clamp(b -= v, -e, e), v * .9 * sign(e - abs(b)));\n}\n/**/\n\n// From FabriceNeyret2 (193/504 ch):\n/*\nM , e = R/R.y * .475;\n    vec4 h = g(2.),\n         m = iMouse;\n         \n    O = length(b - h.xy) < .05 \n                      ? sin(iTime * vec4(1e4,2e4,0,0) + (u.x != .5 ? 2. : 0.)) * .4\n         : u.x != .5   ? h\n         : m.z > 0.   ? vec4( b, (m.xy - .5 * R ) / R.y - b )\n         :              vec4 (clamp(b-=v, -e, e), v * .9 * sign(e - abs(b)) );\n}\n/**/\n\n// From Xor (290/627 ch):\n/*\nvoid mainImage( out vec4 O, vec2 u )\n{\n    V,\n         n = vec4(b.xy - b.zw, b.zw * .9),\n         m = iMouse,\n         v = vec4(iFrame,iFrame*2,0,0) + vec4(u == u-u+1.5);\n    vec2 e = R.xy/R.y * .475;\n         \n    O = v.x == 0. || length((b - h).xy) < .05 ? sin(v) * .4 :\n            u.x != .5 ? h :\n                m.z > 0. ?\n                    O = vec4(b.xy, (m.xy - .5 * R.xy)/R.y - b.xy) :\n                    O = vec4(clamp(n.xy, -e, e), n.zw * (step(abs(n.xy), e) * 2. - 1.));\n}\n/**/\n\n// My golf attempt (337/682 ch):\n/*\nvoid mainImage( out vec4 O, vec2 u )\n{\n    vec4 b = g(.5),\n         h = g(1.5),\n         n = vec4(b.xy - b.zw, b.zw * .9),\n         m = iMouse,\n         v = float(iFrame) * vec4(1,2,0,0) + float(u == vec2(1.5));\n    vec2 e = vec2(R.x / R.y, 1) * .475;\n         \n    O = v.x == 0. || length(b.xy - h.xy) < .05 ? sin(v) * .4 :\n            u.x != .5 ? h :\n                m.z > 0. ?\n                    O = vec4(b.xy, (m.xy - .5 * R.xy)/R.y - b.xy) :\n                    O = vec4(clamp(n.xy, -e, e), n.zw * (vec2(greaterThan(abs(n.xy), e)) * -2. + 1.));\n}\n/**/\n\n// Original (659/1166 ch):\n/*\nvoid mainImage( out vec4 O, vec2 u )\n{\n    ivec2 i = ivec2(u);\n    vec4 b = texelFetch(iChannel0, ivec2(0), 0),\n         h = texelFetch(iChannel0, ivec2(1, 0), 0);\n         \n    if (i == ivec2(0))\n    {\n        if (iMouse.z > 0.)\n        {\n            O = vec4(b.xy, (iMouse.xy - .5*iResolution.xy)/iResolution.y - b.xy);\n        }\n        else\n        {\n            O = b;\n            O.xy -= O.zw;\n            O.zw *= .9;\n            if (abs(O.x) > .475 * iResolution.x / iResolution.y)\n            {\n                O.z = -O.z;\n                O.x = clamp(O.x, -.475 * iResolution.x / iResolution.y, .475 * iResolution.x / iResolution.y);\n            }\n            if (abs(O.y) > .475)\n            {\n                O.w = -O.w;\n                O.y = clamp(O.y, -.475, .475);\n            }\n        }\n        if (iFrame == 0 || length(b.xy - h.xy) < .05)\n        {\n            vec4 v = vec4(float(iFrame) * vec4(1,2,0,0));\n            O = sin(v) * .4;\n        }\n    }\n    else if (i == ivec2(1, 0))\n    {\n        O = h;\n        if (iFrame == 0 || length(b.xy - h.xy) < .05)\n        {\n            vec4 v = vec4(float(iFrame + 1) * vec4(3,4,0,0));\n            O = sin(v) * .4;\n        }\n    }\n}\n/**/",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Buffer A",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 257
                    }
                ],
                "type": "buffer"
            },
            {
                "code": "\n// From coyote (193/454):\n//*\n#define V vec4//\n#define s(X) smoothstep( X, X + 6./R.y, length(u -//\n#define g texture(iChannel0, .5/R//\n#define M void mainImage( out V O, vec2 u )  \\\n             { vec2 R = iResolution.xy, b = g).xy, v = g).zw,  c = g*4.).xy, e = .95 * R / R.y; O\n/**/\n\n// From FabriceNeyret2 (187/468):\n/*\n#define V vec4//\n#define s(X) smoothstep( X, X + 6./R.y, length(u -//\n#define g(X) texture(iChannel0, X / R )//\n#define M void mainImage( out V O, vec2 u )  \\\n             { vec2 R = iResolution.xy, b = g(.5).xy, v = g(.5).zw,  c = g(2.).xy\n/**/\n\n// From coyote (145/472 ch):\n/*\n#define V vec4\n#define g(X) texture(iChannel0, X / R )//\n#define M void mainImage( out V O, vec2 u )  \\\n             { vec2 R = iResolution.xy, b = g(.5).xy, v = g(.5).zw,  c = g(2.).xy\n/**/\n\n// From FabriceNeyret2 (133/475 ch):\n/*\n#define g(X) texture(iChannel0, X / R )//\n#define M void mainImage( out vec4 O, vec2 u )  \\\n             { vec2 R = iResolution.xy, b = g(.5).xy, v = g(.5).zw,  c = g(2.).xy\n/**/\n\n// From FabriceNeyret2 (129/409 ch):\n/*\n#define R iResolution.xy//\n#define g(X) texture(iChannel0, X / R )//\n#define M void mainImage( out vec4 O, vec2 u )  \\\n             { vec2 b = g(.5).xy, v = g(.5).zw\n/**/\n\n// From Xor (92/627 ch):\n/*\n#define R iResolution\n#define g(X) texture(iChannel0, X / R.xy)\n\n#define V vec4 b = g(.5), h = g(1.5)\n/**/\n\n// My golf attempt (60/682 ch):\n/*\n#define R iResolution\n#define g(X) texture(iChannel0, X / R.xy)\n/**/\n\n// Original (22/1166 ch)\n/*\n#define R iResolution\n/**/",
                "description": "",
                "inputs": [],
                "name": "Common",
                "outputs": [],
                "type": "common"
            }
        ],
        "ver": "0.1"
    }
}