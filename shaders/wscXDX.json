{
    "Shader": {
        "info": {
            "date": "1572993020",
            "description": "least square approximation .",
            "flags": 0,
            "hasliked": 0,
            "id": "wscXDX",
            "likes": 7,
            "name": "Least square approximation",
            "published": 3,
            "tags": [
                "projection",
                "leastsquare"
            ],
            "usePreview": 0,
            "username": "ircss",
            "viewed": 471
        },
        "renderpass": [
            {
                "code": "void DrawPoint(vec2 pos, vec2 uv,float size, vec3 dotColor, inout vec3 sceneColor){\n    \n    float d    = distance(uv, pos);\n    sceneColor = mix(dotColor, sceneColor, smoothstep(size, size + 0.01, d));\n    \n}\n\nvoid DrawLine(float m, float c, vec2 uv, float size, vec3 lineColor, inout vec3 sceneColor){\n\n    vec2  xy   = vec2(uv.x, uv.x * m + c); \n    float d    = distance(xy, uv);\n    sceneColor = mix(lineColor, sceneColor, smoothstep(size, size + 0.01, d));\n    \n}\n\nvoid DrawVector(vec2 origin, vec2 vector, vec2 uv, float size, vec3 lineColor, inout vec3 sceneColor){\n    \n          uv  -= origin;\n    float v2   = dot(vector, vector);\n    float vUv  = dot(vector, uv);\n    vec2  p    = vector * vUv/v2;\n    float d    = distance(p, uv);\n    sceneColor = mix(lineColor, sceneColor, smoothstep(size, size + 0.01, d));\n    \n}\n\nvoid DrawHalfVector(vec2 origin, vec2 vector, vec2 uv, float size, vec3 lineColor, inout vec3 sceneColor){\n    \n          uv  -= origin;\n    float v2   = dot(vector, vector);\n    float vUv  = dot(vector, uv);\n    vec2  p    = vector * vUv/v2;\n    float d    = distance(p, uv);\n    float m    = 1. - step(0.,vUv/v2);\n    sceneColor = mix(lineColor, sceneColor, clamp(smoothstep(size, size + 0.01, d)+ m, 0. ,1.)); \n}\n\nvoid DrawHalfVectorWithLength(vec2 origin, vec2 vector, float len, vec2 uv, float size, vec3 lineColor, inout vec3 sceneColor){\n    \n          uv  -= origin;\n    float v2   = dot(vector, vector);\n    float vUv  = dot(vector, uv);\n    vec2  p    = vector * vUv/v2;\n    float d    = distance(p, uv);\n    float m    = 1. - step(0.,vUv/v2);\n          m   += step(len, vUv/v2);\n    sceneColor = mix(lineColor, sceneColor, clamp(smoothstep(size, size + 0.01, d)+ m, 0. ,1.)); \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // ---------------------------------------------------------\n    // ---COORDINATE SETUP\n    \n    vec2  uvCoordinate    =  fragCoord/iResolution.xy;\n    float aCorreection    =  iResolution.x/iResolution.y;\n    \n          uvCoordinate.x *=  aCorreection;\n          uvCoordinate   -=  vec2(aCorreection/2., 0.5);\n    \n    // ---------------------------------------------------------\n\n    vec3  col             = vec3(0.6,0.6,0.6);\n    vec3  mainLinesColor  = vec3(0.8,0.2,0.1);\n    vec3  eLinesColor     = vec3(0.6,0.8,0.1);\n    vec3  dotColors       = vec3(0.1,0.3,0.);\n    \n    vec2  graphOrigin     = vec2(0., 0.);\n    float sideLengths     = 0.5;\n    vec2  side1           = vec2(cos(iTime*0.4), sin(iTime*0.4));\n    vec2  side2           = vec2(2.,0.);\n    float side2Sqr        = dot(side2, side2);\n    \n    float lineWidth       = 0.0003;\n    \n    float numberOfPoints  = 5.;\n   \n    DrawHalfVectorWithLength( graphOrigin, normalize( side1), sideLengths,uvCoordinate, lineWidth, mainLinesColor, col);\n    DrawHalfVectorWithLength( graphOrigin - vec2(sideLengths, 0.), side2, sideLengths,uvCoordinate, lineWidth, mainLinesColor, col);\n    \n    \n\n    for(float i = 1. ; i <= numberOfPoints; i ++){\n        \n        float f    = (i / numberOfPoints);\n        \n        vec2 point = graphOrigin + normalize(side1) * f*sideLengths;\n        \n        DrawPoint(point, uvCoordinate, 0.01,dotColors, col); \n        \n        // projection on the other line\n        \n        \n\n        float sP  = dot(side2, point - graphOrigin);\n        vec2  p   = side2 * sP/side2Sqr;\n              p  += graphOrigin;\n        DrawPoint(p , uvCoordinate,  0.01,dotColors, col); \n        \n        vec2 e    = point - p; \n        \n        DrawHalfVectorWithLength(p, normalize(e), length(e), uvCoordinate,lineWidth*0.1, eLinesColor, col);\n    }\n    \n    \n    \n    \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}