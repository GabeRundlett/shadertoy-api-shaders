{
    "Shader": {
        "info": {
            "date": "1546281634",
            "description": "If earth has ring.\nStatus: imcomplete",
            "flags": 0,
            "hasliked": 0,
            "id": "3dsGW4",
            "likes": 2,
            "name": "If Earth Has Ring",
            "published": 3,
            "tags": [
                "ring"
            ],
            "usePreview": 0,
            "username": "handsomeone",
            "viewed": 490
        },
        "renderpass": [
            {
                "code": "// incomplete\n\n#define PI 3.141592653589793\n// anti-aliasing\nconst int AA = 8;\n\n// Shanghai\nconst float latitude = 31.2;\nconst float fov = 63.5;\n// earth center\nconst vec3 C = vec3(0.0, -1.0, 0.0);\nconst vec3 sky = vec3(0); // vec3(0.3, 0.6, 0.9);\n\nvec3 index(in vec2 coord) {\n    float lat = latitude / 180.0 * PI;\n\tvec3 n = vec3(0.0, sin(lat), -cos(lat));\n    \n    vec2 bottomRight = tan(fov / 2.0 / 180.0 * PI) * iResolution.xy / iResolution.x;\n    vec3 p = vec3(((coord / iResolution.xy) - 0.5) * 2.0 * bottomRight, 1.0);\n    \n    vec2 rotate = (iMouse.xy / iResolution.xy - 0.5) * PI;\n    rotate.y *= 0.6;\n    rotate.y += 0.8;\n    \n    mat3 mx = mat3(1.0, 0.0, 0.0,\n                   0.0, cos(rotate.y), -sin(rotate.y),\n                   0.0, sin(rotate.y), cos(rotate.y));\n\tmat3 my = mat3(cos(rotate.x), 0.0, -sin(rotate.x),\n                   0.0, 1.0, 0.0,\n                   sin(rotate.x), 0.0, cos(rotate.x));\n    \n    \n\n    p = my * mx * p;\n    \n    // horizon\n    if (abs(p.y) < 0.002) return vec3(0.0, 0.0, 1.0);\n\t// if (p.y < 0.0) return vec3(0.2);\n    \n    float k = dot(n, C) / dot(n, p);\n    float lit = k > 0.0 ? lightness(distance(k * p, C)) : 0.0;\n    \n    return mix(sky, vec3(1.0), lit);\n}\n\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec3 color = vec3(0.0);\n    for (int i=0; i<AA; i++) {\n        for (int j=0; j<AA; j++) {\n            \n            vec2 coord = fragCoord + vec2(float(i) / float(AA),\n                                          float(j) / float(AA));\n            color += index(coord);\n            \n        }\n    }\n    color /= float(AA * AA);\n    \n    fragColor = vec4(color, 1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "// earth radius is 1.0\nconst float inner = 1.28;\nconst float outer = 2.35;\n// lightness from inner to outer, from an image of saturn's ring\nfloat[] ring = float[] (0.080, 0.124, 0.040, 0.163, 0.199, 0.096, 0.147, 0.199, 0.267, 0.195,\n                        0.116, 0.120, 0.124, 0.120, 0.108, 0.108, 0.108, 0.112, 0.108, 0.096,\n                        0.088, 0.052, 0.000, 0.199, 0.267, 0.203, 0.263, 0.227, 0.303, 0.351,\n                        0.339, 0.239, 0.295, 0.191, 0.116, 0.068, 0.084, 0.048, 0.064, 0.131,\n                        0.163, 0.155, 0.203, 0.259, 0.315, 0.359, 0.291, 0.275, 0.223, 0.303,\n                        0.235, 0.143, 0.211, 0.139, 0.048, 0.104, 0.004, 0.028, 0.104, 0.100,\n                        0.295, 0.323, 0.275, 0.299, 0.299, 0.307, 0.335, 0.275, 0.235, 0.167,\n                        0.251, 0.259, 0.291, 0.287, 0.247, 0.287, 0.315, 0.267, 0.299, 0.311,\n                        0.263, 0.359, 0.271, 0.259, 0.275, 0.271, 0.247, 0.239, 0.263, 0.299,\n                        0.319, 0.327, 0.327, 0.331, 0.335, 0.331, 0.311, 0.311, 0.303, 0.311,\n                        0.263, 0.299, 0.319, 0.315, 0.343, 0.319, 0.347, 0.335, 0.347, 0.343,\n                        0.331, 0.323, 0.323, 0.315, 0.295, 0.279, 0.271, 0.275, 0.283, 0.303,\n                        0.315, 0.335, 0.331, 0.343, 0.347, 0.327, 0.351, 0.331, 0.323, 0.398,\n                        0.375, 0.351, 0.311, 0.287, 0.287, 0.307, 0.315, 0.327, 0.335, 0.339,\n                        0.343, 0.351, 0.359, 0.359, 0.367, 0.367, 0.363, 0.363, 0.359, 0.347,\n                        0.331, 0.323, 0.339, 0.327, 0.303, 0.291, 0.279, 0.263, 0.267, 0.291,\n                        0.315, 0.335, 0.339, 0.339, 0.343, 0.347, 0.347, 0.351, 0.343, 0.339,\n                        0.343, 0.339, 0.323, 0.307, 0.303, 0.331, 0.418, 0.478, 0.458, 0.418,\n                        0.259, 0.271, 0.339, 0.331, 0.339, 0.311, 0.351, 0.307, 0.291, 0.307,\n                        0.299, 0.287, 0.498, 0.311, 0.187, 0.207, 0.390, 0.406, 0.191, 0.307,\n                        0.283, 0.319, 0.303, 0.359, 0.470, 0.514, 0.506, 0.526, 0.239, 0.227,\n                        0.207, 0.223, 0.307, 0.335, 0.311, 0.211, 0.327, 0.386, 0.275, 0.271,\n                        0.454, 0.008, 0.088, 0.191, 0.008, 0.179, 0.255, 0.231, 0.263, 0.295,\n                        0.219, 0.271, 0.327, 0.339, 0.319, 0.303, 0.311, 0.331, 0.514, 0.522,\n                        0.518, 0.546, 0.347, 0.175, 0.299, 0.243, 0.227, 0.303, 0.315, 0.291,\n                        0.319, 0.243, 0.498, 0.614, 0.291, 0.191, 0.287, 0.207, 0.235, 0.307,\n                        0.251, 0.223, 0.386, 0.622, 0.618, 0.410, 0.351, 0.375, 0.570, 0.303,\n                        0.084, 0.327, 0.247, 0.562, 0.598, 0.649, 0.570, 0.319, 0.351, 0.382,\n                        0.406, 0.418, 0.438, 0.478, 0.498, 0.506, 0.518, 0.550, 0.582, 0.594,\n                        0.598, 0.618, 0.629, 0.633, 0.645, 0.657, 0.669, 0.677, 0.685, 0.721,\n                        0.849, 0.498, 0.323, 0.406, 0.382, 0.367, 0.355, 0.375, 0.378, 0.335,\n                        0.339, 0.359, 0.335, 0.371, 0.478, 0.398, 0.410, 0.398, 0.375, 0.538,\n                        0.386, 0.518, 0.594, 0.633, 0.418, 0.717, 0.689, 0.526, 0.594, 0.526,\n                        0.422, 0.351, 0.522, 0.522, 0.590, 0.450, 0.773, 0.446, 0.490, 0.367,\n                        0.586, 0.347, 0.566, 0.825, 0.789, 0.745, 0.765, 0.749, 0.757, 0.741,\n                        0.761, 0.761, 0.769, 0.785, 0.809, 0.725, 0.757, 0.920, 0.502, 0.402,\n                        0.406, 0.454, 0.458, 0.657, 0.566, 0.570, 0.482, 0.470, 0.514, 0.578,\n                        0.494, 0.434, 0.442, 0.789, 0.614, 0.594, 0.538, 0.410, 0.406, 0.335,\n                        0.394, 0.295, 0.614, 0.781, 0.562, 0.849, 0.789, 0.829, 0.761, 0.849,\n                        0.450, 0.637, 0.721, 0.582, 0.745, 0.390, 0.853, 0.442, 0.454, 0.669,\n                        0.494, 0.550, 0.574, 0.514, 0.661, 0.442, 0.558, 0.299, 0.657, 0.896,\n                        0.442, 0.653, 0.430, 0.673, 0.665, 0.371, 0.518, 0.530, 0.367, 0.367,\n                        0.359, 0.355, 0.323, 0.351, 0.363, 0.422, 0.343, 0.394, 0.490, 0.534,\n                        0.478, 0.406, 0.394, 0.386, 0.367, 0.490, 0.462, 0.450, 0.347, 0.323,\n                        0.339, 0.319, 0.331, 0.303, 0.327, 0.390, 0.295, 0.307, 0.307, 0.315,\n                        0.311, 0.347, 0.351, 0.323, 0.390, 0.474, 0.367, 0.295, 0.410, 0.375,\n                        0.359, 0.490, 0.570, 0.382, 0.430, 0.466, 0.454, 0.434, 0.307, 0.307,\n                        0.422, 0.442, 0.263, 0.343, 0.390, 0.371, 0.466, 0.446, 0.347, 0.542,\n                        0.622, 0.402, 0.466, 0.422, 0.558, 0.363, 0.446, 0.410, 0.275, 0.402,\n                        0.498, 0.402, 0.526, 0.406, 0.510, 0.323, 0.490, 0.494, 0.398, 0.227,\n                        0.450, 0.426, 0.283, 0.303, 0.311, 0.283, 0.327, 0.410, 0.283, 0.311,\n                        0.307, 0.319, 0.283, 0.283, 0.319, 0.335, 0.327, 0.311, 0.299, 0.303,\n                        0.323, 0.331, 0.335, 0.307, 0.311, 0.351, 0.327, 0.311, 0.331, 0.323,\n                        0.367, 0.331, 0.307, 0.303, 0.315, 0.323, 0.319, 0.323, 0.331, 0.331,\n                        0.327, 0.327, 0.335, 0.327, 0.307, 0.303, 0.319, 0.307, 0.331, 0.291,\n                        0.307, 0.307, 0.307, 0.355, 0.323, 0.382, 0.319, 0.339, 0.335, 0.315,\n                        0.335, 0.327, 0.343, 0.355, 0.363, 0.394, 0.390, 0.331, 0.319, 0.327,\n                        0.311, 0.335, 0.323, 0.339, 0.331, 0.327, 0.303, 0.307, 0.307, 0.319,\n                        0.315, 0.291, 0.315, 0.299, 0.307, 0.347, 0.323, 0.303, 0.331, 0.323,\n                        0.335, 0.331, 0.331, 0.398, 0.414, 0.398, 0.347, 0.347, 0.319, 0.327,\n                        0.355, 0.319, 0.335, 0.311, 0.315, 0.315, 0.319, 0.315, 0.311, 0.303,\n                        0.303, 0.307, 0.311, 0.311, 0.307, 0.299, 0.307, 0.319, 0.331, 0.347,\n                        0.347, 0.323, 0.295, 0.295, 0.315, 0.331, 0.323, 0.307, 0.299, 0.295,\n                        0.295, 0.291, 0.307, 0.319, 0.339, 0.335, 0.331, 0.291, 0.390, 0.398,\n                        0.299, 0.347, 0.335, 0.335, 0.327, 0.319, 0.319, 0.335, 0.351, 0.359,\n                        0.351, 0.359, 0.319, 0.343, 0.323, 0.327, 0.363, 0.339, 0.367, 0.347,\n                        0.331, 0.327, 0.351, 0.339, 0.311, 0.371, 0.339, 0.315, 0.343, 0.378,\n                        0.347, 0.355, 0.343, 0.418, 0.311, 0.327, 0.359, 0.335, 0.363, 0.371,\n                        0.335, 0.355, 0.402, 0.347, 0.315, 0.386, 0.410, 0.406, 0.335, 0.355,\n                        0.343, 0.343, 0.319, 0.323, 0.323, 0.299, 0.291, 0.291, 0.283, 0.291,\n                        0.390, 0.462, 0.223, 0.279, 0.319, 0.319, 0.319, 0.315, 0.319, 0.339,\n                        0.323, 0.378, 0.287, 0.307, 0.406, 0.367, 0.347, 0.307, 0.255, 0.247,\n                        0.267, 0.299, 0.382, 0.458, 0.482, 0.375, 0.382, 0.367, 0.307, 0.359,\n                        0.546, 0.602, 0.458, 0.622, 0.526, 0.554, 0.526, 0.582, 0.785, 0.072,\n                        0.000, 0.008, 0.004, 0.139, 0.004, 0.187, 0.478, 0.482, 0.442, 0.386,\n                        0.159, 0.251, 0.291, 0.335, 0.335, 0.418, 0.195, 0.143, 0.323, 0.335,\n                        0.303, 0.363, 0.060, 0.191, 0.375, 0.295, 0.295, 0.347, 0.351, 0.355,\n                        0.155, 0.227, 0.167, 0.167, 0.159, 0.167, 0.151, 0.191, 0.020, 0.012,\n                        0.000, 0.147, 0.518, 0.343, 0.223, 0.271, 0.315, 0.207, 0.195, 0.331,\n                        0.522, 0.606, 0.614, 0.598, 0.622, 0.554, 0.347, 0.311, 0.390, 0.418,\n                        0.422, 0.398, 0.442, 0.486, 0.486, 0.506, 0.522, 0.534, 0.538, 0.546,\n                        0.574, 0.586, 0.625, 0.618, 0.681, 0.661, 0.749, 0.733, 0.685, 0.590,\n                        0.542, 0.438, 0.323, 0.394, 0.386, 0.382, 0.378, 0.382, 0.394, 0.414,\n                        0.430, 0.434, 0.430, 0.426, 0.430, 0.486, 0.518, 0.478, 0.478, 0.402,\n                        0.398, 0.390, 0.406, 0.327, 0.351, 0.462, 0.454, 0.347, 0.466, 0.494,\n                        0.462, 0.506, 0.498, 0.474, 0.371, 0.490, 0.502, 0.438, 0.498, 0.506,\n                        0.510, 0.486, 0.474, 0.478, 0.510, 0.526, 0.490, 0.502, 0.538, 0.530,\n                        0.546, 0.494, 0.510, 0.598, 0.454, 0.498, 0.530, 0.546, 0.514, 0.498,\n                        0.502, 0.510, 0.506, 0.406, 0.486, 0.534, 0.510, 0.526, 0.518, 0.514,\n                        0.522, 0.526, 0.522, 0.522, 0.526, 0.530, 0.530, 0.530, 0.530, 0.526,\n                        0.526, 0.526, 0.526, 0.530, 0.526, 0.526, 0.530, 0.534, 0.530, 0.534,\n                        0.542, 0.534, 0.518, 0.526, 0.542, 0.538, 0.538, 0.542, 0.534, 0.526,\n                        0.526, 0.530, 0.538, 0.538, 0.534, 0.534, 0.538, 0.542, 0.542, 0.542,\n                        0.542, 0.542, 0.546, 0.554, 0.558, 0.554, 0.554, 0.554, 0.554, 0.558,\n                        0.558, 0.562, 0.562, 0.566, 0.570, 0.570, 0.570, 0.574, 0.574, 0.574,\n                        0.578, 0.578, 0.574, 0.578, 0.582, 0.574, 0.566, 0.566, 0.574, 0.582,\n                        0.586, 0.614, 0.625, 0.661, 0.637, 0.689, 0.753, 0.629, 0.633, 0.633,\n                        0.622, 0.602, 0.590, 0.586, 0.586, 0.582, 0.578, 0.578, 0.610, 0.590,\n                        0.618, 0.614, 0.610, 0.657, 0.649, 0.614, 0.610, 0.610, 0.645, 0.633,\n                        0.665, 0.673, 0.721, 0.777, 0.737, 0.685, 0.681, 0.665, 0.661, 0.653,\n                        0.649, 0.637, 0.649, 0.661, 0.637, 0.673, 0.681, 0.701, 0.693, 0.709,\n                        0.841, 0.458, 0.020, 0.092, 0.120, 0.080, 0.052, 0.713, 0.865, 0.773,\n                        0.813, 0.797, 0.813, 0.833, 0.829, 0.825, 0.753, 0.693, 0.821, 0.801,\n                        0.793, 0.813, 0.801, 0.785, 0.777, 0.769, 0.769, 0.781, 0.797, 0.773,\n                        0.789, 0.801, 0.801, 0.785, 0.825, 0.789, 0.797, 0.825, 0.801, 0.781,\n                        0.841, 0.825, 0.833, 0.837, 0.845, 0.857, 0.861, 0.853, 0.865, 0.865,\n                        0.904, 0.892, 0.948, 0.853, 0.462, 0.873, 0.980, 0.952, 1.000, 0.402,\n                        0.016, 0.032, 0.000, 0.000, 0.012, 0.000, 0.000, 0.004, 0.000, 0.000,\n                        0.004, 0.008, 0.016, 0.024, 0.028, 0.032, 0.032, 0.036, 0.036, 0.036,\n                        0.036, 0.036, 0.036, 0.036, 0.036, 0.036, 0.036, 0.036, 0.036, 0.036,\n                        0.036, 0.036, 0.036, 0.036, 0.036, 0.036, 0.036, 0.036, 0.032, 0.028,\n                        0.028, 0.024, 0.028, 0.028, 0.032, 0.032, 0.028, 0.028, 0.024, 0.028,\n                        0.028, 0.024, 0.040, 0.044, 0.060, 0.096, 0.287, 0.446, 0.390, 0.171,\n                        0.151, 0.068, 0.183, 0.900, 0.227, 0.386, 0.426, 0.124, 0.044, 0.032,\n                        0.032, 0.028, 0.012);\n\nfloat lightness(in float r) {\n    if (r >= inner && r < outer) {\n        int i = int((r - inner) / (outer - inner) * float(ring.length()));\n        return min(1.0, ring[i] * 1.5);\n    }\n    return 0.0;\n}\n",
                "description": "",
                "inputs": [],
                "name": "Common",
                "outputs": [],
                "type": "common"
            }
        ],
        "ver": "0.1"
    }
}