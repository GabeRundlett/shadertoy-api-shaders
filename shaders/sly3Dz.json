{
    "Shader": {
        "info": {
            "date": "1637677522",
            "description": "the book of shader 练习",
            "flags": 0,
            "hasliked": 0,
            "id": "sly3Dz",
            "likes": 4,
            "name": "the book of shader 练习",
            "published": 3,
            "tags": [
                "thebookofshader"
            ],
            "usePreview": 0,
            "username": "suolong",
            "viewed": 226
        },
        "renderpass": [
            {
                "code": "/**\n* the book of shader 的提问练习\n* 图形不是本人设计\n*/\n#define PI 3.14159265359\n#define TWO_PI 6.28318530718\nfloat ng(vec2 st,float N,float size,float radian){\n   float a =  atan(st.x,st.y)+radian;\n   float r = TWO_PI/float(N);\n   float d = cos(floor(.5+a/r)*r-a)*length(st);\n   return 1.0-smoothstep(size,size+0.5,d);\n}\nfloat circle(vec2 st,vec2 c,float r,float d,float start,float end){\n  vec2 dir = st-c;\n  float a = atan(dir.y,dir.x);\n  a = step(start,a)*step(a,end);\n  return (smoothstep(r-d,r-d+0.2,distance(st,c))-smoothstep(r,r+0.2,distance(st,c)))*a;\n}\nfloat segment(vec2 st,float pct,float w,float s,float e){\n  return (step(-w*0.5,st.y-pct)-step(w*0.5,st.y-pct))*step(s,st.x)*step(st.x,e);\n}\nvec3 circle2(vec2 st,vec2 c,float r){\n  vec3 col = vec3(0.995,0.325,0.085);\n  float c1 = circle(st,c,r*0.1,r*0.1*0.1,-PI,PI);\n  float c2 = circle(st,c,r*0.1,r*0.1,-PI,PI)*step(0.0,sin(iTime*50.0));\n  float rs= abs(sin(iTime));\n  r =r*rs;\n  float c3 = circle(st,c,r,r,-PI,PI);\n  vec3 lc= col*(smoothstep(r*0.6,r,distance(st,c))-smoothstep(r,r,distance(st,c)));\n  return lc+col*(c1+c2); \n}\nvec3 circle3(vec2 st,vec2 c,float r){\n  vec3 col = vec3(0.240,0.63,0.87);\n  mat2 rotate =mat2(cos(iTime),-sin(iTime),\n                    sin(iTime),cos(iTime));\n  st=rotate*st;\n  float a = PI*0.5;\n  float b = atan(st.y,st.x);\n  float d = (1.0-step(r,distance(st,c)))*step(0.,b)*step(b,a);\n  return col*d*smoothstep(0.0,1.0,b*0.5)+col*step(0.,st.x)*step(st.x,0.2)*step(0.,st.y)*step(st.y,r);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float size = 100.0;   \n    vec2 st = fragCoord/iResolution.y*size-vec2(iResolution.x/iResolution.y,1.0)*size*0.5;\n    vec3 col = vec3(0.0);\n    vec3 col1 = vec3(.6,0.6,0.6);\n    vec3 col2 = vec3(0.583,0.938,0.995);\n    vec3 col3 = vec3(1.,1.,1.);\n    vec3 col4 = vec3(0.773,0.957,0.995);\n    vec3 col5 = vec3(0.583,0.938,0.995);\n\n    float r = 30.0;\n    float w = 0.3;\n    float w1 = w*0.8;\n    float w2 = w*1.2;\n    float x = r*cos(PI/4.0);\n    float l1 = segment(st,st.x,w1,-x,x);\n    col += col1*l1;\n    float l2 = segment(st,-st.x,w1,-x,x);\n    col += col1*l2;\n\n    vec2 c = vec2(0.0);\n    float c1 = circle(st,c,r*0.1,w1,-PI,PI);\n    float c2 = circle(st,c,r*0.5,w1,-PI,PI);\n    float c3 = circle(st,c,r*0.7,w1,-PI,PI);\n    float c4 = circle(st,c,r,w1,-PI,PI);\n    col+= col2*(c1+c2+c3);\n    col+= col3*c4;\n\n    float a = PI*0.1*2.0*(0.5+abs(sin(iTime))*0.5);\n    float c5 = circle(st,c,r*1.2,w,a,PI-a);\n    float c6 = circle(st,c,r*1.2,w,-PI+a,-a);\n    col+= col4*c5+c6;\n     \n    float d = 0.05;\n    float c7 = circle(st,c,r*1.5,w2,d,PI-d);\n    float c8 = circle(st,c,r*1.5,w2,-PI+d,-d);\n    \n    \n    float tx = r*1.5 + sin(iTime)*2.0;\n    float t1 = ng(st+vec2(tx,0.0),3.0,r*1.4*tan(d*0.5),PI*0.5);\n    float t2 = ng(st-vec2(tx,0.0),3.0,r*1.4*tan(d*0.5),-PI*0.5);\n    col+= col5*(c7+c8+t1+t2);\n    float off=iTime*0.1;\n    vec2 cenoff=c+vec2(sin(off)*sin(-off)*cos(off),cos(off)*sin(off*2.0))*r; \n    vec3 cir = circle2(st,cenoff,r*0.4);\n    vec3 cir3 = circle3(st,c,r);\n\n \n    \n\n    \n    fragColor= vec4(col+cir+cir3,1.0);\n} ",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}