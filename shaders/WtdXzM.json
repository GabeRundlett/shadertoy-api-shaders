{
    "Shader": {
        "info": {
            "date": "1580652610",
            "description": "japanese traditional textile pack part1",
            "flags": 0,
            "hasliked": 0,
            "id": "WtdXzM",
            "likes": 9,
            "name": "japanese traditional textile pt1",
            "published": 3,
            "tags": [
                "textile"
            ],
            "usePreview": 0,
            "username": "yasuo",
            "viewed": 434
        },
        "renderpass": [
            {
                "code": "// All the distance functions from:https://iquilezles.org/articles/distfunctions2d\n#define Rot(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n#define S(d,b) 1.0-smoothstep(b,antialiasing(1.0),d)\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat dBox2d(vec2 p, vec2 b) {\n    return max(abs(p.x) - b.x, abs(p.y) - b.y);\n}\n\nfloat sdBox( in vec2 p, in vec2 b )\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPie( in vec2 p, in vec2 c, in float r )\n{\n    p.x = abs(p.x);\n    float l = length(p) - r;\n    float m = length(p-c*clamp(dot(p,c),0.0,r)); // c = sin/cos of the aperture\n    return max(l,m*sign(c.y*p.x-c.x*p.y));\n}\n\nfloat sdVesica(vec2 p, float r, float d)\n{\n    p = abs(p);\n    float b = sqrt(r*r-d*d);\n    return ((p.y-b)*d>p.x*b) ? length(p-vec2(0.0,b))\n                             : length(p-vec2(-d,0.0))-r;\n}\n\nfloat sdRhombus( in vec2 p, in vec2 b ) \n{\n    vec2 q = abs(p);\n    float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n    float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n    return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdEllipse( in vec2 p, in vec2 ab )\n{\n    p = abs(p); if( p.x > p.y ) {p=p.yx;ab=ab.yx;}\n    float l = ab.y*ab.y - ab.x*ab.x;\n    float m = ab.x*p.x/l;      float m2 = m*m; \n    float n = ab.y*p.y/l;      float n2 = n*n; \n    float c = (m2+n2-1.0)/3.0; float c3 = c*c*c;\n    float q = c3 + m2*n2*2.0;\n    float d = c3 + m2*n2;\n    float g = m + m*n2;\n    float co;\n    if( d<0.0 )\n    {\n        float h = acos(q/c3)/3.0;\n        float s = cos(h);\n        float t = sin(h)*sqrt(3.0);\n        float rx = sqrt( -c*(s + t + 2.0) + m2 );\n        float ry = sqrt( -c*(s - t + 2.0) + m2 );\n        co = (ry+sign(l)*rx+abs(g)/(rx*ry)- m)/2.0;\n    }\n    else\n    {\n        float h = 2.0*m*n*sqrt( d );\n        float s = sign(q+h)*pow(abs(q+h), 1.0/3.0);\n        float u = sign(q-h)*pow(abs(q-h), 1.0/3.0);\n        float rx = -s - u - c*4.0 + 2.0*m2;\n        float ry = (s - u)*sqrt(3.0);\n        float rm = sqrt( rx*rx + ry*ry );\n        co = (ry/sqrt(rm-rx)+2.0*g/rm-m)/2.0;\n    }\n    vec2 r = ab * vec2(co, sqrt(1.0-co*co));\n    return length(r-p) * sign(p.y-r.y);\n}\n\nfloat sdLine( in vec2 p, in vec2 a, in vec2 b )\n{\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n\nvec3 textile1(vec2 p, vec3 col, vec3 rhcol) {\n    vec2 size = vec2(0.04,0.1);\n    float rh = sdRhombus(p,size);\n    col = mix(col, rhcol,S(rh,-0.01));\n    \n    rh = sdRhombus((p+vec2(0.1,0.06))*Rot(radians(-65.0)),size);\n    col = mix(col, rhcol,S(rh,-0.01));      \n    \n    rh = sdRhombus((p+vec2(-0.1,0.06))*Rot(radians(65.0)),size);\n    col = mix(col, rhcol,S(rh,-0.01));   \n    return col;\n}\n\nvec3 jpTraditionalTex1(vec2 p, vec3 col, vec3 rhcol) {\n    vec2 pref = p;\n    \n    float scale = 1.5;\n    p*=scale;\n    p.x = mod(p.x,0.42)-0.21;\n    p.y = mod(p.y,0.22)-0.11;\n\n\tp.y = abs(p.y);\n    p.y -= 0.11;\n    col = textile1(p,col,rhcol);\n    \n    p = pref;\n    p*=scale;\n    p.x -= 0.21;\n    p.x = mod(p.x,0.42)-0.21;\n    p.y = mod(p.y,0.44)-0.22;\n    p.y = abs(p.y);\n    p.y -= 0.11;\n\tfloat rh = sdRhombus(p,vec2(0.04,0.1));\n    col = mix(col, rhcol,S(rh,-0.01));\n    \n    return col;\n}\n\nvec3 textile2(vec2 p, vec3 col, vec3 bcol){\nfloat bsize = 0.15;\n    p *= Rot(radians(45.0));\n    float b = dBox2d(p,vec2(bsize));\n    p = abs(p);\n    p.x -= 0.067;\n    p.y -= 0.067;\n    float b2 = dBox2d(p,vec2(bsize/3.0));\n    b = max(-b2,b);\n    col = mix(col, bcol,S(b,-0.01));\n    return col;\n}\n\nvec3 jpTraditionalTex2(vec2 p, vec3 col, vec3 bcol) {\n    vec2 pref = p;\n\n    float scale = 1.5;\n    p*=scale;\n    \n    p = mod(p,0.45)-0.225;\n    col = textile2(p,col,bcol);\n    \n    p = pref;\n    p*=scale;\n    p -= 0.225;\n    p = mod(p,0.45)-0.225;\n    col = textile2(p,col,bcol);\n    \n    return col;\n}\n\nvec3 jpTraditionalTex3(vec2 p, vec3 col, vec3 ccol) {\n    vec2 pref = p;\n\n    p.x = mod(p.x,0.25)-(0.25*0.5);\n    p.y = mod(p.y,0.26)-(0.26*0.5);\n    \n    float r = 0.15;\n    p = abs(p);\n    p.x -= 0.06;\n    p.y -= 0.065;\n    \n    float c = sdVesica(p*Rot(radians(-45.0)),r-0.02,r*0.63);\n    col = mix(col, ccol,S(c,0.0));\n    \n    return col;\n}\n\nvec3 textile4(vec2 p, vec3 col, vec3 ccol){\n    float r = 0.16;\n    \n    float c =sdPie(p,vec2(0.16,0.1),r);\n    c = max(-(length(p)-0.05),c);\n    col = mix(col, ccol,S(c,0.0)); \n    c =sdPie(p,vec2(0.16,0.1),r-0.02);\n    c = max(-(length(p)-0.075),c);\n    col = mix(col, vec3(1.0),S(c,0.0)); \n    c =sdPie(p,vec2(0.16,0.1),r-0.037);\n    c = max(-(length(p)-0.095),c);\n    col = mix(col, ccol,S(c,0.0)); \n    c = length(p-vec2(0.0,0.015))-0.02;\n    col = mix(col, vec3(1.0),S(c,0.0)); \n    return col;\n}\n\nvec3 jpTraditionalTex4(vec2 p, vec3 col, vec3 ccol) {\n    vec2 pref = p;\n\n    p.x = mod(p.x,0.4)-(0.2);\n    p.y = mod(p.y,0.18)-(0.09);\n    p.y +=0.085;\n    col = textile4(p,col,ccol);\n    p= pref;\n    \n    p.x += 0.2;\n    p.y -=0.085;\n    p.x = mod(p.x,0.4)-(0.2);\n    p.y = mod(p.y,0.18)-(0.09);\n    p.y +=0.085;\n    col = textile4(p,col,ccol);\n    return col;\n}\n\nvec3 textile5(vec2 p, vec3 col, vec3 ccol){\n    vec2 pref = p;\n    p.y = abs(p.y);\n    p.y -= 0.1;\n    float c = sdEllipse(p,vec2(0.04,0.06));\n    float c2 = sdEllipse((p-vec2(-0.02,-0.01))*Rot(radians(-10.0)),vec2(0.04,0.05));\n    float c3 = sdEllipse((p-vec2(0.02,-0.01))*Rot(radians(10.0)),vec2(0.04,0.05));\n    c = min(c, min(c2,c3));\n    c = max(-(length(p-vec2(0.0,-0.05))-0.04),c);\n\tcol = mix(col, ccol,S(c,0.0));\n    p = pref;\n    \n    p.x = abs(p.x);\n    p.x -= 0.13;\n    c = sdEllipse(p,vec2(0.09,0.03));\n    c2 = sdEllipse((p-vec2(-0.015,-0.015))*Rot(radians(15.0)),vec2(0.07,0.04));\n    c3 = sdEllipse((p-vec2(-0.015,0.015))*Rot(radians(-15.0)),vec2(0.07,0.04));\n    float c4 = sdEllipse(p-vec2(-0.05,0.0),vec2(0.07,0.025));\n    c = min(c, min(c2,c3));\n    c = max(-c4,c);\n    col = mix(col, ccol,S(c,0.0));\n    p = pref;\n    \n    col = mix(col, ccol,S(length(p)-0.03,0.0));\n    \n    p = abs(p);\n    \n    float b = dBox2d(p-vec2(0.0,0.23),vec2(0.05,0.045));\n    float b2 = dBox2d(p-vec2(0.35,0.0),vec2(0.05,0.045));\n    b = min(b,b2);\n    col = mix(col, ccol,S(abs(b)-0.003,0.0));\n    \n    float l = sdLine(p,vec2(0.05,0.185),vec2(0.3,0.045));\n    float l2 = sdLine(p,vec2(0.05,0.205),vec2(0.325,0.048));\n    float l3 = sdLine(p,vec2(0.05,0.225),vec2(0.355,0.048));\n    l = min(l,min(l2,l3));\n    col = mix(col, ccol,S(l-0.002,0.0));\n    return col;\n}\n\nvec3 jpTraditionalTex5(vec2 p, vec3 col, vec3 ccol) {\n    vec2 pref = p;\n\n    float scale = 1.5;\n    p*=scale;\n    \n    p.x = mod(p.x,0.7)-0.35;\n    p.y = mod(p.y,0.46)-0.23;\n    col = textile5(p,col,ccol);\n    p = pref;\n    \n    p*=scale;\n    p.x -= 0.35;\n    p.y -= 0.23;\n    p.x = mod(p.x,0.7)-0.35;\n    p.y = mod(p.y,0.46)-0.23;\n    col = textile5(p,col,ccol);\n    \n    return col;\n}\n\nvec3 textile6(vec2 p, vec3 col, vec3 ccol){\n\tfloat n = 5.0;\n    float deg = 360.0/n;\n    float startRad = radians(180.0);\n    for(float i = 0.0; i<n; i+=1.0) {\n        float rad = radians(deg*i)+startRad;\n        mat2 rot = Rot(rad);\n        float dist = 0.15;\n        float x = sin(rad)*dist;\n        float y = cos(rad)*dist;\n\n        float v = sdVesica((p+vec2(x,y))*rot,0.14,0.075);\n\t\t\n        dist = 0.07;\n        x = sin(rad)*dist;\n        y = cos(rad)*dist;\n        float e = sdEllipse((((p+vec2(x,y)))*rot),vec2(0.015,0.07));\n        v = max(-e,v);\n        col = mix(col, ccol,S(v,0.0));\n    }\n    \n    float c = length(p)-0.03;\n    col = mix(col, ccol,S(c,0.0));\n    return col;\n}\n\nvec3 textile6RepeatBg(vec2 p, vec3 col, vec3 ccol){\n    float scale = 1.5;\n    p*=scale;\n    p.x = mod(p.x,0.9)-0.45;\n    p.y = mod(p.y,0.54)-0.275;\n    col = textile6(p,col,ccol);\n    return col;\n}\n\nvec3 jpTraditionalTex6(vec2 p, vec3 col, vec3 ccol) {\n    vec2 pref = p;\n\n    col = textile6RepeatBg(p,col,ccol);\n    \n    p.x -= 0.9;\n    p.y -= 0.54;\n    col = textile6RepeatBg(p,col,ccol);\n    \n    return col;\n}\n\nfloat leaf(vec2 p) {\n\tfloat c = length(p)-0.1;\n    p.x *= 0.8;\n    p.y *= 0.6;\n    float c2  = length(p-vec2(0.06,0.05))-0.08;\n    c = max(-c2,c);\n    return c;\n}\n\nvec3 textile7(vec2 p, vec3 col, vec3 ccol){\n    float n = 5.0;\n    float deg = 360.0/n;\n    float startRad = radians(180.0);\n    float ld = 1.0;\n    for(float i = 0.0; i<n; i+=1.0) {\n        float rad = radians(deg*i)+startRad;\n        mat2 rot = Rot(rad);\n        float dist = 0.11;\n        float x = sin(rad)*dist;\n        float y = cos(rad)*dist;\n\n       \tfloat l = leaf((p+vec2(x,y))*rot);\n        ld = min(ld,l);\n    }\n\n    ld = max(-( length(p)-0.05),ld);\n    col = mix(col, ccol,S(ld,0.0));\n    float c = length(p)-0.02;\n    ld = min(c,ld);\n    col = mix(col, ccol,S(ld,0.0));\n    return col;\n}\n\nvec3 jpTraditionalTex7(vec2 p, vec3 col, vec3 ccol) {\n    vec2 pref = p;\n   \tfloat scale = 1.5;\n    p*=scale;\n    \n    p.x = mod(p.x,0.8)-0.4;\n    p.y = mod(p.y,0.5)-0.25;\n    col = textile7(p, col, ccol);\n    p = pref;\n    \n    p*=scale;\n    p.x -= 0.4;\n    p.y -= 0.25;\n\tp.x = mod(p.x,0.8)-0.4;\n    p.y = mod(p.y,0.5)-0.25;\n    col = textile7(p, col, ccol);\n    return col;\n}\n\nvec3 textile8(vec2 p, vec3 col, vec3 ccol){\n    float b = sdBox(p*Rot(radians(45.0)),vec2(0.05))-0.05;\n    b = max(-(length(p)-0.03),b);\n    col = mix(col, ccol,S(b,0.0));\n    return col;\n}\n\nvec3 jpTraditionalTex8(vec2 p, vec3 col, vec3 ccol) {\n    vec2 pref = p;\n    p = mod(p,0.3)-0.15;\n    col = textile8(p,col,ccol);\n    p = pref;\n    \n    p -= 0.15;\n    p = mod(p,0.3)-0.15;\n    col = textile8(p,col,ccol);\n    return col;\n}\n\nvec3 textile9(vec2 p, vec3 col, vec3 ccol){\n    float b = dBox2d(p,vec2(0.1));\n    p.x = abs(p.x);\n    p.x-=0.04;\n    float b2 = dBox2d(p,vec2(0.02,0.11));\n    b = max(-b2,b);\n    col = mix(col, ccol,S(b,0.0));\n    return col;\n}\n\nvec3 textile9RepeatBg(vec2 p, vec3 col, vec3 ccol) {\n\tvec2 pref = p;\n    p.x = mod(p.x,0.45)-0.225;\n\tp.y = mod(p.y,0.45)-0.225;\n    col = textile9(p,col,ccol);\n    p = pref;\n    \n    p.y -= 0.225;\n    p.x = mod(p.x,0.45)-0.225;\n    p.y = mod(p.y,0.45)-0.225;\n    col = textile9(p*Rot(radians(90.0)),col,ccol);\n    return col;\n}\n\nvec3 jpTraditionalTex9(vec2 p, vec3 col, vec3 ccol) {\n    vec2 pref = p;\n    col = textile9RepeatBg(p,col,ccol);\n    p -= 0.225;\n    col = textile9RepeatBg(p,col,ccol);\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n    vec3 col = vec3(0.8,0.9,1.0);\n\tvec3 baseCol = vec3(0.0,0.3,0.5);\n    \n    uv.y -= iTime*0.1;\n    \n    float ratio = 1.0;\n    float ntextile = 9.0;\n    float scene = mod(iTime,ratio*ntextile);\n    if(scene<ratio) {\n        col = jpTraditionalTex1(uv,col,baseCol);\n    } else if(scene>=ratio && scene<ratio*2.0){\n        col = jpTraditionalTex2(uv,col,baseCol);\n    } else if(scene>=ratio*2.0 && scene<ratio*3.0){\n        col = jpTraditionalTex3(uv,col,baseCol);\n    } else if(scene>=ratio*3.0 && scene<ratio*4.0){\n        col = jpTraditionalTex4(uv,col,baseCol);\n    } else if(scene>=ratio*4.0 && scene<ratio*5.0){\n        col = jpTraditionalTex5(uv,col,baseCol);\n    } else if(scene>=ratio*5.0 && scene<ratio*6.0){\n        col = jpTraditionalTex6(uv,col,baseCol);\n    } else if(scene>=ratio*6.0 && scene<ratio*7.0){\n        col = jpTraditionalTex7(uv,col,baseCol);\n    } else if(scene>=ratio*7.0 && scene<ratio*8.0){\n        col = jpTraditionalTex8(uv,col,baseCol);\n    } else if(scene>=ratio*8.0 && scene<ratio*9.0){\n        col = jpTraditionalTex9(uv,col,baseCol);\n    }\n    \n    /*\n    col = vec3(0.8,0.9,1.0);\n    col = jpTraditionalTex6(uv,col,vec3(0.0,0.3,0.5));\n\t*/\n        \n    fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}