{
    "Shader": {
        "info": {
            "date": "1651758658",
            "description": "little exploding things",
            "flags": 40,
            "hasliked": 0,
            "id": "7tBBRh",
            "likes": 20,
            "name": "little exploders",
            "published": 3,
            "tags": [
                "simulation"
            ],
            "usePreview": 0,
            "username": "eiffie",
            "viewed": 527
        },
        "renderpass": [
            {
                "code": "float BG(vec2 u){u=sin(u+sin(u.yx+iTime*.1));return (u.x*u.y+u.x+u.y)*.025+0.05;}\nvec4 cmap(float a){a=clamp(a,0.,2.325);return a*abs(vec4(sin(a),sin(a+.4),sin(a+1.2),1.));}\nvoid mainImage(out vec4 O, in vec2 U){\n  O=U.y>1.?cmap(BG(U*0.01)+BG(U.yx*0.03)*.2+texture(iChannel0,U/iResolution.xy).r):vec4(0);\n}\n",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "#define MASSES 512\nfloat dot2(vec2 x){return dot(x,x);}\nvoid mainImage(out vec4 O, in vec2 U){\n  int M=min(MASSES,int(iResolution.x)),X=int(floor(U.x));\n  O=texture(iChannel0,U/iResolution.xy);\n  bool bLogic=(U.y<1. && X<MASSES);\n  if(iFrame<2)O=vec4(bLogic?vec2(cos(U.x),sin(U.x+1.))*100.:vec2(0),0.,0.);\n  U-=iResolution.xy*.5;\n  float d=100.;\n  for(int i=0;i<M;i++){\n    vec4 v=texture(iChannel0,vec2(float(i)+.5,.5)/iResolution.xy);\n    if(bLogic){\n      if(i!=X){\n        vec2 dlt=v.xy-O.xy;\n        float d2=dot2(dlt),m=min(1.,.96+dot2(v.zw-O.zw)*0.0001+d2*0.0001);\n        O.zw=O.zw*m+sign(dlt)/max(1.,d2);\n      }\n    }else d=min(d,dot2(U-v.xy));\n  }\n  if(bLogic){O.xy+=O.zw;O.zw/=(.998+.002*dot2(O.zw));}\n  else O.r=O.r*.9+.3*smoothstep(3.,0.,d);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "buffer",
                        "id": 257,
                        "published": 1,
                        "sampler": {
                            "filter": "nearest",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "clamp"
                        },
                        "src": "/media/previz/buffer00.png"
                    }
                ],
                "name": "Buffer A",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 257
                    }
                ],
                "type": "buffer"
            },
            {
                "code": "int N[8]=int[8](-1,-5,0,0,0,-5,4,7);\nfloat I(int n, float t, float d){\n  int n2=(n+48)%12;float e=1.+sin(float(n))*.2-t*t*.5;\n  if((n2==1)||(n2==4)||(n2==6)||(n2==8)||(n2==11))return 0.;//dorian\n  return pow(fract(t*50.*pow(2.,float(n)/(12.-e*e*.05))),.5+t*t*d)*e;\n}\nvec2 Sound(float time){\n  float tim=time*7.,b=floor(tim),b3=fract(tim/8.),b2=fract(tim/2.),b1=fract(tim);\n  int n3=N[(int(b/128.)*2)%8]+N[int(b/8.)%8];\n  int n2=n3+N[int(b/2.)%8],n=n2+N[int(b)%8];\n  return vec2(I(n,b1,200.)*.65-I(n2+3,b2*1.005,30.)*.75,\n   -I(n+5,b1*1.007,200.)*.5+I(n2,b2,20.)*.75-I(n3,b3*1.001,20.));\n}\nvec2 mainSound(int samp, float time){\n  return Sound(time)*.1+Sound(time-.075).yx*.08-Sound(time-.15)*0.05;\n}",
                "description": "",
                "inputs": [],
                "name": "Sound",
                "outputs": [],
                "type": "sound"
            }
        ],
        "ver": "0.1"
    }
}