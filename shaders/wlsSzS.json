{
    "Shader": {
        "info": {
            "date": "1563435658",
            "description": "Inspiered by the work of NuSan",
            "flags": 0,
            "hasliked": 0,
            "id": "wlsSzS",
            "likes": 0,
            "name": "ShaderDojo 034",
            "published": 3,
            "tags": [
                "raymarching",
                "training",
                "shaderdojo"
            ],
            "usePreview": 0,
            "username": "antonOTI",
            "viewed": 362
        },
        "renderpass": [
            {
                "code": "mat2 rot(float a)\n{\n  float ca = cos(a); float sa = sin(a);\n  return mat2(ca,-sa,sa,ca);\n}\n\nfloat sdBox(vec3 p)\n{\n  p = abs(p);\n  return max(p.x, max(p.y, p.z)) - 1.;\n}\n\n#define time (iTime * .25 - .25)\n\nfloat mat = 0.;\n#define PI 3.14159\n\nfloat tesseract(vec3 p, float t)\n{\n  float dist = 10000.;\n\n  for(float i = 0.; i <= 6.; ++i)\n  {\n    p.x -= .15 + (sin(t * .6) * .5 + .5) * .13;\n    \n    p.xy *= rot(t * 1.);\n    p.xz *= rot(t * .5 );\n    p.zy *= rot(t * .25);\n\n    p.z -= .5;\n\n    p = abs(p);\n    \n    if(i > 0.)\n    {\n\t\tdist = min(dist, sdBox(p));\n    }\n      \n    if(dist < .01)\n    {\n      mat = i;\n      break;\n    }\n  }\n\treturn dist;    \n}\n\nfloat map(vec3 p)\n{\n  vec3 cp = p;\n\n\n  float dist = 10000.;\n\n  p.yz *= rot(time);\n  p.xy *= rot(time * .8);\n\n  float ti = time * 4.;\n\n\n  float frti = sin(fract(ti) * PI - PI * .5) * .5 + .5;\n  ti = floor(ti) + frti * frti * frti;\n\n\tdist = tesseract(p, ti);\n\n    float room = tesseract(cp * .125, 0.);\n//    dist = max(10., );\n    \n    dist = tesseract(p, ti);\n  \treturn dist;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n  vec2 uv = vec2(fragCoord.x / iResolution.x, fragCoord.y / iResolution.y);\n  uv -= 0.5;\n  uv /= vec2(iResolution.y / iResolution.x, 1);\n\n  vec3 ro = vec3(0.,0.,-10.);\n  vec3 rd = normalize(vec3(uv, 1.));\n  vec3 cp = ro;\n\n  float cd = 0.; float st = 0.;\n\n  for(; st < 1.; st += 1. / 128.)\n  {\n    cd = map(cp);\n    if(cd < .01) break;\n    cp += rd * cd;\n  }\n\n  fragColor = mix(vec4(.4,.1,.9,0.) * .25,vec4(.99), length(uv) * 1.);\n\n  if(cd < .01)\n  {\n\n  fragColor = vec4(0.);\n    vec3 col = vec3(1.,0.,0.);\n    \n    col.rg *= rot(float(mat));\n    col.br *= rot(iTime * .5);\n\tcol = abs(col * 5.);\n\n    fragColor = mix(fragColor, col.rgbb, st   );\n  }\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}