{
    "Shader": {
        "info": {
            "date": "1587396487",
            "description": "compare two image",
            "flags": 0,
            "hasliked": 0,
            "id": "WsScD3",
            "likes": 2,
            "name": "compare_two_image",
            "published": 3,
            "tags": [
                "utils"
            ],
            "usePreview": 0,
            "username": "jamelouis",
            "viewed": 281
        },
        "renderpass": [
            {
                "code": "struct Rect\n{\n    vec2 lb;\n    vec2 rt;\n};\n\nstruct Circle\n{\n    vec2 o;\n    float radius;\n};\n\nstruct Triangle\n{\n    vec2 a;\n    vec2 b;\n    vec2 c;\n};\n    \nbool intersect(Rect rect, vec2 pos)\n{\n    bool ret = pos.x > rect.lb.x && pos.x < rect.rt.x;\n    ret = ret && pos.y > rect.lb.y && pos.y < rect.rt.y;\n    \n    return ret;\n}\n\nbool intersect(Circle c, vec2 pos)\n{\n    return length(pos-c.o) < c.radius;\n}\n\nfloat at_line(vec2 a, vec2 b, vec2 pos)\n{\n    return (pos.y - a.y)*(b.x-a.x) - (pos.x - a.x) * (b.y-a.y);\n}\n\nbool intersect(Triangle tri, vec2 pos)\n{\n    bool ret = at_line(tri.a, tri.b, pos) > 0.0;\n    ret = ret && at_line(tri.b, tri.c, pos) > 0.0;\n    ret = ret && at_line(tri.c, tri.a, pos) > 0.0;\n    \n    return ret;\n}\n\nvec3 compare_two_image(vec3 col1, vec3 col2, float horizontal, vec2 pos)\n{\n    Rect rect = Rect(vec2(horizontal - 0.002, 0.0), vec2(horizontal + 0.002, 1.0));\n    Circle c = Circle(vec2(horizontal, 0.5), 0.08);\n    Circle c2 = Circle(vec2(horizontal, 0.5), 0.07);\n    Triangle tri1 = Triangle(vec2(horizontal - 0.01, 0.54), \n                             vec2(horizontal - 0.06, 0.5),\n                             vec2(horizontal - 0.01, 0.46));\n    Triangle tri2 = Triangle(vec2(horizontal + 0.01, 0.54),\n                             vec2(horizontal + 0.01, 0.46),\n                             vec2(horizontal + 0.06, 0.5)\n                             );\n    \n    bool flag = intersect(rect, pos);\n    flag = flag || (intersect(c, pos) && !intersect(c2, pos));\n    flag = flag || intersect(tri1, pos) || intersect(tri2, pos);\n    if(flag) return vec3(1.0);\n    \n    float factor = pos.x < horizontal ? 0.0 : 1.0f;\n    return mix(col1, col2, factor);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    uv.x *= iResolution.x / iResolution.y;\n    \n\tvec3 col1 = texture(iChannel0, uv).xyz;\n    vec3 col2 = texture(iChannel1, uv).xyz;\n    \n   \tvec3 col = compare_two_image(col1, col2, iMouse.x / iResolution.y, uv);\n    \n\n    fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 8,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg"
                    },
                    {
                        "channel": 1,
                        "ctype": "texture",
                        "id": 48,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/8979352a182bde7c3c651ba2b2f4e0615de819585cc37b7175bcefbca15a6683.jpg"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}