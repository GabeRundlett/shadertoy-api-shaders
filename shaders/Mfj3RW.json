{
    "Shader": {
        "info": {
            "date": "1703902791",
            "description": "2d- año nuevo",
            "flags": 0,
            "hasliked": 0,
            "id": "Mfj3RW",
            "likes": 12,
            "name": "2d- año nuevo",
            "published": 3,
            "tags": [
                "2d",
                "polygon",
                "happynewyear"
            ],
            "usePreview": 0,
            "username": "jorge2017a2",
            "viewed": 181
        },
        "renderpass": [
            {
                "code": "//por jorge2017a2\n//2d- año nuevo\n//referencia\n//https://iquilezles.org/articles/distfunctions2d\n///\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n#define S(d,b) smoothstep(antialiasing(0.8),b,d)\n#define S2(d,b) smoothstep(6.5*antialiasing(0.5),b,d)\n#define PI     3.14159265\n#define POLY(N) (in vec2 p, in vec2[N] v) {const int n=v.length();float d=dot(p-v[0],p-v[0]);float s=1.;for(int i=0,j=n-1;i<n;j=i,i++){vec2 e=v[j]-v[i];vec2 w=p-v[i];vec2 b=w-e*clamp(dot(w,e)/dot(e,e),0.,1.);d=min(d,dot(b,b));bvec3 cond=bvec3(p.y>=v[i].y,p.y<v[j].y,e.x*w.y>e.y*w.x);if(all(cond)||all(not(cond))) s=-s;}return s*sqrt(d);}\n\n\nfloat sdPoly6_1 POLY(6)\nvec2  pt6_1[6]=vec2[](\nvec2(2.53,0.99),vec2(4.24,0.31),vec2(5.43,1.44),vec2(3.73,2.3),vec2(3.74,2.3),\nvec2(2.53,0.99)  );\n\nfloat sdPoly5_2 POLY(5)\nvec2  pt5_2[5]=vec2[](\nvec2(2.52,0.99),vec2(3.74,2.3),vec2(3.78,3.62),vec2(2.95,2.63),vec2(2.52,0.99)  );\n\n\nfloat sdPoly5_3 POLY(5)\nvec2  pt5_3[5]=vec2[](\nvec2(1.58,2.96),vec2(2.89,2.34),vec2(3.77,3.38),vec2(2.23,4.37),vec2(1.58,2.96)  );\n\n\nfloat sdPoly5_4 POLY(5)\nvec2  pt5_4[5]=vec2[](\nvec2(3.73,2.31),vec2(5.44,1.45),vec2(4.24,4.43),vec2(3.8,4.72),vec2(3.73,2.31)  );\n\n\nfloat sdPoly5_5 POLY(5)\nvec2  pt5_5[5]=vec2[](\nvec2(2.22,4.39),vec2(3.76,3.41),vec2(3.77,4.74),vec2(3.1,5.25),vec2(2.22,4.39)  );\n\n\nfloat sdPoly5_6 POLY(5)\nvec2  pt5_6[5]=vec2[](\nvec2(4.6,3.28),vec2(5.63,2.67),vec2(4.57,1.51),vec2(3.61,2.05),vec2(4.6,3.28)  );\n\nfloat sdPoly5_7 POLY(5)\nvec2  pt5_7[5]=vec2[](\nvec2(4.72,3.2),vec2(5.59,2.69),vec2(4.71,4.1),vec2(4.21,4.43),vec2(4.72,3.2)  );\n\nfloat sdPoly5_8 POLY(5)\nvec2  pt5_8[5]=vec2[](\nvec2(5.37,0.62),vec2(6.8,0),vec2(7.91,1.08),vec2(6.69,1.84),vec2(5.37,0.62)  );\n\n\nfloat sdPoly5_9 POLY(5)\nvec2  pt5_9[5]=vec2[](\nvec2(5.37,0.62),vec2(6.69,1.82),vec2(5.36,3.56),vec2(4.59,2.83),vec2(5.37,0.62)  );\n\n\nfloat sdPoly5_10 POLY(5)\nvec2  pt5_10[5]=vec2[](\nvec2(6.67,1.79),vec2(7.89,1.09),vec2(6.97,2.32),vec2(5.4,3.52),vec2(6.67,1.79)  );\n\n\nfloat sdPoly5_11 POLY(5)\nvec2  pt5_11[5]=vec2[](\nvec2(3.01,5.25),vec2(6.99,2.26),vec2(7.27,2.61),vec2(3.,6.0),vec2(3.01,5.25)  );\n\n///shane...16-jun-2020\nvec3 tex3D( sampler2D tex, in vec3 p, in vec3 n ){    \n  n = max(n*n - .2, .001); // max(abs(n), 0.001), etc.\n  n /= dot(n, vec3(1)); \n  vec3 tx = texture(tex, p.yz).xyz;\n  vec3 ty = texture(tex, p.zx).xyz;\n  vec3 tz = texture(tex, p.xy).xyz;\n  return mat3(tx*tx, ty*ty, tz*tz)*n; \n}\n\nvec3 getColorTextura( vec3 p, vec3 nor,  int i)\n{\tvec3 col;\n    if (i==100 )\n    { col=tex3D(iChannel0, p/256., nor); return col*2.0; }\n\tif (i==101 ) { return tex3D(iChannel0, p/32., nor); }\n\tif (i==102 ) { return tex3D(iChannel0, p/128., nor)*2.0; }\n\t//if (i==103 ) { return tex3D(iChannel3, p/32., nor); }\n    return vec3(0.0);\n}\n\nvec3 DrawFigBorde(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S2( distObj,0.0));\n  colOut = mix(colOut,vec3(0.0) ,S2(abs( distObj)-0.005,0.0));\n  return colOut;\n}\n\nvec3 DS(vec3 pColObj, vec3 colOut, float distObj ) \n{  colOut = mix(colOut,pColObj ,S( distObj-0.025,0.0)); return colOut; }\n\n\n///oneshade    \nvec2 Rotate(in vec2 p, in vec2 o, in float r) \n{   float c = cos(r), s = sin(r);\n    return (p - o) * mat2(c, -s, s, c) + o;\n}\n\n\nfloat sdSegment( in vec2 p, in vec2 a, in vec2 b )\n{  vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n\n\nvec3 letras(vec2 p, vec3 col)\n{\nvec3 colc =vec3(0.0);\nvec2 A,B;\n\nA= vec2(0.48,0.85);\nB= vec2(0.7,1.53);\nfloat d1=sdSegment(p,A,B);\n\n\nA= vec2(0.48,0.81);\nB= vec2(0.98,0.75);\nfloat d2=sdSegment(p,A,B);\n\nA= vec2(0.52,1.09);\nB= vec2(0.76,1.08);\nfloat d3=sdSegment(p,A,B);\n\nA= vec2(1,1.01);\nB= vec2(1.34,1.05);\nfloat d4=sdSegment(p,A,B);\n\nA= vec2(0.99,1.03);\nB= vec2(1.03,1.54);\nfloat d5=sdSegment(p,A,B);\n\nA= vec2(1.04,1.53);\nB= vec2(1.27,1.54);\nfloat d6=sdSegment(p,A,B);\n\nA= vec2(1.02,1.3);\nB= vec2(1.29,1.32);\nfloat d7=sdSegment(p,A,B);\n\nA= vec2(1.51,0.94);\nB= vec2(1.55,1.49);\nfloat d8=sdSegment(p,A,B);\n\nA= vec2(1.54,1.5);\nB= vec2(1.85,1.5);\nfloat d9=sdSegment(p,A,B);\n\nA= vec2(1.8,0.78);\nB= vec2(2.35,0.78);\nfloat d10=sdSegment(p,A,B);\n\nA= vec2(2.03,0.79);\nB= vec2(2.04,1.36);\nfloat d11=sdSegment(p,A,B);\n\nA= vec2(1.87,1.38);\nB= vec2(2.28,1.35);\nfloat d12=sdSegment(p,A,B);\n\nA= vec2(2.68,0.77);\nB= vec2(3.01,0.82);\nfloat d13=sdSegment(p,A,B);\n\nA= vec2(3.01,0.84);\nB= vec2(2.63,1.4);\nfloat d14=sdSegment(p,A,B);\n\nA= vec2(2.62,1.36);\nB= vec2(2.99,1.41);\nfloat d15=sdSegment(p,A,B);\n\nA= vec2(0.36,1.81);\nB= vec2(0.28,2.38);\nfloat d16=sdSegment(p,A,B);\n\nA= vec2(0.34,1.83);\nB= vec2(0.7,2.37);\nfloat d17=sdSegment(p,A,B);\n\nA= vec2(0.21,2.15);\nB= vec2(0.79,2.15);\nfloat d18=sdSegment(p,A,B);\n\nA= vec2(1.04,2.39);\nB= vec2(0.95,1.94);\nfloat d19=sdSegment(p,A,B);\n\nA= vec2(0.93,1.94);\nB= vec2(1.55,2.35);\nfloat d20=sdSegment(p,A,B);\n\n\nA= vec2(1.5,1.84);\nB= vec2(1.55,2.4);\nfloat d21=sdSegment(p,A,B);\n\nA= vec2(1.05,1.84);\nB= vec2(1.3,1.84);\nfloat d22=sdSegment(p,A,B);\n\nA= vec2(1.85,1.89);\nB= vec2(2.26,1.94);\nfloat d23=sdSegment(p,A,B);\n\nA= vec2(2.27,1.9);\nB= vec2(2.11,2.43);\nfloat d24=sdSegment(p,A,B);\n\nA= vec2(2.19,2.37);\nB= vec2(1.81,2.32);\nfloat d25=sdSegment(p,A,B);\n\nA= vec2(1.86,1.87);\nB= vec2(1.84,2.39);\nfloat d26=sdSegment(p,A,B);\n\ncolc=vec3(1.0,0.0,.0);\ncol=DS(colc,col,d1);\ncol=DS(colc,col,d2);\ncol=DS(colc,col,d3);\ncol=DS(colc,col,d4);\ncol=DS(colc,col,d5);\ncol=DS(colc,col,d6);\ncol=DS(colc,col,d7);\ncol=DS(colc,col,d8);\ncol=DS(colc,col,d9);\ncol=DS(colc,col,d10);\ncol=DS(colc,col,d11);\ncol=DS(colc,col,d12);\ncol=DS(colc,col,d13);\ncol=DS(colc,col,d14);\ncol=DS(colc,col,d15);\ncol=DS(colc,col,d16);\ncol=DS(colc,col,d17);\ncol=DS(colc,col,d18);\ncol=DS(colc,col,d19);\ncol=DS(colc,col,d20);\ncol=DS(colc,col,d21);\ncol=DS(colc,col,d22);\ncol=DS(colc,col,d23);\ncol=DS(colc,col,d24);\ncol=DS(colc,col,d25);\ncol=DS(colc,col,d26);\n    return col;\n}\n\nvec3 edificio(vec2 p, vec3 col)\n{ \n    vec3 colc=vec3(0.82,0.82,0.87);\n    ///antes\n    \n    //lateral -3\n    float sd5_9 = sdPoly5_9(p, pt5_9);\n    colc=vec3(0.7);\n    col=DrawFigBorde(colc,col,sd5_9 );\n    \n    float sd5_6 = sdPoly5_6(p, pt5_6);\n    colc=vec3(0.8);\n    col=DrawFigBorde(colc,col,sd5_6 );\n    \n    \n    //despues\n    \n    //techo 2\n    float sd6_1 = sdPoly6_1(p, pt6_1);\n    colc=vec3(0.9);\n    col= DrawFigBorde(colc,col,sd6_1 );\n    \n    //pared lateral -2\n    float sd5_2 = sdPoly5_2(p, pt5_2);\n    col=DrawFigBorde(colc,col,sd5_2 );\n\n    \n    //techo-1\n    float sd5_3 = sdPoly5_3(p, pt5_3);\n    colc=vec3(0.9);\n    col=DrawFigBorde(colc,col,sd5_3 );\n\n    \n    //pared frontal-1\n    float sd5_4 = sdPoly5_4(p, pt5_4);\n    colc=vec3(0.55,0.55,0.55);\n    col=DrawFigBorde(colc,col,sd5_4 );\n\n    \n    //pared frontal-1\n    float sd5_5 = sdPoly5_5(p, pt5_5);\n    colc=vec3(0.55,0.55,0.55);\n    col=DrawFigBorde(colc,col,sd5_5 );\n\n    \n    //pared frontal-2\n    float sd5_7 = sdPoly5_7(p, pt5_7);\n    colc=vec3(0.55,0.55,0.55);\n    col=DrawFigBorde(colc,col,sd5_7 );\n\n    //techo-1\n    float sd5_8 = sdPoly5_8(p, pt5_8);\n    colc=vec3(0.9);\n    col=DrawFigBorde(colc,col,sd5_8 );\n\n    \n    //pared frontal 3\n    float sd5_10 = sdPoly5_10(p, pt5_10);\n    colc=vec3(0.55,0.55,0.55);\n    col=DrawFigBorde(colc,col,sd5_10 );\n\n    //calle\n    /*\n    float sd5_11 = sdPoly5_11(p, pt5_11);\n    colc=vec3(0.77,0.77,0.8);\n    col=DrawFigBorde(colc,col,sd5_11 );\n    */\n\n    return col;\n\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n    vec2 uv = -1.0 + 2.0 * fragCoord.xy/iResolution.xy;\n\tuv.x *= iResolution.x/iResolution.y;\n    vec2 uv0=uv*2.0;\n    \n    uv.y=1.0-uv.y;\n    uv-=vec2(-1.8,-0.05);\n    float esc=2.5;\n    uv*=esc;\n    \n    float t0=iTime;\n    float t=mod(t0,1.3);\n    uv.xy*=1.0+sin(t*0.5);\n    \n    uv.y-=1.0;\n    vec3 col=vec3(1.0);\n    \n    vec3 colt=  getColorTextura(vec3(fragCoord.x,fragCoord.y,1.0), vec3(0.0,.0,1.0),100);\n    col=vec3(0.77,0.77,0.8);\n    if(sin(t0*4.0)>0.0)\n    col*=colt;\n    col= edificio(uv-vec2(-2.5,-2.0),col);\n    col= edificio(uv,col);\n    col= edificio(uv-vec2(3.0,2.0),col);\n    \n    vec2 pr= vec2(uv0.x,1.0-uv0.y);\n    if(sin(t0*4.0+4.0)>0.0)\n     pr= Rotate(vec2(uv0.x,1.0-uv0.y), vec2(1.2,1.15), radians(-t0*60.0));\n    \n    \n    col= letras(pr, col);\n    col=pow(col,  vec3(0.554545));\n    fragColor = vec4(col,1.0);\n}\n",
                "description": "",
                "inputs": [
                    {
                        "channel": 0,
                        "ctype": "texture",
                        "id": 3,
                        "published": 1,
                        "sampler": {
                            "filter": "mipmap",
                            "internal": "byte",
                            "srgb": "false",
                            "vflip": "true",
                            "wrap": "repeat"
                        },
                        "src": "/media/a/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg"
                    }
                ],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}