{
    "Shader": {
        "info": {
            "date": "1585148436",
            "description": "Classic demo effect. Maybe a bit distorted :)",
            "flags": 0,
            "hasliked": 0,
            "id": "wdfcR2",
            "likes": 5,
            "name": "Twisters in the mist",
            "published": 3,
            "tags": [
                "demo",
                "twister"
            ],
            "usePreview": 0,
            "username": "Roninkoi",
            "viewed": 342
        },
        "renderpass": [
            {
                "code": "vec3 col1 = vec3(1.0, 0.4, 0.0);\nvec3 col2 = vec3(0.5, 1.0, 0.0);\nvec3 col3 = vec3(0.0, 0.8, 1.0);\nvec3 col4 = vec3(0.7, 0.0, 1.0);\n\nvec3 sk;\n\nfloat yb(float y0, float y1, float y)\n{\n    //return y0 < y && y1 > y ? min(1.1, smoothstep(y0, y1, y)*1.0 + 0.7) : 0.;\n    float ss = (smoothstep(y1, (y0 + y1)*0.5, y) * smoothstep(y0, (y0 + y1) * 0.5, y))*0.5;\n    return y0 < y && y1 > y ? min(1.1, sqrt(sqrt(sqrt(ss)))*1.2 + ss) : 0.;\n}\n\nfloat st(float y0, float a, float d, float y)\n{\n    return yb(y0 + sin(a) * d - cos(a) * d, \n              y0 + sin(a) * d + cos(a) * d, y);\n}\n\nvec3 twister(vec3 color, float y0, float a, float d, float y, float z)\n{\n    float f = min(1., exp(-z * 0.00065));\n    \n    vec3 col = mix(color, col1, st(y0, a, d, y));\n    \n    a += 1.570;\n    col = mix(col, col2, st(y0, a, d, y));\n    \n    a += 1.570;\n    col = mix(col, col3, st(y0, a, d, y));\n    \n    a += 1.570;\n    col = mix(col, col4, st(y0, a, d, y));\n    \n    return sk * (1. - f) + col * f;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    uv.x -= 0.5;\n    \n    float sy = sin(uv.y+1.57);\n    sk = vec3(sy*sy * 0.3 + (1. - sy) * 0.9, sy*sy*0.7, sy*1.5);\n    vec3 col = sk;\n    \n    float s = iTime * 5.;\n    \n    for (int i = 40 + int(s); i >= int(s); --i) {\n        float ri = float(i);\n        \n    \tfloat a = sin(iTime * (cos(ri) + 1.1));\n    \tfloat ax = uv.y * 7. * sin(iTime * cos(ri));\n        \n        float z = (ri - s) * 10.;\n        \n        if (z < 0.)\n            continue;\n        \n        float x = ((cos(ri * 0.87) + sin(ri * 0.87)) * 45.7);\n        \n        if (x < 10. && x > 0.)\n            x += 12.;\n        \n        if (x > -10. && x < 0.)\n            x -= 12.;\n            \n    \tcol = twister(col, x / z, a + ax + cos(ri), 3. / max(abs(z), 1.), uv.x, z);\n    }\n    \n    fragColor = vec4(col, 1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}