{
    "Shader": {
        "info": {
            "date": "1680787875",
            "description": "I choose the matrix determinant as my sdf with RayMarching. It looks kind of cool.",
            "flags": 0,
            "hasliked": 0,
            "id": "dsyXzD",
            "likes": 0,
            "name": "Matrix Determinant (Raymarch)",
            "published": 3,
            "tags": [
                "raymarchingmatrix"
            ],
            "usePreview": 0,
            "username": "polaroid",
            "viewed": 180
        },
        "renderpass": [
            {
                "code": "mat2 rot(float a){\n float c = cos(a);\n float s = sin(a);\n return mat2(c, s, -s, c);\n}\n\n// calcul le determinant d'une matrice\n/* \n    | p.x p.z |\n    |         | = p.x - p.z * p.y\n    | p.y 1.0 |\n*/\nfloat sdDet(vec3 p) {\n return (p.x - p.z * p.y);\n}\n\nfloat sdf(vec3 p) {\n float d = sdDet(normalize(p));\n return d;\n}\n\nvec2 raymarch(vec3 ro, vec3 rd){\n float eps = 0.0001;\n float maxSteps = 32.;\n\n float t = 0.;\n for(float i = 0.; i < maxSteps; i++){\n float d = sdf(ro + rd * t);\n if(d < eps) {\n float f = i/(maxSteps-1.);\n return vec2(t, f);\n }\n t += d;\n }\n return vec2(-1.);\n}\n\nvoid mainImage(\nout vec4 fragColor,\nin vec2 fragCoord\n) {\n vec2 uv = fragCoord.xy/iResolution.xy;\n uv -= 0.5;\n uv.x *= iResolution.x/iResolution.y;\n\n // Define camera position (eye) and target position\n vec3 ro = vec3(2., 2., 2.);\n // float time0 = abs(cos(iTime*0.1));\n // float time1 = -2. * (1.-time0) + 3. * time0;\n ro.yz *= rot(iTime);\n vec3 targetPos = vec3(0., 0., 0.);\n    \n // Calculate forward, up, and right vectors\n vec3 forward = normalize(ro - targetPos);\n vec3 up = vec3(0.0, 1.0, 0.0);\n vec3 right = normalize(cross(forward, up));\n up = cross(right, forward);\n\n vec3 rd = normalize(uv.x * right + uv.y * up - forward);\n vec3 col = vec3(0., 0., 0.);\n\n vec2 hit = raymarch(ro, rd);\n float t = hit.x;\n float f = hit.y;\n if(t > 0.){\n  // grayscale: darker if more iterations\n  col = vec3(1., 0., 0.) * (1. - f);\n } else {\n  col = vec3(0., 0., 0.);\n }\n\n fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}