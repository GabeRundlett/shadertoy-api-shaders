{
    "Shader": {
        "info": {
            "date": "1635731593",
            "description": "fake arcade crossbow",
            "flags": 0,
            "hasliked": 0,
            "id": "slt3z8",
            "likes": 15,
            "name": "fake arcade crossbow",
            "published": 3,
            "tags": [
                "fakearcadecrossbow"
            ],
            "usePreview": 0,
            "username": "jorge2017a2",
            "viewed": 274
        },
        "renderpass": [
            {
                "code": "///fake arcade crossbow-JFP\n///por jorge2017a2...2021-oct-09\n///referencia\n//https://iquilezles.org/articles/distfunctions2d\n\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n#define S(d,b) smoothstep(antialiasing(1.0),b,d)\n#define S2(d,b) smoothstep(antialiasing(0.05),b,d)\n\nvec2 rotatev2(vec2 p, float ang)\n{   float c = cos(ang);\n    float s = sin(ang);\n    return vec2(p.x*c - p.y*s, p.x*s + p.y*c);\n}\n\n///---------------------------\nfloat opRep1D( float p, float c )\n\t{ float q = mod(p+0.5*c,c)-0.5*c; return  q ;}    \n///----------Operacion de Distancia--------\nfloat intersectSDF(float distA, float distB)\n\t{ return max(distA, distB);}\nfloat unionSDF(float distA, float distB)\n\t{ return min(distA, distB);}\nfloat differenceSDF(float distA, float distB)\n\t{ return max(distA, -distB);}\n    \nvec3 DrawFigBorde(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S2( distObj,0.0));\n  colOut = mix(colOut,vec3(0.0) ,S2(abs( distObj)-0.05,0.0));\n  return colOut;\n}\n\nvec3 DrawFigBordeCol(vec3 pColObj, vec3 colOut, float distObj , vec3 colBorde )\n{colOut = mix(colOut,pColObj ,S2( distObj,0.0));\n  colOut = mix(colOut,colBorde ,S2(abs( distObj)-0.05,0.0));\n  return colOut;\n}\n\nvec3 DrawFig(vec3 pColObj, vec3 colOut, float distObj )\n{  colOut = mix(colOut,pColObj ,S2( distObj,0.0)); return colOut;}\n\nfloat sdBox( in vec2 p, in vec2 b )\n{  vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdCircle( vec2 p, float r )\n{  return length(p) - r;}\n\nfloat sdTriangleIsosceles( in vec2 p, in vec2 q )\n{  p.x = abs(p.x);\n    vec2 a = p - q*clamp( dot(p,q)/dot(q,q), 0.0, 1.0 );\n    vec2 b = p - q*vec2( clamp( p.x/q.x, 0.0, 1.0 ), 1.0 );\n    float s = -sign( q.y );\n    vec2 d = min( vec2( dot(a,a), s*(p.x*q.y-p.y*q.x) ),\n                  vec2( dot(b,b), s*(p.y-q.y)  ));\n    return -sqrt(d.x)*sign(d.y);\n}\n\n\nfloat sdParallelogram( in vec2 p, float wi, float he, float sk )\n{  vec2 e = vec2(sk,he);\n    p = (p.y<0.0)?-p:p;\n    vec2  w = p - e; w.x -= clamp(w.x,-wi,wi);\n    vec2  d = vec2(dot(w,w), -w.y);\n    float s = p.x*e.y - p.y*e.x;\n    p = (s<0.0)?-p:p;\n    vec2  v = p - vec2(wi,0); v -= e*clamp(dot(v,e)/dot(e,e),-1.0,1.0);\n    d = min( d, vec2(dot(v,v), wi*he-abs(s)));\n    return sqrt(d.x)*sign(-d.y);\n}\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\nfloat sdRhombus( in vec2 p, in vec2 b ) \n{\n    p = abs(p);\n    float h = clamp( ndot(b-2.0*p,b)/dot(b,b), -1.0, 1.0 );\n    float d = length( p-0.5*b*vec2(1.0-h,1.0+h) );\n    return d * sign( p.x*b.y + p.y*b.x - b.x*b.y );\n}\n\nvec3 Suelo1(vec2 p, vec3 col)\n{  \n    col=DrawFig(VERDE0, col, p.y-2.5 );\n return col;\n}\n\nvec3 banqueta(vec2 p, vec3 col)\n{\n    float d1=sdParallelogram( p-vec2(-6.0,-2.5), 10.0, 2.0, 2.5 );\n    float d2=sdParallelogram( p-vec2(-5.8,-2.9), 10.0, 2.0, 2.5 );\n    float d3=sdBox(p-vec2(-8.5,-4.7), vec2(7.0+3.,0.25) );\n    float d4=sdParallelogram( p.yx-vec2(-2.7,1.1+3.0), 0.27, 2.5, 2.0 );\n    \n    col= DrawFigBorde(CAFE3,col, d2 );\n    col= DrawFigBorde(CAFE3,col, d1 );\n    col= DrawFigBorde(NEGRO,col, d3 );\n    col= DrawFigBorde(NEGRO,col, d4 );\n    return col;\n}\n\nvec3 banquetaG(vec2 p, vec3 col)\n{   float alto=1.0;\n    float d1=sdParallelogram( p-vec2(-6.0,-2.5), 15.0, 2.0+alto, 2.5+alto );\n    float d2=sdParallelogram( p-vec2(-5.8,-2.9), 15.0, 2.0+alto, 2.5 +alto);\n    float d3=sdBox(p-vec2(-9.5,-5.7), vec2(7.0+8.0,0.25) );\n    float d4=sdParallelogram( p.yx-vec2(-2.7,1.1+8.0), 0.27, 2.5+alto, 2.0 +alto);\n    col= DrawFigBorde(CAFE3,col, d2 );\n    col= DrawFigBorde(CAFE3,col, d1 );\n    col= DrawFigBorde(NEGRO,col, d3 );\n    col= DrawFigBorde(NEGRO,col, d4 );\n    return col;\n}\n\n\nvec3 ParedCasa01(vec2 p, vec3 col)\n{\n   float d1=sdBox(p, vec2(4.0,1.25) );\n    vec2 p1, p2;\n    p1=p;\n    p2=p-vec2(0.7,0.6);\n    p1.x= opRep1D(p1.x, 1.2);\n    p1.y= opRep1D(p1.y, 1.2);\n    p2.x= opRep1D(p2.x, 1.2);\n    p2.y= opRep1D(p2.y, 1.2);\n    float d2=sdBox(p1, vec2(0.5,0.25) );\n    float d3=sdBox(p2, vec2(0.5,0.25) );\n    float dif=differenceSDF(d1,d2);\n     dif=differenceSDF(dif,d3);\n    col= DrawFig(VERDE3, col, d1);\n    col= DrawFig(VERDE4, col, dif);\n    \n    return col;\n}\n\nvec3 Casa01(vec2 p, vec3 col)\n{\n    col= ParedCasa01( p,col);\n    float d1=sdBox(p-vec2(0.0,1.4), vec2(4.0,0.15) );\n    col= DrawFig(CAFE2, col, d1);\n    col= ParedCasa01(p-vec2(0.0,2.8),col);\n    \n    float d2=sdBox(p-vec2(0.0,2.5), vec2(1.0,1.0));\n    col=DrawFigBordeCol(FVENTANA2, col, d2, CAFE2);\n    \n    //pared lateral\n    float d3= sdParallelogram(p.yx-vec2(2.2,5.2), 2.7, 1.5-0.2, 1.0-0.2 );\n    //col= DrawFig(VERDE5, col, d3);\n    \n    vec2 p1=p;\n    p1=rotatev2(p1-vec2(5.25,4.9), radians(60.0));\n    float dr1= sdRhombus(  p1, vec2(1.5,1.5) );\n    \n    d3= unionSDF(d3, dr1);\n    col= DrawFig(VERDE5, col, d3);\n    \n    \n    //techo\n    float d4= sdParallelogram(p-vec2(0.3,5.0), 4.2, 1.0, 0.5 );\n    col= DrawFig(VERDE4, col, d4);\n    //ventana lateral\n    float d5= sdParallelogram(p.yx-vec2(2.2,4.6), 1.0, 0.5-0.2, 0.35-0.2 );\n    col= DrawFigBordeCol(FVENTANA2, col, d5,CAFE2);\n    //ventana lateral\n    float d6= sdParallelogram(p.yx-vec2(2.8,6.0), 1.0, 0.5-0.2, 0.35-0.2 );\n    col= DrawFigBordeCol(FVENTANA2, col, d6,CAFE2);\n    \n    \n    return col;\n}\n\nvec3 Casa02(vec2 p, vec3 col)\n{\n    col= ParedCasa01( p,col);\n    float d1=sdBox(p-vec2(0.0,1.4), vec2(4.0,0.15) );\n    col= DrawFig(CAFE2, col, d1);\n    col= ParedCasa01(p-vec2(0.0,2.8),col);\n    \n    float d2=sdBox(p-vec2(0.0,2.5), vec2(1.0,1.0));\n    col=DrawFigBordeCol(FVENTANA2, col, d2, CAFE2);\n    \n    //pared lateral\n    float d3= sdParallelogram(p.yx-vec2(2.2,5.2), 2.7, 1.5-0.2, 1.0-0.2 );\n    \n    vec2 p1=p;\n    p1=rotatev2(p1-vec2(5.25,4.9), radians(60.0));\n    float dr1= sdRhombus(  p1, vec2(1.5,1.5) );\n    d3= unionSDF(d3, dr1);\n    col= DrawFig(VERDE5, col, d3);\n    \n    \n     p1=p;\n    p1.x= opRep1D(p1.x, 1.2);\n    p1.y= opRep1D(p1.y, 0.6);\n    //lineas techo\n    float d4a=sdBox(p1, vec2(4.0,0.10));\n    \n    //techo\n    \n    float d4= sdParallelogram(p-vec2(0.3,5.1), 4.2, 1.1, 0.5 );\n    d4a=intersectSDF(d4a, d4);\n    col= DrawFig(VERDE4, col, d4);\n    col= DrawFig(NEGRO, col, d4a);\n    \n    //ventana lateral\n    float d5= sdParallelogram(p.yx-vec2(2.2,4.6), 1.0, 0.5-0.2, 0.35-0.2 );\n    col= DrawFigBordeCol(FVENTANA2, col, d5,CAFE2);\n    //ventana lateral\n    float d6= sdParallelogram(p.yx-vec2(2.8,6.0), 1.0, 0.5-0.2, 0.35-0.2 );\n    col= DrawFigBordeCol(FVENTANA2, col, d6,CAFE2);\n    \n    \n    return col;\n}\n\nvec3 Casa03(vec2 p, vec3 col)\n{\n    float d10=sdBox(p, vec2(4.0,1.25) );\n    col= DrawFig(VERDE5P, col, d10); \n    \n    float d1=sdBox(p-vec2(0.0,1.4), vec2(4.0,0.15) );\n    col= DrawFig(CAFE2, col, d1);\n    \n    float d11=sdBox(p-vec2(0.0,2.8), vec2(4.0,1.25) );\n    col= DrawFig(VERDE5P, col, d11); \n    \n    float d2=sdBox(p-vec2(0.0,2.5), vec2(1.0,1.0));\n    col=DrawFigBordeCol(FVENTANA2, col, d2, CAFE2);\n    \n    float d2a=sdBox(p-vec2(-2.5,2.5), vec2(1.0,1.0));\n    col=DrawFigBordeCol(FVENTANA2, col, d2a, CAFE2);\n    \n    float d2b=sdBox(p-vec2(2.5,2.5), vec2(1.0,1.0));\n    col=DrawFigBordeCol(FVENTANA2, col, d2b, CAFE2);\n    \n    \n    //pared lateral\n    float d3= sdParallelogram(p.yx-vec2(2.3,5.2), 2.7, 1.5-0.2, 1.3-0.2 );\n    vec2 p1=p;\n    p1=rotatev2(p1-vec2(5.25,5.2), radians(55.0));\n    float dr1= sdRhombus(  p1, vec2(1.7,1.5) );\n    d3= unionSDF(d3, dr1);\n    col= DrawFig(VERDE5, col, d3);\n    \n    \n     p1=p;\n    p1.x= opRep1D(p1.x, 1.2);\n    p1.y= opRep1D(p1.y, 0.6);\n    //lineas techo\n    float d4a=sdBox(p1, vec2(4.0,0.10));\n    \n    //techo\n    float d4= sdParallelogram(p-vec2(0.3,5.25), 4.2, 1.3, 0.5 );\n    d4a=intersectSDF(d4a, d4);\n    col= DrawFig(VERDE4, col, d4);\n    col= DrawFig(NEGRO, col, d4a);\n    \n    //ventana lateral\n    float d5= sdParallelogram(p.yx-vec2(2.2,4.6), 1.2, 0.5-0.2, 0.35-0.2 );\n    col= DrawFigBordeCol(FVENTANA2, col, d5,CAFE2);\n    //ventana lateral\n    float d6= sdParallelogram(p.yx-vec2(2.8,5.8), 1.2, 0.5-0.2, 0.4-0.2 );\n    col= DrawFigBordeCol(FVENTANA2, col, d6,CAFE2);\n    \n    \n    return col;\n}\n\n\nvec3 ParedCasa02Ch(vec2 p, vec3 col)\n{\n   float d1=sdBox(p, vec2(4.0,2.0) );\n    vec2 p1, p2;\n    p1=p;\n    p2=p-vec2(0.7,0.6);\n    float alto=1.2;\n    float ancho=1.2;\n    p1.x= opRep1D(p1.x, ancho);\n    p1.y= opRep1D(p1.y, alto);\n    p2.x= opRep1D(p2.x, ancho);\n    p2.y= opRep1D(p2.y, alto);\n    \n    float d2=sdBox(p1, vec2(0.5,0.23) );\n    float d3=sdBox(p2, vec2(0.5,0.23) );\n    float dif=differenceSDF(d1,d2);\n     dif=differenceSDF(dif,d3);\n    col= DrawFig(CASA5, col, d1);\n    col= DrawFig(CASA4, col, dif);\n    \n    return col;\n}\n\n\nvec3 ParedDif(float dist, vec2 p, vec3 col, vec3 col1,vec3 col2)\n{\n    float d1=dist;\n    vec2 p1, p2;\n    p1=p;\n    p2=p-vec2(0.7,0.6);\n    float alto=1.2;\n    float ancho=1.2;\n    p1.x= opRep1D(p1.x, ancho);\n    p1.y= opRep1D(p1.y, alto);\n    p2.x= opRep1D(p2.x, ancho);\n    p2.y= opRep1D(p2.y, alto);\n    \n    float d2=sdBox(p1, vec2(0.5,0.23) );\n    float d3=sdBox(p2, vec2(0.5,0.23) );\n    float dif=differenceSDF(d1,d2);\n     dif=differenceSDF(dif,d3);\n    col= DrawFig(col1, col, d1);\n    col= DrawFig(col2, col, dif);\n    return col;\n}\n\n\nvec3 Casa04(vec2 p, vec3 col)\n{   col=ParedCasa02Ch(p, col);\n    //techo 1\n    float d4= sdParallelogram(p-vec2(-1.0,2.8), 3.5, 0.8, 0.4 );\n    float d5= sdParallelogram(vec2(-p.x,p.y)-vec2(-1.0,2.8), 3.5, 0.8, 0.4 );\n     d4= unionSDF(d5, d4);\n     \n     col= ParedDif(d4 ,p*vec2(1.05,1.0),  col,VERDE4,vec3(0.0,0.0,0.3));\n    col=ParedCasa02Ch(p-vec2(0.0,5.5), col);\n    \n    float d2=sdBox(p-vec2(-2.0,4.5), vec2(0.8,1.0));\n    col=DrawFigBordeCol(FVENTANA2, col, d2, CAFE2);\n    \n    float d3=sdBox(p-vec2(0.35,4.5), vec2(0.8,1.0));\n    col=DrawFigBordeCol(FVENTANA2, col, d3, CAFE2);\n    \n    //techo 2\n    float d4a= sdParallelogram(p-vec2(-1.0,8.0), 4.0, 1.2, 0.5 );\n    float d5a= sdParallelogram(vec2(-p.x,p.y)-vec2(-1.0,8.0), 4.0, 1.2, 0.5 );\n    d4a= unionSDF(d5a, d4a);\n    col= ParedDif(d4a ,p*vec2(1.05,1.0),  col,VERDE4,vec3(0.0,0.0,0.3));\n    //chimenea\n    float d6=sdBox(p-vec2(-2.0,9.0), vec2(0.6,1.0));\n    col=DrawFigBordeCol(CAFE2, col, d6, vec3(0.0));\n    \n    float d7=sdBox(p-vec2(-2.0,10.0), vec2(1.1,0.5));\n    col=DrawFigBordeCol(CAFE2, col, d7, vec3(0.0));\n    return col;\n}\n\n\nvec3 Casa05(vec2 p, vec3 col)\n{   float d1=sdBox(p, vec2(2.2,4.0) );\n    col= DrawFig(CASA5A, col, d1);\n    \n    //pared lateral\n    float d3= sdParallelogram(p.yx-vec2(0.8,3.5), 4.0, 1.5-0.2, 1.0-0.2 );\n    vec2 p1=p;\n    p1=rotatev2(p1-vec2(3.5,4.9), radians(60.0));\n    float dr1= sdRhombus(  p1, vec2(1.5,1.5) );\n    \n    d3= unionSDF(d3, dr1);\n    col= DrawFig(CASA5B, col, d3);\n    \n    //techo\n    float d4= sdParallelogram(p-vec2(0.3,5.1), 2.5, 1.1, 0.5 );\n    col= DrawFig(VERDE4, col, d4);\n    \n    //ventana lateral\n    float d5= sdParallelogram(p.yx-vec2(2.0,3.6), 1.5, 0.5-0.2, 0.35-0.2 );\n    col= DrawFigBordeCol(FVENTANA2, col, d5,CAFE2);\n    return col;\n}\n\nvec3 Postes(vec2 p, vec3 col)\n{\n    float d1=sdBox(p, vec2(0.2,2.0) );\n    float d2=sdTriangleIsosceles(vec2(p.x,-p.y)-vec2(0.0,1.2), vec2(0.6,0.8)  );\n    float d3=sdBox(p-vec2(0.0,0.4), vec2(0.35,0.2) );\n    float d4=sdBox(p-vec2(0.0,1.5), vec2(0.4,0.5) );\n    float d5=sdBox(p-vec2(-0.15,1.5), vec2(0.12,0.4) );\n    float d6=sdBox(p-vec2(0.15,1.5), vec2(0.1,0.4) );\n    \n    col= DrawFig(vec3(0.0), col, d1);\n    col= DrawFig(vec3(0.0), col, d2);\n    col= DrawFig(vec3(0.0), col, d3);\n    col= DrawFig(vec3(0.0), col, d4);\n    col= DrawFig(vec3(1.0,1.0,0.0), col, d5);\n    col= DrawFig(vec3(1.0,1.0,0.0), col, d6);    \n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = -1.0 + 2.0 * fragCoord.xy/iResolution.xy;\n\tuv.x *= iResolution.x/iResolution.y;\n    //vec3  col=vec3(0.45,0.7,1.0)-uv.y*0.45;\n    vec3  col=vec3(0.0);\n    \n    float LimiteCielo=0.2;\n    // stars\n    float stars1 = 1. - clamp(rand(uv) * 800.0, 0.0, 1.0);\n    float stars2 = 1. - clamp(rand(uv-vec2(1.0,-1.0)) * 400.0, 0.0, 1.0);\n    stars1 = mix(0.0, stars1, 1. - step(uv.y, LimiteCielo));\n    stars2 = mix(0.0, stars2, 1. - step(uv.y, LimiteCielo));\n    col = mix(col, vec3(1.0)*sin(iTime*8.), stars1);\n    col = mix(col, vec3(1.0)*cos(iTime*16.5), stars2);\n    \n    \n    //uv*=10.0;  //cambio idea byt3_m3chanic,\n    uv.x+=iTime*0.5;\n    uv*=10.;\n    //uv.x=mod(uv.x+15.,30.)-15.;\n    uv.x= opRep1D( uv.x, 40.0 );\n\n    vec2 uv1=uv;\n    vec2 uv2=uv;\n    col=Suelo1(uv, col);\n    \n    col=banqueta(uv-vec2(-8.0,-7.0),col);\n    col=banqueta(uv-vec2(18.0,-7.0),col);\n    col=banquetaG(uv-vec2(-4.0,1.5),col);\n    col=banquetaG(uv-vec2(32.0,1.5),col);\n    \n    col= Casa05(uv-vec2(1.5,3.5), col);\n    \n    col= Casa02(uv-vec2(-8.0,1.5), col);\n    col= Casa01(uv-vec2(-15.0,-1.5), col);\n    col= Casa03(uv*vec2(1.0,1.1)-vec2(-2.5,-1.8), col);\n    col= Casa04(uv-vec2(15.0,-1.0), col);\n    col= Postes(uv-vec2(-0.2,-1.7), col);\n    col= Postes(uv-vec2(-10.5,-1.7), col);\n    col= Postes(uv-vec2(10.0,-1.7), col);\n    fragColor = vec4(col,1.0);\n}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            },
            {
                "code": "const vec3 CAFE0=vec3(90,39,41)/255.;\nconst vec3 CAFE1=vec3(118,57,49)/255.;\nconst vec3 VERDE0=vec3(0.1,0.35,0.35);\nconst vec3 VERDE1=vec3(0.0,0.4,0.4);\nconst vec3 VERDE2=vec3(0.0,0.5,0.5);\nconst vec3 VERDE3=vec3(30,122,144)/255.0;\nconst vec3 VERDE4=vec3(9,87,87)/255.;\nconst vec3 CALLE1=vec3(1,74,74)/255.0;\nconst vec3 CAFE2=vec3(128,77,77)/255.0;\nconst vec3 CAFE3=vec3(99,67,56)/255.0;\nconst vec3 FVENTANA=vec3(150,141,141)/255.0;\nconst vec3 FVENTANA2=vec3(164,173,106)/255.0;\nconst vec3 VERDE5=vec3(2,73,73)/255.0;\nconst vec3 NEGRO=vec3(0,0,2)/255.0;\nconst vec3 TECHO1=vec3(33,99,123)/255.0;\nconst vec3 VERDE5P=vec3(16,132,9)/255.0;\nconst vec3 VERDE6P=vec3(3,80,24)/255.0;\nconst vec3 CASA5=vec3(92,90,107)/255.0;\nconst vec3 CASA4=vec3(69,66,66)/255.0;\nconst vec3 CASA5A=vec3(90,82,82)/255.0;\nconst vec3 CASA5B=vec3(140,114,114)/255.0;\n\n\nfloat rand (vec2 st) {\n    return fract(sin(dot(st.xy,\n                         vec2(12.98458,78.233)))*\n        43758.5453123);\n}\n\nfloat noise(vec2 p){\n\tvec2 ip = floor(p);\n\tvec2 u = fract(p);\n\tu = u*u*(3.0-2.0*u);\n\t\n\tfloat res = mix(\n\t\tmix(rand(ip),rand(ip+vec2(1.0,0.0)),u.x),\n\t\tmix(rand(ip+vec2(0.0,1.0)),rand(ip+vec2(1.0,1.0)),u.x),u.y);\n\treturn res*res;\n}\n",
                "description": "",
                "inputs": [],
                "name": "Common",
                "outputs": [],
                "type": "common"
            }
        ],
        "ver": "0.1"
    }
}