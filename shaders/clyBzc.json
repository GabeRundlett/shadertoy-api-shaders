{
    "Shader": {
        "info": {
            "date": "1702315872",
            "description": "Balls rolling endlessly - with gravity",
            "flags": 0,
            "hasliked": 0,
            "id": "clyBzc",
            "likes": 24,
            "name": "Helical Ramps",
            "published": 3,
            "tags": [
                "ball",
                "dynamics",
                "roll"
            ],
            "usePreview": 0,
            "username": "dr2",
            "viewed": 291
        },
        "renderpass": [
            {
                "code": "#define O589(O751)(sin((O751)+vec2(0.5*O294,0.)))\n#define O899(O550)if(O651<O868){O868=O651;O674=O550;}\n#define O930(O550)if(O651<O868){O868=O651;O674=O550;O542=O511;}\n#define O503 min(O046,0)\nconst int O984=29,O077=4;vec3 O341[O984],O403[O984],O542,O891;float O023,O255,O279,O635,O775,O147,O658,O837,O992,O860,O325,O333[2];int O046,O674,O186;const int O767=1,O736=2,O705=3,O643=4,O612=6,O581=7;const float O294=3.1415927;float O356(vec3 O263,vec3 O945){vec3 O651;O651=abs(O263)-O945;return min(max(O651.x,max(O651.y,O651.z)),0.)+length(max(O651,0.));}float O418(vec3 O263,vec3 O945,float O697){return length(max(abs(O263)-O945,0.))-O697;}float O387(vec3 O263,float O666,float O271){return max(length(O263.xy)-O666,abs(O263.z)-O271);}float O449(vec3 O263,float O728,float O666){return length(vec2(length(O263.xy)-O666,O263.z))-O728;}vec2 O852(vec2 O511,float O031){vec2 O620;O620=sin(O031+vec2(0.5*O294,0.));return vec2(dot(O511,vec2(O620.x,-O620.y)),dot(O511.yx,O620));}vec2 O821(vec2 O511,vec2 O620){return vec2(dot(O511,vec2(O620.x,-O620.y)),dot(O511.yx,O620));}mat3 O162(float O116,float O062){vec2 O232,O434,O976;O232=vec2(O116,O062);O434=cos(O232);O976=sin(O232);return mat3(O434.y,0.,-O976.y,0.,1.,0.,O976.y,0.,O434.y)*mat3(1.,0.,0.,0.,O434.x,-O976.x,0.,O976.x,O434.x);}vec4 O124(vec3 O790,vec3 O697){vec3 O410,O565;float O868,O651,O310,O689;O868=O023;for(int O488=O503;O488<O984;O488++){O410=O790-O341[O488];O310=dot(O697,O410);O689=O310*O310-dot(O410,O410)+O279*O279;if(O689>0.){O651=-O310-sqrt(O689);if(O651>0.&&O651<O868){O868=O651;O542=O410+O651*O697;O565=O542/O279;O186=O488;}}}return vec4(O868,O565);}float O155(vec3 O790,vec3 O697,float O759){vec3 O410;float O868,O651,O310,O689;O868=O023;for(int O488=O503;O488<O984;O488++){O410=O790-O341[O488];O310=dot(O697,O410);O689=O310*O310-dot(O410,O410)+O279*O279;if(O689>0.){O651=-O310-sqrt(O689);if(O651>0.&&O651<O868)O868=O651;}}return 0.6+0.4*smoothstep(0.,O759,O868);}float O108(vec3 O263){vec4 O806;vec3 O511,O604,O100;float O868,O651,O379,O364,O914,O883,O961,O720,O480,O496;O868=O023;O364=0.25;O914=0.3;O961=0.3;O720=0.1;O883=0.22*O914;O806=vec4(0.85,0.7,0.3,0.1)*O914;O480=O325+O635;O100=sign(O263);O511=O263-vec3(0.,-0.5*O147*O775-0.2,0.);O651=O418(O511,vec3(vec2(O325+2.4*O635),0.2).xzy-0.02,0.02);O930(O612)O511=O263;O511.xz-=O480*O100.xz;O604=O511;O604.xz=O100.z*(O604.xz+O100.x*O604.zx*vec2(-1.,1.))/sqrt(2.);O604.y-=0.5*(atan(O604.z,-O100.z*O100.x*O604.x)/O294-O147+0.25*O100.z+0.5)*O775-O364;O379=(length(O604.xz)-O635)/O658;for(int O798=O503;O798<=O077;O798++){O651=min(length(vec2(2.*(abs(O379)-O806.x),O604.y-O806.y)),length(vec2(2.*(abs(O379)-O806.z),O604.y-O806.w)))-O883;O651=max(O651,abs(O511.y)-(0.5*O147+0.2)*O775);if(O798==0)O651=max(O651,-max(O263.y+0.5*O147*O775-3.*O364,abs(O263.z)-O480));else if(O798==O077)O651=max(O651,-O100.x*O511.x);O899(O767);O604.y-=O775;}O511=O263;O511.y+=0.1*O775;for(int O829=O503;O829<=1;O829++){O604=O511;if(O829==0){O604.y-=0.5*O147*O775;}else{O604.xz=O604.zx;O604.y+=0.5*(O147-0.5)*O775;}O604.z=abs(O604.z)-O325;O379=O604.z/O658;O651=min(length(vec2(2.*(abs(O379)-O806.x),O604.y-O806.y)),length(vec2(2.*(abs(O379)-O806.z),O604.y-O806.w)))-O883;O651=max(O651,abs(O604.x)-O480);O899(O767);}O511=O263;O511.xz=abs(O511.xz)-O325-O635;O651=O387(O511.xzy,0.1*O635,0.51*O147*O775);O899(O736);O511.y-=(0.1-0.5*(O147-0.5))*O775;O496=0.5*(O635+0.3*O658);for(int O798=O503;O798<O077;O798++){O604=O511;O604.z-=O496;O604.y-=0.06*O635;O651=max(O356(O604,vec3(0.02*O635,0.06*O635,O496)),-max(-O604.y-0.01*O635,abs(O604.z-0.38*O635)-0.18*O635));O899(O736);O604.yz-=vec2(0.5*O775,-2.*O496);O651=max(O356(O604,vec3(0.02*O635,0.06*O635,O496)),-max(-O604.y-0.01*O635,abs(O604.z+0.38*O635)-0.18*O635));O899(O736);O511.y-=O775;}O511=O263;O511.y+=0.5*(O147*O775-O658);O511.x=abs(O511.x)-O325;O651=O449(O511,0.07*O635,0.5*O658);O899(O705);for(int O829=O503;O829<=1;O829++){O511=O263;O511.xy-=vec2(O325*sign(float(O829)-0.5),-0.5*(O147*O775-O658));O651=O387(O511,0.5*O658,0.03*O635);O511.y+=0.2*O658-0.7*O658*O333[O829];O651=max(O651,-O511.y);O930(O643+O829);}return O868;}float O170(vec3 O790,vec3 O697){float O744,O651;O744=0.;for(int O798=O503;O798<120;O798++){O651=O108(O790+O744*O697);O744+=O651;if(O651<0.001||O744>O023)break;}return O744;}vec3 O139(vec3 O263){vec4 O472;vec2 O085;O085=1e-3*vec2(1.,-1.);for(int O798=O503;O798<4;O798++){O472[O798]=O108(O263+((O798<2)?((O798==0)?O085.xxx:O085.xyy):((O798==2)?O085.yxy:O085.yyx)));}O472.x=-O472.x;return normalize(2.*O472.yzw-dot(O472,vec4(1.)));}float O201(vec3 O790,vec3 O697){float O038,O651,O271;O038=1.;O651=0.02;for(int O798=O503;O798<40;O798++){O271=O108(O790+O651*O697);O038=min(O038,smoothstep(0.,0.02*O651,O271));O651+=O271;if(O038<0.05)break;}return 0.6+0.4*O038;}vec4 O093(){vec3 O372,O527,O511;O372=O403[O674-O581];O511=O542;O511.xz=O821(O511.xz,O589(atan(O372.x,O372.y)));if(abs(O511.z)<0.07)O527=vec3(1.,1.,0.3);else O527=(O511.z*(mod(O294+atan(O511.x,O511.y)+O372.z,2.*O294)-O294)>0.)?vec3(0.,1.,1.):vec3(1.,0.,1.);return vec4(O527,0.2);}void O007(){O147=float(O077);O325=1.5;O635=3.;O775=2.5;O658=2.3;O837=2.*(O325+O635);O992=length(vec2(2.*O294*(O147-0.25)*O635,(O147-0.25)*O775));O860=4.*(O837+O992);O279=0.6;O279=O860/(2.*O294*floor(O860/(2.*O294*O279)));}void O248(int O519,out vec3 O341,out vec3 O403){float O426,O302,O457,O395,O480,O682,O651,O193,O348;float O596,O534,O240,O317,O224,O286;O302=0.5*O147*O775;O457=O302-0.25*O775;O426=O302+O457;O395=O426/O992;O480=O325+O635;O682=(2.*O147-0.5)*O294/O992;O596=1.;O534=6.;O240=(O534*O534-O596*O596)/(2.*O992);O317=O837/O596;O224=O837/O534;O286=(O240>0.)?(sqrt(O596*O596+2.*O240*O992)-O596)/O240:O992/O596;O348=2.*(O317+O224)+4.*O286;O193=mod(O255+(float(O519)/float(O984))*O348,O348);O651=0.;if(O193>=0.5*O348){O193-=0.5*O348;O651+=0.5*O860;}if(O193<O317){O651+=O193*O596;}else if(O193<O317+O286){O193-=O317;O651+=O837+O193*(O596+0.5*O240*O193);}else if(O193<O317+O286+O224){O193-=O317+O286;O651+=O837+O992+O193*O534;}else{O193-=O317+O286+O224;O651+=2.*O837+O992+O193*(O534-0.5*O240*O193);}O403=vec3(0.,0.,2.*O294*fract(O651/(2.*O294*O279)));O341=vec3(0.);if(O651<0.5*O860){if(O651<O837){O403.y=-1.;O341=vec3(-O480+O651,O457,O325);}else if(O651<0.25*O860){O651-=O837;O403.xy=O589(O651*O682-0.5*O294);O341=vec3(O480*vec2(1.)+O635*O403.xy,O457-O651*O395).xzy;}else if(O651<O837+0.25*O860){O651-=0.25*O860;O403.x=-1.;O341=vec3(O325,-O302,O480-O651);}else{O651-=O837+0.25*O860;O403.xy=O589(O651*O682+O294);O341=vec3(O480*vec2(1.,-1.)+O635*O403.xy,-O302+O651*O395).xzy;}}else{O651-=0.5*O860;if(O651<O837){O403.y=1.;O341=vec3(O480-O651,O457,-O325);}else if(O651<0.25*O860){O651-=O837;O403.xy=-O589(O651*O682-0.5*O294);O341=vec3(O480*vec2(-1.)+O635*O403.xy,O457-O651*O395).xzy;}else if(O651<O837+0.25*O860){O651-=0.25*O860;O403.x=1.;O341=vec3(-O325,-O302,-O480+O651);}else{O651-=O837+0.25*O860;O403.xy=-O589(O651*O682+O294);O341=vec3(O480*vec2(-1.,1.)+O635*O403.xy,-O302+O651*O395).xzy;}}O341.y+=1.75*O279;}\nvoid O217(){float O651[2];for(int O488=O503;O488<O984;O488++)O248(O488,O341[O488],O403[O488]);O651[0]=10.;O651[1]=O651[0];for(int O488=O503;O488<O984;O488++){for(int O829=O503;O829<=1;O829++){if(sign(O341[O488].x*(float(O829)-0.5))>0.&&O341[O488].y<-0.5*O147*O775+1.75*O279+0.11)O651[O829]=min(O651[O829],abs(O341[O488].z));}}for(int O829=O503;O829<=1;O829++)O333[O829]=1.-smoothstep(2.,8.,O651[O829]/O279);}vec3 O069(vec3 O790,vec3 O697){vec4 O558,O713;vec3 O527,O565,O573;float O054,O015,O038;O217();O713=O124(O790,O697);O573=O542;O054=O170(O790,O697);if(min(O054,O713.x)<O023){if(O713.x<O054){O054=O713.x;O674=O581+O186;O542=O573;}O790+=O054*O697;O565=(O674<O581)?O139(O790):O713.yzw;if(O674==O767)O558=vec4(0.8,0.8,0.9,0.2);else if(O674==O736)O558=vec4(0.7,0.5,0.,0.1);else if(O674==O705)O558=vec4(0.9,0.8,0.,0.1);else if(O674==O643||O674==O643+1)O558=mix(vec4(1.,0.,0.,-1.),vec4(0.9,0.8,0.3,0.1),step(0.5,fract(4.*O542.y)));else if(O674==O612)O558=vec4(0.5,0.5,0.45,0.2);else if(O674>=O581)O558=O093();if(O558.a>=0.){O015=max(dot(O565,O891),0.);O015*=O015;O038=(O054<O023)?min(O201(O790+0.01*O565,O891),O155(O790+0.01*O565,O891,15.)):1.;O527=O558.rgb*(0.15+0.2*max(dot(O565,normalize(O891*vec3(1.,0.,1.))),0.)+0.85*O038*O015)+O558.a*step(0.95,O038)*pow(max(dot(O891,reflect(O697,O565)),0.),32.);}else O527=O558.rgb*(0.5+0.5*max(-dot(O565,O697),0.));}else O527=vec3(0.6,0.6,1.)*(0.2+0.2*(O697.y+1.)*(O697.y+1.));return clamp(O527,0.,1.);}void mainImage(out vec4 O178,in vec2 O209){mat3 O627;vec4 O922;vec3 O790,O697,O527;vec2 O465,O441;float O116,O062,O782,O193,O131;\nO465=iResolution.xy;O441=2.*O209.xy/O465-1.;O441.x*=O465.x/O465.y;O255=iTime;O922=iMouse;O922.xy=O922.xy/O465-0.5;\nO062=0.;O116=-0.2*O294;O782=5.;if(O922.z>0.){O062+=2.5*O294*O922.x;O116+=0.5*O294*O922.y;O782+=2.*abs(O062);}else{O193=mod(0.007*O255,2.);O062=2.*O294*(abs((floor(12.*O193)+smoothstep(0.8,1.,fract(12.*O193)))/12.-1.)-0.5);}O116=clamp(O116,-0.45*O294,-0.01*O294);O627=O162(O116,O062);O007();O790=O627*vec3(0.,-0.5,-(20.+10.*O147));O023=200.;O891=O627*normalize(vec3(1.,2.,-1.));const float O953=3.;O527=vec3(0.);O131=2.*mod(dot(mod(floor(0.5*(O441+1.)*O465),2.),vec2(1.)),2.)-1.;for(float a=float(O503);a<O953;a++){O697=O627*normalize(vec3(O441+step(1.5,O953)*O852(vec2(0.5/O465.y,0.),O131*(0.667*a+0.5)*O294),O782));O527+=(1./O953)*O069(O790,O697);}O178=vec4(O527,1.);}\n",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}