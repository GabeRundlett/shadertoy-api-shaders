{
    "Shader": {
        "info": {
            "date": "1621274582",
            "description": "https://en.wikipedia.org/wiki/World_Trigger",
            "flags": 0,
            "hasliked": 0,
            "id": "ssSSDd",
            "likes": 16,
            "name": "Youtarou",
            "published": 3,
            "tags": [
                "reproduction"
            ],
            "usePreview": 0,
            "username": "yasuo",
            "viewed": 356
        },
        "renderpass": [
            {
                "code": "// 2d distance functions from the Iq's site. https://iquilezles.org/articles/distfunctions2d\n#define Rot(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n#define Skew(a,b) mat2(1.0,tan(a),tan(b),1.0)\n#define SkewX(a) mat2(1.0,tan(a),0.0,1.0)\n#define SkewY(a) mat2(1.0,0.0,tan(a),1.0)\n#define BendX(uv,k) mat2(cos(k*uv.x),-sin(k*uv.x),sin(k*uv.x),cos(k*uv.x))*uv.xy\n#define BendY(uv,k) mat2(cos(k*uv.y),-sin(k*uv.y),sin(k*uv.y),cos(k*uv.y))*uv.xy\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n#define S(d,b) smoothstep(antialiasing(1.0),b,d)\n\nfloat sdBox( in vec2 p, in vec2 b )\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdRoundedBox( in vec2 p, in vec2 b, in vec4 r )\n{\n    r.xy = (p.x>0.0)?r.xy : r.zw;\n    r.x  = (p.y>0.0)?r.x  : r.y;\n    vec2 q = abs(p)-b+r.x;\n    return min(max(q.x,q.y),0.0) + length(max(q,0.0)) - r.x;\n}\n\nfloat sdTriangle( in vec2 p, in vec2 p0, in vec2 p1, in vec2 p2 )\n{\n    vec2 e0 = p1-p0, e1 = p2-p1, e2 = p0-p2;\n    vec2 v0 = p -p0, v1 = p -p1, v2 = p -p2;\n    vec2 pq0 = v0 - e0*clamp( dot(v0,e0)/dot(e0,e0), 0.0, 1.0 );\n    vec2 pq1 = v1 - e1*clamp( dot(v1,e1)/dot(e1,e1), 0.0, 1.0 );\n    vec2 pq2 = v2 - e2*clamp( dot(v2,e2)/dot(e2,e2), 0.0, 1.0 );\n    float s = sign( e0.x*e2.y - e0.y*e2.x );\n    vec2 d = min(min(vec2(dot(pq0,pq0), s*(v0.x*e0.y-v0.y*e0.x)),\n                     vec2(dot(pq1,pq1), s*(v1.x*e1.y-v1.y*e1.x))),\n                     vec2(dot(pq2,pq2), s*(v2.x*e2.y-v2.y*e2.x)));\n    return -sqrt(d.x)*sign(d.y);\n}\n\nvec3 youtaroEyebrow(vec2 uv, vec3 col, float addLineThick, float rot) {\n    uv.x = abs(uv.x);\n    uv.x-=0.25;\n    uv*=Rot(radians(-5.0+rot));\n    float d = sdBox(uv,vec2(0.12,0.001+addLineThick));\n    col = mix(col,vec3(0.0),S(d,0.0));\n    return col;\n}\n\nvec3 yotarouEyeAsset1(vec2 uv, vec3 col) {\n    float d = length(uv)-.1;\n    col = mix(col,vec3(0.0),S(d,0.0));\n    uv*=2.0;\n    uv.y*=2.0;\n    d = length(uv)-.1;\n    col = mix(col,vec3(1.0),S(d,0.0));\n    return col;\n}\n\nvec3 yotarouEyeAsset2(vec2 uv, vec3 col, float addLineThick) {\n    uv.x-=0.25;\n    uv.y*=2.0;\n    float d = abs(length(uv)-.13)-(0.002+addLineThick);\n    d = max(-uv.y+0.12,d);\n    col = mix(col,vec3(0.0),S(d,0.0));\n    return col;\n}\n\nvec3 youtaroEye(vec2 uv, vec3 col, float addLineThick) {\n    vec2 prevUV = uv;\n    uv.x = abs(uv.x);\n    uv.x-=0.25;\n    uv.y*=2.0;\n    \n    col = yotarouEyeAsset1(uv,col);\n    \n    uv = prevUV;\n    uv.x = abs(uv.x);\n    col = yotarouEyeAsset2(uv,col,addLineThick);\n    \n    return col;\n}\n\nvec3 youtaroEye2(vec2 uv, vec3 col, float addLineThick) {\n    \n    vec2 prevUV = uv;\n    uv.x = abs(uv.x);\n    uv*=Rot(radians(-20.0));\n    uv.x-=0.25;\n    uv.y*=2.0;\n    uv.y+=0.18;\n    \n    col = yotarouEyeAsset1(uv,col);\n    \n    uv = prevUV;\n    uv.x = abs(uv.x);\n    uv*=Rot(radians(-20.0));\n    uv.y+=0.08;\n    col = yotarouEyeAsset2(uv,col,addLineThick);\n    \n    return col;\n}\n\nvec3 youtaroEye3(vec2 uv, vec3 col, float addLineThick) {\n    \n    vec2 prevUV = uv;\n    uv = abs(uv);\n\n    uv.x-=0.25;\n    uv.y-=0.02;\n    \n    float d = sdBox(uv,vec2(0.07,0.002+addLineThick));\n    col = mix(col,vec3(0.0),S(d,0.0));\n    \n    uv = prevUV;\n    uv.x = abs(uv.x);\n    col = yotarouEyeAsset2(uv,col,addLineThick);\n    \n    return col;\n}\n\nvec3 youtaroMouth(vec2 uv, vec3 col, float addLineThick) {\n    uv*=2.5;\n    uv.y=abs(uv.y);\n    uv*=Rot(radians(15.0));\n    uv.y-=.05;\n    uv.y*=2.0;\n    float d = abs(length(uv)-.1)-(0.01+addLineThick);\n    d = max(d,uv.x);\n    col = mix(col,vec3(0.0),S(d,0.0));\n    return col;\n}\n\nvec3 youtarouHelmetRightEarPad(vec2 uv, vec3 col, float addLineThick) {\n    vec2 prevUV = uv;\n    uv*=SkewY(radians(-15.0));\n    uv.x+=0.395;\n    uv.y-=0.11;\n    uv*=Rot(radians(15.0));\n\n    float d = sdTriangle(uv-vec2(-0.02,-0.005),vec2(0.04,0.0),vec2(-0.04,0.0),vec2(0.0,-0.3))-0.05;\n    col = mix(col,vec3(1.0),S(d,0.0));\n    d = abs(sdTriangle(uv-vec2(-0.02,-0.005),vec2(0.04,0.0),vec2(-0.04,0.0),vec2(0.0,-0.3))-0.05)-(0.002+addLineThick);\n    col = mix(col,vec3(0.0),S(d,0.0));\n\n    d = sdTriangle(uv,vec2(0.04,0.0),vec2(-0.04,0.0),vec2(0.0,-0.3))-0.05;\n    col = mix(col,vec3(1.0),S(d,0.0));\n    d = abs(sdTriangle(uv,vec2(0.04,0.0),vec2(-0.04,0.0),vec2(0.0,-0.3))-0.05)-(0.002+addLineThick);\n    col = mix(col,vec3(0.0),S(d,0.0));    \n\n    uv*=2.5;\n    uv.x-=0.05;\n    uv.y+=0.2;\n    d = sdTriangle(uv,vec2(0.04,0.0),vec2(-0.04,0.0),vec2(0.0,-0.3))-0.05;\n    col = mix(col,vec3(0.5,0.3,0.0),S(d,0.0));\n    \n    uv = prevUV;\n    uv.x+=0.5;\n    uv.y+=0.41;\n    \n    vec2 q = BendY(uv,-3.0);\n    \n    d = sdBox(q,vec2(0.005,0.05))-0.02;\n    col = mix(col,vec3(0.3,0.1,0.0),S(d,0.0));\n    \n    return col;\n}\n\nvec3 youtarouHelmet(vec2 uv, vec3 col, float addLineThick) {\n    vec2 prevUV = uv;\n    uv.x*=0.4;\n    uv.y*=1.1;\n    float mask = length(uv-vec2(0.0,-0.45))-.5;\n    uv = prevUV;\n    uv.y-=7.54;\n    \n    float mask2 = prevUV.x+0.5;\n    float mask3 = -prevUV.x+0.5;\n    float d = length(uv-vec2(0.0,0.45))-8.0;\n    d = max(-mask3,max(-mask2,d));\n    col = mix(col,vec3(1.0),S(d,0.0));\n    d = abs(length(uv-vec2(0.0,0.45))-8.0)-(0.002+addLineThick);\n    d = max(-mask3,max(-mask2,d));\n    col = mix(col,vec3(0.0),S(d,0.0));\n    \n    uv = prevUV;\n    uv.y*=1.1;\n    d = sdRoundedBox(uv,vec2(0.5,0.54),vec4(0.5,0.5,0.5,0.5));\n    d = max(-mask,d);\n    col = mix(col,vec3(1.0),S(d,0.0));\n    d = abs(sdRoundedBox(uv,vec2(0.5,0.54),vec4(0.5,0.5,0.5,0.5)))-(0.002+addLineThick);\n    d = max(-mask,d);\n    col = mix(col,vec3(0.0),S(d,0.0));    \n    \n    uv = prevUV;\n    uv.y -=0.24;\n    d = sdBox(uv,vec2(0.001+addLineThick,0.24));\n    col = mix(col,vec3(0.0),S(d,0.0));\n    \n    uv = prevUV;\n    uv.x-=0.5;\n    uv.y+=0.41;\n    \n    vec2 q = BendY(uv,3.0);\n    d = sdBox(q,vec2(0.005+addLineThick,0.05))-0.02;\n    col = mix(col,vec3(0.3,0.1,0.0),S(d,0.0));      \n    \n    uv = prevUV;\n    uv*=SkewY(radians(15.0));\n    uv.x-=0.43;\n    uv.y-=0.11;\n    uv*=Rot(radians(-15.0));\n    d = sdTriangle(uv-vec2(-0.02,-0.01),vec2(0.04,0.0),vec2(-0.04,0.0),vec2(0.0,-0.3))-0.05;\n    col = mix(col,vec3(1.0),S(d,0.0));\n    d = abs(sdTriangle(uv-vec2(-0.02,-0.01),vec2(0.04,0.0),vec2(-0.04,0.0),vec2(0.0,-0.3))-0.05)-(0.002+addLineThick);\n    col = mix(col,vec3(0.0),S(d,0.0));\n\n    d = sdTriangle(uv,vec2(0.04,0.0),vec2(-0.04,0.0),vec2(0.0,-0.3))-0.05;\n    col = mix(col,vec3(1.0),S(d,0.0));\n    d = abs(sdTriangle(uv,vec2(0.04,0.0),vec2(-0.04,0.0),vec2(0.0,-0.3))-0.05)-(0.002+addLineThick);\n    col = mix(col,vec3(0.0),S(d,0.0));    \n\n    uv*=2.5;\n    uv.x-=0.05;\n    uv.y+=0.2;\n    d = sdTriangle(uv,vec2(0.04,0.0),vec2(-0.04,0.0),vec2(0.0,-0.3))-0.05;\n    col = mix(col,vec3(0.5,0.3,0.0),S(d,0.0));  \n    \n    uv = prevUV;\n    uv.y-=0.18;\n    uv.y*=0.99;\n\n    q = BendX(uv,-0.7);    \n    d = sdBox(q-vec2(0.0,-0.01),vec2(0.3,0.005))-0.14;\n    col = mix(col,vec3(1.0),S(d,0.0));    \n    d = abs(sdBox(q-vec2(0.0,-0.01),vec2(0.3,0.005))-0.14)-(0.002+addLineThick);\n    col = mix(col,vec3(0.0),S(d,0.0));\n    \n    d = sdBox(q-vec2(-0.01,0.01),vec2(0.3,0.005))-0.14;\n    col = mix(col,vec3(1.0),S(d,0.0));  \n    d = abs(sdBox(q-vec2(-0.01,0.01),vec2(0.3,0.005))-0.14)-(0.002+addLineThick);\n    col = mix(col,vec3(0.0),S(d,0.0));  \n    \n    uv = prevUV;\n    uv.x-=0.21;\n    uv.y-=0.145;\n    uv.y*=1.1;\n    uv*=Rot(radians(20.0));\n    d = sdRoundedBox(uv,vec2(0.15,0.12),vec4(0.12,0.12,0.12,0.12));\n    uv*=Rot(radians(20.0));\n    d = max(-uv.x,d);\n    \n    col = mix(col,vec3(0.9),S(d,0.0));\n    \n    uv = prevUV;\n    uv.x+=0.21;\n    uv.y-=0.145;\n    uv.y*=1.1;\n    uv*=Rot(radians(-20.0));\n    d = sdRoundedBox(uv,vec2(0.15,0.12),vec4(0.12,0.12,0.12,0.12));\n    \n    uv*=Rot(radians(30.0));\n    d = max(-uv.x,d);\n    \n    col = mix(col,vec3(0.9),S(d,0.0));    \n    \n    uv = prevUV;\n    uv.x = abs(uv.x);\n    uv.x-=0.21;\n    uv.y-=0.145;\n    uv.y*=1.1;\n    uv*=Rot(radians(20.0));\n    d = abs(sdRoundedBox(uv,vec2(0.19,0.14),vec4(0.14,0.14,0.14,0.14)))-(0.002+addLineThick);\n    d = max(-(length(uv)-0.185),d);\n    col = mix(col,vec3(0.0),S(d,0.0));\n    \n    uv = prevUV;\n    uv.x-=0.21;\n    uv.y-=0.145;\n    uv.y*=1.1;\n    uv*=Rot(radians(20.0));\n    d = abs(sdRoundedBox(uv,vec2(0.15,0.12),vec4(0.12,0.12,0.12,0.12)))-(0.002+addLineThick);\n        \n    uv = prevUV;\n    uv.x+=0.21;\n    uv.y-=0.145;\n    uv.y*=1.1;\n    uv*=Rot(radians(-20.0));\n    float d2 = abs(sdRoundedBox(uv,vec2(0.15,0.12),vec4(0.12,0.12,0.12,0.12)))-(0.002+addLineThick);\n    \n    d = min(d,d2);\n    \n    col = mix(col,vec3(0.0),S(d,0.0));\n    \n    \n    return col;\n}\n\nvec3 youtarouHair(vec2 uv, vec3 col) {\n    vec2 prevUV = uv;\n    uv.x+=0.425;\n    uv.y-=0.05;\n    uv*=Rot(radians(40.0));\n    float d = sdTriangle(uv,vec2(0.05,0.0),vec2(-0.05,0.0),vec2(0.0,-0.22));\n    col = mix(col,vec3(0.0),S(d,0.0));\n    \n    uv = prevUV;\n    uv.x+=0.38;\n    uv.y-=0.05;\n    uv*=Rot(radians(30.0));\n    d = sdTriangle(uv,vec2(0.05,0.0),vec2(-0.05,0.0),vec2(0.0,-0.25));\n    col = mix(col,vec3(0.0),S(d,0.0));\n    \n    uv = prevUV;\n    uv.x+=0.35;\n    uv.y-=0.05;\n    uv*=Rot(radians(20.0));\n    d = sdTriangle(uv,vec2(0.05,0.0),vec2(-0.05,0.0),vec2(0.0,-0.25));\n    col = mix(col,vec3(0.0),S(d,0.0));    \n    \n    uv = prevUV;\n    uv.x+=0.3;\n    uv.y-=0.1;\n    uv*=Rot(radians(10.0));\n    d = sdTriangle(uv,vec2(0.05,0.0),vec2(-0.05,0.0),vec2(0.0,-0.25));\n    col = mix(col,vec3(0.0),S(d,0.0));  \n    \n    uv = prevUV;\n    uv.x+=0.15;\n    uv.y-=0.07;\n    uv*=Rot(radians(40.0));\n    d = sdTriangle(uv,vec2(0.05,0.0),vec2(-0.05,0.0),vec2(0.0,-0.25));\n    col = mix(col,vec3(0.0),S(d,0.0));      \n    \n    uv = prevUV;\n    uv.y-=0.07;\n    uv*=Rot(radians(20.0));\n    d = sdTriangle(uv,vec2(0.04,0.0),vec2(-0.04,0.0),vec2(0.0,-0.15));\n    col = mix(col,vec3(0.0),S(d,0.0));     \n        \n    uv = prevUV;\n    uv.x-=0.42;\n    uv.y-=0.1;\n    uv*=Rot(radians(9.0));\n    d = sdTriangle(uv,vec2(0.05,0.0),vec2(-0.05,0.0),vec2(0.0,-0.35));\n    col = mix(col,vec3(0.0),S(d,0.0)); \n        \n    uv = prevUV;\n    uv.x-=0.38;\n    uv.y-=0.1;\n    uv*=Rot(radians(10.0));\n    d = sdTriangle(uv,vec2(0.05,0.0),vec2(-0.05,0.0),vec2(0.0,-0.25));\n    col = mix(col,vec3(0.0),S(d,0.0)); \n        \n    uv = prevUV;\n    uv.x-=0.35;\n    uv.y-=0.1;\n    uv*=Rot(radians(15.0));\n    d = sdTriangle(uv,vec2(0.05,0.0),vec2(-0.05,0.0),vec2(0.0,-0.2));\n    col = mix(col,vec3(0.0),S(d,0.0));     \n    \n    return col;\n}\n\nvec3 youtarouChin(vec2 uv, vec3 col, float addLineThick) {\n    vec2 prevUV = uv;\n    \n    uv.y*=1.1;\n    uv.y-=0.05;\n    \n    vec2  q = BendX(uv,0.2);\n    float d = sdRoundedBox(q,vec2(0.37,0.54),vec4(0.4,0.2,0.4,0.2));\n    d = max(uv.y,d);\n    col = mix(col,vec3(0.9,0.8,0.6),S(d,0.0));\n    d = abs(sdRoundedBox(q,vec2(0.37,0.54),vec4(0.4,0.2,0.4,0.2)))-(0.001+addLineThick);\n    d = max(uv.y,d);\n    col = mix(col,vec3(0.0),S(d,0.0));\n    return col;\n}\n\nvec3 youtarouEars(vec2 uv, vec3 col, float addLineThick) {\n    uv.x+=0.4;\n    uv.y+=0.16;\n    uv*=SkewY(radians(20.0));\n    uv*=Rot(radians(-10.0));\n    float d = sdRoundedBox(uv,vec2(0.05,0.07),vec4(0.05,0.05,0.05,0.05));\n    col = mix(col,vec3(0.9,0.8,0.6),S(d,0.0));\n    \n    d = abs(sdRoundedBox(uv,vec2(0.05,0.07),vec4(0.05,0.05,0.05,0.05)))-(0.002+addLineThick);\n    col = mix(col,vec3(0.0),S(d,0.0));\n\n    uv*=1.6;\n    d = abs(sdRoundedBox(uv-vec2(0.02,0.01),vec2(0.05,0.07),vec4(0.05,0.05,0.05,0.05)))-(0.002+addLineThick);\n    col = mix(col,vec3(0.0),S(d,0.0));\n    return col;\n}\n\nvec3 youtarou(vec2 uv, vec3 col, int type) {\n    float thickness = 0.004;\n    col = youtarouHelmetRightEarPad(uv,col,thickness);\n    col = youtarouEars(uv,col,thickness);\n    col = youtarouChin(uv,col,thickness);\n    col = youtaroEyebrow(uv-vec2(0.0,-0.05),col,thickness,(type == 1)?-20.0:0.0);\n    col = youtarouHair(uv,col);\n    col = youtarouHelmet(uv,col,thickness);\n    \n    if(type == 0){\n        col = youtaroEye(uv-vec2(0.0,-0.2),col,thickness);\n    } else if(type == 1){\n        col = youtaroEye2(uv-vec2(0.0,-0.2),col,thickness);\n    } else {\n        col = youtaroEye3(uv-vec2(0.0,-0.2),col,thickness);\n    }\n    col = youtaroMouth(uv-vec2(0.0,-0.38),col,thickness);\n    \n    return col;\n}\n\nvec3 bg(vec2 p, vec3 col) {\n    vec2 uv = fract(p)-0.5;\n    vec2 id = floor(p);\n    \n    vec2 randP = fract(sin(id*123.456)*567.89);\n    randP += dot(randP,randP*34.56);\n    float rand = fract(randP.x*randP.y);\n    \n    int type = 2;\n    if(rand<=0.3){\n        type = int(mod(iTime*0.5,3.0));\n    } else if(rand>0.4 && rand<=0.6) {\n        type = 1;\n    } else if(rand>0.7 && rand<0.8) {\n        uv*=Rot(radians(sin(iTime*2.0)*7.0));\n        type = 0;\n    }\n    \n    uv*=1.3;\n    col = youtarou(uv,col,type);\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n    uv*=2.5;\n    uv.y+=iTime*0.2;\n    vec3 col = vec3(1.0);\n    col = bg(uv,col);\n    \n    fragColor = vec4(col,1.0);\n}",
                "description": "",
                "inputs": [],
                "name": "Image",
                "outputs": [
                    {
                        "channel": 0,
                        "id": 37
                    }
                ],
                "type": "image"
            }
        ],
        "ver": "0.1"
    }
}